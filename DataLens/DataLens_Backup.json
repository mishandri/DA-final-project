{
    "export": {
        "version": "v1",
        "entries": {
            "widget": {
                "1": {
                    "widget": {
                        "data": {
                            "shared": {
                                "sort": [
                                    {
                                        "guid": "a11417e0-ad21-11f0-8549-e99cd986aaf9",
                                        "type": "DIMENSION",
                                        "title": "RFM",
                                        "source": "",
                                        "data_type": "markup",
                                        "datasetId": "0",
                                        "direction": "DESC"
                                    }
                                ],
                                "type": "datalens",
                                "links": [],
                                "colors": [],
                                "labels": [],
                                "shapes": [],
                                "filters": [],
                                "updates": [
                                    {
                                        "field": {
                                            "cast": "markup",
                                            "guid": "52b5fd70-ad21-11f0-8549-e99cd986aaf9",
                                            "type": "DIMENSION",
                                            "local": true,
                                            "title": "R",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "IF [r] = 3 THEN COLOR(STR([r]), '#0FA08D')\r\nELSEIF [r] = 2 THEN COLOR(STR([r]), '#FFB46C')\r\nELSE COLOR(STR([r]), '#BE2443') END",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "markup",
                                            "datasetId": "0",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "IF [r_kplf] = 3 THEN COLOR(STR([r_kplf]), '#0FA08D')\r\nELSEIF [r_kplf] = 2 THEN COLOR(STR([r_kplf]), '#FFB46C')\r\nELSE COLOR(STR([r_kplf]), '#BE2443') END",
                                            "autoaggregated": false,
                                            "lock_aggregation": false,
                                            "initial_data_type": "markup",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": false
                                        },
                                        "action": "add_field"
                                    },
                                    {
                                        "field": {
                                            "cast": "markup",
                                            "guid": "88b20720-ad21-11f0-8549-e99cd986aaf9",
                                            "type": "DIMENSION",
                                            "local": true,
                                            "title": "F",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "IF [f] = 3 THEN COLOR(STR([f]), '#0FA08D')\r\nELSEIF [f] = 2 THEN COLOR(STR([f]), '#FFB46C')\r\nELSE COLOR(STR([f]), '#BE2443') END",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "markup",
                                            "datasetId": "0",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "IF [f_ut86] = 3 THEN COLOR(STR([f_ut86]), '#0FA08D')\r\nELSEIF [f_ut86] = 2 THEN COLOR(STR([f_ut86]), '#FFB46C')\r\nELSE COLOR(STR([f_ut86]), '#BE2443') END",
                                            "autoaggregated": false,
                                            "lock_aggregation": false,
                                            "initial_data_type": "markup",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": false
                                        },
                                        "action": "add_field"
                                    },
                                    {
                                        "field": {
                                            "cast": "markup",
                                            "guid": "923ca7a0-ad21-11f0-8549-e99cd986aaf9",
                                            "type": "DIMENSION",
                                            "local": true,
                                            "title": "M",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "IF [m] = 3 THEN COLOR(STR([m]), '#0FA08D')\r\nELSEIF [m] = 2 THEN COLOR(STR([m]), '#FFB46C')\r\nELSE COLOR(STR([m]), '#BE2443') END",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "markup",
                                            "datasetId": "0",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "IF [m_eqpa] = 3 THEN COLOR(STR([m_eqpa]), '#0FA08D')\r\nELSEIF [m_eqpa] = 2 THEN COLOR(STR([m_eqpa]), '#FFB46C')\r\nELSE COLOR(STR([m_eqpa]), '#BE2443') END",
                                            "autoaggregated": false,
                                            "lock_aggregation": false,
                                            "initial_data_type": "markup",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": false
                                        },
                                        "action": "add_field"
                                    },
                                    {
                                        "field": {
                                            "cast": "markup",
                                            "guid": "a11417e0-ad21-11f0-8549-e99cd986aaf9",
                                            "type": "DIMENSION",
                                            "local": true,
                                            "title": "RFM",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "[R]+[F]+[M]",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "markup",
                                            "datasetId": "0",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "[52b5fd70-ad21-11f0-8549-e99cd986aaf9]+[88b20720-ad21-11f0-8549-e99cd986aaf9]+[923ca7a0-ad21-11f0-8549-e99cd986aaf9]",
                                            "autoaggregated": false,
                                            "lock_aggregation": false,
                                            "initial_data_type": "markup",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": false
                                        },
                                        "action": "add_field"
                                    }
                                ],
                                "version": "14",
                                "segments": [],
                                "tooltips": [],
                                "datasetsIds": [
                                    "0"
                                ],
                                "hierarchies": [],
                                "colorsConfig": {},
                                "shapesConfig": {},
                                "extraSettings": {
                                    "feed": "",
                                    "limit": 100,
                                    "title": "RMF-анализ — Таблица",
                                    "totals": "off",
                                    "stacking": "on",
                                    "zoomMode": "auto",
                                    "titleMode": "hide",
                                    "legendMode": "show",
                                    "pagination": "on",
                                    "tooltipSum": "on",
                                    "mapCenterMode": "auto",
                                    "pivotFallback": "off",
                                    "pivotInlineSort": "on",
                                    "navigatorSettings": {
                                        "selectedLines": [],
                                        "isNavigatorAvailable": false
                                    },
                                    "indicatorTitleMode": "by-field"
                                },
                                "visualization": {
                                    "id": "flatTable",
                                    "name": "label_visualization-flat-table",
                                    "type": "table",
                                    "allowSort": true,
                                    "iconProps": {
                                        "id": "visFlatTable",
                                        "width": "24"
                                    },
                                    "allowColors": true,
                                    "allowFilters": true,
                                    "placeholders": [
                                        {
                                            "id": "flat-table-columns",
                                            "type": "flat-table-columns",
                                            "items": [
                                                {
                                                    "id": "dimension-6",
                                                    "cast": "integer",
                                                    "guid": "client_id_dop9",
                                                    "type": "DIMENSION",
                                                    "title": "client_id",
                                                    "valid": true,
                                                    "hidden": false,
                                                    "source": "client_id",
                                                    "formula": "",
                                                    "virtual": false,
                                                    "avatar_id": "bdfdbe80-ad1f-11f0-aedb-d78c4dfe0f7b",
                                                    "calc_mode": "direct",
                                                    "data_type": "integer",
                                                    "datasetId": "0",
                                                    "fakeTitle": "Клиент",
                                                    "formatting": {
                                                        "format": "number",
                                                        "prefix": "",
                                                        "postfix": "",
                                                        "labelMode": "absolute",
                                                        "precision": 0,
                                                        "showRankDelimiter": true
                                                    },
                                                    "managed_by": "user",
                                                    "aggregation": "none",
                                                    "datasetName": "RMF-анализ",
                                                    "description": "",
                                                    "ui_settings": "",
                                                    "guid_formula": "",
                                                    "default_value": null,
                                                    "hideLabelMode": "show",
                                                    "autoaggregated": false,
                                                    "lock_aggregation": false,
                                                    "value_constraint": null,
                                                    "initial_data_type": "integer",
                                                    "aggregation_locked": false,
                                                    "backgroundSettings": {
                                                        "enabled": false,
                                                        "settings": {
                                                            "isContinuous": false,
                                                            "paletteState": {
                                                                "palette": "",
                                                                "mountedColors": {}
                                                            },
                                                            "gradientState": {}
                                                        },
                                                        "settingsId": "b1686420-ad21-11f0-8549-e99cd986aaf9",
                                                        "colorFieldGuid": "client_id_dop9"
                                                    },
                                                    "has_auto_aggregation": false
                                                },
                                                {
                                                    "id": "dimension-7",
                                                    "cast": "date",
                                                    "guid": "first_order_date_ghyl",
                                                    "type": "DIMENSION",
                                                    "title": "first_order_date",
                                                    "valid": true,
                                                    "format": "DD.MM.YYYY",
                                                    "hidden": false,
                                                    "source": "first_order_date",
                                                    "formula": "",
                                                    "virtual": false,
                                                    "grouping": "none",
                                                    "avatar_id": "bdfdbe80-ad1f-11f0-aedb-d78c4dfe0f7b",
                                                    "calc_mode": "direct",
                                                    "data_type": "date",
                                                    "datasetId": "0",
                                                    "fakeTitle": "Дата первого заказа в периоде",
                                                    "formatting": {
                                                        "format": "number",
                                                        "prefix": "",
                                                        "postfix": "",
                                                        "labelMode": "absolute",
                                                        "precision": 0,
                                                        "showRankDelimiter": true
                                                    },
                                                    "managed_by": "user",
                                                    "aggregation": "none",
                                                    "datasetName": "RMF-анализ",
                                                    "description": "",
                                                    "ui_settings": "",
                                                    "guid_formula": "",
                                                    "default_value": null,
                                                    "hideLabelMode": "show",
                                                    "autoaggregated": false,
                                                    "lock_aggregation": false,
                                                    "value_constraint": null,
                                                    "initial_data_type": "date",
                                                    "aggregation_locked": false,
                                                    "backgroundSettings": {
                                                        "enabled": false,
                                                        "settings": {
                                                            "isContinuous": false,
                                                            "paletteState": {
                                                                "palette": "",
                                                                "mountedColors": {}
                                                            },
                                                            "gradientState": {}
                                                        },
                                                        "settingsId": "b5457740-ad21-11f0-8549-e99cd986aaf9",
                                                        "colorFieldGuid": "first_order_date_ghyl"
                                                    },
                                                    "has_auto_aggregation": false
                                                },
                                                {
                                                    "id": "dimension-3",
                                                    "cast": "markup",
                                                    "guid": "52b5fd70-ad21-11f0-8549-e99cd986aaf9",
                                                    "type": "DIMENSION",
                                                    "local": true,
                                                    "title": "R",
                                                    "valid": true,
                                                    "hidden": false,
                                                    "source": "",
                                                    "formula": "IF [r] = 3 THEN COLOR(STR([r]), '#0FA08D')\r\nELSEIF [r] = 2 THEN COLOR(STR([r]), '#FFB46C')\r\nELSE COLOR(STR([r]), '#BE2443') END",
                                                    "virtual": false,
                                                    "avatar_id": null,
                                                    "calc_mode": "formula",
                                                    "data_type": "markup",
                                                    "datasetId": "0",
                                                    "managed_by": "user",
                                                    "aggregation": "none",
                                                    "datasetName": "RMF-анализ",
                                                    "description": "",
                                                    "ui_settings": "",
                                                    "guid_formula": "IF [r_kplf] = 3 THEN COLOR(STR([r_kplf]), '#0FA08D')\r\nELSEIF [r_kplf] = 2 THEN COLOR(STR([r_kplf]), '#FFB46C')\r\nELSE COLOR(STR([r_kplf]), '#BE2443') END",
                                                    "default_value": null,
                                                    "autoaggregated": false,
                                                    "lock_aggregation": false,
                                                    "value_constraint": null,
                                                    "initial_data_type": "markup",
                                                    "aggregation_locked": true,
                                                    "has_auto_aggregation": false
                                                },
                                                {
                                                    "id": "dimension-2",
                                                    "cast": "markup",
                                                    "guid": "88b20720-ad21-11f0-8549-e99cd986aaf9",
                                                    "type": "DIMENSION",
                                                    "local": true,
                                                    "title": "F",
                                                    "valid": true,
                                                    "hidden": false,
                                                    "source": "",
                                                    "formula": "IF [f] = 3 THEN COLOR(STR([f]), '#0FA08D')\r\nELSEIF [f] = 2 THEN COLOR(STR([f]), '#FFB46C')\r\nELSE COLOR(STR([f]), '#BE2443') END",
                                                    "virtual": false,
                                                    "avatar_id": null,
                                                    "calc_mode": "formula",
                                                    "data_type": "markup",
                                                    "datasetId": "0",
                                                    "managed_by": "user",
                                                    "aggregation": "none",
                                                    "datasetName": "RMF-анализ",
                                                    "description": "",
                                                    "ui_settings": "",
                                                    "guid_formula": "IF [f_ut86] = 3 THEN COLOR(STR([f_ut86]), '#0FA08D')\r\nELSEIF [f_ut86] = 2 THEN COLOR(STR([f_ut86]), '#FFB46C')\r\nELSE COLOR(STR([f_ut86]), '#BE2443') END",
                                                    "default_value": null,
                                                    "autoaggregated": false,
                                                    "lock_aggregation": false,
                                                    "value_constraint": null,
                                                    "initial_data_type": "markup",
                                                    "aggregation_locked": true,
                                                    "has_auto_aggregation": false
                                                },
                                                {
                                                    "id": "dimension-1",
                                                    "cast": "markup",
                                                    "guid": "923ca7a0-ad21-11f0-8549-e99cd986aaf9",
                                                    "type": "DIMENSION",
                                                    "local": true,
                                                    "title": "M",
                                                    "valid": true,
                                                    "hidden": false,
                                                    "source": "",
                                                    "formula": "IF [m] = 3 THEN COLOR(STR([m]), '#0FA08D')\r\nELSEIF [m] = 2 THEN COLOR(STR([m]), '#FFB46C')\r\nELSE COLOR(STR([m]), '#BE2443') END",
                                                    "virtual": false,
                                                    "avatar_id": null,
                                                    "calc_mode": "formula",
                                                    "data_type": "markup",
                                                    "datasetId": "0",
                                                    "managed_by": "user",
                                                    "aggregation": "none",
                                                    "datasetName": "RMF-анализ",
                                                    "description": "",
                                                    "ui_settings": "",
                                                    "guid_formula": "IF [m_eqpa] = 3 THEN COLOR(STR([m_eqpa]), '#0FA08D')\r\nELSEIF [m_eqpa] = 2 THEN COLOR(STR([m_eqpa]), '#FFB46C')\r\nELSE COLOR(STR([m_eqpa]), '#BE2443') END",
                                                    "default_value": null,
                                                    "autoaggregated": false,
                                                    "lock_aggregation": false,
                                                    "value_constraint": null,
                                                    "initial_data_type": "markup",
                                                    "aggregation_locked": true,
                                                    "has_auto_aggregation": false
                                                },
                                                {
                                                    "id": "dimension-0",
                                                    "cast": "markup",
                                                    "guid": "a11417e0-ad21-11f0-8549-e99cd986aaf9",
                                                    "type": "DIMENSION",
                                                    "local": true,
                                                    "title": "RFM",
                                                    "valid": true,
                                                    "hidden": false,
                                                    "source": "",
                                                    "formula": "[R]+[F]+[M]",
                                                    "virtual": false,
                                                    "avatar_id": null,
                                                    "calc_mode": "formula",
                                                    "data_type": "markup",
                                                    "datasetId": "0",
                                                    "managed_by": "user",
                                                    "aggregation": "none",
                                                    "datasetName": "RMF-анализ",
                                                    "description": "",
                                                    "ui_settings": "",
                                                    "guid_formula": "[52b5fd70-ad21-11f0-8549-e99cd986aaf9]+[88b20720-ad21-11f0-8549-e99cd986aaf9]+[923ca7a0-ad21-11f0-8549-e99cd986aaf9]",
                                                    "default_value": null,
                                                    "autoaggregated": false,
                                                    "lock_aggregation": false,
                                                    "value_constraint": null,
                                                    "initial_data_type": "markup",
                                                    "aggregation_locked": true,
                                                    "has_auto_aggregation": false
                                                }
                                            ],
                                            "title": "section_columns",
                                            "required": true,
                                            "settings": {
                                                "groupping": "on"
                                            },
                                            "iconProps": {},
                                            "allowedTypes": {}
                                        }
                                    ],
                                    "allowLayerFilters": false
                                },
                                "geopointsConfig": {},
                                "datasetsPartialFields": [
                                    [
                                        {
                                            "guid": "a11417e0-ad21-11f0-8549-e99cd986aaf9",
                                            "title": "RFM",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "923ca7a0-ad21-11f0-8549-e99cd986aaf9",
                                            "title": "M",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "88b20720-ad21-11f0-8549-e99cd986aaf9",
                                            "title": "F",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "52b5fd70-ad21-11f0-8549-e99cd986aaf9",
                                            "title": "R",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "start_date",
                                            "title": "start_date",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "end_date",
                                            "title": "end_date",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "client_id_dop9",
                                            "title": "client_id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "first_order_date_ghyl",
                                            "title": "first_order_date",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "r_kplf",
                                            "title": "r",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "f_ut86",
                                            "title": "f",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "m_eqpa",
                                            "title": "m",
                                            "calc_mode": "direct"
                                        }
                                    ]
                                ]
                            }
                        },
                        "name": "RMF-анализ — Таблица",
                        "type": "table_wizard_node",
                        "annotation": {
                            "description": ""
                        }
                    }
                },
                "3": {
                    "widget": {
                        "data": {
                            "shared": {
                                "sort": [],
                                "type": "datalens",
                                "links": [],
                                "colors": [],
                                "labels": [],
                                "shapes": [],
                                "filters": [],
                                "updates": [
                                    {
                                        "field": {
                                            "cast": "float",
                                            "guid": "6eec1270-ad96-11f0-8ece-f3a4f5232daa",
                                            "type": "DIMENSION",
                                            "local": true,
                                            "title": "LTV",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "[revenue]/[unique_clients_count]",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "float",
                                            "datasetId": "2",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "[revenue_r953]/[unique_clients_count_oldu]",
                                            "autoaggregated": false,
                                            "lock_aggregation": false,
                                            "initial_data_type": "float",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": false
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "float",
                                            "guid": "08f52350-ad99-11f0-a3e8-df3a44a4ffe7",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "title-08f52350-ad99-11f0-a3e8-df3a44a4ffe7",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "[revenue]/[unique_clients_count]",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "float",
                                            "datasetId": "2",
                                            "fakeTitle": "LTV",
                                            "managed_by": "user",
                                            "aggregation": "sum",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "[revenue_r953]/[unique_clients_count_oldu]",
                                            "quickFormula": true,
                                            "originalTitle": "LTV",
                                            "autoaggregated": false,
                                            "lock_aggregation": false,
                                            "initial_data_type": "float",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": false
                                        },
                                        "action": "add_field"
                                    }
                                ],
                                "version": "14",
                                "segments": [],
                                "tooltips": [],
                                "datasetsIds": [
                                    "2"
                                ],
                                "hierarchies": [],
                                "colorsConfig": {},
                                "shapesConfig": {},
                                "extraSettings": {
                                    "feed": "",
                                    "limit": 100,
                                    "title": "Анализ клиентов - Таблица. Когортный анализ",
                                    "totals": "off",
                                    "stacking": "on",
                                    "zoomMode": "auto",
                                    "titleMode": "hide",
                                    "legendMode": "show",
                                    "pagination": "on",
                                    "tooltipSum": "on",
                                    "mapCenterMode": "auto",
                                    "pivotFallback": "off",
                                    "pivotInlineSort": "on",
                                    "navigatorSettings": {
                                        "selectedLines": [],
                                        "isNavigatorAvailable": false
                                    },
                                    "indicatorTitleMode": "by-field"
                                },
                                "visualization": {
                                    "id": "pivotTable",
                                    "name": "label_visualization-pivot-table",
                                    "type": "table",
                                    "allowSort": true,
                                    "iconProps": {
                                        "id": "visPivot",
                                        "width": "24"
                                    },
                                    "allowColors": true,
                                    "allowFilters": true,
                                    "placeholders": [
                                        {
                                            "id": "pivot-table-columns",
                                            "type": "pivot-table-columns",
                                            "items": [
                                                {
                                                    "id": "dimension-3",
                                                    "cast": "string",
                                                    "guid": "ace1f890-ad98-11f0-8270-d151eea7da9a",
                                                    "type": "DIMENSION",
                                                    "title": "month_",
                                                    "valid": true,
                                                    "hidden": false,
                                                    "source": "",
                                                    "formula": "IF MONTH([month]) <= 9\r\nTHEN\r\n    STR(YEAR([month])) + '-0' + STR(MONTH([month]))\r\nELSE\r\n    STR(YEAR([month])) + '-' + STR(MONTH([month]))\r\nEND",
                                                    "virtual": false,
                                                    "avatar_id": null,
                                                    "calc_mode": "formula",
                                                    "data_type": "string",
                                                    "datasetId": "2",
                                                    "fakeTitle": "Месяц",
                                                    "formatting": {
                                                        "format": "number",
                                                        "prefix": "",
                                                        "postfix": "",
                                                        "labelMode": "absolute",
                                                        "precision": 0,
                                                        "showRankDelimiter": true
                                                    },
                                                    "managed_by": "user",
                                                    "aggregation": "none",
                                                    "datasetName": "LTV",
                                                    "description": "",
                                                    "ui_settings": "",
                                                    "guid_formula": "IF MONTH([month_nkj9]) <= 9\r\nTHEN\r\n    STR(YEAR([month_nkj9])) + '-0' + STR(MONTH([month_nkj9]))\r\nELSE\r\n    STR(YEAR([month_nkj9])) + '-' + STR(MONTH([month_nkj9]))\r\nEND",
                                                    "default_value": null,
                                                    "hideLabelMode": "show",
                                                    "autoaggregated": false,
                                                    "lock_aggregation": false,
                                                    "value_constraint": null,
                                                    "initial_data_type": "string",
                                                    "subTotalsSettings": {
                                                        "enabled": false
                                                    },
                                                    "aggregation_locked": true,
                                                    "backgroundSettings": {
                                                        "enabled": false,
                                                        "settings": {
                                                            "isContinuous": false,
                                                            "paletteState": {
                                                                "palette": "",
                                                                "mountedColors": {}
                                                            },
                                                            "gradientState": {}
                                                        },
                                                        "settingsId": "2edbe590-ad99-11f0-a3e8-df3a44a4ffe7",
                                                        "colorFieldGuid": "ace1f890-ad98-11f0-8270-d151eea7da9a"
                                                    },
                                                    "has_auto_aggregation": false
                                                }
                                            ],
                                            "title": "section_columns",
                                            "settings": {
                                                "axisModeMap": {
                                                    "ace1f890-ad98-11f0-8270-d151eea7da9a": "discrete"
                                                }
                                            },
                                            "iconProps": {},
                                            "allowedTypes": {},
                                            "allowedDataTypes": {}
                                        },
                                        {
                                            "id": "rows",
                                            "type": "rows",
                                            "items": [
                                                {
                                                    "id": "dimension-2",
                                                    "cast": "string",
                                                    "guid": "cc3205f0-ad98-11f0-8270-d151eea7da9a",
                                                    "type": "DIMENSION",
                                                    "title": "cohort_",
                                                    "valid": true,
                                                    "hidden": false,
                                                    "source": "",
                                                    "formula": "IF MONTH([cohort]) <= 9\r\nTHEN\r\n    STR(YEAR([cohort])) + '-0' + STR(MONTH([cohort]))\r\nELSE\r\n    STR(YEAR([cohort])) + '-' + STR(MONTH([cohort]))\r\nEND",
                                                    "virtual": false,
                                                    "avatar_id": null,
                                                    "calc_mode": "formula",
                                                    "data_type": "string",
                                                    "datasetId": "2",
                                                    "fakeTitle": "Когорта",
                                                    "formatting": {
                                                        "format": "number",
                                                        "prefix": "",
                                                        "postfix": "",
                                                        "labelMode": "absolute",
                                                        "precision": 0,
                                                        "showRankDelimiter": true
                                                    },
                                                    "managed_by": "user",
                                                    "aggregation": "none",
                                                    "datasetName": "LTV",
                                                    "description": "",
                                                    "ui_settings": "",
                                                    "guid_formula": "IF MONTH([cohort_80i2]) <= 9\r\nTHEN\r\n    STR(YEAR([cohort_80i2])) + '-0' + STR(MONTH([cohort_80i2]))\r\nELSE\r\n    STR(YEAR([cohort_80i2])) + '-' + STR(MONTH([cohort_80i2]))\r\nEND",
                                                    "default_value": null,
                                                    "hideLabelMode": "show",
                                                    "autoaggregated": false,
                                                    "lock_aggregation": false,
                                                    "value_constraint": null,
                                                    "initial_data_type": "string",
                                                    "subTotalsSettings": {
                                                        "enabled": false
                                                    },
                                                    "aggregation_locked": true,
                                                    "backgroundSettings": {
                                                        "enabled": false,
                                                        "settings": {
                                                            "isContinuous": false,
                                                            "paletteState": {
                                                                "palette": "",
                                                                "mountedColors": {}
                                                            },
                                                            "gradientState": {}
                                                        },
                                                        "settingsId": "2a6b9320-ad99-11f0-a3e8-df3a44a4ffe7",
                                                        "colorFieldGuid": "cc3205f0-ad98-11f0-8270-d151eea7da9a"
                                                    },
                                                    "has_auto_aggregation": false
                                                }
                                            ],
                                            "title": "section_rows",
                                            "settings": {
                                                "axisModeMap": {
                                                    "cc3205f0-ad98-11f0-8270-d151eea7da9a": "discrete"
                                                }
                                            },
                                            "iconProps": {},
                                            "allowedDataTypes": {}
                                        },
                                        {
                                            "id": "measures",
                                            "type": "measures",
                                            "items": [
                                                {
                                                    "cast": "float",
                                                    "guid": "08f52350-ad99-11f0-a3e8-df3a44a4ffe7",
                                                    "type": "MEASURE",
                                                    "local": true,
                                                    "title": "title-08f52350-ad99-11f0-a3e8-df3a44a4ffe7",
                                                    "valid": true,
                                                    "hidden": false,
                                                    "source": "",
                                                    "formula": "[revenue]/[unique_clients_count]",
                                                    "virtual": false,
                                                    "calc_mode": "formula",
                                                    "data_type": "float",
                                                    "datasetId": "2",
                                                    "fakeTitle": "LTV",
                                                    "formatting": {
                                                        "format": "number",
                                                        "prefix": "",
                                                        "postfix": "",
                                                        "labelMode": "absolute",
                                                        "precision": 0,
                                                        "showRankDelimiter": true
                                                    },
                                                    "managed_by": "user",
                                                    "aggregation": "sum",
                                                    "description": "",
                                                    "ui_settings": "",
                                                    "barsSettings": {
                                                        "align": "default",
                                                        "scale": {
                                                            "mode": "auto"
                                                        },
                                                        "enabled": false,
                                                        "showLabels": true,
                                                        "colorSettings": {
                                                            "settings": {
                                                                "negativeColorIndex": 1,
                                                                "positiveColorIndex": 2
                                                            },
                                                            "colorType": "two-color"
                                                        },
                                                        "showBarsInTotals": false
                                                    },
                                                    "guid_formula": "[revenue_r953]/[unique_clients_count_oldu]",
                                                    "quickFormula": true,
                                                    "hideLabelMode": "show",
                                                    "originalTitle": "LTV",
                                                    "autoaggregated": false,
                                                    "lock_aggregation": false,
                                                    "initial_data_type": "float",
                                                    "aggregation_locked": true,
                                                    "backgroundSettings": {
                                                        "enabled": true,
                                                        "settings": {
                                                            "isContinuous": true,
                                                            "paletteState": {},
                                                            "gradientState": {
                                                                "reversed": false,
                                                                "gradientMode": "2-point",
                                                                "thresholdsMode": "auto",
                                                                "gradientPalette": "orange-yellow"
                                                            }
                                                        },
                                                        "settingsId": "1ebe39b0-ad99-11f0-a3e8-df3a44a4ffe7",
                                                        "colorFieldGuid": "08f52350-ad99-11f0-a3e8-df3a44a4ffe7"
                                                    },
                                                    "has_auto_aggregation": false
                                                }
                                            ],
                                            "title": "section_measures",
                                            "settings": {
                                                "axisModeMap": {
                                                    "08f52350-ad99-11f0-a3e8-df3a44a4ffe7": "discrete"
                                                }
                                            },
                                            "iconProps": {},
                                            "allowedTypes": {},
                                            "allowedFinalTypes": {}
                                        }
                                    ],
                                    "allowLayerFilters": false
                                },
                                "geopointsConfig": {},
                                "datasetsPartialFields": [
                                    [
                                        {
                                            "guid": "08f52350-ad99-11f0-a3e8-df3a44a4ffe7",
                                            "title": "title-08f52350-ad99-11f0-a3e8-df3a44a4ffe7",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "6eec1270-ad96-11f0-8ece-f3a4f5232daa",
                                            "title": "LTV",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "cc3205f0-ad98-11f0-8270-d151eea7da9a",
                                            "title": "cohort_",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "ace1f890-ad98-11f0-8270-d151eea7da9a",
                                            "title": "month_",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "end_date",
                                            "title": "end_date",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "start_date",
                                            "title": "start_date",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "cohort_80i2",
                                            "title": "cohort",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "month_nkj9",
                                            "title": "month",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "revenue_r953",
                                            "title": "revenue",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "unique_clients_count_oldu",
                                            "title": "unique_clients_count",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "avg_revenue_wt07",
                                            "title": "avg_revenue",
                                            "calc_mode": "direct"
                                        }
                                    ]
                                ]
                            }
                        },
                        "name": "Анализ клиентов - Таблица. LTV",
                        "type": "table_wizard_node",
                        "annotation": {
                            "description": ""
                        }
                    }
                },
                "4": {
                    "widget": {
                        "data": {
                            "shared": {
                                "sort": [
                                    {
                                        "guid": "c290da30-ad2a-11f0-88f2-97ac2fcf2434",
                                        "type": "DIMENSION",
                                        "title": "rfm",
                                        "source": "",
                                        "data_type": "string",
                                        "datasetId": "0",
                                        "direction": "DESC"
                                    }
                                ],
                                "type": "datalens",
                                "links": [],
                                "colors": [],
                                "labels": [],
                                "shapes": [],
                                "filters": [],
                                "updates": [
                                    {
                                        "field": {
                                            "cast": "string",
                                            "guid": "c290da30-ad2a-11f0-88f2-97ac2fcf2434",
                                            "type": "DIMENSION",
                                            "local": true,
                                            "title": "rfm",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "STR([r]*100+[f]*10+[m])",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "string",
                                            "datasetId": "0",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "STR([r_kplf]*100+[f_ut86]*10+[m_eqpa])",
                                            "autoaggregated": false,
                                            "lock_aggregation": false,
                                            "initial_data_type": "string",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": false
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "integer",
                                            "guid": "2c972fb0-ad2b-11f0-88f2-97ac2fcf2434",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "title-2c972fb0-ad2b-11f0-88f2-97ac2fcf2434",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "client_id",
                                            "formula": "",
                                            "virtual": false,
                                            "avatar_id": "bdfdbe80-ad1f-11f0-aedb-d78c4dfe0f7b",
                                            "calc_mode": "direct",
                                            "data_type": "integer",
                                            "datasetId": "0",
                                            "managed_by": "user",
                                            "aggregation": "countunique",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "",
                                            "quickFormula": true,
                                            "autoaggregated": false,
                                            "lock_aggregation": false,
                                            "initial_data_type": "integer",
                                            "aggregation_locked": false,
                                            "has_auto_aggregation": false
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    }
                                ],
                                "version": "14",
                                "segments": [],
                                "tooltips": [],
                                "datasetsIds": [
                                    "0"
                                ],
                                "hierarchies": [],
                                "colorsConfig": {},
                                "shapesConfig": {},
                                "extraSettings": {
                                    "feed": "",
                                    "limit": 100,
                                    "title": "RMF-анализ — Таблица",
                                    "totals": "off",
                                    "stacking": "on",
                                    "zoomMode": "auto",
                                    "titleMode": "hide",
                                    "legendMode": "hide",
                                    "pagination": "on",
                                    "tooltipSum": "on",
                                    "mapCenterMode": "auto",
                                    "pivotFallback": "off",
                                    "labelsPosition": "outside",
                                    "pivotInlineSort": "on",
                                    "navigatorSettings": {
                                        "selectedLines": [],
                                        "isNavigatorAvailable": false
                                    },
                                    "indicatorTitleMode": "by-field"
                                },
                                "visualization": {
                                    "id": "column",
                                    "name": "label_visualization-column",
                                    "type": "column",
                                    "allowSort": true,
                                    "iconProps": {
                                        "id": "visColumn",
                                        "width": "24"
                                    },
                                    "allowColors": true,
                                    "allowLabels": true,
                                    "allowFilters": true,
                                    "placeholders": [
                                        {
                                            "id": "x",
                                            "type": "x",
                                            "items": [
                                                {
                                                    "id": "dimension-1",
                                                    "cast": "string",
                                                    "guid": "c290da30-ad2a-11f0-88f2-97ac2fcf2434",
                                                    "type": "DIMENSION",
                                                    "local": true,
                                                    "title": "rfm",
                                                    "valid": true,
                                                    "hidden": false,
                                                    "source": "",
                                                    "formula": "STR([r]*100+[f]*10+[m])",
                                                    "virtual": false,
                                                    "calc_mode": "formula",
                                                    "data_type": "string",
                                                    "datasetId": "0",
                                                    "fakeTitle": "Группа RFM",
                                                    "formatting": {
                                                        "format": "number",
                                                        "prefix": "",
                                                        "postfix": "",
                                                        "labelMode": "absolute",
                                                        "precision": 0,
                                                        "showRankDelimiter": true
                                                    },
                                                    "managed_by": "user",
                                                    "aggregation": "none",
                                                    "datasetName": "RMF-анализ",
                                                    "description": "",
                                                    "ui_settings": "",
                                                    "guid_formula": "STR([r_kplf]*100+[f_ut86]*10+[m_eqpa])",
                                                    "hideLabelMode": "show",
                                                    "autoaggregated": false,
                                                    "lock_aggregation": false,
                                                    "initial_data_type": "string",
                                                    "aggregation_locked": true,
                                                    "has_auto_aggregation": false
                                                }
                                            ],
                                            "title": "section_x",
                                            "capacity": 2,
                                            "required": false,
                                            "settings": {
                                                "grid": "off",
                                                "type": "linear",
                                                "title": "manual",
                                                "gridStep": "auto",
                                                "holidays": "off",
                                                "hideLabels": "no",
                                                "labelsView": "auto",
                                                "titleValue": "Группа RFM",
                                                "axisModeMap": {
                                                    "c290da30-ad2a-11f0-88f2-97ac2fcf2434": "discrete"
                                                },
                                                "gridStepValue": 50,
                                                "axisFormatMode": "auto",
                                                "axisVisibility": "show",
                                                "axisLabelFormating": {},
                                                "axisLabelDateFormat": "DD.MM.YYYY"
                                            },
                                            "iconProps": {},
                                            "allowedTypes": {},
                                            "allowedDataTypes": {}
                                        },
                                        {
                                            "id": "y",
                                            "type": "y",
                                            "items": [
                                                {
                                                    "id": "measure-0",
                                                    "cast": "integer",
                                                    "guid": "2c972fb0-ad2b-11f0-88f2-97ac2fcf2434",
                                                    "type": "MEASURE",
                                                    "local": true,
                                                    "title": "title-2c972fb0-ad2b-11f0-88f2-97ac2fcf2434",
                                                    "valid": true,
                                                    "hidden": false,
                                                    "source": "client_id",
                                                    "formula": "",
                                                    "virtual": false,
                                                    "avatar_id": "bdfdbe80-ad1f-11f0-aedb-d78c4dfe0f7b",
                                                    "calc_mode": "direct",
                                                    "data_type": "integer",
                                                    "datasetId": "0",
                                                    "fakeTitle": "Количество клиентов",
                                                    "formatting": {
                                                        "format": "number",
                                                        "prefix": "",
                                                        "postfix": "",
                                                        "labelMode": "absolute",
                                                        "precision": 0,
                                                        "showRankDelimiter": true
                                                    },
                                                    "managed_by": "user",
                                                    "aggregation": "countunique",
                                                    "datasetName": "RMF-анализ",
                                                    "description": "",
                                                    "ui_settings": "",
                                                    "guid_formula": "",
                                                    "quickFormula": true,
                                                    "hideLabelMode": "show",
                                                    "originalTitle": "client_id",
                                                    "autoaggregated": false,
                                                    "lock_aggregation": false,
                                                    "initial_data_type": "integer",
                                                    "aggregation_locked": false,
                                                    "has_auto_aggregation": false
                                                }
                                            ],
                                            "title": "section_y",
                                            "settings": {
                                                "grid": "on",
                                                "type": "linear",
                                                "nulls": "ignore",
                                                "scale": "auto",
                                                "title": "manual",
                                                "gridStep": "auto",
                                                "hideLabels": "no",
                                                "labelsView": "auto",
                                                "scaleValue": "min-max",
                                                "titleValue": "Количество клиентов",
                                                "axisModeMap": {
                                                    "2c972fb0-ad2b-11f0-88f2-97ac2fcf2434": "continuous"
                                                },
                                                "gridStepValue": 50,
                                                "axisFormatMode": "auto",
                                                "axisVisibility": "show",
                                                "axisLabelFormating": {},
                                                "axisLabelDateFormat": "DD.MM.YYYY"
                                            },
                                            "iconProps": {},
                                            "allowedTypes": {},
                                            "allowedDataTypes": {},
                                            "allowedFinalTypes": {}
                                        }
                                    ],
                                    "allowSegments": true,
                                    "allowLayerFilters": false,
                                    "availableLabelModes": [
                                        "absolute"
                                    ]
                                },
                                "geopointsConfig": {},
                                "datasetsPartialFields": [
                                    [
                                        {
                                            "guid": "2c972fb0-ad2b-11f0-88f2-97ac2fcf2434",
                                            "title": "title-2c972fb0-ad2b-11f0-88f2-97ac2fcf2434",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "c290da30-ad2a-11f0-88f2-97ac2fcf2434",
                                            "title": "rfm",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "start_date",
                                            "title": "start_date",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "end_date",
                                            "title": "end_date",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "client_id_dop9",
                                            "title": "client_id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "first_order_date_ghyl",
                                            "title": "first_order_date",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "r_kplf",
                                            "title": "r",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "f_ut86",
                                            "title": "f",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "m_eqpa",
                                            "title": "m",
                                            "calc_mode": "direct"
                                        }
                                    ]
                                ]
                            }
                        },
                        "name": "RMF-анализ — Столбчатая",
                        "type": "graph_wizard_node",
                        "annotation": {
                            "description": ""
                        }
                    }
                },
                "7": {
                    "widget": {
                        "data": {
                            "shared": {
                                "sort": [],
                                "type": "datalens",
                                "links": [],
                                "colors": [],
                                "labels": [],
                                "shapes": [],
                                "filters": [],
                                "updates": [
                                    {
                                        "field": {
                                            "cast": "float",
                                            "guid": "0dcb3a50-aa55-11f0-8c7c-59e14d3324ab",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Выручка",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "SUM_IF([total_price], [purchase_datetime] >= [start_date] AND [purchase_datedate] <= [end_date])",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "float",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "SUM_IF([total_price_1u2g], [purchase_datetime_pvoa] >= [start_date] AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= [end_date])",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "float",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field"
                                    }
                                ],
                                "version": "14",
                                "segments": [],
                                "tooltips": [],
                                "datasetsIds": [
                                    "6"
                                ],
                                "hierarchies": [],
                                "colorsConfig": {},
                                "shapesConfig": {},
                                "extraSettings": {
                                    "feed": "",
                                    "title": "Общие продажи и тренды - KPI. Общая выручка",
                                    "stacking": "on",
                                    "zoomMode": "auto",
                                    "titleMode": "hide",
                                    "legendMode": "show",
                                    "tooltipSum": "on",
                                    "mapCenterMode": "auto",
                                    "metricFontSize": "m",
                                    "metricFontColor": "#0FA08D",
                                    "pivotInlineSort": "on",
                                    "navigatorSettings": {
                                        "selectedLines": [],
                                        "isNavigatorAvailable": false
                                    },
                                    "indicatorTitleMode": "hide",
                                    "metricFontColorIndex": 12
                                },
                                "visualization": {
                                    "id": "metric",
                                    "name": "label_visualization-metric",
                                    "type": "metric",
                                    "allowSort": false,
                                    "iconProps": {
                                        "id": "visMetric",
                                        "width": "24"
                                    },
                                    "allowLabels": false,
                                    "allowFilters": true,
                                    "placeholders": [
                                        {
                                            "id": "measures",
                                            "type": "measures",
                                            "items": [
                                                {
                                                    "id": "measure-0",
                                                    "cast": "float",
                                                    "guid": "0dcb3a50-aa55-11f0-8c7c-59e14d3324ab",
                                                    "type": "MEASURE",
                                                    "local": true,
                                                    "title": "Выручка",
                                                    "valid": true,
                                                    "hidden": false,
                                                    "source": "",
                                                    "formula": "SUM_IF([total_price], [purchase_datetime] >= [start_date] AND [purchase_datedate] <= [end_date])",
                                                    "virtual": false,
                                                    "grouping": "",
                                                    "avatar_id": null,
                                                    "calc_mode": "formula",
                                                    "data_type": "float",
                                                    "datasetId": "6",
                                                    "formatting": {
                                                        "unit": "m",
                                                        "format": "number",
                                                        "prefix": "",
                                                        "postfix": "",
                                                        "labelMode": "absolute",
                                                        "precision": 0,
                                                        "showRankDelimiter": true
                                                    },
                                                    "managed_by": "user",
                                                    "aggregation": "none",
                                                    "datasetName": "Данные о продажах",
                                                    "description": "",
                                                    "ui_settings": "",
                                                    "guid_formula": "SUM_IF([total_price_1u2g], [purchase_datetime_pvoa] >= [start_date] AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= [end_date])",
                                                    "default_value": null,
                                                    "hideLabelMode": "show",
                                                    "originalTitle": "total_price",
                                                    "autoaggregated": true,
                                                    "lock_aggregation": false,
                                                    "value_constraint": null,
                                                    "initial_data_type": "float",
                                                    "aggregation_locked": true,
                                                    "has_auto_aggregation": true
                                                }
                                            ],
                                            "title": "section_measure",
                                            "capacity": 1,
                                            "required": true,
                                            "settings": {},
                                            "iconProps": {},
                                            "allowedTypes": {},
                                            "allowedDataTypes": {},
                                            "allowedFinalTypes": {}
                                        }
                                    ],
                                    "allowLayerFilters": false
                                },
                                "geopointsConfig": {},
                                "datasetsPartialFields": [
                                    [
                                        {
                                            "guid": "0dcb3a50-aa55-11f0-8c7c-59e14d3324ab",
                                            "title": "Выручка",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "679d1c10-aa5f-11f0-8395-f32b2462dd84",
                                            "title": "scale_eng",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "e3a1cfe0-aa55-11f0-8395-f32b2462dd84",
                                            "title": "Фильтр даты",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "end_date",
                                            "title": "end_date",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "start_date",
                                            "title": "start_date",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "f828f540-a935-11f0-976d-099c0b05b9ec",
                                            "title": "%_discount",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "584ad600-a92c-11f0-976d-099c0b05b9ec",
                                            "title": "scale_value",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "scale",
                                            "title": "scale",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "660eb030-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_month",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "d02fc430-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_week",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "1cf44850-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_hour",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "3352b650-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_quarter",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "268ce800-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_year",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "087e5b50-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_date",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "id_scne",
                                            "title": "id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "client_id_lbc6",
                                            "title": "client_id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "gender_fzxw",
                                            "title": "gender",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "product_id_ey10",
                                            "title": "product_id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "quantity_k4iu",
                                            "title": "quantity",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "price_per_item_3dwq",
                                            "title": "price_per_item",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "discount_per_item_7maq",
                                            "title": "discount_per_item",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "total_price_1u2g",
                                            "title": "total_price",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "purchase_datetime_pvoa",
                                            "title": "purchase_datetime",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "461ec3e0-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_datedate",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "created_at_s6qq",
                                            "title": "created_at",
                                            "calc_mode": "direct"
                                        }
                                    ]
                                ]
                            }
                        },
                        "name": "Общие продажи и тренды - KPI. Общая выручка",
                        "type": "metric_wizard_node",
                        "annotation": {
                            "description": ""
                        }
                    }
                },
                "8": {
                    "widget": {
                        "data": {
                            "shared": {
                                "sort": [],
                                "type": "datalens",
                                "links": [],
                                "colors": [
                                    {
                                        "type": "PSEUDO",
                                        "title": "Measure Names",
                                        "className": "item pseudo-item dimension-item",
                                        "data_type": "string"
                                    }
                                ],
                                "labels": [],
                                "shapes": [
                                    {
                                        "type": "PSEUDO",
                                        "title": "Measure Names",
                                        "className": "item pseudo-item dimension-item",
                                        "data_type": "string"
                                    }
                                ],
                                "filters": [
                                    {
                                        "guid": "e3a1cfe0-aa55-11f0-8395-f32b2462dd84",
                                        "type": "DIMENSION",
                                        "title": "Фильтр даты",
                                        "filter": {
                                            "value": [
                                                "true"
                                            ],
                                            "operation": {
                                                "code": "EQ"
                                            }
                                        },
                                        "calc_mode": "formula",
                                        "datasetId": "6"
                                    },
                                    {
                                        "guid": "d879e720-ab26-11f0-b37b-c936c74f739c",
                                        "type": "MEASURE",
                                        "title": "Выручка за аналогичный период год назад",
                                        "filter": {
                                            "value": [
                                                "0"
                                            ],
                                            "operation": {
                                                "code": "GT"
                                            }
                                        },
                                        "calc_mode": "formula",
                                        "datasetId": "6"
                                    },
                                    {
                                        "guid": "29c12030-aa55-11f0-85d2-fd4677ac99c7",
                                        "type": "MEASURE",
                                        "title": "Выручка за выбранный период",
                                        "filter": {
                                            "value": [
                                                "0"
                                            ],
                                            "operation": {
                                                "code": "GT"
                                            }
                                        },
                                        "calc_mode": "formula",
                                        "datasetId": "6"
                                    }
                                ],
                                "updates": [
                                    {
                                        "field": {
                                            "cast": "float",
                                            "guid": "29c12030-aa55-11f0-85d2-fd4677ac99c7",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Выручка за выбранный период",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "SUM_IF([total_price], [purchase_datetime] >= [start_date] AND [purchase_datedate] <= [end_date])",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "float",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "SUM_IF([total_price_1u2g], [purchase_datetime_pvoa] >= [start_date] AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= [end_date])",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "float",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "float",
                                            "guid": "d879e720-ab26-11f0-b37b-c936c74f739c",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Выручка за аналогичный период год назад",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "SUM_IF([total_price], [purchase_datetime] >= DATEADD([start_date], 'year', -1) AND [purchase_datedate] <= DATEADD([end_date], 'year', -1) BEFORE FILTER BY [Фильтр даты])",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "float",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "SUM_IF([total_price_1u2g], [purchase_datetime_pvoa] >= DATEADD([start_date], 'year', -1) AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= DATEADD([end_date], 'year', -1) BEFORE FILTER BY [e3a1cfe0-aa55-11f0-8395-f32b2462dd84])",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "float",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    }
                                ],
                                "version": "14",
                                "segments": [],
                                "tooltips": [],
                                "datasetsIds": [
                                    "6"
                                ],
                                "hierarchies": [
                                    {
                                        "id": "inserted-1760536914762",
                                        "guid": "f52ab7e0-a9ce-11f0-ae84-a9265cfd563e",
                                        "type": "PSEUDO",
                                        "title": "Новая иерархия",
                                        "valid": true,
                                        "fields": [
                                            {
                                                "id": "dimension-14",
                                                "cast": "string",
                                                "guid": "268ce800-a928-11f0-976d-099c0b05b9ec",
                                                "type": "DIMENSION",
                                                "title": "purchase_year",
                                                "valid": true,
                                                "hidden": false,
                                                "source": "",
                                                "formula": "STR(YEAR([purchase_datetime]))",
                                                "virtual": false,
                                                "avatar_id": null,
                                                "calc_mode": "formula",
                                                "data_type": "string",
                                                "datasetId": "6",
                                                "managed_by": "user",
                                                "aggregation": "none",
                                                "datasetName": "Данные о продажах",
                                                "description": "",
                                                "ui_settings": "",
                                                "guid_formula": "STR(YEAR([purchase_datetime_pvoa]))",
                                                "default_value": null,
                                                "autoaggregated": false,
                                                "lock_aggregation": false,
                                                "value_constraint": null,
                                                "initial_data_type": "string",
                                                "aggregation_locked": true,
                                                "has_auto_aggregation": false
                                            },
                                            {
                                                "id": "dimension-13",
                                                "cast": "string",
                                                "guid": "3352b650-a928-11f0-976d-099c0b05b9ec",
                                                "type": "DIMENSION",
                                                "title": "purchase_quarter",
                                                "valid": true,
                                                "hidden": false,
                                                "source": "",
                                                "formula": "STR(YEAR([purchase_datetime])) + '-Q' + STR(QUARTER([purchase_datetime]))",
                                                "virtual": false,
                                                "avatar_id": null,
                                                "calc_mode": "formula",
                                                "data_type": "string",
                                                "datasetId": "6",
                                                "managed_by": "user",
                                                "aggregation": "none",
                                                "datasetName": "Данные о продажах",
                                                "description": "",
                                                "ui_settings": "",
                                                "guid_formula": "STR(YEAR([purchase_datetime_pvoa])) + '-Q' + STR(QUARTER([purchase_datetime_pvoa]))",
                                                "default_value": null,
                                                "autoaggregated": false,
                                                "lock_aggregation": false,
                                                "value_constraint": null,
                                                "initial_data_type": "string",
                                                "aggregation_locked": true,
                                                "has_auto_aggregation": false
                                            },
                                            {
                                                "id": "dimension-10",
                                                "cast": "string",
                                                "guid": "660eb030-a928-11f0-976d-099c0b05b9ec",
                                                "type": "DIMENSION",
                                                "title": "purchase_month",
                                                "valid": true,
                                                "hidden": false,
                                                "source": "",
                                                "formula": "IF MONTH([purchase_datetime]) <= 9\r\nTHEN\r\n    [purchase_year] + '-0' + STR(MONTH([purchase_datetime]))\r\nELSE\r\n    [purchase_year] + '-' + STR(MONTH([purchase_datetime]))\r\nEND",
                                                "virtual": false,
                                                "avatar_id": null,
                                                "calc_mode": "formula",
                                                "data_type": "string",
                                                "datasetId": "6",
                                                "managed_by": "user",
                                                "aggregation": "none",
                                                "datasetName": "Данные о продажах",
                                                "description": "",
                                                "ui_settings": "",
                                                "guid_formula": "IF MONTH([purchase_datetime_pvoa]) <= 9\r\nTHEN\r\n    [268ce800-a928-11f0-976d-099c0b05b9ec] + '-0' + STR(MONTH([purchase_datetime_pvoa]))\r\nELSE\r\n    [268ce800-a928-11f0-976d-099c0b05b9ec] + '-' + STR(MONTH([purchase_datetime_pvoa]))\r\nEND",
                                                "default_value": null,
                                                "autoaggregated": false,
                                                "lock_aggregation": false,
                                                "value_constraint": null,
                                                "initial_data_type": "string",
                                                "aggregation_locked": true,
                                                "has_auto_aggregation": false
                                            },
                                            {
                                                "id": "dimension-11",
                                                "cast": "string",
                                                "guid": "d02fc430-a929-11f0-976d-099c0b05b9ec",
                                                "type": "DIMENSION",
                                                "title": "purchase_week",
                                                "valid": true,
                                                "hidden": false,
                                                "source": "",
                                                "formula": "IF WEEK([purchase_datetime]) <= 9\r\nTHEN\r\n    [purchase_year] + '-W0' + STR(WEEK([purchase_datetime]))\r\nELSE\r\n    [purchase_year] + '-W' + STR(WEEK([purchase_datetime]))\r\nEND",
                                                "virtual": false,
                                                "avatar_id": null,
                                                "calc_mode": "formula",
                                                "data_type": "string",
                                                "datasetId": "6",
                                                "managed_by": "user",
                                                "aggregation": "none",
                                                "datasetName": "Данные о продажах",
                                                "description": "",
                                                "ui_settings": "",
                                                "guid_formula": "IF WEEK([purchase_datetime_pvoa]) <= 9\r\nTHEN\r\n    [268ce800-a928-11f0-976d-099c0b05b9ec] + '-W0' + STR(WEEK([purchase_datetime_pvoa]))\r\nELSE\r\n    [268ce800-a928-11f0-976d-099c0b05b9ec] + '-W' + STR(WEEK([purchase_datetime_pvoa]))\r\nEND",
                                                "default_value": null,
                                                "autoaggregated": false,
                                                "lock_aggregation": false,
                                                "value_constraint": null,
                                                "initial_data_type": "string",
                                                "aggregation_locked": true,
                                                "has_auto_aggregation": false
                                            },
                                            {
                                                "id": "dimension-15",
                                                "cast": "string",
                                                "guid": "087e5b50-a928-11f0-976d-099c0b05b9ec",
                                                "type": "DIMENSION",
                                                "title": "purchase_date",
                                                "valid": true,
                                                "hidden": false,
                                                "source": "",
                                                "formula": "STR(DATE([purchase_datetime]))",
                                                "virtual": false,
                                                "avatar_id": null,
                                                "calc_mode": "formula",
                                                "data_type": "string",
                                                "datasetId": "6",
                                                "managed_by": "user",
                                                "aggregation": "none",
                                                "datasetName": "Данные о продажах",
                                                "description": "",
                                                "ui_settings": "",
                                                "guid_formula": "STR(DATE([purchase_datetime_pvoa]))",
                                                "default_value": null,
                                                "autoaggregated": false,
                                                "lock_aggregation": false,
                                                "value_constraint": null,
                                                "initial_data_type": "string",
                                                "aggregation_locked": true,
                                                "has_auto_aggregation": false
                                            },
                                            {
                                                "id": "dimension-12",
                                                "cast": "string",
                                                "guid": "1cf44850-a929-11f0-976d-099c0b05b9ec",
                                                "type": "DIMENSION",
                                                "title": "purchase_hour",
                                                "valid": true,
                                                "hidden": false,
                                                "source": "",
                                                "formula": "IF HOUR([purchase_datetime]) <= 9\r\nTHEN\r\n    '0' + STR(HOUR([purchase_datetime]))\r\nELSE\r\n    STR(HOUR([purchase_datetime]))\r\nEND",
                                                "virtual": false,
                                                "avatar_id": null,
                                                "calc_mode": "formula",
                                                "data_type": "string",
                                                "datasetId": "6",
                                                "managed_by": "user",
                                                "aggregation": "none",
                                                "datasetName": "Данные о продажах",
                                                "description": "",
                                                "ui_settings": "",
                                                "guid_formula": "IF HOUR([purchase_datetime_pvoa]) <= 9\r\nTHEN\r\n    '0' + STR(HOUR([purchase_datetime_pvoa]))\r\nELSE\r\n    STR(HOUR([purchase_datetime_pvoa]))\r\nEND",
                                                "default_value": null,
                                                "autoaggregated": false,
                                                "lock_aggregation": false,
                                                "value_constraint": null,
                                                "initial_data_type": "string",
                                                "aggregation_locked": true,
                                                "has_auto_aggregation": false
                                            }
                                        ],
                                        "className": "item dimension-item",
                                        "data_type": "hierarchy",
                                        "undragable": false
                                    }
                                ],
                                "colorsConfig": {
                                    "palette": "",
                                    "colorMode": "palette",
                                    "mountedColors": {
                                        "Выручка за период": "12",
                                        "Выручка за период (1)": "2",
                                        "Выручка за выбранный период": "12",
                                        "Выручка за аналогичный период год назад": "12"
                                    },
                                    "polygonBorders": "show",
                                    "coloredByMeasure": true
                                },
                                "shapesConfig": {
                                    "mountedShapes": {
                                        "Выручка за период": "Solid",
                                        "Выручка за период (1)": "ShortDot",
                                        "Выручка за выбранный период": "Solid",
                                        "Выручка за аналогичный период год назад": "Dot"
                                    }
                                },
                                "extraSettings": {
                                    "feed": "",
                                    "limit": 100,
                                    "title": "Общие продажи и тренды - Линейная. Общая выручка",
                                    "totals": "off",
                                    "stacking": "on",
                                    "zoomMode": "auto",
                                    "titleMode": "hide",
                                    "legendMode": "hide",
                                    "pagination": "off",
                                    "tooltipSum": "off",
                                    "mapCenterMode": "auto",
                                    "pivotInlineSort": "on",
                                    "navigatorSettings": {
                                        "selectedLines": [],
                                        "isNavigatorAvailable": false
                                    },
                                    "indicatorTitleMode": "by-field"
                                },
                                "visualization": {
                                    "id": "line",
                                    "name": "label_visualization-line",
                                    "type": "line",
                                    "allowSort": true,
                                    "iconProps": {
                                        "id": "visLines",
                                        "width": "24"
                                    },
                                    "allowColors": true,
                                    "allowLabels": true,
                                    "allowShapes": true,
                                    "allowFilters": true,
                                    "placeholders": [
                                        {
                                            "id": "x",
                                            "type": "x",
                                            "items": [
                                                {
                                                    "id": "dimension-8",
                                                    "cast": "string",
                                                    "guid": "8125b920-ab28-11f0-bffa-65bc24252e3e",
                                                    "type": "DIMENSION",
                                                    "title": "scale_value_sparkline",
                                                    "valid": true,
                                                    "hidden": false,
                                                    "source": "",
                                                    "formula": "IF [scale] = \"День\" THEN SUBSTR([purchase_date], 6, 5)\r\nELSEIF [scale] = \"Неделя\" THEN SUBSTR([purchase_week], 6, 3)\r\nELSEIF [scale] = \"Месяц\" THEN \"М\" + SUBSTR([purchase_month], 6, 2)\r\nELSEIF [scale] = \"Квартал\" THEN SUBSTR([purchase_quarter], 6, 2)\r\nELSE [purchase_year]\r\nEND",
                                                    "virtual": false,
                                                    "avatar_id": null,
                                                    "calc_mode": "formula",
                                                    "data_type": "string",
                                                    "datasetId": "6",
                                                    "fakeTitle": "Период",
                                                    "formatting": {
                                                        "format": "number",
                                                        "prefix": "",
                                                        "postfix": "",
                                                        "labelMode": "absolute",
                                                        "precision": 0,
                                                        "showRankDelimiter": true
                                                    },
                                                    "managed_by": "user",
                                                    "aggregation": "none",
                                                    "datasetName": "Данные о продажах",
                                                    "description": "",
                                                    "ui_settings": "",
                                                    "guid_formula": "IF [scale] = \"День\" THEN SUBSTR([087e5b50-a928-11f0-976d-099c0b05b9ec], 6, 5)\r\nELSEIF [scale] = \"Неделя\" THEN SUBSTR([d02fc430-a929-11f0-976d-099c0b05b9ec], 6, 3)\r\nELSEIF [scale] = \"Месяц\" THEN \"М\" + SUBSTR([660eb030-a928-11f0-976d-099c0b05b9ec], 6, 2)\r\nELSEIF [scale] = \"Квартал\" THEN SUBSTR([3352b650-a928-11f0-976d-099c0b05b9ec], 6, 2)\r\nELSE [268ce800-a928-11f0-976d-099c0b05b9ec]\r\nEND",
                                                    "default_value": null,
                                                    "hideLabelMode": "show",
                                                    "autoaggregated": false,
                                                    "lock_aggregation": false,
                                                    "value_constraint": null,
                                                    "initial_data_type": "string",
                                                    "aggregation_locked": true,
                                                    "has_auto_aggregation": false
                                                }
                                            ],
                                            "title": "section_x",
                                            "capacity": 1,
                                            "required": true,
                                            "settings": {
                                                "grid": "on",
                                                "type": "linear",
                                                "title": "off",
                                                "gridStep": "auto",
                                                "holidays": "off",
                                                "hideLabels": "no",
                                                "labelsView": "auto",
                                                "titleValue": "",
                                                "axisModeMap": {
                                                    "8125b920-ab28-11f0-bffa-65bc24252e3e": "discrete"
                                                },
                                                "gridStepValue": 50,
                                                "axisFormatMode": "auto",
                                                "axisVisibility": "hide",
                                                "axisLabelFormating": {},
                                                "axisLabelDateFormat": "DD.MM.YYYY"
                                            },
                                            "iconProps": {},
                                            "allowedTypes": {},
                                            "allowedDataTypes": {}
                                        },
                                        {
                                            "id": "y",
                                            "type": "y",
                                            "items": [
                                                {
                                                    "id": "measure-0",
                                                    "cast": "float",
                                                    "guid": "d879e720-ab26-11f0-b37b-c936c74f739c",
                                                    "type": "MEASURE",
                                                    "local": true,
                                                    "title": "Выручка за аналогичный период год назад",
                                                    "valid": true,
                                                    "hidden": false,
                                                    "source": "",
                                                    "formula": "SUM_IF([total_price], [purchase_datetime] >= DATEADD([start_date], 'year', -1) AND [purchase_datedate] <= DATEADD([end_date], 'year', -1) BEFORE FILTER BY [Фильтр даты])",
                                                    "virtual": false,
                                                    "avatar_id": null,
                                                    "calc_mode": "formula",
                                                    "data_type": "float",
                                                    "datasetId": "6",
                                                    "formatting": {
                                                        "unit": "m",
                                                        "format": "number",
                                                        "prefix": "",
                                                        "postfix": "",
                                                        "labelMode": "absolute",
                                                        "precision": 0,
                                                        "showRankDelimiter": true
                                                    },
                                                    "managed_by": "user",
                                                    "aggregation": "none",
                                                    "datasetName": "Данные о продажах",
                                                    "description": "",
                                                    "ui_settings": "",
                                                    "guid_formula": "SUM_IF([total_price_1u2g], [purchase_datetime_pvoa] >= DATEADD([start_date], 'year', -1) AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= DATEADD([end_date], 'year', -1) BEFORE FILTER BY [e3a1cfe0-aa55-11f0-8395-f32b2462dd84])",
                                                    "default_value": null,
                                                    "hideLabelMode": "show",
                                                    "autoaggregated": true,
                                                    "originalFormula": "SUM_IF([total_price], [purchase_datetime] >= [start_date] AND [purchase_datedate] <= [end_date])",
                                                    "lock_aggregation": false,
                                                    "value_constraint": null,
                                                    "initial_data_type": "float",
                                                    "aggregation_locked": true,
                                                    "has_auto_aggregation": true
                                                },
                                                {
                                                    "id": "measure-1",
                                                    "cast": "float",
                                                    "guid": "29c12030-aa55-11f0-85d2-fd4677ac99c7",
                                                    "type": "MEASURE",
                                                    "local": true,
                                                    "title": "Выручка за выбранный период",
                                                    "valid": true,
                                                    "hidden": false,
                                                    "source": "",
                                                    "formula": "SUM_IF([total_price], [purchase_datetime] >= [start_date] AND [purchase_datedate] <= [end_date])",
                                                    "virtual": false,
                                                    "avatar_id": null,
                                                    "calc_mode": "formula",
                                                    "data_type": "float",
                                                    "datasetId": "6",
                                                    "formatting": {
                                                        "unit": "m",
                                                        "format": "number",
                                                        "prefix": "",
                                                        "postfix": "",
                                                        "labelMode": "absolute",
                                                        "precision": 0,
                                                        "showRankDelimiter": true
                                                    },
                                                    "managed_by": "user",
                                                    "aggregation": "none",
                                                    "datasetName": "Данные о продажах",
                                                    "description": "",
                                                    "ui_settings": "",
                                                    "guid_formula": "SUM_IF([total_price_1u2g], [purchase_datetime_pvoa] >= [start_date] AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= [end_date])",
                                                    "default_value": null,
                                                    "hideLabelMode": "show",
                                                    "originalTitle": "total_price",
                                                    "autoaggregated": true,
                                                    "lock_aggregation": false,
                                                    "value_constraint": null,
                                                    "initial_data_type": "float",
                                                    "aggregation_locked": true,
                                                    "backgroundSettings": {
                                                        "enabled": false,
                                                        "settings": {
                                                            "isContinuous": false,
                                                            "paletteState": {
                                                                "palette": "",
                                                                "mountedColors": {}
                                                            },
                                                            "gradientState": {}
                                                        },
                                                        "settingsId": "9327d130-a9cf-11f0-ae84-a9265cfd563e",
                                                        "colorFieldGuid": "total_price_1u2g"
                                                    },
                                                    "has_auto_aggregation": true
                                                }
                                            ],
                                            "title": "section_y",
                                            "settings": {
                                                "grid": "on",
                                                "type": "linear",
                                                "nulls": "connect",
                                                "scale": "auto",
                                                "title": "off",
                                                "gridStep": "auto",
                                                "hideLabels": "no",
                                                "labelsView": "auto",
                                                "scaleValue": "min-max",
                                                "titleValue": "",
                                                "gridStepValue": 50,
                                                "axisFormatMode": "auto",
                                                "axisVisibility": "hide",
                                                "axisLabelFormating": {},
                                                "axisLabelDateFormat": "DD.MM.YYYY"
                                            },
                                            "iconProps": {},
                                            "allowedTypes": {},
                                            "allowedDataTypes": {},
                                            "allowedFinalTypes": {}
                                        },
                                        {
                                            "id": "y2",
                                            "type": "y2",
                                            "items": [],
                                            "title": "section_y2",
                                            "settings": {
                                                "grid": "on",
                                                "type": "linear",
                                                "nulls": "connect",
                                                "scale": "auto",
                                                "title": "off",
                                                "gridStep": "auto",
                                                "hideLabels": "no",
                                                "labelsView": "auto",
                                                "scaleValue": "min-max",
                                                "titleValue": "",
                                                "gridStepValue": 50,
                                                "axisFormatMode": "auto",
                                                "axisVisibility": "show",
                                                "axisLabelFormating": {},
                                                "axisLabelDateFormat": "DD.MM.YYYY"
                                            },
                                            "iconProps": {},
                                            "allowedTypes": {},
                                            "allowedDataTypes": {},
                                            "allowedFinalTypes": {}
                                        }
                                    ],
                                    "allowSegments": true,
                                    "colorsCapacity": 1,
                                    "shapesCapacity": 1,
                                    "allowLayerFilters": false,
                                    "availableLabelModes": [
                                        "absolute"
                                    ]
                                },
                                "geopointsConfig": {},
                                "datasetsPartialFields": [
                                    [
                                        {
                                            "guid": "d879e720-ab26-11f0-b37b-c936c74f739c",
                                            "title": "Выручка за аналогичный период год назад",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "29c12030-aa55-11f0-85d2-fd4677ac99c7",
                                            "title": "Выручка за выбранный период",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "95f17b60-ab36-11f0-a2f4-fdfba76f64b3",
                                            "title": "Номер покупки",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "e3a1cfe0-aa55-11f0-8395-f32b2462dd84",
                                            "title": "Фильтр даты",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "end_date",
                                            "title": "end_date",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "start_date",
                                            "title": "start_date",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "f828f540-a935-11f0-976d-099c0b05b9ec",
                                            "title": "%_discount",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "584ad600-a92c-11f0-976d-099c0b05b9ec",
                                            "title": "scale_value",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "8125b920-ab28-11f0-bffa-65bc24252e3e",
                                            "title": "scale_value_sparkline",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "scale",
                                            "title": "scale",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "660eb030-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_month",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "d02fc430-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_week",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "1cf44850-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_hour",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "3352b650-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_quarter",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "268ce800-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_year",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "087e5b50-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_date",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "id_scne",
                                            "title": "id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "client_id_lbc6",
                                            "title": "client_id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "gender_fzxw",
                                            "title": "gender",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "product_id_ey10",
                                            "title": "product_id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "quantity_k4iu",
                                            "title": "quantity",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "price_per_item_3dwq",
                                            "title": "price_per_item",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "discount_per_item_7maq",
                                            "title": "discount_per_item",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "total_price_1u2g",
                                            "title": "total_price",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "purchase_datetime_pvoa",
                                            "title": "purchase_datetime",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "461ec3e0-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_datedate",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "created_at_s6qq",
                                            "title": "created_at",
                                            "calc_mode": "direct"
                                        }
                                    ]
                                ]
                            }
                        },
                        "name": "Общие продажи и тренды - Линейная. Общая выручка",
                        "type": "graph_wizard_node",
                        "annotation": {
                            "description": ""
                        }
                    }
                },
                "9": {
                    "widget": {
                        "data": {
                            "shared": {
                                "sort": [],
                                "type": "datalens",
                                "links": [],
                                "colors": [
                                    {
                                        "type": "PSEUDO",
                                        "title": "Measure Names",
                                        "className": "item pseudo-item dimension-item",
                                        "data_type": "string"
                                    }
                                ],
                                "labels": [],
                                "shapes": [
                                    {
                                        "type": "PSEUDO",
                                        "title": "Measure Names",
                                        "className": "item pseudo-item dimension-item",
                                        "data_type": "string"
                                    }
                                ],
                                "filters": [
                                    {
                                        "guid": "e3a1cfe0-aa55-11f0-8395-f32b2462dd84",
                                        "type": "DIMENSION",
                                        "title": "Фильтр даты",
                                        "filter": {
                                            "value": [
                                                "true"
                                            ],
                                            "operation": {
                                                "code": "EQ"
                                            }
                                        },
                                        "calc_mode": "formula",
                                        "datasetId": "6"
                                    },
                                    {
                                        "guid": "ef440440-a92d-11f0-bddf-d73cfe3178e1",
                                        "type": "MEASURE",
                                        "title": "avg_cheque",
                                        "filter": {
                                            "value": [
                                                "0"
                                            ],
                                            "operation": {
                                                "code": "GT"
                                            }
                                        },
                                        "calc_mode": "formula",
                                        "datasetId": "6"
                                    },
                                    {
                                        "guid": "c94a1650-ab29-11f0-8568-df9e132b29d2",
                                        "type": "MEASURE",
                                        "title": "avg_cheque (1)",
                                        "filter": {
                                            "value": [
                                                "0"
                                            ],
                                            "operation": {
                                                "code": "GT"
                                            }
                                        },
                                        "calc_mode": "formula",
                                        "datasetId": "6"
                                    }
                                ],
                                "updates": [
                                    {
                                        "field": {
                                            "cast": "float",
                                            "guid": "c94a1650-ab29-11f0-8568-df9e132b29d2",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "avg_cheque (1)",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "FDIV_SAFE(\r\n    SUM_IF([total_price], [purchase_datetime] >= DATEADD([start_date], 'year', -1) AND [purchase_datedate] <= DATEADD([end_date], 'year', -1) BEFORE FILTER BY [Фильтр даты]),\r\n    COUNTD_IF([id], [purchase_datetime] >= DATEADD([start_date], 'year', -1) AND [purchase_datedate] <= DATEADD([end_date], 'year', -1) BEFORE FILTER BY [Фильтр даты]),\r\n    0)",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "float",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "FDIV_SAFE(\r\n    SUM_IF([total_price_1u2g], [purchase_datetime_pvoa] >= DATEADD([start_date], 'year', -1) AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= DATEADD([end_date], 'year', -1) BEFORE FILTER BY [e3a1cfe0-aa55-11f0-8395-f32b2462dd84]),\r\n    COUNTD_IF([id_scne], [purchase_datetime_pvoa] >= DATEADD([start_date], 'year', -1) AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= DATEADD([end_date], 'year', -1) BEFORE FILTER BY [e3a1cfe0-aa55-11f0-8395-f32b2462dd84]),\r\n    0)",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "float",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "float",
                                            "guid": "ef440440-a92d-11f0-bddf-d73cfe3178e1",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "avg_cheque",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "FDIV_SAFE(\r\n    SUM_IF([total_price], [purchase_datetime] >= [start_date] AND [purchase_datedate] <= [end_date]),\r\n    COUNTD_IF([id], [purchase_datetime] >= [start_date] AND [purchase_datedate] <= [end_date]),\r\n    0)",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "float",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "FDIV_SAFE(\r\n    SUM_IF([total_price_1u2g], [purchase_datetime_pvoa] >= [start_date] AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= [end_date]),\r\n    COUNTD_IF([id_scne], [purchase_datetime_pvoa] >= [start_date] AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= [end_date]),\r\n    0)",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "float",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    }
                                ],
                                "version": "14",
                                "segments": [],
                                "tooltips": [],
                                "datasetsIds": [
                                    "6"
                                ],
                                "hierarchies": [],
                                "colorsConfig": {
                                    "palette": "",
                                    "colorMode": "palette",
                                    "mountedColors": {
                                        "Средний чек за выбранный период": "0",
                                        "Средний чек за аналогичный период год назад": "0"
                                    },
                                    "polygonBorders": "show",
                                    "coloredByMeasure": true
                                },
                                "shapesConfig": {
                                    "mountedShapes": {
                                        "Средний чек за выбранный период": "Solid",
                                        "Средний чек за аналогичный период год назад": "Dot"
                                    }
                                },
                                "extraSettings": {
                                    "feed": "",
                                    "title": "Общие продажи и тренды - Линейная. Средний чек",
                                    "stacking": "on",
                                    "zoomMode": "auto",
                                    "titleMode": "hide",
                                    "legendMode": "hide",
                                    "tooltipSum": "off",
                                    "mapCenterMode": "auto",
                                    "pivotInlineSort": "on",
                                    "navigatorSettings": {
                                        "selectedLines": [],
                                        "isNavigatorAvailable": false
                                    },
                                    "indicatorTitleMode": "by-field"
                                },
                                "visualization": {
                                    "id": "line",
                                    "name": "label_visualization-line",
                                    "type": "line",
                                    "allowSort": true,
                                    "iconProps": {
                                        "id": "visLines",
                                        "width": "24"
                                    },
                                    "allowColors": true,
                                    "allowLabels": true,
                                    "allowShapes": true,
                                    "allowFilters": true,
                                    "placeholders": [
                                        {
                                            "id": "x",
                                            "type": "x",
                                            "items": [
                                                {
                                                    "id": "dimension-8",
                                                    "cast": "string",
                                                    "guid": "8125b920-ab28-11f0-bffa-65bc24252e3e",
                                                    "type": "DIMENSION",
                                                    "title": "scale_value_sparkline",
                                                    "valid": true,
                                                    "hidden": false,
                                                    "source": "",
                                                    "formula": "IF [scale] = \"День\" THEN SUBSTR([purchase_date], 6, 5)\r\nELSEIF [scale] = \"Неделя\" THEN SUBSTR([purchase_week], 6, 3)\r\nELSEIF [scale] = \"Месяц\" THEN \"М\" + SUBSTR([purchase_month], 6, 2)\r\nELSEIF [scale] = \"Квартал\" THEN SUBSTR([purchase_quarter], 6, 2)\r\nELSE [purchase_year]\r\nEND",
                                                    "virtual": false,
                                                    "avatar_id": null,
                                                    "calc_mode": "formula",
                                                    "data_type": "string",
                                                    "datasetId": "6",
                                                    "fakeTitle": "Период",
                                                    "formatting": {
                                                        "format": "number",
                                                        "prefix": "",
                                                        "postfix": "",
                                                        "labelMode": "absolute",
                                                        "precision": 0,
                                                        "showRankDelimiter": true
                                                    },
                                                    "managed_by": "user",
                                                    "aggregation": "none",
                                                    "datasetName": "Данные о продажах",
                                                    "description": "",
                                                    "ui_settings": "",
                                                    "guid_formula": "IF [scale] = \"День\" THEN SUBSTR([087e5b50-a928-11f0-976d-099c0b05b9ec], 6, 5)\r\nELSEIF [scale] = \"Неделя\" THEN SUBSTR([d02fc430-a929-11f0-976d-099c0b05b9ec], 6, 3)\r\nELSEIF [scale] = \"Месяц\" THEN \"М\" + SUBSTR([660eb030-a928-11f0-976d-099c0b05b9ec], 6, 2)\r\nELSEIF [scale] = \"Квартал\" THEN SUBSTR([3352b650-a928-11f0-976d-099c0b05b9ec], 6, 2)\r\nELSE [268ce800-a928-11f0-976d-099c0b05b9ec]\r\nEND",
                                                    "default_value": null,
                                                    "hideLabelMode": "show",
                                                    "autoaggregated": false,
                                                    "lock_aggregation": false,
                                                    "value_constraint": null,
                                                    "initial_data_type": "string",
                                                    "aggregation_locked": true,
                                                    "has_auto_aggregation": false
                                                }
                                            ],
                                            "title": "section_x",
                                            "capacity": 1,
                                            "required": true,
                                            "settings": {
                                                "grid": "off",
                                                "type": "linear",
                                                "title": "off",
                                                "gridStep": "auto",
                                                "holidays": "off",
                                                "hideLabels": "no",
                                                "labelsView": "auto",
                                                "titleValue": "",
                                                "axisModeMap": {
                                                    "8125b920-ab28-11f0-bffa-65bc24252e3e": "discrete"
                                                },
                                                "gridStepValue": 50,
                                                "axisFormatMode": "auto",
                                                "axisVisibility": "hide",
                                                "axisLabelFormating": {},
                                                "axisLabelDateFormat": "DD.MM.YYYY"
                                            },
                                            "iconProps": {},
                                            "allowedTypes": {},
                                            "allowedDataTypes": {}
                                        },
                                        {
                                            "id": "y",
                                            "type": "y",
                                            "items": [
                                                {
                                                    "id": "measure-0",
                                                    "cast": "float",
                                                    "guid": "ef440440-a92d-11f0-bddf-d73cfe3178e1",
                                                    "type": "MEASURE",
                                                    "local": true,
                                                    "title": "avg_cheque",
                                                    "valid": true,
                                                    "hidden": false,
                                                    "source": "",
                                                    "formula": "FDIV_SAFE(\r\n    SUM_IF([total_price], [purchase_datetime] >= [start_date] AND [purchase_datedate] <= [end_date]),\r\n    COUNTD_IF([id], [purchase_datetime] >= [start_date] AND [purchase_datedate] <= [end_date]),\r\n    0)",
                                                    "virtual": false,
                                                    "avatar_id": null,
                                                    "calc_mode": "formula",
                                                    "data_type": "float",
                                                    "datasetId": "6",
                                                    "fakeTitle": "Средний чек за выбранный период",
                                                    "formatting": {
                                                        "format": "number",
                                                        "prefix": "",
                                                        "postfix": "",
                                                        "labelMode": "absolute",
                                                        "precision": 0,
                                                        "showRankDelimiter": true
                                                    },
                                                    "managed_by": "user",
                                                    "aggregation": "none",
                                                    "datasetName": "Данные о продажах",
                                                    "description": "",
                                                    "ui_settings": "",
                                                    "guid_formula": "FDIV_SAFE(\r\n    SUM_IF([total_price_1u2g], [purchase_datetime_pvoa] >= [start_date] AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= [end_date]),\r\n    COUNTD_IF([id_scne], [purchase_datetime_pvoa] >= [start_date] AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= [end_date]),\r\n    0)",
                                                    "default_value": null,
                                                    "hideLabelMode": "show",
                                                    "autoaggregated": true,
                                                    "lock_aggregation": false,
                                                    "value_constraint": null,
                                                    "initial_data_type": "float",
                                                    "aggregation_locked": true,
                                                    "has_auto_aggregation": true
                                                },
                                                {
                                                    "id": "measure-1",
                                                    "cast": "float",
                                                    "guid": "c94a1650-ab29-11f0-8568-df9e132b29d2",
                                                    "type": "MEASURE",
                                                    "local": true,
                                                    "title": "avg_cheque (1)",
                                                    "valid": true,
                                                    "hidden": false,
                                                    "source": "",
                                                    "formula": "FDIV_SAFE(\r\n    SUM_IF([total_price], [purchase_datetime] >= DATEADD([start_date], 'year', -1) AND [purchase_datedate] <= DATEADD([end_date], 'year', -1) BEFORE FILTER BY [Фильтр даты]),\r\n    COUNTD_IF([id], [purchase_datetime] >= DATEADD([start_date], 'year', -1) AND [purchase_datedate] <= DATEADD([end_date], 'year', -1) BEFORE FILTER BY [Фильтр даты]),\r\n    0)",
                                                    "virtual": false,
                                                    "avatar_id": null,
                                                    "calc_mode": "formula",
                                                    "data_type": "float",
                                                    "datasetId": "6",
                                                    "fakeTitle": "Средний чек за аналогичный период год назад",
                                                    "formatting": {
                                                        "format": "number",
                                                        "prefix": "",
                                                        "postfix": "",
                                                        "labelMode": "absolute",
                                                        "precision": 0,
                                                        "showRankDelimiter": true
                                                    },
                                                    "managed_by": "user",
                                                    "aggregation": "none",
                                                    "datasetName": "Данные о продажах",
                                                    "description": "",
                                                    "ui_settings": "",
                                                    "guid_formula": "FDIV_SAFE(\r\n    SUM_IF([total_price_1u2g], [purchase_datetime_pvoa] >= DATEADD([start_date], 'year', -1) AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= DATEADD([end_date], 'year', -1) BEFORE FILTER BY [e3a1cfe0-aa55-11f0-8395-f32b2462dd84]),\r\n    COUNTD_IF([id_scne], [purchase_datetime_pvoa] >= DATEADD([start_date], 'year', -1) AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= DATEADD([end_date], 'year', -1) BEFORE FILTER BY [e3a1cfe0-aa55-11f0-8395-f32b2462dd84]),\r\n    0)",
                                                    "default_value": null,
                                                    "hideLabelMode": "show",
                                                    "autoaggregated": true,
                                                    "originalFormula": "SUM_IF([total_price], [purchase_datetime] >= [start_date] AND [purchase_datedate] <= [end_date])/COUNTD_IF([id], [purchase_datetime] >= [start_date] AND [purchase_datedate] <= [end_date])",
                                                    "lock_aggregation": false,
                                                    "value_constraint": null,
                                                    "initial_data_type": "float",
                                                    "aggregation_locked": true,
                                                    "has_auto_aggregation": true
                                                }
                                            ],
                                            "title": "section_y",
                                            "settings": {
                                                "grid": "on",
                                                "type": "linear",
                                                "nulls": "connect",
                                                "scale": "auto",
                                                "title": "off",
                                                "gridStep": "auto",
                                                "hideLabels": "no",
                                                "labelsView": "auto",
                                                "scaleValue": "min-max",
                                                "titleValue": "",
                                                "gridStepValue": 50,
                                                "axisFormatMode": "auto",
                                                "axisVisibility": "hide",
                                                "axisLabelFormating": {},
                                                "axisLabelDateFormat": "DD.MM.YYYY"
                                            },
                                            "iconProps": {},
                                            "allowedTypes": {},
                                            "allowedDataTypes": {},
                                            "allowedFinalTypes": {}
                                        },
                                        {
                                            "id": "y2",
                                            "type": "y2",
                                            "items": [],
                                            "title": "section_y2",
                                            "settings": {
                                                "grid": "on",
                                                "type": "linear",
                                                "nulls": "connect",
                                                "scale": "auto",
                                                "title": "off",
                                                "gridStep": "auto",
                                                "hideLabels": "no",
                                                "labelsView": "auto",
                                                "scaleValue": "min-max",
                                                "titleValue": "",
                                                "gridStepValue": 50,
                                                "axisFormatMode": "auto",
                                                "axisVisibility": "show",
                                                "axisLabelFormating": {},
                                                "axisLabelDateFormat": "DD.MM.YYYY"
                                            },
                                            "iconProps": {},
                                            "allowedTypes": {},
                                            "allowedDataTypes": {},
                                            "allowedFinalTypes": {}
                                        }
                                    ],
                                    "allowSegments": true,
                                    "colorsCapacity": 1,
                                    "shapesCapacity": 1,
                                    "allowLayerFilters": false,
                                    "availableLabelModes": [
                                        "absolute"
                                    ]
                                },
                                "geopointsConfig": {},
                                "datasetsPartialFields": [
                                    [
                                        {
                                            "guid": "ef440440-a92d-11f0-bddf-d73cfe3178e1",
                                            "title": "avg_cheque",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "c94a1650-ab29-11f0-8568-df9e132b29d2",
                                            "title": "avg_cheque (1)",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "95f17b60-ab36-11f0-a2f4-fdfba76f64b3",
                                            "title": "Номер покупки",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "e3a1cfe0-aa55-11f0-8395-f32b2462dd84",
                                            "title": "Фильтр даты",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "end_date",
                                            "title": "end_date",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "start_date",
                                            "title": "start_date",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "f828f540-a935-11f0-976d-099c0b05b9ec",
                                            "title": "%_discount",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "584ad600-a92c-11f0-976d-099c0b05b9ec",
                                            "title": "scale_value",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "8125b920-ab28-11f0-bffa-65bc24252e3e",
                                            "title": "scale_value_sparkline",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "scale",
                                            "title": "scale",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "660eb030-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_month",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "d02fc430-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_week",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "1cf44850-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_hour",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "3352b650-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_quarter",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "268ce800-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_year",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "087e5b50-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_date",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "id_scne",
                                            "title": "id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "client_id_lbc6",
                                            "title": "client_id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "gender_fzxw",
                                            "title": "gender",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "product_id_ey10",
                                            "title": "product_id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "quantity_k4iu",
                                            "title": "quantity",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "price_per_item_3dwq",
                                            "title": "price_per_item",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "discount_per_item_7maq",
                                            "title": "discount_per_item",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "total_price_1u2g",
                                            "title": "total_price",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "purchase_datetime_pvoa",
                                            "title": "purchase_datetime",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "461ec3e0-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_datedate",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "created_at_s6qq",
                                            "title": "created_at",
                                            "calc_mode": "direct"
                                        }
                                    ]
                                ]
                            }
                        },
                        "name": "Общие продажи и тренды - Линейная. Средний чек",
                        "type": "graph_wizard_node",
                        "annotation": {
                            "description": ""
                        }
                    }
                },
                "10": {
                    "widget": {
                        "data": {
                            "shared": {
                                "sort": [],
                                "type": "datalens",
                                "links": [],
                                "colors": [],
                                "labels": [],
                                "shapes": [],
                                "filters": [],
                                "updates": [
                                    {
                                        "field": {
                                            "cast": "integer",
                                            "guid": "45d227d0-aa58-11f0-ab99-95328cdc4ba0",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Количество единиц товаров",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "SUM_IF([quantity], [purchase_datetime] >= [start_date] AND [purchase_datedate] <= [end_date])",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "integer",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "SUM_IF([quantity_k4iu], [purchase_datetime_pvoa] >= [start_date] AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= [end_date])",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "integer",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field"
                                    }
                                ],
                                "version": "14",
                                "segments": [],
                                "tooltips": [],
                                "datasetsIds": [
                                    "6"
                                ],
                                "hierarchies": [],
                                "colorsConfig": {},
                                "shapesConfig": {},
                                "extraSettings": {
                                    "feed": "",
                                    "title": "Общие продажи и тренды - KPI. Общая выручка",
                                    "stacking": "on",
                                    "zoomMode": "auto",
                                    "titleMode": "hide",
                                    "legendMode": "show",
                                    "tooltipSum": "on",
                                    "mapCenterMode": "auto",
                                    "metricFontSize": "m",
                                    "metricFontColor": "#70C1AF",
                                    "pivotInlineSort": "on",
                                    "navigatorSettings": {
                                        "selectedLines": [],
                                        "isNavigatorAvailable": false
                                    },
                                    "indicatorTitleMode": "hide",
                                    "metricFontColorIndex": 17
                                },
                                "visualization": {
                                    "id": "metric",
                                    "name": "label_visualization-metric",
                                    "type": "metric",
                                    "allowSort": false,
                                    "iconProps": {
                                        "id": "visMetric",
                                        "width": "24"
                                    },
                                    "allowLabels": false,
                                    "allowFilters": true,
                                    "placeholders": [
                                        {
                                            "id": "measures",
                                            "type": "measures",
                                            "items": [
                                                {
                                                    "id": "measure-0",
                                                    "cast": "integer",
                                                    "guid": "45d227d0-aa58-11f0-ab99-95328cdc4ba0",
                                                    "type": "MEASURE",
                                                    "local": true,
                                                    "title": "Количество единиц товаров",
                                                    "valid": true,
                                                    "hidden": false,
                                                    "source": "",
                                                    "formula": "SUM_IF([quantity], [purchase_datetime] >= [start_date] AND [purchase_datedate] <= [end_date])",
                                                    "virtual": false,
                                                    "avatar_id": null,
                                                    "calc_mode": "formula",
                                                    "data_type": "integer",
                                                    "datasetId": "6",
                                                    "formatting": {
                                                        "unit": "k",
                                                        "format": "number",
                                                        "prefix": "",
                                                        "postfix": "",
                                                        "labelMode": "absolute",
                                                        "precision": 0,
                                                        "showRankDelimiter": true
                                                    },
                                                    "managed_by": "user",
                                                    "aggregation": "none",
                                                    "datasetName": "Данные о продажах",
                                                    "description": "",
                                                    "ui_settings": "",
                                                    "guid_formula": "SUM_IF([quantity_k4iu], [purchase_datetime_pvoa] >= [start_date] AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= [end_date])",
                                                    "default_value": null,
                                                    "hideLabelMode": "show",
                                                    "originalTitle": "quantity",
                                                    "autoaggregated": true,
                                                    "lock_aggregation": false,
                                                    "value_constraint": null,
                                                    "initial_data_type": "integer",
                                                    "aggregation_locked": true,
                                                    "has_auto_aggregation": true
                                                }
                                            ],
                                            "title": "section_measure",
                                            "capacity": 1,
                                            "required": true,
                                            "settings": {},
                                            "iconProps": {},
                                            "allowedTypes": {},
                                            "allowedDataTypes": {},
                                            "allowedFinalTypes": {}
                                        }
                                    ],
                                    "allowLayerFilters": false
                                },
                                "geopointsConfig": {},
                                "datasetsPartialFields": [
                                    [
                                        {
                                            "guid": "45d227d0-aa58-11f0-ab99-95328cdc4ba0",
                                            "title": "Количество единиц товаров",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "e3a1cfe0-aa55-11f0-8395-f32b2462dd84",
                                            "title": "Фильтр даты",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "end_date",
                                            "title": "end_date",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "start_date",
                                            "title": "start_date",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "f828f540-a935-11f0-976d-099c0b05b9ec",
                                            "title": "%_discount",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "584ad600-a92c-11f0-976d-099c0b05b9ec",
                                            "title": "scale_value",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "scale",
                                            "title": "scale",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "660eb030-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_month",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "d02fc430-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_week",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "1cf44850-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_hour",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "3352b650-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_quarter",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "268ce800-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_year",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "087e5b50-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_date",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "id_scne",
                                            "title": "id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "client_id_lbc6",
                                            "title": "client_id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "gender_fzxw",
                                            "title": "gender",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "product_id_ey10",
                                            "title": "product_id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "quantity_k4iu",
                                            "title": "quantity",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "price_per_item_3dwq",
                                            "title": "price_per_item",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "discount_per_item_7maq",
                                            "title": "discount_per_item",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "total_price_1u2g",
                                            "title": "total_price",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "purchase_datetime_pvoa",
                                            "title": "purchase_datetime",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "461ec3e0-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_datedate",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "created_at_s6qq",
                                            "title": "created_at",
                                            "calc_mode": "direct"
                                        }
                                    ]
                                ]
                            }
                        },
                        "name": "Общие продажи и тренды - KPI. Количество единиц товаров",
                        "type": "metric_wizard_node",
                        "annotation": {
                            "description": ""
                        }
                    }
                },
                "11": {
                    "widget": {
                        "data": {
                            "shared": {
                                "sort": [],
                                "type": "datalens",
                                "links": [],
                                "colors": [],
                                "labels": [],
                                "shapes": [],
                                "filters": [],
                                "updates": [
                                    {
                                        "field": {
                                            "cast": "float",
                                            "guid": "56067630-a92a-11f0-bccd-457b361f4ff7",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "avg_cheque",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "SUM_IF([total_price], [purchase_datetime] >= [start_date] AND [purchase_datedate] <= [end_date])/COUNTD_IF([id], [purchase_datetime] >= [start_date] AND [purchase_datedate] <= [end_date])",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "float",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "SUM_IF([total_price_1u2g], [purchase_datetime_pvoa] >= [start_date] AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= [end_date])/COUNTD_IF([id_scne], [purchase_datetime_pvoa] >= [start_date] AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= [end_date])",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "float",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    }
                                ],
                                "version": "14",
                                "segments": [],
                                "tooltips": [],
                                "datasetsIds": [
                                    "6"
                                ],
                                "hierarchies": [],
                                "colorsConfig": {},
                                "shapesConfig": {},
                                "extraSettings": {
                                    "feed": "",
                                    "title": "Общие продажи и тренды - KPI. Общая выручка",
                                    "stacking": "on",
                                    "zoomMode": "auto",
                                    "titleMode": "hide",
                                    "legendMode": "show",
                                    "tooltipSum": "on",
                                    "mapCenterMode": "auto",
                                    "pivotInlineSort": "on",
                                    "navigatorSettings": {
                                        "selectedLines": [],
                                        "isNavigatorAvailable": false
                                    },
                                    "indicatorTitleMode": "hide"
                                },
                                "visualization": {
                                    "id": "metric",
                                    "name": "label_visualization-metric",
                                    "type": "metric",
                                    "allowSort": false,
                                    "iconProps": {
                                        "id": "visMetric",
                                        "width": "24"
                                    },
                                    "allowLabels": false,
                                    "allowFilters": true,
                                    "placeholders": [
                                        {
                                            "id": "measures",
                                            "type": "measures",
                                            "items": [
                                                {
                                                    "id": "measure-0",
                                                    "cast": "float",
                                                    "guid": "56067630-a92a-11f0-bccd-457b361f4ff7",
                                                    "type": "MEASURE",
                                                    "local": true,
                                                    "title": "avg_cheque",
                                                    "valid": true,
                                                    "hidden": false,
                                                    "source": "",
                                                    "formula": "SUM_IF([total_price], [purchase_datetime] >= [start_date] AND [purchase_datedate] <= [end_date])/COUNTD_IF([id], [purchase_datetime] >= [start_date] AND [purchase_datedate] <= [end_date])",
                                                    "virtual": false,
                                                    "avatar_id": null,
                                                    "calc_mode": "formula",
                                                    "data_type": "float",
                                                    "datasetId": "6",
                                                    "formatting": {
                                                        "format": "number",
                                                        "prefix": "",
                                                        "postfix": "",
                                                        "labelMode": "absolute",
                                                        "precision": 0,
                                                        "showRankDelimiter": true
                                                    },
                                                    "managed_by": "user",
                                                    "aggregation": "none",
                                                    "datasetName": "Данные о продажах",
                                                    "description": "",
                                                    "ui_settings": "",
                                                    "guid_formula": "SUM_IF([total_price_1u2g], [purchase_datetime_pvoa] >= [start_date] AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= [end_date])/COUNTD_IF([id_scne], [purchase_datetime_pvoa] >= [start_date] AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= [end_date])",
                                                    "default_value": null,
                                                    "hideLabelMode": "show",
                                                    "autoaggregated": true,
                                                    "lock_aggregation": false,
                                                    "value_constraint": null,
                                                    "initial_data_type": "float",
                                                    "aggregation_locked": true,
                                                    "has_auto_aggregation": true
                                                }
                                            ],
                                            "title": "section_measure",
                                            "capacity": 1,
                                            "required": true,
                                            "settings": {},
                                            "iconProps": {},
                                            "allowedTypes": {},
                                            "allowedDataTypes": {},
                                            "allowedFinalTypes": {}
                                        }
                                    ],
                                    "allowLayerFilters": false
                                },
                                "geopointsConfig": {},
                                "datasetsPartialFields": [
                                    [
                                        {
                                            "guid": "56067630-a92a-11f0-bccd-457b361f4ff7",
                                            "title": "avg_cheque",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "e3a1cfe0-aa55-11f0-8395-f32b2462dd84",
                                            "title": "Фильтр даты",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "end_date",
                                            "title": "end_date",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "start_date",
                                            "title": "start_date",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "f828f540-a935-11f0-976d-099c0b05b9ec",
                                            "title": "%_discount",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "584ad600-a92c-11f0-976d-099c0b05b9ec",
                                            "title": "scale_value",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "scale",
                                            "title": "scale",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "660eb030-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_month",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "d02fc430-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_week",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "1cf44850-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_hour",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "3352b650-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_quarter",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "268ce800-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_year",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "087e5b50-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_date",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "id_scne",
                                            "title": "id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "client_id_lbc6",
                                            "title": "client_id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "gender_fzxw",
                                            "title": "gender",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "product_id_ey10",
                                            "title": "product_id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "quantity_k4iu",
                                            "title": "quantity",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "price_per_item_3dwq",
                                            "title": "price_per_item",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "discount_per_item_7maq",
                                            "title": "discount_per_item",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "total_price_1u2g",
                                            "title": "total_price",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "purchase_datetime_pvoa",
                                            "title": "purchase_datetime",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "461ec3e0-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_datedate",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "created_at_s6qq",
                                            "title": "created_at",
                                            "calc_mode": "direct"
                                        }
                                    ]
                                ]
                            }
                        },
                        "name": "Общие продажи и тренды - KPI. Средний чек",
                        "type": "metric_wizard_node",
                        "annotation": {
                            "description": ""
                        }
                    }
                },
                "12": {
                    "widget": {
                        "data": {
                            "shared": {
                                "sort": [],
                                "type": "datalens",
                                "links": [],
                                "colors": [],
                                "labels": [],
                                "shapes": [],
                                "filters": [],
                                "updates": [
                                    {
                                        "field": {
                                            "cast": "integer",
                                            "guid": "0512a4f0-aa57-11f0-8b12-896297bd1c11",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Количество заказов",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "COUNTD_IF([id], [purchase_datetime] >= [start_date] AND [purchase_datedate] <= [end_date])",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "integer",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "COUNTD_IF([id_scne], [purchase_datetime_pvoa] >= [start_date] AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= [end_date])",
                                            "originalTitle": "id",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "integer",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    }
                                ],
                                "version": "14",
                                "segments": [],
                                "tooltips": [],
                                "datasetsIds": [
                                    "6"
                                ],
                                "hierarchies": [],
                                "colorsConfig": {},
                                "shapesConfig": {},
                                "extraSettings": {
                                    "feed": "",
                                    "title": "Общие продажи и тренды - KPI. Общая выручка",
                                    "stacking": "on",
                                    "zoomMode": "auto",
                                    "titleMode": "hide",
                                    "legendMode": "show",
                                    "tooltipSum": "on",
                                    "mapCenterMode": "auto",
                                    "metricFontSize": "m",
                                    "metricFontColor": "#84D1EE",
                                    "pivotInlineSort": "on",
                                    "navigatorSettings": {
                                        "selectedLines": [],
                                        "isNavigatorAvailable": false
                                    },
                                    "indicatorTitleMode": "hide",
                                    "metricFontColorIndex": 5
                                },
                                "visualization": {
                                    "id": "metric",
                                    "name": "label_visualization-metric",
                                    "type": "metric",
                                    "allowSort": false,
                                    "iconProps": {
                                        "id": "visMetric",
                                        "width": "24"
                                    },
                                    "allowLabels": false,
                                    "allowFilters": true,
                                    "placeholders": [
                                        {
                                            "id": "measures",
                                            "type": "measures",
                                            "items": [
                                                {
                                                    "id": "measure-0",
                                                    "cast": "integer",
                                                    "guid": "0512a4f0-aa57-11f0-8b12-896297bd1c11",
                                                    "type": "MEASURE",
                                                    "local": true,
                                                    "title": "Количество заказов",
                                                    "valid": true,
                                                    "hidden": false,
                                                    "source": "",
                                                    "formula": "COUNTD_IF([id], [purchase_datetime] >= [start_date] AND [purchase_datedate] <= [end_date])",
                                                    "virtual": false,
                                                    "avatar_id": null,
                                                    "calc_mode": "formula",
                                                    "data_type": "integer",
                                                    "datasetId": "6",
                                                    "formatting": {
                                                        "format": "number",
                                                        "prefix": "",
                                                        "postfix": "",
                                                        "labelMode": "absolute",
                                                        "precision": 0,
                                                        "showRankDelimiter": true
                                                    },
                                                    "managed_by": "user",
                                                    "aggregation": "none",
                                                    "datasetName": "Данные о продажах",
                                                    "description": "",
                                                    "ui_settings": "",
                                                    "guid_formula": "COUNTD_IF([id_scne], [purchase_datetime_pvoa] >= [start_date] AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= [end_date])",
                                                    "default_value": null,
                                                    "hideLabelMode": "show",
                                                    "originalTitle": "id",
                                                    "autoaggregated": true,
                                                    "lock_aggregation": false,
                                                    "value_constraint": null,
                                                    "initial_data_type": "integer",
                                                    "aggregation_locked": true,
                                                    "has_auto_aggregation": true
                                                }
                                            ],
                                            "title": "section_measure",
                                            "capacity": 1,
                                            "required": true,
                                            "settings": {},
                                            "iconProps": {},
                                            "allowedTypes": {},
                                            "allowedDataTypes": {},
                                            "allowedFinalTypes": {}
                                        }
                                    ],
                                    "allowLayerFilters": false
                                },
                                "geopointsConfig": {},
                                "datasetsPartialFields": [
                                    [
                                        {
                                            "guid": "0512a4f0-aa57-11f0-8b12-896297bd1c11",
                                            "title": "Количество заказов",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "e3a1cfe0-aa55-11f0-8395-f32b2462dd84",
                                            "title": "Фильтр даты",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "end_date",
                                            "title": "end_date",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "start_date",
                                            "title": "start_date",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "f828f540-a935-11f0-976d-099c0b05b9ec",
                                            "title": "%_discount",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "584ad600-a92c-11f0-976d-099c0b05b9ec",
                                            "title": "scale_value",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "scale",
                                            "title": "scale",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "660eb030-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_month",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "d02fc430-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_week",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "1cf44850-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_hour",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "3352b650-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_quarter",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "268ce800-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_year",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "087e5b50-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_date",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "id_scne",
                                            "title": "id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "client_id_lbc6",
                                            "title": "client_id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "gender_fzxw",
                                            "title": "gender",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "product_id_ey10",
                                            "title": "product_id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "quantity_k4iu",
                                            "title": "quantity",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "price_per_item_3dwq",
                                            "title": "price_per_item",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "discount_per_item_7maq",
                                            "title": "discount_per_item",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "total_price_1u2g",
                                            "title": "total_price",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "purchase_datetime_pvoa",
                                            "title": "purchase_datetime",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "461ec3e0-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_datedate",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "created_at_s6qq",
                                            "title": "created_at",
                                            "calc_mode": "direct"
                                        }
                                    ]
                                ]
                            }
                        },
                        "name": "Общие продажи и тренды - KPI. Количество заказов",
                        "type": "metric_wizard_node",
                        "annotation": {
                            "description": ""
                        }
                    }
                },
                "13": {
                    "widget": {
                        "data": {
                            "shared": {
                                "sort": [],
                                "type": "datalens",
                                "links": [],
                                "colors": [],
                                "labels": [],
                                "shapes": [],
                                "filters": [],
                                "updates": [
                                    {
                                        "field": {
                                            "cast": "integer",
                                            "guid": "490ca920-a936-11f0-8e6c-bfacf3626f52",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "title-490ca920-a936-11f0-8e6c-bfacf3626f52",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "quantity",
                                            "formula": "",
                                            "virtual": false,
                                            "avatar_id": "e2af43f0-a920-11f0-9254-7577ead3d7d0",
                                            "calc_mode": "direct",
                                            "data_type": "integer",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "sum",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "",
                                            "quickFormula": true,
                                            "autoaggregated": false,
                                            "lock_aggregation": false,
                                            "initial_data_type": "integer",
                                            "aggregation_locked": false,
                                            "has_auto_aggregation": false
                                        },
                                        "action": "add_field"
                                    },
                                    {
                                        "field": {
                                            "cast": "float",
                                            "guid": "ac54f630-a937-11f0-8aa3-23a8fa7b662b",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "title-ac54f630-a937-11f0-8aa3-23a8fa7b662b",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "total_price",
                                            "formula": "",
                                            "virtual": false,
                                            "avatar_id": "e2af43f0-a920-11f0-9254-7577ead3d7d0",
                                            "calc_mode": "direct",
                                            "data_type": "float",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "sum",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "",
                                            "quickFormula": true,
                                            "autoaggregated": false,
                                            "lock_aggregation": false,
                                            "initial_data_type": "float",
                                            "aggregation_locked": false,
                                            "has_auto_aggregation": false
                                        },
                                        "action": "add_field"
                                    },
                                    {
                                        "field": {
                                            "cast": "float",
                                            "guid": "a38c1f10-a937-11f0-8aa3-23a8fa7b662b",
                                            "type": "DIMENSION",
                                            "local": true,
                                            "title": "title-a38c1f10-a937-11f0-8aa3-23a8fa7b662b",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "FDIV_SAFE([discount_per_item],[price_per_item],0)",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "float",
                                            "datasetId": "6",
                                            "fakeTitle": "%_discount",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "FDIV_SAFE([discount_per_item_7maq],[price_per_item_3dwq],0)",
                                            "quickFormula": true,
                                            "originalTitle": "%_discount",
                                            "autoaggregated": false,
                                            "lock_aggregation": false,
                                            "initial_data_type": "float",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": false
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    }
                                ],
                                "version": "14",
                                "segments": [],
                                "tooltips": [],
                                "datasetsIds": [
                                    "6"
                                ],
                                "hierarchies": [],
                                "colorsConfig": {},
                                "shapesConfig": {},
                                "extraSettings": {},
                                "visualization": {
                                    "id": "scatter",
                                    "name": "label_visualization-scatter",
                                    "type": "line",
                                    "allowSort": true,
                                    "iconProps": {
                                        "id": "visScatter",
                                        "width": "24"
                                    },
                                    "allowColors": true,
                                    "allowShapes": true,
                                    "allowFilters": true,
                                    "placeholders": [
                                        {
                                            "id": "x",
                                            "type": "x",
                                            "items": [
                                                {
                                                    "id": "dimension-1",
                                                    "cast": "float",
                                                    "guid": "a38c1f10-a937-11f0-8aa3-23a8fa7b662b",
                                                    "type": "DIMENSION",
                                                    "local": true,
                                                    "title": "title-a38c1f10-a937-11f0-8aa3-23a8fa7b662b",
                                                    "valid": true,
                                                    "hidden": false,
                                                    "source": "",
                                                    "formula": "FDIV_SAFE([discount_per_item],[price_per_item],0)",
                                                    "virtual": false,
                                                    "avatar_id": null,
                                                    "calc_mode": "formula",
                                                    "data_type": "float",
                                                    "datasetId": "6",
                                                    "fakeTitle": "%_discount",
                                                    "formatting": {
                                                        "format": "number",
                                                        "prefix": "",
                                                        "postfix": "",
                                                        "labelMode": "absolute",
                                                        "precision": 2,
                                                        "showRankDelimiter": true
                                                    },
                                                    "managed_by": "user",
                                                    "aggregation": "none",
                                                    "datasetName": "Данные о продажах",
                                                    "description": "",
                                                    "ui_settings": "",
                                                    "guid_formula": "FDIV_SAFE([discount_per_item_7maq],[price_per_item_3dwq],0)",
                                                    "quickFormula": true,
                                                    "default_value": null,
                                                    "hideLabelMode": "show",
                                                    "originalTitle": "%_discount",
                                                    "autoaggregated": false,
                                                    "lock_aggregation": false,
                                                    "value_constraint": null,
                                                    "initial_data_type": "float",
                                                    "aggregation_locked": true,
                                                    "has_auto_aggregation": false
                                                }
                                            ],
                                            "title": "section_x",
                                            "capacity": 1,
                                            "required": true,
                                            "settings": {
                                                "grid": "on",
                                                "type": "linear",
                                                "scale": "auto",
                                                "title": "off",
                                                "gridStep": "auto",
                                                "holidays": "off",
                                                "hideLabels": "no",
                                                "labelsView": "auto",
                                                "scaleValue": "min-max",
                                                "titleValue": "",
                                                "axisModeMap": {
                                                    "a38c1f10-a937-11f0-8aa3-23a8fa7b662b": "continuous"
                                                },
                                                "gridStepValue": 50,
                                                "axisFormatMode": "auto",
                                                "axisVisibility": "show",
                                                "axisLabelFormating": {},
                                                "axisLabelDateFormat": "DD.MM.YYYY"
                                            },
                                            "iconProps": {},
                                            "allowedTypes": {},
                                            "allowedDataTypes": {}
                                        },
                                        {
                                            "id": "y",
                                            "type": "y",
                                            "items": [
                                                {
                                                    "id": "measure-0",
                                                    "cast": "float",
                                                    "guid": "ac54f630-a937-11f0-8aa3-23a8fa7b662b",
                                                    "type": "MEASURE",
                                                    "local": true,
                                                    "title": "title-ac54f630-a937-11f0-8aa3-23a8fa7b662b",
                                                    "valid": true,
                                                    "hidden": false,
                                                    "source": "total_price",
                                                    "formula": "",
                                                    "virtual": false,
                                                    "avatar_id": "e2af43f0-a920-11f0-9254-7577ead3d7d0",
                                                    "calc_mode": "direct",
                                                    "data_type": "float",
                                                    "datasetId": "6",
                                                    "fakeTitle": "total_price",
                                                    "formatting": {
                                                        "format": "number",
                                                        "prefix": "",
                                                        "postfix": "",
                                                        "labelMode": "absolute",
                                                        "precision": 2,
                                                        "showRankDelimiter": true
                                                    },
                                                    "managed_by": "user",
                                                    "aggregation": "sum",
                                                    "datasetName": "Данные о продажах",
                                                    "description": "",
                                                    "ui_settings": "",
                                                    "guid_formula": "",
                                                    "quickFormula": true,
                                                    "default_value": null,
                                                    "hideLabelMode": "show",
                                                    "originalTitle": "total_price",
                                                    "autoaggregated": false,
                                                    "lock_aggregation": false,
                                                    "value_constraint": null,
                                                    "initial_data_type": "float",
                                                    "aggregation_locked": false,
                                                    "has_auto_aggregation": false
                                                }
                                            ],
                                            "title": "section_y",
                                            "capacity": 1,
                                            "required": true,
                                            "settings": {
                                                "grid": "on",
                                                "type": "linear",
                                                "scale": "auto",
                                                "title": "off",
                                                "gridStep": "auto",
                                                "hideLabels": "no",
                                                "labelsView": "auto",
                                                "scaleValue": "min-max",
                                                "titleValue": "",
                                                "axisModeMap": {
                                                    "ac54f630-a937-11f0-8aa3-23a8fa7b662b": "continuous"
                                                },
                                                "gridStepValue": 50,
                                                "axisFormatMode": "auto",
                                                "axisVisibility": "show",
                                                "axisLabelFormating": {},
                                                "axisLabelDateFormat": "DD.MM.YYYY"
                                            },
                                            "iconProps": {},
                                            "allowedTypes": {},
                                            "allowedDataTypes": {},
                                            "allowedFinalTypes": {}
                                        },
                                        {
                                            "id": "points",
                                            "type": "points",
                                            "items": [],
                                            "title": "section_points",
                                            "capacity": 1,
                                            "settings": {},
                                            "iconProps": {},
                                            "allowedTypes": {},
                                            "allowedDataTypes": {}
                                        },
                                        {
                                            "id": "size",
                                            "type": "measures",
                                            "items": [
                                                {
                                                    "id": "measure-2",
                                                    "cast": "integer",
                                                    "guid": "490ca920-a936-11f0-8e6c-bfacf3626f52",
                                                    "type": "MEASURE",
                                                    "local": true,
                                                    "title": "title-490ca920-a936-11f0-8e6c-bfacf3626f52",
                                                    "valid": true,
                                                    "hidden": false,
                                                    "source": "quantity",
                                                    "formula": "",
                                                    "virtual": false,
                                                    "avatar_id": "e2af43f0-a920-11f0-9254-7577ead3d7d0",
                                                    "calc_mode": "direct",
                                                    "data_type": "integer",
                                                    "datasetId": "6",
                                                    "fakeTitle": "quantity",
                                                    "formatting": {
                                                        "format": "number",
                                                        "prefix": "",
                                                        "postfix": "",
                                                        "labelMode": "absolute",
                                                        "precision": 0,
                                                        "showRankDelimiter": true
                                                    },
                                                    "managed_by": "user",
                                                    "aggregation": "sum",
                                                    "datasetName": "Данные о продажах",
                                                    "description": "",
                                                    "ui_settings": "",
                                                    "guid_formula": "",
                                                    "quickFormula": true,
                                                    "default_value": null,
                                                    "hideLabelMode": "show",
                                                    "originalTitle": "quantity",
                                                    "autoaggregated": false,
                                                    "lock_aggregation": false,
                                                    "value_constraint": null,
                                                    "initial_data_type": "integer",
                                                    "aggregation_locked": false,
                                                    "has_auto_aggregation": false
                                                }
                                            ],
                                            "title": "section_points_size",
                                            "capacity": 1,
                                            "settings": {
                                                "axisModeMap": {
                                                    "490ca920-a936-11f0-8e6c-bfacf3626f52": "continuous"
                                                }
                                            },
                                            "iconProps": {},
                                            "allowedTypes": {},
                                            "allowedDataTypes": {},
                                            "allowedFinalTypes": {}
                                        }
                                    ],
                                    "shapesCapacity": 1,
                                    "allowLayerFilters": false
                                },
                                "geopointsConfig": {
                                    "radius": 4,
                                    "maxRadius": 10,
                                    "minRadius": 0.5
                                },
                                "datasetsPartialFields": [
                                    [
                                        {
                                            "guid": "ac54f630-a937-11f0-8aa3-23a8fa7b662b",
                                            "title": "title-ac54f630-a937-11f0-8aa3-23a8fa7b662b",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "a38c1f10-a937-11f0-8aa3-23a8fa7b662b",
                                            "title": "title-a38c1f10-a937-11f0-8aa3-23a8fa7b662b",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "490ca920-a936-11f0-8e6c-bfacf3626f52",
                                            "title": "title-490ca920-a936-11f0-8e6c-bfacf3626f52",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "f828f540-a935-11f0-976d-099c0b05b9ec",
                                            "title": "%_discount",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "584ad600-a92c-11f0-976d-099c0b05b9ec",
                                            "title": "scale_value",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "scale",
                                            "title": "scale",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "660eb030-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_month",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "d02fc430-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_week",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "1cf44850-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_hour",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "3352b650-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_quarter",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "268ce800-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_year",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "087e5b50-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_date",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "id_scne",
                                            "title": "id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "client_id_lbc6",
                                            "title": "client_id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "gender_fzxw",
                                            "title": "gender",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "product_id_ey10",
                                            "title": "product_id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "quantity_k4iu",
                                            "title": "quantity",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "price_per_item_3dwq",
                                            "title": "price_per_item",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "discount_per_item_7maq",
                                            "title": "discount_per_item",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "total_price_1u2g",
                                            "title": "total_price",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "purchase_datetime_pvoa",
                                            "title": "purchase_datetime",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "461ec3e0-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_datedate",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "created_at_s6qq",
                                            "title": "created_at",
                                            "calc_mode": "direct"
                                        }
                                    ]
                                ]
                            }
                        },
                        "name": "Общие продажи и тренды - Точечная. Корреляция скидок и выручки",
                        "type": "graph_wizard_node",
                        "annotation": {
                            "description": ""
                        }
                    }
                },
                "14": {
                    "widget": {
                        "data": {
                            "shared": {
                                "sort": [],
                                "type": "datalens",
                                "links": [],
                                "colors": [],
                                "labels": [],
                                "shapes": [],
                                "filters": [],
                                "updates": [
                                    {
                                        "field": {
                                            "cast": "float",
                                            "guid": "56067630-a92a-11f0-bccd-457b361f4ff7",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "avg_cheque_u",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "SUM_IF([total_price], [purchase_datetime] >= [start_date] AND [purchase_datedate] <= [end_date])/COUNTD_IF([client_id], [purchase_datetime] >= [start_date] AND [purchase_datedate] <= [end_date])",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "float",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "SUM_IF([total_price_1u2g], [purchase_datetime_pvoa] >= [start_date] AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= [end_date])/COUNTD_IF([client_id_lbc6], [purchase_datetime_pvoa] >= [start_date] AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= [end_date])",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "float",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    }
                                ],
                                "version": "14",
                                "segments": [],
                                "tooltips": [],
                                "datasetsIds": [
                                    "6"
                                ],
                                "hierarchies": [],
                                "colorsConfig": {},
                                "shapesConfig": {},
                                "extraSettings": {
                                    "feed": "",
                                    "title": "Общие продажи и тренды - KPI. Общая выручка",
                                    "stacking": "on",
                                    "zoomMode": "auto",
                                    "titleMode": "hide",
                                    "legendMode": "show",
                                    "tooltipSum": "on",
                                    "mapCenterMode": "auto",
                                    "metricFontSize": "m",
                                    "metricFontColor": "#1F68A9",
                                    "pivotInlineSort": "on",
                                    "navigatorSettings": {
                                        "selectedLines": [],
                                        "isNavigatorAvailable": false
                                    },
                                    "indicatorTitleMode": "hide",
                                    "metricFontColorIndex": 10
                                },
                                "visualization": {
                                    "id": "metric",
                                    "name": "label_visualization-metric",
                                    "type": "metric",
                                    "allowSort": false,
                                    "iconProps": {
                                        "id": "visMetric",
                                        "width": "24"
                                    },
                                    "allowLabels": false,
                                    "allowFilters": true,
                                    "placeholders": [
                                        {
                                            "id": "measures",
                                            "type": "measures",
                                            "items": [
                                                {
                                                    "id": "measure-0",
                                                    "cast": "float",
                                                    "guid": "56067630-a92a-11f0-bccd-457b361f4ff7",
                                                    "type": "MEASURE",
                                                    "local": true,
                                                    "title": "avg_cheque_u",
                                                    "valid": true,
                                                    "hidden": false,
                                                    "source": "",
                                                    "formula": "SUM_IF([total_price], [purchase_datetime] >= [start_date] AND [purchase_datedate] <= [end_date])/COUNTD_IF([client_id], [purchase_datetime] >= [start_date] AND [purchase_datedate] <= [end_date])",
                                                    "virtual": false,
                                                    "avatar_id": null,
                                                    "calc_mode": "formula",
                                                    "data_type": "float",
                                                    "datasetId": "6",
                                                    "formatting": {
                                                        "format": "number",
                                                        "prefix": "",
                                                        "postfix": "",
                                                        "labelMode": "absolute",
                                                        "precision": 0,
                                                        "showRankDelimiter": true
                                                    },
                                                    "managed_by": "user",
                                                    "aggregation": "none",
                                                    "datasetName": "Данные о продажах",
                                                    "description": "",
                                                    "ui_settings": "",
                                                    "guid_formula": "SUM_IF([total_price_1u2g], [purchase_datetime_pvoa] >= [start_date] AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= [end_date])/COUNTD_IF([client_id_lbc6], [purchase_datetime_pvoa] >= [start_date] AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= [end_date])",
                                                    "default_value": null,
                                                    "hideLabelMode": "show",
                                                    "autoaggregated": true,
                                                    "lock_aggregation": false,
                                                    "value_constraint": null,
                                                    "initial_data_type": "float",
                                                    "aggregation_locked": true,
                                                    "has_auto_aggregation": true
                                                }
                                            ],
                                            "title": "section_measure",
                                            "capacity": 1,
                                            "required": true,
                                            "settings": {},
                                            "iconProps": {},
                                            "allowedTypes": {},
                                            "allowedDataTypes": {},
                                            "allowedFinalTypes": {}
                                        }
                                    ],
                                    "allowLayerFilters": false
                                },
                                "geopointsConfig": {},
                                "datasetsPartialFields": [
                                    [
                                        {
                                            "guid": "56067630-a92a-11f0-bccd-457b361f4ff7",
                                            "title": "avg_cheque_u",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "e3a1cfe0-aa55-11f0-8395-f32b2462dd84",
                                            "title": "Фильтр даты",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "end_date",
                                            "title": "end_date",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "start_date",
                                            "title": "start_date",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "f828f540-a935-11f0-976d-099c0b05b9ec",
                                            "title": "%_discount",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "584ad600-a92c-11f0-976d-099c0b05b9ec",
                                            "title": "scale_value",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "scale",
                                            "title": "scale",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "660eb030-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_month",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "d02fc430-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_week",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "1cf44850-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_hour",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "3352b650-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_quarter",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "268ce800-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_year",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "087e5b50-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_date",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "id_scne",
                                            "title": "id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "client_id_lbc6",
                                            "title": "client_id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "gender_fzxw",
                                            "title": "gender",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "product_id_ey10",
                                            "title": "product_id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "quantity_k4iu",
                                            "title": "quantity",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "price_per_item_3dwq",
                                            "title": "price_per_item",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "discount_per_item_7maq",
                                            "title": "discount_per_item",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "total_price_1u2g",
                                            "title": "total_price",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "purchase_datetime_pvoa",
                                            "title": "purchase_datetime",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "461ec3e0-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_datedate",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "created_at_s6qq",
                                            "title": "created_at",
                                            "calc_mode": "direct"
                                        }
                                    ]
                                ]
                            }
                        },
                        "name": "Общие продажи и тренды - KPI. Средний чек покупателя",
                        "type": "metric_wizard_node",
                        "annotation": {
                            "description": ""
                        }
                    }
                },
                "15": {
                    "widget": {
                        "data": {
                            "shared": {
                                "sort": [],
                                "type": "datalens",
                                "links": [],
                                "colors": [],
                                "labels": [],
                                "shapes": [],
                                "filters": [],
                                "updates": [
                                    {
                                        "field": {
                                            "cast": "float",
                                            "guid": "95310eb0-a9cf-11f0-ae84-a9265cfd563e",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "title-95310eb0-a9cf-11f0-ae84-a9265cfd563e",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "total_price",
                                            "formula": "",
                                            "virtual": false,
                                            "avatar_id": "e2af43f0-a920-11f0-9254-7577ead3d7d0",
                                            "calc_mode": "direct",
                                            "data_type": "float",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "sum",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "",
                                            "quickFormula": true,
                                            "autoaggregated": false,
                                            "lock_aggregation": false,
                                            "initial_data_type": "float",
                                            "aggregation_locked": false,
                                            "has_auto_aggregation": false
                                        },
                                        "action": "add_field"
                                    },
                                    {
                                        "field": {
                                            "cast": "integer",
                                            "guid": "9871bac0-a9cf-11f0-ae84-a9265cfd563e",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "title-9871bac0-a9cf-11f0-ae84-a9265cfd563e",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "id",
                                            "formula": "",
                                            "virtual": false,
                                            "avatar_id": "e2af43f0-a920-11f0-9254-7577ead3d7d0",
                                            "calc_mode": "direct",
                                            "data_type": "integer",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "count",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "",
                                            "quickFormula": true,
                                            "autoaggregated": false,
                                            "lock_aggregation": false,
                                            "initial_data_type": "integer",
                                            "aggregation_locked": false,
                                            "has_auto_aggregation": false
                                        },
                                        "action": "add_field"
                                    },
                                    {
                                        "field": {
                                            "cast": "float",
                                            "guid": "a8d151a0-a9cf-11f0-ae84-a9265cfd563e",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "avg_cheque",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "SUM([total_price])/COUNT([id])",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "float",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "SUM([total_price_1u2g])/COUNT([id_scne])",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "float",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field"
                                    },
                                    {
                                        "field": {
                                            "cast": "float",
                                            "guid": "cd3655e0-a9cf-11f0-ae84-a9265cfd563e",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "avg_cheque_u",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "SUM([total_price])/COUNTD([client_id])",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "float",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "SUM([total_price_1u2g])/COUNTD([client_id_lbc6])",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "float",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field"
                                    },
                                    {
                                        "field": {
                                            "cast": "integer",
                                            "guid": "0fe1e6c0-a9d0-11f0-ae84-a9265cfd563e",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "title-0fe1e6c0-a9d0-11f0-ae84-a9265cfd563e",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "quantity",
                                            "formula": "",
                                            "virtual": false,
                                            "avatar_id": "e2af43f0-a920-11f0-9254-7577ead3d7d0",
                                            "calc_mode": "direct",
                                            "data_type": "integer",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "sum",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "",
                                            "quickFormula": true,
                                            "autoaggregated": false,
                                            "lock_aggregation": false,
                                            "initial_data_type": "integer",
                                            "aggregation_locked": false,
                                            "has_auto_aggregation": false
                                        },
                                        "action": "add_field"
                                    },
                                    {
                                        "field": {
                                            "cast": "tree_str",
                                            "guid": "486bc740-a9d0-11f0-ae84-a9265cfd563e",
                                            "type": "DIMENSION",
                                            "local": true,
                                            "title": "Tree",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "TREE(ARRAY([purchase_quarter], [purchase_month], [purchase_week], STR([purchase_datedate]), [purchase_hour]))",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "tree_str",
                                            "datasetId": "6",
                                            "fakeTitle": "Период",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "TREE(ARRAY([3352b650-a928-11f0-976d-099c0b05b9ec], [660eb030-a928-11f0-976d-099c0b05b9ec], [d02fc430-a929-11f0-976d-099c0b05b9ec], STR([461ec3e0-a929-11f0-976d-099c0b05b9ec]), [1cf44850-a929-11f0-976d-099c0b05b9ec]))",
                                            "autoaggregated": false,
                                            "lock_aggregation": false,
                                            "initial_data_type": "tree_str",
                                            "aggregation_locked": true,
                                            "backgroundSettings": {
                                                "enabled": false,
                                                "settings": {
                                                    "isContinuous": false,
                                                    "paletteState": {
                                                        "palette": "",
                                                        "mountedColors": {}
                                                    },
                                                    "gradientState": {}
                                                },
                                                "settingsId": "4dba2830-a9d1-11f0-8404-ed53d6a506c7",
                                                "colorFieldGuid": "486bc740-a9d0-11f0-ae84-a9265cfd563e"
                                            },
                                            "has_auto_aggregation": false
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    }
                                ],
                                "version": "14",
                                "segments": [],
                                "tooltips": [],
                                "datasetsIds": [
                                    "6"
                                ],
                                "hierarchies": [
                                    {
                                        "id": "inserted-1760536914762",
                                        "guid": "f52ab7e0-a9ce-11f0-ae84-a9265cfd563e",
                                        "type": "PSEUDO",
                                        "title": "Новая иерархия",
                                        "valid": true,
                                        "fields": [
                                            {
                                                "id": "dimension-13",
                                                "cast": "string",
                                                "guid": "268ce800-a928-11f0-976d-099c0b05b9ec",
                                                "type": "DIMENSION",
                                                "title": "purchase_year",
                                                "valid": true,
                                                "hidden": false,
                                                "source": "",
                                                "formula": "STR(YEAR([purchase_datetime]))",
                                                "virtual": false,
                                                "calc_mode": "formula",
                                                "data_type": "string",
                                                "datasetId": "6",
                                                "managed_by": "user",
                                                "aggregation": "none",
                                                "datasetName": "Данные о продажах",
                                                "description": "",
                                                "ui_settings": "",
                                                "guid_formula": "STR(YEAR([purchase_datetime_pvoa]))",
                                                "autoaggregated": false,
                                                "lock_aggregation": false,
                                                "initial_data_type": "string",
                                                "aggregation_locked": true,
                                                "has_auto_aggregation": false
                                            },
                                            {
                                                "id": "dimension-12",
                                                "cast": "string",
                                                "guid": "3352b650-a928-11f0-976d-099c0b05b9ec",
                                                "type": "DIMENSION",
                                                "title": "purchase_quarter",
                                                "valid": true,
                                                "hidden": false,
                                                "source": "",
                                                "formula": "STR(YEAR([purchase_datetime])) + '-Q' + STR(QUARTER([purchase_datetime]))",
                                                "virtual": false,
                                                "calc_mode": "formula",
                                                "data_type": "string",
                                                "datasetId": "6",
                                                "managed_by": "user",
                                                "aggregation": "none",
                                                "datasetName": "Данные о продажах",
                                                "description": "",
                                                "ui_settings": "",
                                                "guid_formula": "STR(YEAR([purchase_datetime_pvoa])) + '-Q' + STR(QUARTER([purchase_datetime_pvoa]))",
                                                "autoaggregated": false,
                                                "lock_aggregation": false,
                                                "initial_data_type": "string",
                                                "aggregation_locked": true,
                                                "has_auto_aggregation": false
                                            },
                                            {
                                                "id": "dimension-9",
                                                "cast": "string",
                                                "guid": "660eb030-a928-11f0-976d-099c0b05b9ec",
                                                "type": "DIMENSION",
                                                "title": "purchase_month",
                                                "valid": true,
                                                "hidden": false,
                                                "source": "",
                                                "formula": "IF MONTH([purchase_datetime]) <= 9\r\nTHEN\r\n    [purchase_year] + '-0' + STR(MONTH([purchase_datetime]))\r\nELSE\r\n    [purchase_year] + '-' + STR(MONTH([purchase_datetime]))\r\nEND",
                                                "virtual": false,
                                                "calc_mode": "formula",
                                                "data_type": "string",
                                                "datasetId": "6",
                                                "managed_by": "user",
                                                "aggregation": "none",
                                                "datasetName": "Данные о продажах",
                                                "description": "",
                                                "ui_settings": "",
                                                "guid_formula": "IF MONTH([purchase_datetime_pvoa]) <= 9\r\nTHEN\r\n    [268ce800-a928-11f0-976d-099c0b05b9ec] + '-0' + STR(MONTH([purchase_datetime_pvoa]))\r\nELSE\r\n    [268ce800-a928-11f0-976d-099c0b05b9ec] + '-' + STR(MONTH([purchase_datetime_pvoa]))\r\nEND",
                                                "autoaggregated": false,
                                                "lock_aggregation": false,
                                                "initial_data_type": "string",
                                                "aggregation_locked": true,
                                                "has_auto_aggregation": false
                                            },
                                            {
                                                "id": "dimension-10",
                                                "cast": "string",
                                                "guid": "d02fc430-a929-11f0-976d-099c0b05b9ec",
                                                "type": "DIMENSION",
                                                "title": "purchase_week",
                                                "valid": true,
                                                "hidden": false,
                                                "source": "",
                                                "formula": "IF WEEK([purchase_datetime]) <= 9\r\nTHEN\r\n    [purchase_year] + '-W0' + STR(WEEK([purchase_datetime]))\r\nELSE\r\n    [purchase_year] + '-W' + STR(WEEK([purchase_datetime]))\r\nEND",
                                                "virtual": false,
                                                "calc_mode": "formula",
                                                "data_type": "string",
                                                "datasetId": "6",
                                                "managed_by": "user",
                                                "aggregation": "none",
                                                "datasetName": "Данные о продажах",
                                                "description": "",
                                                "ui_settings": "",
                                                "guid_formula": "IF WEEK([purchase_datetime_pvoa]) <= 9\r\nTHEN\r\n    [268ce800-a928-11f0-976d-099c0b05b9ec] + '-W0' + STR(WEEK([purchase_datetime_pvoa]))\r\nELSE\r\n    [268ce800-a928-11f0-976d-099c0b05b9ec] + '-W' + STR(WEEK([purchase_datetime_pvoa]))\r\nEND",
                                                "autoaggregated": false,
                                                "lock_aggregation": false,
                                                "initial_data_type": "string",
                                                "aggregation_locked": true,
                                                "has_auto_aggregation": false
                                            },
                                            {
                                                "id": "dimension-14",
                                                "cast": "string",
                                                "guid": "087e5b50-a928-11f0-976d-099c0b05b9ec",
                                                "type": "DIMENSION",
                                                "title": "purchase_date",
                                                "valid": true,
                                                "hidden": false,
                                                "source": "",
                                                "formula": "STR(DATE([purchase_datetime]))",
                                                "virtual": false,
                                                "calc_mode": "formula",
                                                "data_type": "string",
                                                "datasetId": "6",
                                                "managed_by": "user",
                                                "aggregation": "none",
                                                "datasetName": "Данные о продажах",
                                                "description": "",
                                                "ui_settings": "",
                                                "guid_formula": "STR(DATE([purchase_datetime_pvoa]))",
                                                "autoaggregated": false,
                                                "lock_aggregation": false,
                                                "initial_data_type": "string",
                                                "aggregation_locked": true,
                                                "has_auto_aggregation": false
                                            },
                                            {
                                                "id": "dimension-11",
                                                "cast": "string",
                                                "guid": "1cf44850-a929-11f0-976d-099c0b05b9ec",
                                                "type": "DIMENSION",
                                                "title": "purchase_hour",
                                                "valid": true,
                                                "hidden": false,
                                                "source": "",
                                                "formula": "IF HOUR([purchase_datetime]) <= 9\r\nTHEN\r\n    '0' + STR(HOUR([purchase_datetime]))\r\nELSE\r\n    STR(HOUR([purchase_datetime]))\r\nEND",
                                                "virtual": false,
                                                "calc_mode": "formula",
                                                "data_type": "string",
                                                "datasetId": "6",
                                                "managed_by": "user",
                                                "aggregation": "none",
                                                "datasetName": "Данные о продажах",
                                                "description": "",
                                                "ui_settings": "",
                                                "guid_formula": "IF HOUR([purchase_datetime_pvoa]) <= 9\r\nTHEN\r\n    '0' + STR(HOUR([purchase_datetime_pvoa]))\r\nELSE\r\n    STR(HOUR([purchase_datetime_pvoa]))\r\nEND",
                                                "autoaggregated": false,
                                                "lock_aggregation": false,
                                                "initial_data_type": "string",
                                                "aggregation_locked": true,
                                                "has_auto_aggregation": false
                                            }
                                        ],
                                        "className": "item dimension-item",
                                        "data_type": "hierarchy",
                                        "undragable": false
                                    }
                                ],
                                "colorsConfig": {},
                                "shapesConfig": {},
                                "extraSettings": {
                                    "limit": 100,
                                    "totals": "off",
                                    "pagination": "off"
                                },
                                "visualization": {
                                    "id": "flatTable",
                                    "name": "label_visualization-flat-table",
                                    "type": "table",
                                    "allowSort": true,
                                    "iconProps": {
                                        "id": "visFlatTable",
                                        "width": "24"
                                    },
                                    "allowColors": true,
                                    "allowFilters": true,
                                    "placeholders": [
                                        {
                                            "id": "flat-table-columns",
                                            "type": "flat-table-columns",
                                            "items": [
                                                {
                                                    "id": "dimension-0",
                                                    "cast": "tree_str",
                                                    "guid": "486bc740-a9d0-11f0-ae84-a9265cfd563e",
                                                    "type": "DIMENSION",
                                                    "local": true,
                                                    "title": "Tree",
                                                    "valid": true,
                                                    "hidden": false,
                                                    "source": "",
                                                    "formula": "TREE(ARRAY([purchase_quarter], [purchase_month], [purchase_week], STR([purchase_datedate]), [purchase_hour]))",
                                                    "virtual": false,
                                                    "avatar_id": null,
                                                    "calc_mode": "formula",
                                                    "data_type": "tree_str",
                                                    "datasetId": "6",
                                                    "fakeTitle": "Период",
                                                    "formatting": {
                                                        "format": "number",
                                                        "prefix": "",
                                                        "postfix": "",
                                                        "labelMode": "absolute",
                                                        "precision": 0,
                                                        "showRankDelimiter": true
                                                    },
                                                    "managed_by": "user",
                                                    "aggregation": "none",
                                                    "datasetName": "Данные о продажах",
                                                    "description": "",
                                                    "ui_settings": "",
                                                    "guid_formula": "TREE(ARRAY([3352b650-a928-11f0-976d-099c0b05b9ec], [660eb030-a928-11f0-976d-099c0b05b9ec], [d02fc430-a929-11f0-976d-099c0b05b9ec], STR([461ec3e0-a929-11f0-976d-099c0b05b9ec]), [1cf44850-a929-11f0-976d-099c0b05b9ec]))",
                                                    "default_value": null,
                                                    "hideLabelMode": "show",
                                                    "autoaggregated": false,
                                                    "lock_aggregation": false,
                                                    "value_constraint": null,
                                                    "initial_data_type": "tree_str",
                                                    "aggregation_locked": true,
                                                    "backgroundSettings": {
                                                        "enabled": false,
                                                        "settings": {
                                                            "isContinuous": false,
                                                            "paletteState": {
                                                                "palette": "",
                                                                "mountedColors": {}
                                                            },
                                                            "gradientState": {}
                                                        },
                                                        "settingsId": "4dba2830-a9d1-11f0-8404-ed53d6a506c7",
                                                        "colorFieldGuid": "486bc740-a9d0-11f0-ae84-a9265cfd563e"
                                                    },
                                                    "has_auto_aggregation": false
                                                },
                                                {
                                                    "id": "measure-5",
                                                    "cast": "float",
                                                    "guid": "95310eb0-a9cf-11f0-ae84-a9265cfd563e",
                                                    "type": "MEASURE",
                                                    "local": true,
                                                    "title": "title-95310eb0-a9cf-11f0-ae84-a9265cfd563e",
                                                    "valid": true,
                                                    "hidden": false,
                                                    "source": "total_price",
                                                    "formula": "",
                                                    "virtual": false,
                                                    "avatar_id": "e2af43f0-a920-11f0-9254-7577ead3d7d0",
                                                    "calc_mode": "direct",
                                                    "data_type": "float",
                                                    "datasetId": "6",
                                                    "fakeTitle": "Выручка",
                                                    "formatting": {
                                                        "format": "number",
                                                        "prefix": "",
                                                        "postfix": "",
                                                        "labelMode": "absolute",
                                                        "precision": 0,
                                                        "showRankDelimiter": true
                                                    },
                                                    "managed_by": "user",
                                                    "aggregation": "sum",
                                                    "datasetName": "Данные о продажах",
                                                    "description": "",
                                                    "ui_settings": "",
                                                    "barsSettings": {
                                                        "align": "default",
                                                        "scale": {
                                                            "mode": "auto"
                                                        },
                                                        "enabled": false,
                                                        "showLabels": true,
                                                        "colorSettings": {
                                                            "settings": {
                                                                "palette": "classic20",
                                                                "colorIndex": 0
                                                            },
                                                            "colorType": "one-color"
                                                        },
                                                        "showBarsInTotals": false
                                                    },
                                                    "guid_formula": "",
                                                    "quickFormula": true,
                                                    "default_value": null,
                                                    "hideLabelMode": "show",
                                                    "originalTitle": "total_price",
                                                    "autoaggregated": false,
                                                    "lock_aggregation": false,
                                                    "value_constraint": null,
                                                    "initial_data_type": "float",
                                                    "aggregation_locked": false,
                                                    "backgroundSettings": {
                                                        "enabled": false,
                                                        "settings": {
                                                            "isContinuous": true,
                                                            "paletteState": {},
                                                            "gradientState": {
                                                                "reversed": false,
                                                                "gradientMode": "2-point",
                                                                "thresholdsMode": "auto",
                                                                "gradientPalette": "blue"
                                                            }
                                                        },
                                                        "settingsId": "9327d130-a9cf-11f0-ae84-a9265cfd563e",
                                                        "colorFieldGuid": "95310eb0-a9cf-11f0-ae84-a9265cfd563e"
                                                    },
                                                    "has_auto_aggregation": false
                                                },
                                                {
                                                    "id": "measure-4",
                                                    "cast": "integer",
                                                    "guid": "9871bac0-a9cf-11f0-ae84-a9265cfd563e",
                                                    "type": "MEASURE",
                                                    "local": true,
                                                    "title": "title-9871bac0-a9cf-11f0-ae84-a9265cfd563e",
                                                    "valid": true,
                                                    "hidden": false,
                                                    "source": "id",
                                                    "formula": "",
                                                    "virtual": false,
                                                    "avatar_id": "e2af43f0-a920-11f0-9254-7577ead3d7d0",
                                                    "calc_mode": "direct",
                                                    "data_type": "integer",
                                                    "datasetId": "6",
                                                    "fakeTitle": "Количество заказов",
                                                    "formatting": {
                                                        "format": "number",
                                                        "prefix": "",
                                                        "postfix": "",
                                                        "labelMode": "absolute",
                                                        "precision": 0,
                                                        "showRankDelimiter": true
                                                    },
                                                    "managed_by": "user",
                                                    "aggregation": "count",
                                                    "datasetName": "Данные о продажах",
                                                    "description": "",
                                                    "ui_settings": "",
                                                    "barsSettings": {
                                                        "align": "default",
                                                        "scale": {
                                                            "mode": "auto"
                                                        },
                                                        "enabled": false,
                                                        "showLabels": true,
                                                        "colorSettings": {
                                                            "settings": {
                                                                "negativeColorIndex": 1,
                                                                "positiveColorIndex": 2
                                                            },
                                                            "colorType": "two-color"
                                                        },
                                                        "showBarsInTotals": false
                                                    },
                                                    "guid_formula": "",
                                                    "quickFormula": true,
                                                    "default_value": null,
                                                    "hideLabelMode": "show",
                                                    "originalTitle": "id",
                                                    "autoaggregated": false,
                                                    "lock_aggregation": false,
                                                    "value_constraint": null,
                                                    "initial_data_type": "integer",
                                                    "aggregation_locked": false,
                                                    "backgroundSettings": {
                                                        "enabled": false,
                                                        "settings": {
                                                            "isContinuous": true,
                                                            "paletteState": {},
                                                            "gradientState": {
                                                                "reversed": false,
                                                                "gradientMode": "2-point",
                                                                "thresholdsMode": "auto",
                                                                "gradientPalette": "blue"
                                                            }
                                                        },
                                                        "settingsId": "95c38ab0-a9cf-11f0-ae84-a9265cfd563e",
                                                        "colorFieldGuid": "9871bac0-a9cf-11f0-ae84-a9265cfd563e"
                                                    },
                                                    "has_auto_aggregation": false
                                                },
                                                {
                                                    "id": "measure-3",
                                                    "cast": "float",
                                                    "guid": "a8d151a0-a9cf-11f0-ae84-a9265cfd563e",
                                                    "type": "MEASURE",
                                                    "local": true,
                                                    "title": "avg_cheque",
                                                    "valid": true,
                                                    "hidden": false,
                                                    "source": "",
                                                    "formula": "SUM([total_price])/COUNT([id])",
                                                    "virtual": false,
                                                    "avatar_id": null,
                                                    "calc_mode": "formula",
                                                    "data_type": "float",
                                                    "datasetId": "6",
                                                    "fakeTitle": "Средний чек",
                                                    "formatting": {
                                                        "format": "number",
                                                        "prefix": "",
                                                        "postfix": "",
                                                        "labelMode": "absolute",
                                                        "precision": 2,
                                                        "showRankDelimiter": true
                                                    },
                                                    "managed_by": "user",
                                                    "aggregation": "none",
                                                    "datasetName": "Данные о продажах",
                                                    "description": "",
                                                    "ui_settings": "",
                                                    "barsSettings": {
                                                        "align": "default",
                                                        "scale": {
                                                            "mode": "auto"
                                                        },
                                                        "enabled": false,
                                                        "showLabels": true,
                                                        "colorSettings": {
                                                            "settings": {
                                                                "negativeColorIndex": 1,
                                                                "positiveColorIndex": 2
                                                            },
                                                            "colorType": "two-color"
                                                        },
                                                        "showBarsInTotals": false
                                                    },
                                                    "guid_formula": "SUM([total_price_1u2g])/COUNT([id_scne])",
                                                    "default_value": null,
                                                    "hideLabelMode": "show",
                                                    "autoaggregated": true,
                                                    "lock_aggregation": false,
                                                    "value_constraint": null,
                                                    "initial_data_type": "float",
                                                    "aggregation_locked": true,
                                                    "backgroundSettings": {
                                                        "enabled": false,
                                                        "settings": {
                                                            "isContinuous": true,
                                                            "paletteState": {},
                                                            "gradientState": {
                                                                "reversed": false,
                                                                "gradientMode": "2-point",
                                                                "thresholdsMode": "auto",
                                                                "gradientPalette": "blue"
                                                            }
                                                        },
                                                        "settingsId": "5b190230-a9d1-11f0-8404-ed53d6a506c7",
                                                        "colorFieldGuid": "a8d151a0-a9cf-11f0-ae84-a9265cfd563e"
                                                    },
                                                    "has_auto_aggregation": true
                                                },
                                                {
                                                    "id": "measure-2",
                                                    "cast": "float",
                                                    "guid": "cd3655e0-a9cf-11f0-ae84-a9265cfd563e",
                                                    "type": "MEASURE",
                                                    "local": true,
                                                    "title": "avg_cheque_u",
                                                    "valid": true,
                                                    "hidden": false,
                                                    "source": "",
                                                    "formula": "SUM([total_price])/COUNTD([client_id])",
                                                    "virtual": false,
                                                    "avatar_id": null,
                                                    "calc_mode": "formula",
                                                    "data_type": "float",
                                                    "datasetId": "6",
                                                    "fakeTitle": "Средний чак на пользователя",
                                                    "formatting": {
                                                        "format": "number",
                                                        "prefix": "",
                                                        "postfix": "",
                                                        "labelMode": "absolute",
                                                        "precision": 2,
                                                        "showRankDelimiter": true
                                                    },
                                                    "managed_by": "user",
                                                    "aggregation": "none",
                                                    "datasetName": "Данные о продажах",
                                                    "description": "",
                                                    "ui_settings": "",
                                                    "barsSettings": {
                                                        "align": "default",
                                                        "scale": {
                                                            "mode": "auto"
                                                        },
                                                        "enabled": false,
                                                        "showLabels": true,
                                                        "colorSettings": {
                                                            "settings": {
                                                                "negativeColorIndex": 1,
                                                                "positiveColorIndex": 2
                                                            },
                                                            "colorType": "two-color"
                                                        },
                                                        "showBarsInTotals": false
                                                    },
                                                    "guid_formula": "SUM([total_price_1u2g])/COUNTD([client_id_lbc6])",
                                                    "default_value": null,
                                                    "hideLabelMode": "show",
                                                    "autoaggregated": true,
                                                    "lock_aggregation": false,
                                                    "value_constraint": null,
                                                    "initial_data_type": "float",
                                                    "aggregation_locked": true,
                                                    "backgroundSettings": {
                                                        "enabled": false,
                                                        "settings": {
                                                            "isContinuous": true,
                                                            "paletteState": {},
                                                            "gradientState": {
                                                                "reversed": false,
                                                                "gradientMode": "2-point",
                                                                "thresholdsMode": "auto",
                                                                "gradientPalette": "blue"
                                                            }
                                                        },
                                                        "settingsId": "606535b0-a9d1-11f0-8404-ed53d6a506c7",
                                                        "colorFieldGuid": "cd3655e0-a9cf-11f0-ae84-a9265cfd563e"
                                                    },
                                                    "has_auto_aggregation": true
                                                },
                                                {
                                                    "id": "measure-1",
                                                    "cast": "integer",
                                                    "guid": "0fe1e6c0-a9d0-11f0-ae84-a9265cfd563e",
                                                    "type": "MEASURE",
                                                    "local": true,
                                                    "title": "title-0fe1e6c0-a9d0-11f0-ae84-a9265cfd563e",
                                                    "valid": true,
                                                    "hidden": false,
                                                    "source": "quantity",
                                                    "formula": "",
                                                    "virtual": false,
                                                    "avatar_id": "e2af43f0-a920-11f0-9254-7577ead3d7d0",
                                                    "calc_mode": "direct",
                                                    "data_type": "integer",
                                                    "datasetId": "6",
                                                    "fakeTitle": "Количество единиц товаров",
                                                    "formatting": {
                                                        "format": "number",
                                                        "prefix": "",
                                                        "postfix": "",
                                                        "labelMode": "absolute",
                                                        "precision": 0,
                                                        "showRankDelimiter": true
                                                    },
                                                    "managed_by": "user",
                                                    "aggregation": "sum",
                                                    "datasetName": "Данные о продажах",
                                                    "description": "",
                                                    "ui_settings": "",
                                                    "barsSettings": {
                                                        "align": "default",
                                                        "scale": {
                                                            "mode": "auto"
                                                        },
                                                        "enabled": false,
                                                        "showLabels": true,
                                                        "colorSettings": {
                                                            "settings": {
                                                                "negativeColorIndex": 1,
                                                                "positiveColorIndex": 2
                                                            },
                                                            "colorType": "two-color"
                                                        },
                                                        "showBarsInTotals": false
                                                    },
                                                    "guid_formula": "",
                                                    "quickFormula": true,
                                                    "default_value": null,
                                                    "hideLabelMode": "show",
                                                    "originalTitle": "quantity",
                                                    "autoaggregated": false,
                                                    "lock_aggregation": false,
                                                    "value_constraint": null,
                                                    "initial_data_type": "integer",
                                                    "aggregation_locked": false,
                                                    "backgroundSettings": {
                                                        "enabled": false,
                                                        "settings": {
                                                            "isContinuous": true,
                                                            "paletteState": {},
                                                            "gradientState": {
                                                                "reversed": false,
                                                                "gradientMode": "2-point",
                                                                "thresholdsMode": "auto",
                                                                "gradientPalette": "blue"
                                                            }
                                                        },
                                                        "settingsId": "0b77fcf0-a9d0-11f0-ae84-a9265cfd563e",
                                                        "colorFieldGuid": "0fe1e6c0-a9d0-11f0-ae84-a9265cfd563e"
                                                    },
                                                    "has_auto_aggregation": false
                                                }
                                            ],
                                            "title": "section_columns",
                                            "required": true,
                                            "settings": {
                                                "groupping": "on"
                                            },
                                            "iconProps": {},
                                            "allowedTypes": {}
                                        }
                                    ],
                                    "allowLayerFilters": false
                                },
                                "geopointsConfig": {},
                                "datasetsPartialFields": [
                                    [
                                        {
                                            "guid": "486bc740-a9d0-11f0-ae84-a9265cfd563e",
                                            "title": "Tree",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "0fe1e6c0-a9d0-11f0-ae84-a9265cfd563e",
                                            "title": "title-0fe1e6c0-a9d0-11f0-ae84-a9265cfd563e",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "cd3655e0-a9cf-11f0-ae84-a9265cfd563e",
                                            "title": "avg_cheque_u",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "a8d151a0-a9cf-11f0-ae84-a9265cfd563e",
                                            "title": "avg_cheque",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "9871bac0-a9cf-11f0-ae84-a9265cfd563e",
                                            "title": "title-9871bac0-a9cf-11f0-ae84-a9265cfd563e",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "95310eb0-a9cf-11f0-ae84-a9265cfd563e",
                                            "title": "title-95310eb0-a9cf-11f0-ae84-a9265cfd563e",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "f828f540-a935-11f0-976d-099c0b05b9ec",
                                            "title": "%_discount",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "584ad600-a92c-11f0-976d-099c0b05b9ec",
                                            "title": "scale_value",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "scale",
                                            "title": "scale",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "660eb030-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_month",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "d02fc430-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_week",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "1cf44850-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_hour",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "3352b650-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_quarter",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "268ce800-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_year",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "087e5b50-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_date",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "id_scne",
                                            "title": "id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "client_id_lbc6",
                                            "title": "client_id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "gender_fzxw",
                                            "title": "gender",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "product_id_ey10",
                                            "title": "product_id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "quantity_k4iu",
                                            "title": "quantity",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "price_per_item_3dwq",
                                            "title": "price_per_item",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "discount_per_item_7maq",
                                            "title": "discount_per_item",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "total_price_1u2g",
                                            "title": "total_price",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "purchase_datetime_pvoa",
                                            "title": "purchase_datetime",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "461ec3e0-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_datedate",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "created_at_s6qq",
                                            "title": "created_at",
                                            "calc_mode": "direct"
                                        }
                                    ]
                                ]
                            }
                        },
                        "name": "Общие продажи и тренды - Таблица",
                        "type": "table_wizard_node",
                        "annotation": {
                            "description": ""
                        }
                    }
                },
                "16": {
                    "widget": {
                        "data": {
                            "shared": {
                                "sort": [],
                                "type": "datalens",
                                "links": [],
                                "colors": [],
                                "labels": [],
                                "shapes": [],
                                "convert": false,
                                "filters": [
                                    {
                                        "guid": "e3a1cfe0-aa55-11f0-8395-f32b2462dd84",
                                        "type": "DIMENSION",
                                        "title": "Фильтр даты",
                                        "filter": {
                                            "value": [
                                                "true"
                                            ],
                                            "operation": {
                                                "code": "EQ"
                                            }
                                        },
                                        "calc_mode": "formula",
                                        "datasetId": "6"
                                    }
                                ],
                                "updates": [
                                    {
                                        "field": {
                                            "cast": "float",
                                            "guid": "a8d151a0-a9cf-11f0-ae84-a9265cfd563e",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "avg_cheque",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "SUM([total_price])/COUNT([id])",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "float",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "SUM([total_price_1u2g])/COUNT([id_scne])",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "float",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field"
                                    },
                                    {
                                        "field": {
                                            "cast": "float",
                                            "guid": "cd3655e0-a9cf-11f0-ae84-a9265cfd563e",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "avg_cheque_u",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "SUM([total_price])/COUNTD([client_id])",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "float",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "SUM([total_price_1u2g])/COUNTD([client_id_lbc6])",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "float",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field"
                                    },
                                    {
                                        "field": {
                                            "cast": "float",
                                            "guid": "29c12030-aa55-11f0-85d2-fd4677ac99c7",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Выручка за период",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "SUM_IF(SUM([total_price]), [purchase_datedate] >= [start_date] AND [purchase_datedate] <= [end_date])",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "float",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "SUM_IF(SUM([total_price_1u2g]), [461ec3e0-a929-11f0-976d-099c0b05b9ec] >= [start_date] AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= [end_date])",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "float",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "string",
                                            "guid": "949a5c70-aa5d-11f0-a9f1-51f661a8f18e",
                                            "type": "DIMENSION",
                                            "local": true,
                                            "title": "scale_eng",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "IF [scale] = \"День\" THEN 'day'\r\nELSEIF [scale] = \"Неделя\" THEN 'week'\r\nELSEIF [scale] = \"Месяц\" THEN 'month'\r\nELSEIF [scale] = \"Квартал\" THEN 'quarter'\r\nELSE 'year'\r\nEND",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "string",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "IF [scale] = \"День\" THEN 'day'\r\nELSEIF [scale] = \"Неделя\" THEN 'week'\r\nELSEIF [scale] = \"Месяц\" THEN 'month'\r\nELSEIF [scale] = \"Квартал\" THEN 'quarter'\r\nELSE 'year'\r\nEND",
                                            "autoaggregated": false,
                                            "lock_aggregation": false,
                                            "initial_data_type": "string",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": false
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "genericdatetime",
                                            "guid": "37122870-aa5e-11f0-a9f1-51f661a8f18e",
                                            "type": "DIMENSION",
                                            "local": true,
                                            "title": "scale_date",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "DATETRUNC([purchase_datetime], 'week')",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "genericdatetime",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "DATETRUNC([purchase_datetime_pvoa], 'week')",
                                            "autoaggregated": false,
                                            "lock_aggregation": false,
                                            "initial_data_type": "genericdatetime",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": false
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "string",
                                            "guid": "ed929d80-aa5b-11f0-a9f1-51f661a8f18e",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Выручка за прошлый период",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "INT(AT_DATE(SUM([total_price]), [purchase_datedate], DATEADD([purchase_datedate],  [scale_eng], -1)\r\n    BEFORE FILTER BY [Фильтр даты]))",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "string",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "INT(AT_DATE(SUM([total_price_1u2g]), [461ec3e0-a929-11f0-976d-099c0b05b9ec], DATEADD([461ec3e0-a929-11f0-976d-099c0b05b9ec],  [949a5c70-aa5d-11f0-a9f1-51f661a8f18e], -1)\r\n    BEFORE FILTER BY [e3a1cfe0-aa55-11f0-8395-f32b2462dd84]))",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "string",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "float",
                                            "guid": "037c05c0-aa5f-11f0-a9f1-51f661a8f18e",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "AT_DATE(SUM([total_price]), [purchase_datedate], DATEADD([purchase_datedate],  'month', -1)\r\n    ...",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "AT_DATE(SUM([total_price]), [purchase_datedate], DATEADD([purchase_datedate],  'month', -1)\r\n    BEFORE FILTER BY [Фильтр даты])",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "float",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "AT_DATE(SUM([total_price_1u2g]), [461ec3e0-a929-11f0-976d-099c0b05b9ec], DATEADD([461ec3e0-a929-11f0-976d-099c0b05b9ec],  'month', -1)\r\n    BEFORE FILTER BY [e3a1cfe0-aa55-11f0-8395-f32b2462dd84])",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "float",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field"
                                    }
                                ],
                                "version": "14",
                                "segments": [],
                                "tooltips": [],
                                "datasetsIds": [
                                    "6"
                                ],
                                "hierarchies": [
                                    {
                                        "id": "inserted-1760536914762",
                                        "guid": "f52ab7e0-a9ce-11f0-ae84-a9265cfd563e",
                                        "type": "PSEUDO",
                                        "title": "Новая иерархия",
                                        "valid": true,
                                        "fields": [
                                            {
                                                "id": "dimension-17",
                                                "cast": "string",
                                                "guid": "268ce800-a928-11f0-976d-099c0b05b9ec",
                                                "type": "DIMENSION",
                                                "title": "purchase_year",
                                                "valid": true,
                                                "hidden": false,
                                                "source": "",
                                                "formula": "STR(YEAR([purchase_datetime]))",
                                                "virtual": false,
                                                "calc_mode": "formula",
                                                "data_type": "string",
                                                "datasetId": "6",
                                                "managed_by": "user",
                                                "aggregation": "none",
                                                "datasetName": "Данные о продажах",
                                                "description": "",
                                                "ui_settings": "",
                                                "guid_formula": "STR(YEAR([purchase_datetime_pvoa]))",
                                                "autoaggregated": false,
                                                "lock_aggregation": false,
                                                "initial_data_type": "string",
                                                "aggregation_locked": true,
                                                "has_auto_aggregation": false
                                            },
                                            {
                                                "id": "dimension-16",
                                                "cast": "string",
                                                "guid": "3352b650-a928-11f0-976d-099c0b05b9ec",
                                                "type": "DIMENSION",
                                                "title": "purchase_quarter",
                                                "valid": true,
                                                "hidden": false,
                                                "source": "",
                                                "formula": "STR(YEAR([purchase_datetime])) + '-Q' + STR(QUARTER([purchase_datetime]))",
                                                "virtual": false,
                                                "calc_mode": "formula",
                                                "data_type": "string",
                                                "datasetId": "6",
                                                "managed_by": "user",
                                                "aggregation": "none",
                                                "datasetName": "Данные о продажах",
                                                "description": "",
                                                "ui_settings": "",
                                                "guid_formula": "STR(YEAR([purchase_datetime_pvoa])) + '-Q' + STR(QUARTER([purchase_datetime_pvoa]))",
                                                "autoaggregated": false,
                                                "lock_aggregation": false,
                                                "initial_data_type": "string",
                                                "aggregation_locked": true,
                                                "has_auto_aggregation": false
                                            },
                                            {
                                                "id": "dimension-13",
                                                "cast": "string",
                                                "guid": "660eb030-a928-11f0-976d-099c0b05b9ec",
                                                "type": "DIMENSION",
                                                "title": "purchase_month",
                                                "valid": true,
                                                "hidden": false,
                                                "source": "",
                                                "formula": "IF MONTH([purchase_datetime]) <= 9\r\nTHEN\r\n    [purchase_year] + '-0' + STR(MONTH([purchase_datetime]))\r\nELSE\r\n    [purchase_year] + '-' + STR(MONTH([purchase_datetime]))\r\nEND",
                                                "virtual": false,
                                                "calc_mode": "formula",
                                                "data_type": "string",
                                                "datasetId": "6",
                                                "managed_by": "user",
                                                "aggregation": "none",
                                                "datasetName": "Данные о продажах",
                                                "description": "",
                                                "ui_settings": "",
                                                "guid_formula": "IF MONTH([purchase_datetime_pvoa]) <= 9\r\nTHEN\r\n    [268ce800-a928-11f0-976d-099c0b05b9ec] + '-0' + STR(MONTH([purchase_datetime_pvoa]))\r\nELSE\r\n    [268ce800-a928-11f0-976d-099c0b05b9ec] + '-' + STR(MONTH([purchase_datetime_pvoa]))\r\nEND",
                                                "autoaggregated": false,
                                                "lock_aggregation": false,
                                                "initial_data_type": "string",
                                                "aggregation_locked": true,
                                                "has_auto_aggregation": false
                                            },
                                            {
                                                "id": "dimension-14",
                                                "cast": "string",
                                                "guid": "d02fc430-a929-11f0-976d-099c0b05b9ec",
                                                "type": "DIMENSION",
                                                "title": "purchase_week",
                                                "valid": true,
                                                "hidden": false,
                                                "source": "",
                                                "formula": "IF WEEK([purchase_datetime]) <= 9\r\nTHEN\r\n    [purchase_year] + '-W0' + STR(WEEK([purchase_datetime]))\r\nELSE\r\n    [purchase_year] + '-W' + STR(WEEK([purchase_datetime]))\r\nEND",
                                                "virtual": false,
                                                "calc_mode": "formula",
                                                "data_type": "string",
                                                "datasetId": "6",
                                                "managed_by": "user",
                                                "aggregation": "none",
                                                "datasetName": "Данные о продажах",
                                                "description": "",
                                                "ui_settings": "",
                                                "guid_formula": "IF WEEK([purchase_datetime_pvoa]) <= 9\r\nTHEN\r\n    [268ce800-a928-11f0-976d-099c0b05b9ec] + '-W0' + STR(WEEK([purchase_datetime_pvoa]))\r\nELSE\r\n    [268ce800-a928-11f0-976d-099c0b05b9ec] + '-W' + STR(WEEK([purchase_datetime_pvoa]))\r\nEND",
                                                "autoaggregated": false,
                                                "lock_aggregation": false,
                                                "initial_data_type": "string",
                                                "aggregation_locked": true,
                                                "has_auto_aggregation": false
                                            },
                                            {
                                                "id": "dimension-18",
                                                "cast": "string",
                                                "guid": "087e5b50-a928-11f0-976d-099c0b05b9ec",
                                                "type": "DIMENSION",
                                                "title": "purchase_date",
                                                "valid": true,
                                                "hidden": false,
                                                "source": "",
                                                "formula": "STR(DATE([purchase_datetime]))",
                                                "virtual": false,
                                                "calc_mode": "formula",
                                                "data_type": "string",
                                                "datasetId": "6",
                                                "managed_by": "user",
                                                "aggregation": "none",
                                                "datasetName": "Данные о продажах",
                                                "description": "",
                                                "ui_settings": "",
                                                "guid_formula": "STR(DATE([purchase_datetime_pvoa]))",
                                                "autoaggregated": false,
                                                "lock_aggregation": false,
                                                "initial_data_type": "string",
                                                "aggregation_locked": true,
                                                "has_auto_aggregation": false
                                            },
                                            {
                                                "id": "dimension-15",
                                                "cast": "string",
                                                "guid": "1cf44850-a929-11f0-976d-099c0b05b9ec",
                                                "type": "DIMENSION",
                                                "title": "purchase_hour",
                                                "valid": true,
                                                "hidden": false,
                                                "source": "",
                                                "formula": "IF HOUR([purchase_datetime]) <= 9\r\nTHEN\r\n    '0' + STR(HOUR([purchase_datetime]))\r\nELSE\r\n    STR(HOUR([purchase_datetime]))\r\nEND",
                                                "virtual": false,
                                                "calc_mode": "formula",
                                                "data_type": "string",
                                                "datasetId": "6",
                                                "managed_by": "user",
                                                "aggregation": "none",
                                                "datasetName": "Данные о продажах",
                                                "description": "",
                                                "ui_settings": "",
                                                "guid_formula": "IF HOUR([purchase_datetime_pvoa]) <= 9\r\nTHEN\r\n    '0' + STR(HOUR([purchase_datetime_pvoa]))\r\nELSE\r\n    STR(HOUR([purchase_datetime_pvoa]))\r\nEND",
                                                "autoaggregated": false,
                                                "lock_aggregation": false,
                                                "initial_data_type": "string",
                                                "aggregation_locked": true,
                                                "has_auto_aggregation": false
                                            }
                                        ],
                                        "className": "item dimension-item",
                                        "data_type": "hierarchy",
                                        "undragable": false
                                    }
                                ],
                                "colorsConfig": {},
                                "shapesConfig": {},
                                "extraSettings": {
                                    "limit": 100,
                                    "totals": "off",
                                    "pagination": "off"
                                },
                                "visualization": {
                                    "id": "flatTable",
                                    "name": "label_visualization-flat-table",
                                    "type": "table",
                                    "allowSort": true,
                                    "iconProps": {
                                        "id": "visFlatTable",
                                        "width": "24"
                                    },
                                    "allowColors": true,
                                    "allowFilters": true,
                                    "placeholders": [
                                        {
                                            "id": "flat-table-columns",
                                            "type": "flat-table-columns",
                                            "items": [
                                                {
                                                    "id": "dimension-28",
                                                    "cast": "date",
                                                    "guid": "461ec3e0-a929-11f0-976d-099c0b05b9ec",
                                                    "type": "DIMENSION",
                                                    "title": "purchase_datedate",
                                                    "valid": true,
                                                    "hidden": false,
                                                    "source": "purchase_datetime",
                                                    "formula": "",
                                                    "virtual": false,
                                                    "avatar_id": "e2af43f0-a920-11f0-9254-7577ead3d7d0",
                                                    "calc_mode": "direct",
                                                    "data_type": "date",
                                                    "datasetId": "6",
                                                    "managed_by": "user",
                                                    "aggregation": "none",
                                                    "datasetName": "Данные о продажах",
                                                    "description": "",
                                                    "ui_settings": "",
                                                    "guid_formula": "",
                                                    "autoaggregated": false,
                                                    "lock_aggregation": false,
                                                    "initial_data_type": "genericdatetime",
                                                    "aggregation_locked": false,
                                                    "has_auto_aggregation": false
                                                },
                                                {
                                                    "id": "measure-4",
                                                    "cast": "float",
                                                    "guid": "29c12030-aa55-11f0-85d2-fd4677ac99c7",
                                                    "type": "MEASURE",
                                                    "local": true,
                                                    "title": "Выручка за период",
                                                    "valid": true,
                                                    "hidden": false,
                                                    "source": "",
                                                    "formula": "SUM_IF(SUM([total_price]), [purchase_datedate] >= [start_date] AND [purchase_datedate] <= [end_date])",
                                                    "virtual": false,
                                                    "calc_mode": "formula",
                                                    "data_type": "float",
                                                    "datasetId": "6",
                                                    "managed_by": "user",
                                                    "aggregation": "none",
                                                    "datasetName": "Данные о продажах",
                                                    "description": "",
                                                    "ui_settings": "",
                                                    "guid_formula": "SUM_IF(SUM([total_price_1u2g]), [461ec3e0-a929-11f0-976d-099c0b05b9ec] >= [start_date] AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= [end_date])",
                                                    "autoaggregated": true,
                                                    "lock_aggregation": false,
                                                    "initial_data_type": "float",
                                                    "aggregation_locked": true,
                                                    "has_auto_aggregation": true
                                                },
                                                {
                                                    "id": "measure-0",
                                                    "cast": "float",
                                                    "guid": "037c05c0-aa5f-11f0-a9f1-51f661a8f18e",
                                                    "type": "MEASURE",
                                                    "local": true,
                                                    "title": "AT_DATE(SUM([total_price]), [purchase_datedate], DATEADD([purchase_datedate],  'month', -1)\r\n    ...",
                                                    "valid": true,
                                                    "hidden": false,
                                                    "source": "",
                                                    "formula": "AT_DATE(SUM([total_price]), [purchase_datedate], DATEADD([purchase_datedate],  'month', -1)\r\n    BEFORE FILTER BY [Фильтр даты])",
                                                    "virtual": false,
                                                    "grouping": "",
                                                    "calc_mode": "formula",
                                                    "data_type": "float",
                                                    "datasetId": "6",
                                                    "formatting": {
                                                        "format": "number",
                                                        "prefix": "",
                                                        "postfix": "",
                                                        "labelMode": "absolute",
                                                        "precision": 0,
                                                        "showRankDelimiter": true
                                                    },
                                                    "managed_by": "user",
                                                    "aggregation": "none",
                                                    "datasetName": "Данные о продажах",
                                                    "description": "",
                                                    "ui_settings": "",
                                                    "guid_formula": "AT_DATE(SUM([total_price_1u2g]), [461ec3e0-a929-11f0-976d-099c0b05b9ec], DATEADD([461ec3e0-a929-11f0-976d-099c0b05b9ec],  'month', -1)\r\n    BEFORE FILTER BY [e3a1cfe0-aa55-11f0-8395-f32b2462dd84])",
                                                    "quickFormula": false,
                                                    "hideLabelMode": "show",
                                                    "originalTitle": "Выручка за прошлый период",
                                                    "autoaggregated": true,
                                                    "lock_aggregation": false,
                                                    "initial_data_type": "float",
                                                    "aggregation_locked": true,
                                                    "backgroundSettings": {
                                                        "enabled": false,
                                                        "settings": {
                                                            "isContinuous": true,
                                                            "paletteState": {},
                                                            "gradientState": {
                                                                "reversed": false,
                                                                "gradientMode": "2-point",
                                                                "thresholdsMode": "auto",
                                                                "gradientPalette": "blue"
                                                            }
                                                        },
                                                        "settingsId": "f8721840-aa5e-11f0-a9f1-51f661a8f18e",
                                                        "colorFieldGuid": "29c12030-aa55-11f0-85d2-fd4677ac99c7"
                                                    },
                                                    "has_auto_aggregation": true
                                                }
                                            ],
                                            "title": "section_columns",
                                            "required": true,
                                            "settings": {
                                                "groupping": "on",
                                                "axisModeMap": {
                                                    "461ec3e0-a929-11f0-976d-099c0b05b9ec": "continuous"
                                                }
                                            },
                                            "iconProps": {},
                                            "allowedTypes": {}
                                        }
                                    ],
                                    "allowLayerFilters": false
                                },
                                "geopointsConfig": {},
                                "datasetsPartialFields": [
                                    [
                                        {
                                            "guid": "037c05c0-aa5f-11f0-a9f1-51f661a8f18e",
                                            "title": "AT_DATE(SUM([total_price]), [purchase_datedate], DATEADD([purchase_datedate],  'month', -1)\r\n    ...",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "37122870-aa5e-11f0-a9f1-51f661a8f18e",
                                            "title": "scale_date",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "949a5c70-aa5d-11f0-a9f1-51f661a8f18e",
                                            "title": "scale_eng",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "ed929d80-aa5b-11f0-a9f1-51f661a8f18e",
                                            "title": "Выручка за прошлый период",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "29c12030-aa55-11f0-85d2-fd4677ac99c7",
                                            "title": "Выручка за период",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "cd3655e0-a9cf-11f0-ae84-a9265cfd563e",
                                            "title": "avg_cheque_u",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "a8d151a0-a9cf-11f0-ae84-a9265cfd563e",
                                            "title": "avg_cheque",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "e3a1cfe0-aa55-11f0-8395-f32b2462dd84",
                                            "title": "Фильтр даты",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "end_date",
                                            "title": "end_date",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "start_date",
                                            "title": "start_date",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "f828f540-a935-11f0-976d-099c0b05b9ec",
                                            "title": "%_discount",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "584ad600-a92c-11f0-976d-099c0b05b9ec",
                                            "title": "scale_value",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "scale",
                                            "title": "scale",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "660eb030-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_month",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "d02fc430-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_week",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "1cf44850-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_hour",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "3352b650-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_quarter",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "268ce800-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_year",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "087e5b50-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_date",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "id_scne",
                                            "title": "id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "client_id_lbc6",
                                            "title": "client_id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "gender_fzxw",
                                            "title": "gender",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "product_id_ey10",
                                            "title": "product_id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "quantity_k4iu",
                                            "title": "quantity",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "price_per_item_3dwq",
                                            "title": "price_per_item",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "discount_per_item_7maq",
                                            "title": "discount_per_item",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "total_price_1u2g",
                                            "title": "total_price",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "purchase_datetime_pvoa",
                                            "title": "purchase_datetime",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "461ec3e0-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_datedate",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "created_at_s6qq",
                                            "title": "created_at",
                                            "calc_mode": "direct"
                                        }
                                    ]
                                ]
                            }
                        },
                        "name": "Общие продажи и тренды - Линейная. Общая выручка - копия",
                        "type": "table_wizard_node",
                        "annotation": {
                            "description": ""
                        }
                    }
                },
                "17": {
                    "widget": {
                        "data": {
                            "shared": {
                                "sort": [],
                                "type": "datalens",
                                "links": [],
                                "colors": [],
                                "labels": [],
                                "shapes": [],
                                "filters": [],
                                "updates": [
                                    {
                                        "field": {
                                            "cast": "float",
                                            "guid": "40962a80-aa64-11f0-956d-c14801191fc6",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Выручка с начала месяца",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "SUM_IF([total_price], [purchase_datetime] >= DATETRUNC([end_date], 'month') AND [purchase_datedate] <= [end_date])",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "float",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "SUM_IF([total_price_1u2g], [purchase_datetime_pvoa] >= DATETRUNC([end_date], 'month') AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= [end_date])",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "float",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "string",
                                            "guid": "a5f6be50-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Выручка за последний месяц (текст)",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "STR(DIV_SAFE([Выручка за последний месяц], 1000000)) + 'M'",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "string",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "STR(DIV_SAFE([0dcb3a50-aa55-11f0-8c7c-59e14d3324ab], 1000000)) + 'M'",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "string",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field"
                                    },
                                    {
                                        "field": {
                                            "cast": "string",
                                            "guid": "c2566280-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Выручка с начала месяца (текст)",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "STR(DIV_SAFE([Выручка с начала месяца], 1000000)) + 'M'",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "string",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "STR(DIV_SAFE([40962a80-aa64-11f0-956d-c14801191fc6], 1000000)) + 'M'",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "string",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field"
                                    },
                                    {
                                        "field": {
                                            "cast": "string",
                                            "guid": "f0591a10-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Выручка за предпоследний месяц (текст)",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "STR(DIV_SAFE([Выручка за предпоследний месяц], 1000000)) + 'M'",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "string",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "STR(DIV_SAFE([da27cc00-aa67-11f0-8ec6-3da0d05fc0c9], 1000000)) + 'M'",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "string",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "float",
                                            "guid": "31eb5640-aa69-11f0-8ec6-3da0d05fc0c9",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Выручка с начала месяца процент",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "ROUND(FDIV_SAFE([Выручка с начала месяца],[Выручка за последний месяц]) * 100, 2)",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "float",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "ROUND(FDIV_SAFE([40962a80-aa64-11f0-956d-c14801191fc6],[0dcb3a50-aa55-11f0-8c7c-59e14d3324ab]) * 100, 2)",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "float",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "markup",
                                            "guid": "7dac49e0-aa64-11f0-956d-c14801191fc6",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "ТЕКСТ",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "'Выручка за последний месяц: ' + BR() +\r\nSIZE(COLOR(BOLD([Выручка за последний месяц (текст)]), '#0FA08D'), '24px') + ' ' + \r\n    TOOLTIP(\r\n        IF [Выручка месяц изменения] > 0 THEN COLOR('▲' + STR([Выручка месяц изменения]) +'%', '#54A520')\r\n        ELSE COLOR('▼' + STR([Выручка месяц изменения]) +'%', '#BE2443') END,\r\n        'Относительно предыдущего месяца')\r\n+ BR() + BR() +\r\n'Выручка с начала месяца: ' \r\n+ BR() +\r\nSIZE(COLOR(BOLD([Выручка с начала месяца (текст)]), '#0FA08D'), '24px') + ' ' +\r\n    TOOLTIP(\r\n        IF [Выручка с начала месяца процент] < 100 THEN COLOR(STR([Выручка с начала месяца процент]) + '%', '#BE2443')\r\n        ELSE COLOR(STR([Выручка с начала месяца процент]) + '%', '#54A520') END,\r\n        'Доля от последнего полного месяца')",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "markup",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "'Выручка за последний месяц: ' + BR() +\r\nSIZE(COLOR(BOLD([a5f6be50-aa67-11f0-8ec6-3da0d05fc0c9]), '#0FA08D'), '24px') + ' ' + \r\n    TOOLTIP(\r\n        IF [2beb7fa0-aa68-11f0-8ec6-3da0d05fc0c9] > 0 THEN COLOR('▲' + STR([2beb7fa0-aa68-11f0-8ec6-3da0d05fc0c9]) +'%', '#54A520')\r\n        ELSE COLOR('▼' + STR([2beb7fa0-aa68-11f0-8ec6-3da0d05fc0c9]) +'%', '#BE2443') END,\r\n        'Относительно предыдущего месяца')\r\n+ BR() + BR() +\r\n'Выручка с начала месяца: ' \r\n+ BR() +\r\nSIZE(COLOR(BOLD([c2566280-aa67-11f0-8ec6-3da0d05fc0c9]), '#0FA08D'), '24px') + ' ' +\r\n    TOOLTIP(\r\n        IF [31eb5640-aa69-11f0-8ec6-3da0d05fc0c9] < 100 THEN COLOR(STR([31eb5640-aa69-11f0-8ec6-3da0d05fc0c9]) + '%', '#BE2443')\r\n        ELSE COLOR(STR([31eb5640-aa69-11f0-8ec6-3da0d05fc0c9]) + '%', '#54A520') END,\r\n        'Доля от последнего полного месяца')",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "markup",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "float",
                                            "guid": "2beb7fa0-aa68-11f0-8ec6-3da0d05fc0c9",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Выручка месяц изменения",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "ROUND(FDIV_SAFE(([Выручка за последний месяц]-[Выручка за предпоследний месяц]), [Выручка за предпоследний месяц]) * 100, 2)",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "float",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "ROUND(FDIV_SAFE(([0dcb3a50-aa55-11f0-8c7c-59e14d3324ab]-[da27cc00-aa67-11f0-8ec6-3da0d05fc0c9]), [da27cc00-aa67-11f0-8ec6-3da0d05fc0c9]) * 100, 2)",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "float",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "float",
                                            "guid": "0dcb3a50-aa55-11f0-8c7c-59e14d3324ab",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Выручка за последний месяц",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "SUM_IF([total_price], [purchase_datedate] > DATEADD([end_date], 'month', -1) AND [purchase_datedate] <= [end_date])",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "float",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "SUM_IF([total_price_1u2g], [461ec3e0-a929-11f0-976d-099c0b05b9ec] > DATEADD([end_date], 'month', -1) AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= [end_date])",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "float",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "float",
                                            "guid": "da27cc00-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Выручка за предпоследний месяц",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "SUM_IF([total_price], [purchase_datedate] > DATEADD([end_date], 'month', -2) AND [purchase_datedate] <= DATEADD([end_date], 'month', -1))",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "float",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "SUM_IF([total_price_1u2g], [461ec3e0-a929-11f0-976d-099c0b05b9ec] > DATEADD([end_date], 'month', -2) AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= DATEADD([end_date], 'month', -1))",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "float",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    }
                                ],
                                "version": "14",
                                "segments": [],
                                "tooltips": [],
                                "datasetsIds": [
                                    "6"
                                ],
                                "hierarchies": [],
                                "colorsConfig": {},
                                "shapesConfig": {},
                                "extraSettings": {
                                    "feed": "",
                                    "title": "Общие продажи и тренды - KPI. Общая выручка",
                                    "stacking": "on",
                                    "zoomMode": "auto",
                                    "titleMode": "hide",
                                    "legendMode": "show",
                                    "tooltipSum": "on",
                                    "mapCenterMode": "auto",
                                    "metricFontSize": "m",
                                    "metricFontColor": "#0FA08D",
                                    "pivotInlineSort": "on",
                                    "navigatorSettings": {
                                        "selectedLines": [],
                                        "isNavigatorAvailable": false
                                    },
                                    "indicatorTitleMode": "hide",
                                    "metricFontColorIndex": 12
                                },
                                "visualization": {
                                    "id": "metric",
                                    "name": "label_visualization-metric",
                                    "type": "metric",
                                    "allowSort": false,
                                    "iconProps": {
                                        "id": "visMetric",
                                        "width": "24"
                                    },
                                    "allowLabels": false,
                                    "allowFilters": true,
                                    "placeholders": [
                                        {
                                            "id": "measures",
                                            "type": "measures",
                                            "items": [
                                                {
                                                    "id": "measure-1",
                                                    "cast": "markup",
                                                    "guid": "7dac49e0-aa64-11f0-956d-c14801191fc6",
                                                    "type": "MEASURE",
                                                    "local": true,
                                                    "title": "ТЕКСТ",
                                                    "valid": true,
                                                    "hidden": false,
                                                    "source": "",
                                                    "formula": "'Выручка за последний месяц: ' + BR() +\r\nSIZE(COLOR(BOLD([Выручка за последний месяц (текст)]), '#0FA08D'), '24px') + ' ' + \r\n    TOOLTIP(\r\n        IF [Выручка месяц изменения] > 0 THEN COLOR('▲' + STR([Выручка месяц изменения]) +'%', '#54A520')\r\n        ELSE COLOR('▼' + STR([Выручка месяц изменения]) +'%', '#BE2443') END,\r\n        'Относительно предыдущего месяца')\r\n+ BR() + BR() +\r\n'Выручка с начала месяца: ' \r\n+ BR() +\r\nSIZE(COLOR(BOLD([Выручка с начала месяца (текст)]), '#0FA08D'), '24px') + ' ' +\r\n    TOOLTIP(\r\n        IF [Выручка с начала месяца процент] < 100 THEN COLOR(STR([Выручка с начала месяца процент]) + '%', '#BE2443')\r\n        ELSE COLOR(STR([Выручка с начала месяца процент]) + '%', '#54A520') END,\r\n        'Доля от последнего полного месяца')",
                                                    "virtual": false,
                                                    "avatar_id": null,
                                                    "calc_mode": "formula",
                                                    "data_type": "markup",
                                                    "datasetId": "6",
                                                    "managed_by": "user",
                                                    "aggregation": "none",
                                                    "datasetName": "Данные о продажах",
                                                    "description": "",
                                                    "ui_settings": "",
                                                    "guid_formula": "'Выручка за последний месяц: ' + BR() +\r\nSIZE(COLOR(BOLD([a5f6be50-aa67-11f0-8ec6-3da0d05fc0c9]), '#0FA08D'), '24px') + ' ' + \r\n    TOOLTIP(\r\n        IF [2beb7fa0-aa68-11f0-8ec6-3da0d05fc0c9] > 0 THEN COLOR('▲' + STR([2beb7fa0-aa68-11f0-8ec6-3da0d05fc0c9]) +'%', '#54A520')\r\n        ELSE COLOR('▼' + STR([2beb7fa0-aa68-11f0-8ec6-3da0d05fc0c9]) +'%', '#BE2443') END,\r\n        'Относительно предыдущего месяца')\r\n+ BR() + BR() +\r\n'Выручка с начала месяца: ' \r\n+ BR() +\r\nSIZE(COLOR(BOLD([c2566280-aa67-11f0-8ec6-3da0d05fc0c9]), '#0FA08D'), '24px') + ' ' +\r\n    TOOLTIP(\r\n        IF [31eb5640-aa69-11f0-8ec6-3da0d05fc0c9] < 100 THEN COLOR(STR([31eb5640-aa69-11f0-8ec6-3da0d05fc0c9]) + '%', '#BE2443')\r\n        ELSE COLOR(STR([31eb5640-aa69-11f0-8ec6-3da0d05fc0c9]) + '%', '#54A520') END,\r\n        'Доля от последнего полного месяца')",
                                                    "default_value": null,
                                                    "autoaggregated": true,
                                                    "lock_aggregation": false,
                                                    "value_constraint": null,
                                                    "initial_data_type": "markup",
                                                    "aggregation_locked": true,
                                                    "has_auto_aggregation": true
                                                }
                                            ],
                                            "title": "section_measure",
                                            "capacity": 1,
                                            "required": true,
                                            "settings": {},
                                            "iconProps": {},
                                            "allowedTypes": {},
                                            "allowedDataTypes": {},
                                            "allowedFinalTypes": {}
                                        }
                                    ],
                                    "allowLayerFilters": false
                                },
                                "geopointsConfig": {},
                                "datasetsPartialFields": [
                                    [
                                        {
                                            "guid": "2beb7fa0-aa68-11f0-8ec6-3da0d05fc0c9",
                                            "title": "Выручка месяц изменения",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "7dac49e0-aa64-11f0-956d-c14801191fc6",
                                            "title": "ТЕКСТ",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "31eb5640-aa69-11f0-8ec6-3da0d05fc0c9",
                                            "title": "Выручка с начала месяца процент",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "f0591a10-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "title": "Выручка за предпоследний месяц (текст)",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "da27cc00-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "title": "Выручка за предпоследний месяц",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "c2566280-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "title": "Выручка с начала месяца (текст)",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "a5f6be50-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "title": "Выручка за последний месяц (текст)",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "40962a80-aa64-11f0-956d-c14801191fc6",
                                            "title": "Выручка с начала месяца",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "0dcb3a50-aa55-11f0-8c7c-59e14d3324ab",
                                            "title": "Выручка за последний месяц",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "e3a1cfe0-aa55-11f0-8395-f32b2462dd84",
                                            "title": "Фильтр даты",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "end_date",
                                            "title": "end_date",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "start_date",
                                            "title": "start_date",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "f828f540-a935-11f0-976d-099c0b05b9ec",
                                            "title": "%_discount",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "584ad600-a92c-11f0-976d-099c0b05b9ec",
                                            "title": "scale_value",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "scale",
                                            "title": "scale",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "660eb030-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_month",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "d02fc430-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_week",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "1cf44850-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_hour",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "3352b650-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_quarter",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "268ce800-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_year",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "087e5b50-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_date",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "id_scne",
                                            "title": "id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "client_id_lbc6",
                                            "title": "client_id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "gender_fzxw",
                                            "title": "gender",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "product_id_ey10",
                                            "title": "product_id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "quantity_k4iu",
                                            "title": "quantity",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "price_per_item_3dwq",
                                            "title": "price_per_item",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "discount_per_item_7maq",
                                            "title": "discount_per_item",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "total_price_1u2g",
                                            "title": "total_price",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "purchase_datetime_pvoa",
                                            "title": "purchase_datetime",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "461ec3e0-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_datedate",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "created_at_s6qq",
                                            "title": "created_at",
                                            "calc_mode": "direct"
                                        }
                                    ]
                                ]
                            }
                        },
                        "name": "Общие продажи и тренды - KPI. Общая выручка (Месяц)",
                        "type": "markup_wizard_node",
                        "annotation": {
                            "description": ""
                        }
                    }
                },
                "18": {
                    "widget": {
                        "data": {
                            "shared": {
                                "sort": [],
                                "type": "datalens",
                                "links": [],
                                "colors": [],
                                "labels": [],
                                "shapes": [],
                                "filters": [],
                                "updates": [
                                    {
                                        "field": {
                                            "cast": "string",
                                            "guid": "a5f6be50-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Выручка за последнюю неделю (текст)",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "STR(DIV_SAFE([Выручка за последнюю неделю], 1000000)) + 'M'",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "string",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "STR(DIV_SAFE([0dcb3a50-aa55-11f0-8c7c-59e14d3324ab], 1000000)) + 'M'",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "string",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "string",
                                            "guid": "f0591a10-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Выручка за предпоследнюю неделю (текст)",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "STR(DIV_SAFE([Выручка за предпоследнюю неделю], 1000000)) + 'M'",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "string",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "STR(DIV_SAFE([da27cc00-aa67-11f0-8ec6-3da0d05fc0c9], 1000000)) + 'M'",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "string",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "string",
                                            "guid": "c2566280-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Выручка с начала недели (текст)",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "STR(DIV_SAFE([Выручка с начала недели], 1000000)) + 'M'",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "string",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "STR(DIV_SAFE([40962a80-aa64-11f0-956d-c14801191fc6], 1000000)) + 'M'",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "string",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "float",
                                            "guid": "31eb5640-aa69-11f0-8ec6-3da0d05fc0c9",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Выручка с начала недели процент",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "ROUND(FDIV_SAFE([Выручка с начала недели],[Выручка за последнюю неделю]) * 100, 2)",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "float",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "ROUND(FDIV_SAFE([40962a80-aa64-11f0-956d-c14801191fc6],[0dcb3a50-aa55-11f0-8c7c-59e14d3324ab]) * 100, 2)",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "float",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "markup",
                                            "guid": "7dac49e0-aa64-11f0-956d-c14801191fc6",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "ТЕКСТ",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "'Выручка за последнюю неделю: ' + BR() +\r\nSIZE(COLOR(BOLD([Выручка за последнюю неделю (текст)]), '#0FA08D'), '24px') + ' ' + \r\n    TOOLTIP(\r\n        IF [Выручка неделя изменения] > 0 THEN COLOR('▲' + STR([Выручка неделя изменения]) +'%', '#54A520')\r\n        ELSE COLOR('▼' + STR([Выручка неделя изменения]) +'%', '#BE2443') END,\r\n        'Относительно предыдущей недели')\r\n+ BR() + BR() +\r\n'Выручка с начала недели: ' \r\n+ BR() +\r\nSIZE(COLOR(BOLD([Выручка с начала недели (текст)]), '#0FA08D'), '24px') + ' ' +\r\n    TOOLTIP(\r\n        IF [Выручка с начала недели процент] < 100 THEN COLOR(STR([Выручка с начала недели процент]) + '%', '#BE2443')\r\n        ELSE COLOR(STR([Выручка с начала недели процент]) + '%', '#54A520') END,\r\n        'Доля от последней полной недели')",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "markup",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "'Выручка за последнюю неделю: ' + BR() +\r\nSIZE(COLOR(BOLD([a5f6be50-aa67-11f0-8ec6-3da0d05fc0c9]), '#0FA08D'), '24px') + ' ' + \r\n    TOOLTIP(\r\n        IF [2beb7fa0-aa68-11f0-8ec6-3da0d05fc0c9] > 0 THEN COLOR('▲' + STR([2beb7fa0-aa68-11f0-8ec6-3da0d05fc0c9]) +'%', '#54A520')\r\n        ELSE COLOR('▼' + STR([2beb7fa0-aa68-11f0-8ec6-3da0d05fc0c9]) +'%', '#BE2443') END,\r\n        'Относительно предыдущей недели')\r\n+ BR() + BR() +\r\n'Выручка с начала недели: ' \r\n+ BR() +\r\nSIZE(COLOR(BOLD([c2566280-aa67-11f0-8ec6-3da0d05fc0c9]), '#0FA08D'), '24px') + ' ' +\r\n    TOOLTIP(\r\n        IF [31eb5640-aa69-11f0-8ec6-3da0d05fc0c9] < 100 THEN COLOR(STR([31eb5640-aa69-11f0-8ec6-3da0d05fc0c9]) + '%', '#BE2443')\r\n        ELSE COLOR(STR([31eb5640-aa69-11f0-8ec6-3da0d05fc0c9]) + '%', '#54A520') END,\r\n        'Доля от последней полной недели')",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "markup",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "float",
                                            "guid": "2beb7fa0-aa68-11f0-8ec6-3da0d05fc0c9",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Выручка неделя изменения",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "ROUND(FDIV_SAFE(([Выручка за последнюю неделю]-[Выручка за предпоследнюю неделю]), [Выручка за предпоследнюю неделю]) * 100, 2)",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "float",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "ROUND(FDIV_SAFE(([0dcb3a50-aa55-11f0-8c7c-59e14d3324ab]-[da27cc00-aa67-11f0-8ec6-3da0d05fc0c9]), [da27cc00-aa67-11f0-8ec6-3da0d05fc0c9]) * 100, 2)",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "float",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "float",
                                            "guid": "40962a80-aa64-11f0-956d-c14801191fc6",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Выручка с начала недели",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "SUM_IF([total_price], [purchase_datedate] >= DATETRUNC([end_date], 'week') AND [purchase_datedate] <= [end_date])",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "float",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "SUM_IF([total_price_1u2g], [461ec3e0-a929-11f0-976d-099c0b05b9ec] >= DATETRUNC([end_date], 'week') AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= [end_date])",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "float",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "float",
                                            "guid": "da27cc00-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Выручка за предпоследнюю неделю",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "SUM_IF([total_price], [purchase_datedate] > DATEADD([end_date], 'week', -2) AND [purchase_datedate] <= DATEADD([end_date], 'week', -1))",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "float",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "SUM_IF([total_price_1u2g], [461ec3e0-a929-11f0-976d-099c0b05b9ec] > DATEADD([end_date], 'week', -2) AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= DATEADD([end_date], 'week', -1))",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "float",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "float",
                                            "guid": "0dcb3a50-aa55-11f0-8c7c-59e14d3324ab",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Выручка за последнюю неделю",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "SUM_IF([total_price], [purchase_datedate] > DATEADD([end_date], 'week', -1) AND [purchase_datedate] <= [end_date])",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "float",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "SUM_IF([total_price_1u2g], [461ec3e0-a929-11f0-976d-099c0b05b9ec] > DATEADD([end_date], 'week', -1) AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= [end_date])",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "float",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    }
                                ],
                                "version": "14",
                                "segments": [],
                                "tooltips": [],
                                "datasetsIds": [
                                    "6"
                                ],
                                "hierarchies": [],
                                "colorsConfig": {},
                                "shapesConfig": {},
                                "extraSettings": {
                                    "feed": "",
                                    "title": "Общие продажи и тренды - KPI. Общая выручка",
                                    "stacking": "on",
                                    "zoomMode": "auto",
                                    "titleMode": "hide",
                                    "legendMode": "show",
                                    "tooltipSum": "on",
                                    "mapCenterMode": "auto",
                                    "metricFontSize": "m",
                                    "metricFontColor": "#0FA08D",
                                    "pivotInlineSort": "on",
                                    "navigatorSettings": {
                                        "selectedLines": [],
                                        "isNavigatorAvailable": false
                                    },
                                    "indicatorTitleMode": "hide",
                                    "metricFontColorIndex": 12
                                },
                                "visualization": {
                                    "id": "metric",
                                    "name": "label_visualization-metric",
                                    "type": "metric",
                                    "allowSort": false,
                                    "iconProps": {
                                        "id": "visMetric",
                                        "width": "24"
                                    },
                                    "allowLabels": false,
                                    "allowFilters": true,
                                    "placeholders": [
                                        {
                                            "id": "measures",
                                            "type": "measures",
                                            "items": [
                                                {
                                                    "id": "measure-1",
                                                    "cast": "markup",
                                                    "guid": "7dac49e0-aa64-11f0-956d-c14801191fc6",
                                                    "type": "MEASURE",
                                                    "local": true,
                                                    "title": "ТЕКСТ",
                                                    "valid": true,
                                                    "hidden": false,
                                                    "source": "",
                                                    "formula": "'Выручка за последнюю неделю: ' + BR() +\r\nSIZE(COLOR(BOLD([Выручка за последнюю неделю (текст)]), '#0FA08D'), '24px') + ' ' + \r\n    TOOLTIP(\r\n        IF [Выручка неделя изменения] > 0 THEN COLOR('▲' + STR([Выручка неделя изменения]) +'%', '#54A520')\r\n        ELSE COLOR('▼' + STR([Выручка неделя изменения]) +'%', '#BE2443') END,\r\n        'Относительно предыдущей недели')\r\n+ BR() + BR() +\r\n'Выручка с начала недели: ' \r\n+ BR() +\r\nSIZE(COLOR(BOLD([Выручка с начала недели (текст)]), '#0FA08D'), '24px') + ' ' +\r\n    TOOLTIP(\r\n        IF [Выручка с начала недели процент] < 100 THEN COLOR(STR([Выручка с начала недели процент]) + '%', '#BE2443')\r\n        ELSE COLOR(STR([Выручка с начала недели процент]) + '%', '#54A520') END,\r\n        'Доля от последней полной недели')",
                                                    "virtual": false,
                                                    "avatar_id": null,
                                                    "calc_mode": "formula",
                                                    "data_type": "markup",
                                                    "datasetId": "6",
                                                    "managed_by": "user",
                                                    "aggregation": "none",
                                                    "datasetName": "Данные о продажах",
                                                    "description": "",
                                                    "ui_settings": "",
                                                    "guid_formula": "'Выручка за последнюю неделю: ' + BR() +\r\nSIZE(COLOR(BOLD([a5f6be50-aa67-11f0-8ec6-3da0d05fc0c9]), '#0FA08D'), '24px') + ' ' + \r\n    TOOLTIP(\r\n        IF [2beb7fa0-aa68-11f0-8ec6-3da0d05fc0c9] > 0 THEN COLOR('▲' + STR([2beb7fa0-aa68-11f0-8ec6-3da0d05fc0c9]) +'%', '#54A520')\r\n        ELSE COLOR('▼' + STR([2beb7fa0-aa68-11f0-8ec6-3da0d05fc0c9]) +'%', '#BE2443') END,\r\n        'Относительно предыдущей недели')\r\n+ BR() + BR() +\r\n'Выручка с начала недели: ' \r\n+ BR() +\r\nSIZE(COLOR(BOLD([c2566280-aa67-11f0-8ec6-3da0d05fc0c9]), '#0FA08D'), '24px') + ' ' +\r\n    TOOLTIP(\r\n        IF [31eb5640-aa69-11f0-8ec6-3da0d05fc0c9] < 100 THEN COLOR(STR([31eb5640-aa69-11f0-8ec6-3da0d05fc0c9]) + '%', '#BE2443')\r\n        ELSE COLOR(STR([31eb5640-aa69-11f0-8ec6-3da0d05fc0c9]) + '%', '#54A520') END,\r\n        'Доля от последней полной недели')",
                                                    "default_value": null,
                                                    "autoaggregated": true,
                                                    "lock_aggregation": false,
                                                    "value_constraint": null,
                                                    "initial_data_type": "markup",
                                                    "aggregation_locked": true,
                                                    "has_auto_aggregation": true
                                                }
                                            ],
                                            "title": "section_measure",
                                            "capacity": 1,
                                            "required": true,
                                            "settings": {},
                                            "iconProps": {},
                                            "allowedTypes": {},
                                            "allowedDataTypes": {},
                                            "allowedFinalTypes": {}
                                        }
                                    ],
                                    "allowLayerFilters": false
                                },
                                "geopointsConfig": {},
                                "datasetsPartialFields": [
                                    [
                                        {
                                            "guid": "2beb7fa0-aa68-11f0-8ec6-3da0d05fc0c9",
                                            "title": "Выручка неделя изменения",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "7dac49e0-aa64-11f0-956d-c14801191fc6",
                                            "title": "ТЕКСТ",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "31eb5640-aa69-11f0-8ec6-3da0d05fc0c9",
                                            "title": "Выручка с начала недели процент",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "c2566280-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "title": "Выручка с начала недели (текст)",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "40962a80-aa64-11f0-956d-c14801191fc6",
                                            "title": "Выручка с начала недели",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "f0591a10-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "title": "Выручка за предпоследнюю неделю (текст)",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "a5f6be50-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "title": "Выручка за последнюю неделю (текст)",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "da27cc00-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "title": "Выручка за предпоследнюю неделю",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "0dcb3a50-aa55-11f0-8c7c-59e14d3324ab",
                                            "title": "Выручка за последнюю неделю",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "e3a1cfe0-aa55-11f0-8395-f32b2462dd84",
                                            "title": "Фильтр даты",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "end_date",
                                            "title": "end_date",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "start_date",
                                            "title": "start_date",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "f828f540-a935-11f0-976d-099c0b05b9ec",
                                            "title": "%_discount",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "584ad600-a92c-11f0-976d-099c0b05b9ec",
                                            "title": "scale_value",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "scale",
                                            "title": "scale",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "660eb030-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_month",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "d02fc430-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_week",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "1cf44850-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_hour",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "3352b650-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_quarter",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "268ce800-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_year",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "087e5b50-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_date",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "id_scne",
                                            "title": "id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "client_id_lbc6",
                                            "title": "client_id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "gender_fzxw",
                                            "title": "gender",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "product_id_ey10",
                                            "title": "product_id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "quantity_k4iu",
                                            "title": "quantity",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "price_per_item_3dwq",
                                            "title": "price_per_item",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "discount_per_item_7maq",
                                            "title": "discount_per_item",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "total_price_1u2g",
                                            "title": "total_price",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "purchase_datetime_pvoa",
                                            "title": "purchase_datetime",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "461ec3e0-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_datedate",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "created_at_s6qq",
                                            "title": "created_at",
                                            "calc_mode": "direct"
                                        }
                                    ]
                                ]
                            }
                        },
                        "name": "Общие продажи и тренды - KPI. Общая выручка (Неделя)",
                        "type": "markup_wizard_node",
                        "annotation": {
                            "description": ""
                        }
                    }
                },
                "19": {
                    "widget": {
                        "data": {
                            "shared": {
                                "sort": [],
                                "type": "datalens",
                                "links": [],
                                "colors": [],
                                "labels": [],
                                "shapes": [],
                                "filters": [],
                                "updates": [
                                    {
                                        "field": {
                                            "cast": "float",
                                            "guid": "40962a80-aa64-11f0-956d-c14801191fc6",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Выручка с начала недели",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "SUM_IF([total_price], [purchase_datetime] >= DATETRUNC([end_date], 'week') AND [purchase_datedate] <= [end_date])",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "float",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "SUM_IF([total_price_1u2g], [purchase_datetime_pvoa] >= DATETRUNC([end_date], 'week') AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= [end_date])",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "float",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "string",
                                            "guid": "c2566280-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Выручка с начала недели (текст)",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "STR(DIV_SAFE([Выручка с начала недели], 1000000)) + 'M'",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "string",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "STR(DIV_SAFE([40962a80-aa64-11f0-956d-c14801191fc6], 1000000)) + 'M'",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "string",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "float",
                                            "guid": "31eb5640-aa69-11f0-8ec6-3da0d05fc0c9",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Выручка с начала недели процент",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "ROUND(FDIV_SAFE([Выручка с начала недели],[Выручка за последний день]) * 100, 2)",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "float",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "ROUND(FDIV_SAFE([40962a80-aa64-11f0-956d-c14801191fc6],[0dcb3a50-aa55-11f0-8c7c-59e14d3324ab]) * 100, 2)",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "float",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "string",
                                            "guid": "a5f6be50-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Выручка за последний день (текст)",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "STR(DIV_SAFE([Выручка за последний день], 1000000)) + 'M'",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "string",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "STR(DIV_SAFE([0dcb3a50-aa55-11f0-8c7c-59e14d3324ab], 1000000)) + 'M'",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "string",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "string",
                                            "guid": "f0591a10-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Выручка за предпоследний день (текст)",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "STR(DIV_SAFE([Выручка за предпоследний день], 1000000)) + 'M'",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "string",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "STR(DIV_SAFE([da27cc00-aa67-11f0-8ec6-3da0d05fc0c9], 1000000)) + 'M'",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "string",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "float",
                                            "guid": "2beb7fa0-aa68-11f0-8ec6-3da0d05fc0c9",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Выручка день изменения",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "ROUND(FDIV_SAFE(([Выручка за последний день] - [Выручка за предпоследний день]), [Выручка за предпоследний день]) * 100, 2)",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "float",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "ROUND(FDIV_SAFE(([0dcb3a50-aa55-11f0-8c7c-59e14d3324ab] - [da27cc00-aa67-11f0-8ec6-3da0d05fc0c9]), [da27cc00-aa67-11f0-8ec6-3da0d05fc0c9]) * 100, 2)",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "float",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "integer",
                                            "guid": "8178cf50-aa71-11f0-b285-094080387588",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Выручка день изменения номианльная",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "ROUND(([Выручка за последний день] - [Выручка за предпоследний день]) / 1000000)",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "integer",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "ROUND(([0dcb3a50-aa55-11f0-8c7c-59e14d3324ab] - [da27cc00-aa67-11f0-8ec6-3da0d05fc0c9]) / 1000000)",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "integer",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "float",
                                            "guid": "0dcb3a50-aa55-11f0-8c7c-59e14d3324ab",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Выручка за последний день",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "SUM_IF([total_price], [purchase_datedate] = [end_date])",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "float",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "SUM_IF([total_price_1u2g], [461ec3e0-a929-11f0-976d-099c0b05b9ec] = [end_date])",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "float",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "float",
                                            "guid": "da27cc00-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Выручка за предпоследний день",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "SUM_IF([total_price], [purchase_datedate] = DATEADD([end_date], 'day', -1))",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "float",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "SUM_IF([total_price_1u2g], [461ec3e0-a929-11f0-976d-099c0b05b9ec] = DATEADD([end_date], 'day', -1))",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "float",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "markup",
                                            "guid": "7dac49e0-aa64-11f0-956d-c14801191fc6",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "ТЕКСТ",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "'Выручка за последний день: ' + BR() +\r\nSIZE(COLOR(BOLD([Выручка за последний день (текст)]), '#0FA08D'), '24px') + ' ' + \r\n    TOOLTIP(\r\n        IF [Выручка день изменения] > 0 THEN COLOR('▲' + STR([Выручка день изменения]) +'%', '#54A520')\r\n        ELSE COLOR('▼' + STR(ABS([Выручка день изменения])) +'%', '#BE2443') END,\r\n        'Относительно предыдущего дня')\r\n+ BR() + BR() +\r\n'Выручка за предыдущий день: ' \r\n+ BR() +\r\nSIZE(COLOR(BOLD([Выручка за предпоследний день (текст)]), '#0FA08D'), '24px') + ' ' +\r\n    TOOLTIP(\r\n        IF [Выручка день изменения номианльная] > 0 THEN COLOR('▼' + STR([Выручка день изменения номианльная]) + 'M', '#54A520')\r\n        ELSE COLOR('▲' + STR(ABS([Выручка день изменения номианльная])) + 'M', '#BE2443') END,\r\n        'Номинальная разница (прошлый день - позапрошлый день)')",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "markup",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "'Выручка за последний день: ' + BR() +\r\nSIZE(COLOR(BOLD([a5f6be50-aa67-11f0-8ec6-3da0d05fc0c9]), '#0FA08D'), '24px') + ' ' + \r\n    TOOLTIP(\r\n        IF [2beb7fa0-aa68-11f0-8ec6-3da0d05fc0c9] > 0 THEN COLOR('▲' + STR([2beb7fa0-aa68-11f0-8ec6-3da0d05fc0c9]) +'%', '#54A520')\r\n        ELSE COLOR('▼' + STR(ABS([2beb7fa0-aa68-11f0-8ec6-3da0d05fc0c9])) +'%', '#BE2443') END,\r\n        'Относительно предыдущего дня')\r\n+ BR() + BR() +\r\n'Выручка за предыдущий день: ' \r\n+ BR() +\r\nSIZE(COLOR(BOLD([f0591a10-aa67-11f0-8ec6-3da0d05fc0c9]), '#0FA08D'), '24px') + ' ' +\r\n    TOOLTIP(\r\n        IF [8178cf50-aa71-11f0-b285-094080387588] > 0 THEN COLOR('▼' + STR([8178cf50-aa71-11f0-b285-094080387588]) + 'M', '#54A520')\r\n        ELSE COLOR('▲' + STR(ABS([8178cf50-aa71-11f0-b285-094080387588])) + 'M', '#BE2443') END,\r\n        'Номинальная разница (прошлый день - позапрошлый день)')",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "markup",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    }
                                ],
                                "version": "14",
                                "segments": [],
                                "tooltips": [],
                                "datasetsIds": [
                                    "6"
                                ],
                                "hierarchies": [],
                                "colorsConfig": {},
                                "shapesConfig": {},
                                "extraSettings": {
                                    "feed": "",
                                    "title": "Общие продажи и тренды - KPI. Общая выручка",
                                    "stacking": "on",
                                    "zoomMode": "auto",
                                    "titleMode": "hide",
                                    "legendMode": "show",
                                    "tooltipSum": "on",
                                    "mapCenterMode": "auto",
                                    "metricFontSize": "m",
                                    "metricFontColor": "#0FA08D",
                                    "pivotInlineSort": "on",
                                    "navigatorSettings": {
                                        "selectedLines": [],
                                        "isNavigatorAvailable": false
                                    },
                                    "indicatorTitleMode": "hide",
                                    "metricFontColorIndex": 12
                                },
                                "visualization": {
                                    "id": "metric",
                                    "name": "label_visualization-metric",
                                    "type": "metric",
                                    "allowSort": false,
                                    "iconProps": {
                                        "id": "visMetric",
                                        "width": "24"
                                    },
                                    "allowLabels": false,
                                    "allowFilters": true,
                                    "placeholders": [
                                        {
                                            "id": "measures",
                                            "type": "measures",
                                            "items": [
                                                {
                                                    "id": "measure-4",
                                                    "cast": "markup",
                                                    "guid": "7dac49e0-aa64-11f0-956d-c14801191fc6",
                                                    "type": "MEASURE",
                                                    "local": true,
                                                    "title": "ТЕКСТ",
                                                    "valid": true,
                                                    "hidden": false,
                                                    "source": "",
                                                    "formula": "'Выручка за последний день: ' + BR() +\r\nSIZE(COLOR(BOLD([Выручка за последний день (текст)]), '#0FA08D'), '24px') + ' ' + \r\n    TOOLTIP(\r\n        IF [Выручка день изменения] > 0 THEN COLOR('▲' + STR([Выручка день изменения]) +'%', '#54A520')\r\n        ELSE COLOR('▼' + STR(ABS([Выручка день изменения])) +'%', '#BE2443') END,\r\n        'Относительно предыдущего дня')\r\n+ BR() + BR() +\r\n'Выручка за предыдущий день: ' \r\n+ BR() +\r\nSIZE(COLOR(BOLD([Выручка за предпоследний день (текст)]), '#0FA08D'), '24px') + ' ' +\r\n    TOOLTIP(\r\n        IF [Выручка день изменения номианльная] > 0 THEN COLOR('▼' + STR([Выручка день изменения номианльная]) + 'M', '#54A520')\r\n        ELSE COLOR('▲' + STR(ABS([Выручка день изменения номианльная])) + 'M', '#BE2443') END,\r\n        'Номинальная разница (прошлый день - позапрошлый день)')",
                                                    "virtual": false,
                                                    "avatar_id": null,
                                                    "calc_mode": "formula",
                                                    "data_type": "markup",
                                                    "datasetId": "6",
                                                    "managed_by": "user",
                                                    "aggregation": "none",
                                                    "datasetName": "Данные о продажах",
                                                    "description": "",
                                                    "ui_settings": "",
                                                    "guid_formula": "'Выручка за последний день: ' + BR() +\r\nSIZE(COLOR(BOLD([a5f6be50-aa67-11f0-8ec6-3da0d05fc0c9]), '#0FA08D'), '24px') + ' ' + \r\n    TOOLTIP(\r\n        IF [2beb7fa0-aa68-11f0-8ec6-3da0d05fc0c9] > 0 THEN COLOR('▲' + STR([2beb7fa0-aa68-11f0-8ec6-3da0d05fc0c9]) +'%', '#54A520')\r\n        ELSE COLOR('▼' + STR(ABS([2beb7fa0-aa68-11f0-8ec6-3da0d05fc0c9])) +'%', '#BE2443') END,\r\n        'Относительно предыдущего дня')\r\n+ BR() + BR() +\r\n'Выручка за предыдущий день: ' \r\n+ BR() +\r\nSIZE(COLOR(BOLD([f0591a10-aa67-11f0-8ec6-3da0d05fc0c9]), '#0FA08D'), '24px') + ' ' +\r\n    TOOLTIP(\r\n        IF [8178cf50-aa71-11f0-b285-094080387588] > 0 THEN COLOR('▼' + STR([8178cf50-aa71-11f0-b285-094080387588]) + 'M', '#54A520')\r\n        ELSE COLOR('▲' + STR(ABS([8178cf50-aa71-11f0-b285-094080387588])) + 'M', '#BE2443') END,\r\n        'Номинальная разница (прошлый день - позапрошлый день)')",
                                                    "default_value": null,
                                                    "autoaggregated": true,
                                                    "lock_aggregation": false,
                                                    "value_constraint": null,
                                                    "initial_data_type": "markup",
                                                    "aggregation_locked": true,
                                                    "has_auto_aggregation": true
                                                }
                                            ],
                                            "title": "section_measure",
                                            "capacity": 1,
                                            "required": true,
                                            "settings": {},
                                            "iconProps": {},
                                            "allowedTypes": {},
                                            "allowedDataTypes": {},
                                            "allowedFinalTypes": {}
                                        }
                                    ],
                                    "allowLayerFilters": false
                                },
                                "geopointsConfig": {},
                                "datasetsPartialFields": [
                                    [
                                        {
                                            "guid": "da27cc00-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "title": "Выручка за предпоследний день",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "0dcb3a50-aa55-11f0-8c7c-59e14d3324ab",
                                            "title": "Выручка за последний день",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "8178cf50-aa71-11f0-b285-094080387588",
                                            "title": "Выручка день изменения номианльная",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "2beb7fa0-aa68-11f0-8ec6-3da0d05fc0c9",
                                            "title": "Выручка день изменения",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "7dac49e0-aa64-11f0-956d-c14801191fc6",
                                            "title": "ТЕКСТ",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "f0591a10-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "title": "Выручка за предпоследний день (текст)",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "a5f6be50-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "title": "Выручка за последний день (текст)",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "31eb5640-aa69-11f0-8ec6-3da0d05fc0c9",
                                            "title": "Выручка с начала недели процент",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "c2566280-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "title": "Выручка с начала недели (текст)",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "40962a80-aa64-11f0-956d-c14801191fc6",
                                            "title": "Выручка с начала недели",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "e3a1cfe0-aa55-11f0-8395-f32b2462dd84",
                                            "title": "Фильтр даты",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "end_date",
                                            "title": "end_date",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "start_date",
                                            "title": "start_date",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "f828f540-a935-11f0-976d-099c0b05b9ec",
                                            "title": "%_discount",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "584ad600-a92c-11f0-976d-099c0b05b9ec",
                                            "title": "scale_value",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "scale",
                                            "title": "scale",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "660eb030-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_month",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "d02fc430-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_week",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "1cf44850-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_hour",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "3352b650-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_quarter",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "268ce800-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_year",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "087e5b50-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_date",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "id_scne",
                                            "title": "id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "client_id_lbc6",
                                            "title": "client_id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "gender_fzxw",
                                            "title": "gender",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "product_id_ey10",
                                            "title": "product_id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "quantity_k4iu",
                                            "title": "quantity",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "price_per_item_3dwq",
                                            "title": "price_per_item",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "discount_per_item_7maq",
                                            "title": "discount_per_item",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "total_price_1u2g",
                                            "title": "total_price",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "purchase_datetime_pvoa",
                                            "title": "purchase_datetime",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "461ec3e0-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_datedate",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "created_at_s6qq",
                                            "title": "created_at",
                                            "calc_mode": "direct"
                                        }
                                    ]
                                ]
                            }
                        },
                        "name": "Общие продажи и тренды - KPI. Общая выручка (День)",
                        "type": "markup_wizard_node",
                        "annotation": {
                            "description": ""
                        }
                    }
                },
                "20": {
                    "widget": {
                        "data": {
                            "shared": {
                                "sort": [],
                                "type": "datalens",
                                "links": [],
                                "colors": [],
                                "labels": [],
                                "shapes": [],
                                "filters": [],
                                "updates": [
                                    {
                                        "field": {
                                            "cast": "float",
                                            "guid": "40962a80-aa64-11f0-956d-c14801191fc6",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Выручка с начала недели",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "SUM_IF([total_price], [purchase_datetime] >= DATETRUNC([end_date], 'week') AND [purchase_datedate] <= [end_date])",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "float",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "SUM_IF([total_price_1u2g], [purchase_datetime_pvoa] >= DATETRUNC([end_date], 'week') AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= [end_date])",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "float",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "string",
                                            "guid": "c2566280-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Выручка с начала недели (текст)",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "STR(DIV_SAFE([Выручка с начала недели], 1000000)) + 'M'",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "string",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "STR(DIV_SAFE([40962a80-aa64-11f0-956d-c14801191fc6], 1000000)) + 'M'",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "string",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "string",
                                            "guid": "a5f6be50-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Выручка средняя за неделю (текст)",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "STR(DIV_SAFE([Выручка средняя за неделю], 1000000)) + 'M'",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "string",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "STR(DIV_SAFE([0dcb3a50-aa55-11f0-8c7c-59e14d3324ab], 1000000)) + 'M'",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "string",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "string",
                                            "guid": "f0591a10-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Выручка средняя за месяц (текст)",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "STR(DIV_SAFE([Выручка средняя за месяц], 1000000)) + 'M'",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "string",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "STR(DIV_SAFE([da27cc00-aa67-11f0-8ec6-3da0d05fc0c9], 1000000)) + 'M'",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "string",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "float",
                                            "guid": "0dcb3a50-aa55-11f0-8c7c-59e14d3324ab",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Выручка средняя за неделю",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "SUM_IF([total_price], [purchase_datetime] >= DATEADD([end_date], 'day', -6) AND [purchase_datedate] <= [end_date]) / 7",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "float",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "SUM_IF([total_price_1u2g], [purchase_datetime_pvoa] >= DATEADD([end_date], 'day', -6) AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= [end_date]) / 7",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "float",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "float",
                                            "guid": "dfe04950-aa7c-11f0-a563-69be3ea7bf44",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Выручка за последний день",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "SUM_IF([total_price], [purchase_datedate] = [end_date])",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "float",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "SUM_IF([total_price_1u2g], [461ec3e0-a929-11f0-976d-099c0b05b9ec] = [end_date])",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "float",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "float",
                                            "guid": "8178cf50-aa71-11f0-b285-094080387588",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Выручка день со средней за неделю",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "ROUND(FDIV_SAFE([Выручка за последний день] - [Выручка средняя за неделю], [Выручка средняя за неделю]) * 100,2)",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "float",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "ROUND(FDIV_SAFE([dfe04950-aa7c-11f0-a563-69be3ea7bf44] - [0dcb3a50-aa55-11f0-8c7c-59e14d3324ab], [0dcb3a50-aa55-11f0-8c7c-59e14d3324ab]) * 100,2)",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "float",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "float",
                                            "guid": "6d3502f0-aa7d-11f0-a563-69be3ea7bf44",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Выручка день со средней за месяц",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "ROUND(FDIV_SAFE([Выручка за последний день] - [Выручка средняя за месяц], [Выручка средняя за месяц]) * 100,2)",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "float",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "ROUND(FDIV_SAFE([dfe04950-aa7c-11f0-a563-69be3ea7bf44] - [da27cc00-aa67-11f0-8ec6-3da0d05fc0c9], [da27cc00-aa67-11f0-8ec6-3da0d05fc0c9]) * 100,2)",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "float",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "float",
                                            "guid": "da27cc00-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Выручка средняя за месяц",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "SUM_IF([total_price], [purchase_datetime] >= DATEADD([end_date], 'day', -29) AND [purchase_datedate] <= [end_date]) / 30",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "float",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "SUM_IF([total_price_1u2g], [purchase_datetime_pvoa] >= DATEADD([end_date], 'day', -29) AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= [end_date]) / 30",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "float",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "markup",
                                            "guid": "7dac49e0-aa64-11f0-956d-c14801191fc6",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "ТЕКСТ",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "'Cр. выручка в день за неделю: ' + BR() +\r\nSIZE(COLOR(BOLD([Выручка средняя за неделю (текст)]), '#0FA08D'), '24px') + ' ' + \r\n    TOOLTIP(\r\n        IF [Выручка день со средней за неделю] > 0 THEN COLOR('▲' + STR([Выручка день со средней за неделю]) +'%', '#54A520')\r\n        ELSE COLOR('▼' + STR(ABS([Выручка день со средней за неделю])) +'%', '#BE2443') END,\r\n        'Последний день относительно среднего за неделю')\r\n+ BR() + BR() +\r\n'Cр. выручка в день за месяц: ' \r\n+ BR() +\r\nSIZE(COLOR(BOLD([Выручка средняя за месяц (текст)]), '#0FA08D'), '24px') + ' ' +\r\n    TOOLTIP(\r\n        IF [Выручка день со средней за месяц] > 0 THEN COLOR('▼' + STR([Выручка день со средней за месяц]) + '%', '#54A520')\r\n        ELSE COLOR('▲' + STR(ABS([Выручка день со средней за месяц])) + 'M', '#BE2443') END,\r\n        'Последний день относительно среднего за месяц')",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "markup",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "'Cр. выручка в день за неделю: ' + BR() +\r\nSIZE(COLOR(BOLD([a5f6be50-aa67-11f0-8ec6-3da0d05fc0c9]), '#0FA08D'), '24px') + ' ' + \r\n    TOOLTIP(\r\n        IF [8178cf50-aa71-11f0-b285-094080387588] > 0 THEN COLOR('▲' + STR([8178cf50-aa71-11f0-b285-094080387588]) +'%', '#54A520')\r\n        ELSE COLOR('▼' + STR(ABS([8178cf50-aa71-11f0-b285-094080387588])) +'%', '#BE2443') END,\r\n        'Последний день относительно среднего за неделю')\r\n+ BR() + BR() +\r\n'Cр. выручка в день за месяц: ' \r\n+ BR() +\r\nSIZE(COLOR(BOLD([f0591a10-aa67-11f0-8ec6-3da0d05fc0c9]), '#0FA08D'), '24px') + ' ' +\r\n    TOOLTIP(\r\n        IF [6d3502f0-aa7d-11f0-a563-69be3ea7bf44] > 0 THEN COLOR('▼' + STR([6d3502f0-aa7d-11f0-a563-69be3ea7bf44]) + '%', '#54A520')\r\n        ELSE COLOR('▲' + STR(ABS([6d3502f0-aa7d-11f0-a563-69be3ea7bf44])) + 'M', '#BE2443') END,\r\n        'Последний день относительно среднего за месяц')",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "markup",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    }
                                ],
                                "version": "14",
                                "segments": [],
                                "tooltips": [],
                                "datasetsIds": [
                                    "6"
                                ],
                                "hierarchies": [],
                                "colorsConfig": {},
                                "shapesConfig": {},
                                "extraSettings": {
                                    "feed": "",
                                    "title": "Общие продажи и тренды - KPI. Общая выручка",
                                    "stacking": "on",
                                    "zoomMode": "auto",
                                    "titleMode": "hide",
                                    "legendMode": "show",
                                    "tooltipSum": "on",
                                    "mapCenterMode": "auto",
                                    "metricFontSize": "m",
                                    "metricFontColor": "#0FA08D",
                                    "pivotInlineSort": "on",
                                    "navigatorSettings": {
                                        "selectedLines": [],
                                        "isNavigatorAvailable": false
                                    },
                                    "indicatorTitleMode": "hide",
                                    "metricFontColorIndex": 12
                                },
                                "visualization": {
                                    "id": "metric",
                                    "name": "label_visualization-metric",
                                    "type": "metric",
                                    "allowSort": false,
                                    "iconProps": {
                                        "id": "visMetric",
                                        "width": "24"
                                    },
                                    "allowLabels": false,
                                    "allowFilters": true,
                                    "placeholders": [
                                        {
                                            "id": "measures",
                                            "type": "measures",
                                            "items": [
                                                {
                                                    "id": "measure-0",
                                                    "cast": "markup",
                                                    "guid": "7dac49e0-aa64-11f0-956d-c14801191fc6",
                                                    "type": "MEASURE",
                                                    "local": true,
                                                    "title": "ТЕКСТ",
                                                    "valid": true,
                                                    "hidden": false,
                                                    "source": "",
                                                    "formula": "'Cр. выручка в день за неделю: ' + BR() +\r\nSIZE(COLOR(BOLD([Выручка средняя за неделю (текст)]), '#0FA08D'), '24px') + ' ' + \r\n    TOOLTIP(\r\n        IF [Выручка день со средней за неделю] > 0 THEN COLOR('▲' + STR([Выручка день со средней за неделю]) +'%', '#54A520')\r\n        ELSE COLOR('▼' + STR(ABS([Выручка день со средней за неделю])) +'%', '#BE2443') END,\r\n        'Последний день относительно среднего за неделю')\r\n+ BR() + BR() +\r\n'Cр. выручка в день за месяц: ' \r\n+ BR() +\r\nSIZE(COLOR(BOLD([Выручка средняя за месяц (текст)]), '#0FA08D'), '24px') + ' ' +\r\n    TOOLTIP(\r\n        IF [Выручка день со средней за месяц] > 0 THEN COLOR('▼' + STR([Выручка день со средней за месяц]) + '%', '#54A520')\r\n        ELSE COLOR('▲' + STR(ABS([Выручка день со средней за месяц])) + 'M', '#BE2443') END,\r\n        'Последний день относительно среднего за месяц')",
                                                    "virtual": false,
                                                    "avatar_id": null,
                                                    "calc_mode": "formula",
                                                    "data_type": "markup",
                                                    "datasetId": "6",
                                                    "managed_by": "user",
                                                    "aggregation": "none",
                                                    "datasetName": "Данные о продажах",
                                                    "description": "",
                                                    "ui_settings": "",
                                                    "guid_formula": "'Cр. выручка в день за неделю: ' + BR() +\r\nSIZE(COLOR(BOLD([a5f6be50-aa67-11f0-8ec6-3da0d05fc0c9]), '#0FA08D'), '24px') + ' ' + \r\n    TOOLTIP(\r\n        IF [8178cf50-aa71-11f0-b285-094080387588] > 0 THEN COLOR('▲' + STR([8178cf50-aa71-11f0-b285-094080387588]) +'%', '#54A520')\r\n        ELSE COLOR('▼' + STR(ABS([8178cf50-aa71-11f0-b285-094080387588])) +'%', '#BE2443') END,\r\n        'Последний день относительно среднего за неделю')\r\n+ BR() + BR() +\r\n'Cр. выручка в день за месяц: ' \r\n+ BR() +\r\nSIZE(COLOR(BOLD([f0591a10-aa67-11f0-8ec6-3da0d05fc0c9]), '#0FA08D'), '24px') + ' ' +\r\n    TOOLTIP(\r\n        IF [6d3502f0-aa7d-11f0-a563-69be3ea7bf44] > 0 THEN COLOR('▼' + STR([6d3502f0-aa7d-11f0-a563-69be3ea7bf44]) + '%', '#54A520')\r\n        ELSE COLOR('▲' + STR(ABS([6d3502f0-aa7d-11f0-a563-69be3ea7bf44])) + 'M', '#BE2443') END,\r\n        'Последний день относительно среднего за месяц')",
                                                    "default_value": null,
                                                    "autoaggregated": true,
                                                    "lock_aggregation": false,
                                                    "value_constraint": null,
                                                    "initial_data_type": "markup",
                                                    "aggregation_locked": true,
                                                    "has_auto_aggregation": true
                                                }
                                            ],
                                            "title": "section_measure",
                                            "capacity": 1,
                                            "required": true,
                                            "settings": {},
                                            "iconProps": {},
                                            "allowedTypes": {},
                                            "allowedDataTypes": {},
                                            "allowedFinalTypes": {}
                                        }
                                    ],
                                    "allowLayerFilters": false
                                },
                                "geopointsConfig": {},
                                "datasetsPartialFields": [
                                    [
                                        {
                                            "guid": "7dac49e0-aa64-11f0-956d-c14801191fc6",
                                            "title": "ТЕКСТ",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "6d3502f0-aa7d-11f0-a563-69be3ea7bf44",
                                            "title": "Выручка день со средней за месяц",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "8178cf50-aa71-11f0-b285-094080387588",
                                            "title": "Выручка день со средней за неделю",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "dfe04950-aa7c-11f0-a563-69be3ea7bf44",
                                            "title": "Выручка за последний день",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "da27cc00-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "title": "Выручка средняя за месяц",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "0dcb3a50-aa55-11f0-8c7c-59e14d3324ab",
                                            "title": "Выручка средняя за неделю",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "f0591a10-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "title": "Выручка средняя за месяц (текст)",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "a5f6be50-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "title": "Выручка средняя за неделю (текст)",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "c2566280-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "title": "Выручка с начала недели (текст)",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "40962a80-aa64-11f0-956d-c14801191fc6",
                                            "title": "Выручка с начала недели",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "e3a1cfe0-aa55-11f0-8395-f32b2462dd84",
                                            "title": "Фильтр даты",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "end_date",
                                            "title": "end_date",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "start_date",
                                            "title": "start_date",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "f828f540-a935-11f0-976d-099c0b05b9ec",
                                            "title": "%_discount",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "584ad600-a92c-11f0-976d-099c0b05b9ec",
                                            "title": "scale_value",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "scale",
                                            "title": "scale",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "660eb030-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_month",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "d02fc430-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_week",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "1cf44850-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_hour",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "3352b650-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_quarter",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "268ce800-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_year",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "087e5b50-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_date",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "id_scne",
                                            "title": "id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "client_id_lbc6",
                                            "title": "client_id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "gender_fzxw",
                                            "title": "gender",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "product_id_ey10",
                                            "title": "product_id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "quantity_k4iu",
                                            "title": "quantity",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "price_per_item_3dwq",
                                            "title": "price_per_item",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "discount_per_item_7maq",
                                            "title": "discount_per_item",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "total_price_1u2g",
                                            "title": "total_price",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "purchase_datetime_pvoa",
                                            "title": "purchase_datetime",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "461ec3e0-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_datedate",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "created_at_s6qq",
                                            "title": "created_at",
                                            "calc_mode": "direct"
                                        }
                                    ]
                                ]
                            }
                        },
                        "name": "Общие продажи и тренды - KPI. Общая выручка (День) среднее",
                        "type": "markup_wizard_node",
                        "annotation": {
                            "description": ""
                        }
                    }
                },
                "21": {
                    "widget": {
                        "data": {
                            "shared": {
                                "sort": [],
                                "type": "datalens",
                                "links": [],
                                "colors": [],
                                "labels": [],
                                "shapes": [],
                                "filters": [],
                                "updates": [
                                    {
                                        "field": {
                                            "cast": "integer",
                                            "guid": "0dcb3a50-aa55-11f0-8c7c-59e14d3324ab",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Кол-во заказов за последний месяц",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "COUNTD_IF([id], [purchase_datedate] > DATEADD([end_date], 'month', -1) AND [purchase_datedate] <= [end_date])",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "integer",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "COUNTD_IF([id_scne], [461ec3e0-a929-11f0-976d-099c0b05b9ec] > DATEADD([end_date], 'month', -1) AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= [end_date])",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "integer",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "string",
                                            "guid": "a5f6be50-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Кол-во заказов за последний месяц (текст)",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "STR([Кол-во заказов за последний месяц])",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "string",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "STR([0dcb3a50-aa55-11f0-8c7c-59e14d3324ab])",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "string",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "string",
                                            "guid": "f0591a10-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Кол-во заказов за предпоследний месяц (текст)",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "STR([Кол-во заказов за предпоследний месяц])",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "string",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "STR([da27cc00-aa67-11f0-8ec6-3da0d05fc0c9])",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "string",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "integer",
                                            "guid": "da27cc00-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Кол-во заказов за предпоследний месяц",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "COUNTD_IF([id], [purchase_datedate] > DATEADD([end_date], 'month', -2) AND [purchase_datedate] <= DATEADD([end_date], 'month', -1))",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "integer",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "COUNTD_IF([id_scne], [461ec3e0-a929-11f0-976d-099c0b05b9ec] > DATEADD([end_date], 'month', -2) AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= DATEADD([end_date], 'month', -1))",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "integer",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "string",
                                            "guid": "c2566280-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Кол-во заказов с начала месяца (текст)",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "STR([Кол-во заказов с начала месяца])",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "string",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "STR([40962a80-aa64-11f0-956d-c14801191fc6])",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "string",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "float",
                                            "guid": "2beb7fa0-aa68-11f0-8ec6-3da0d05fc0c9",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Кол-во заказов месяц изменения",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "ROUND(([Кол-во заказов за последний месяц]-[Кол-во заказов за предпоследний месяц])/[Кол-во заказов за предпоследний месяц] * 10000) / 100",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "float",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "ROUND(([0dcb3a50-aa55-11f0-8c7c-59e14d3324ab]-[da27cc00-aa67-11f0-8ec6-3da0d05fc0c9])/[da27cc00-aa67-11f0-8ec6-3da0d05fc0c9] * 10000) / 100",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "float",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "float",
                                            "guid": "31eb5640-aa69-11f0-8ec6-3da0d05fc0c9",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Кол-во заказов с начала месяца процент",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "ROUND([Кол-во заказов с начала месяца] / [Кол-во заказов за последний месяц] * 10000) / 100",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "float",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "ROUND([40962a80-aa64-11f0-956d-c14801191fc6] / [0dcb3a50-aa55-11f0-8c7c-59e14d3324ab] * 10000) / 100",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "float",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "markup",
                                            "guid": "7dac49e0-aa64-11f0-956d-c14801191fc6",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "ТЕКСТ",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "'Заказы за последний месяц: ' + BR() +\r\nSIZE(COLOR(BOLD([Кол-во заказов за последний месяц (текст)]), '#84D1EE'), '24px') + ' ' + \r\n    TOOLTIP(\r\n        IF [Кол-во заказов месяц изменения] > 0 THEN COLOR('▲' + STR([Кол-во заказов месяц изменения]) +'%', '#54A520')\r\n        ELSE COLOR('▼' + STR([Кол-во заказов месяц изменения]) +'%', '#BE2443') END,\r\n        'Относительно предыдущего месяца')\r\n+ BR() + BR() +\r\n'Заказы с начала месяца: ' \r\n+ BR() +\r\nSIZE(COLOR(BOLD([Кол-во заказов с начала месяца (текст)]), '#84D1EE'), '24px') + ' ' +\r\n    TOOLTIP(\r\n        IF [Кол-во заказов с начала месяца процент] < 100 THEN COLOR(STR([Кол-во заказов с начала месяца процент]) + '%', '#BE2443')\r\n        ELSE COLOR(STR([Кол-во заказов с начала месяца процент]) + '%', '#54A520') END,\r\n        'Доля от последнего полного месяца')",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "markup",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "'Заказы за последний месяц: ' + BR() +\r\nSIZE(COLOR(BOLD([a5f6be50-aa67-11f0-8ec6-3da0d05fc0c9]), '#84D1EE'), '24px') + ' ' + \r\n    TOOLTIP(\r\n        IF [2beb7fa0-aa68-11f0-8ec6-3da0d05fc0c9] > 0 THEN COLOR('▲' + STR([2beb7fa0-aa68-11f0-8ec6-3da0d05fc0c9]) +'%', '#54A520')\r\n        ELSE COLOR('▼' + STR([2beb7fa0-aa68-11f0-8ec6-3da0d05fc0c9]) +'%', '#BE2443') END,\r\n        'Относительно предыдущего месяца')\r\n+ BR() + BR() +\r\n'Заказы с начала месяца: ' \r\n+ BR() +\r\nSIZE(COLOR(BOLD([c2566280-aa67-11f0-8ec6-3da0d05fc0c9]), '#84D1EE'), '24px') + ' ' +\r\n    TOOLTIP(\r\n        IF [31eb5640-aa69-11f0-8ec6-3da0d05fc0c9] < 100 THEN COLOR(STR([31eb5640-aa69-11f0-8ec6-3da0d05fc0c9]) + '%', '#BE2443')\r\n        ELSE COLOR(STR([31eb5640-aa69-11f0-8ec6-3da0d05fc0c9]) + '%', '#54A520') END,\r\n        'Доля от последнего полного месяца')",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "markup",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "integer",
                                            "guid": "40962a80-aa64-11f0-956d-c14801191fc6",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Кол-во заказов с начала месяца",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "COUNTD_IF([id], [purchase_datedate] >= DATETRUNC([end_date], 'month') AND [purchase_datedate] <= [end_date])",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "integer",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "COUNTD_IF([id_scne], [461ec3e0-a929-11f0-976d-099c0b05b9ec] >= DATETRUNC([end_date], 'month') AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= [end_date])",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "integer",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    }
                                ],
                                "version": "14",
                                "segments": [],
                                "tooltips": [],
                                "datasetsIds": [
                                    "6"
                                ],
                                "hierarchies": [],
                                "colorsConfig": {},
                                "shapesConfig": {},
                                "extraSettings": {
                                    "feed": "",
                                    "title": "Общие продажи и тренды - KPI. Общая выручка",
                                    "stacking": "on",
                                    "zoomMode": "auto",
                                    "titleMode": "hide",
                                    "legendMode": "show",
                                    "tooltipSum": "on",
                                    "mapCenterMode": "auto",
                                    "metricFontSize": "m",
                                    "metricFontColor": "#0FA08D",
                                    "pivotInlineSort": "on",
                                    "navigatorSettings": {
                                        "selectedLines": [],
                                        "isNavigatorAvailable": false
                                    },
                                    "indicatorTitleMode": "hide",
                                    "metricFontColorIndex": 12
                                },
                                "visualization": {
                                    "id": "metric",
                                    "name": "label_visualization-metric",
                                    "type": "metric",
                                    "allowSort": false,
                                    "iconProps": {
                                        "id": "visMetric",
                                        "width": "24"
                                    },
                                    "allowLabels": false,
                                    "allowFilters": true,
                                    "placeholders": [
                                        {
                                            "id": "measures",
                                            "type": "measures",
                                            "items": [
                                                {
                                                    "id": "measure-0",
                                                    "cast": "markup",
                                                    "guid": "7dac49e0-aa64-11f0-956d-c14801191fc6",
                                                    "type": "MEASURE",
                                                    "local": true,
                                                    "title": "ТЕКСТ",
                                                    "valid": true,
                                                    "hidden": false,
                                                    "source": "",
                                                    "formula": "'Заказы за последний месяц: ' + BR() +\r\nSIZE(COLOR(BOLD([Кол-во заказов за последний месяц (текст)]), '#84D1EE'), '24px') + ' ' + \r\n    TOOLTIP(\r\n        IF [Кол-во заказов месяц изменения] > 0 THEN COLOR('▲' + STR([Кол-во заказов месяц изменения]) +'%', '#54A520')\r\n        ELSE COLOR('▼' + STR([Кол-во заказов месяц изменения]) +'%', '#BE2443') END,\r\n        'Относительно предыдущего месяца')\r\n+ BR() + BR() +\r\n'Заказы с начала месяца: ' \r\n+ BR() +\r\nSIZE(COLOR(BOLD([Кол-во заказов с начала месяца (текст)]), '#84D1EE'), '24px') + ' ' +\r\n    TOOLTIP(\r\n        IF [Кол-во заказов с начала месяца процент] < 100 THEN COLOR(STR([Кол-во заказов с начала месяца процент]) + '%', '#BE2443')\r\n        ELSE COLOR(STR([Кол-во заказов с начала месяца процент]) + '%', '#54A520') END,\r\n        'Доля от последнего полного месяца')",
                                                    "virtual": false,
                                                    "avatar_id": null,
                                                    "calc_mode": "formula",
                                                    "data_type": "markup",
                                                    "datasetId": "6",
                                                    "managed_by": "user",
                                                    "aggregation": "none",
                                                    "datasetName": "Данные о продажах",
                                                    "description": "",
                                                    "ui_settings": "",
                                                    "guid_formula": "'Заказы за последний месяц: ' + BR() +\r\nSIZE(COLOR(BOLD([a5f6be50-aa67-11f0-8ec6-3da0d05fc0c9]), '#84D1EE'), '24px') + ' ' + \r\n    TOOLTIP(\r\n        IF [2beb7fa0-aa68-11f0-8ec6-3da0d05fc0c9] > 0 THEN COLOR('▲' + STR([2beb7fa0-aa68-11f0-8ec6-3da0d05fc0c9]) +'%', '#54A520')\r\n        ELSE COLOR('▼' + STR([2beb7fa0-aa68-11f0-8ec6-3da0d05fc0c9]) +'%', '#BE2443') END,\r\n        'Относительно предыдущего месяца')\r\n+ BR() + BR() +\r\n'Заказы с начала месяца: ' \r\n+ BR() +\r\nSIZE(COLOR(BOLD([c2566280-aa67-11f0-8ec6-3da0d05fc0c9]), '#84D1EE'), '24px') + ' ' +\r\n    TOOLTIP(\r\n        IF [31eb5640-aa69-11f0-8ec6-3da0d05fc0c9] < 100 THEN COLOR(STR([31eb5640-aa69-11f0-8ec6-3da0d05fc0c9]) + '%', '#BE2443')\r\n        ELSE COLOR(STR([31eb5640-aa69-11f0-8ec6-3da0d05fc0c9]) + '%', '#54A520') END,\r\n        'Доля от последнего полного месяца')",
                                                    "default_value": null,
                                                    "autoaggregated": true,
                                                    "lock_aggregation": false,
                                                    "value_constraint": null,
                                                    "initial_data_type": "markup",
                                                    "aggregation_locked": true,
                                                    "has_auto_aggregation": true
                                                }
                                            ],
                                            "title": "section_measure",
                                            "capacity": 1,
                                            "required": true,
                                            "settings": {},
                                            "iconProps": {},
                                            "allowedTypes": {},
                                            "allowedDataTypes": {},
                                            "allowedFinalTypes": {}
                                        }
                                    ],
                                    "allowLayerFilters": false
                                },
                                "geopointsConfig": {},
                                "datasetsPartialFields": [
                                    [
                                        {
                                            "guid": "7dac49e0-aa64-11f0-956d-c14801191fc6",
                                            "title": "ТЕКСТ",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "31eb5640-aa69-11f0-8ec6-3da0d05fc0c9",
                                            "title": "Кол-во заказов с начала месяца процент",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "2beb7fa0-aa68-11f0-8ec6-3da0d05fc0c9",
                                            "title": "Кол-во заказов месяц изменения",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "c2566280-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "title": "Кол-во заказов с начала месяца (текст)",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "40962a80-aa64-11f0-956d-c14801191fc6",
                                            "title": "Кол-во заказов с начала месяца",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "da27cc00-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "title": "Кол-во заказов за предпоследний месяц",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "f0591a10-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "title": "Кол-во заказов за предпоследний месяц (текст)",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "a5f6be50-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "title": "Кол-во заказов за последний месяц (текст)",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "0dcb3a50-aa55-11f0-8c7c-59e14d3324ab",
                                            "title": "Кол-во заказов за последний месяц",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "e3a1cfe0-aa55-11f0-8395-f32b2462dd84",
                                            "title": "Фильтр даты",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "end_date",
                                            "title": "end_date",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "start_date",
                                            "title": "start_date",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "f828f540-a935-11f0-976d-099c0b05b9ec",
                                            "title": "%_discount",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "584ad600-a92c-11f0-976d-099c0b05b9ec",
                                            "title": "scale_value",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "scale",
                                            "title": "scale",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "660eb030-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_month",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "d02fc430-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_week",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "1cf44850-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_hour",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "3352b650-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_quarter",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "268ce800-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_year",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "087e5b50-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_date",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "id_scne",
                                            "title": "id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "client_id_lbc6",
                                            "title": "client_id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "gender_fzxw",
                                            "title": "gender",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "product_id_ey10",
                                            "title": "product_id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "quantity_k4iu",
                                            "title": "quantity",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "price_per_item_3dwq",
                                            "title": "price_per_item",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "discount_per_item_7maq",
                                            "title": "discount_per_item",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "total_price_1u2g",
                                            "title": "total_price",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "purchase_datetime_pvoa",
                                            "title": "purchase_datetime",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "461ec3e0-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_datedate",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "created_at_s6qq",
                                            "title": "created_at",
                                            "calc_mode": "direct"
                                        }
                                    ]
                                ]
                            }
                        },
                        "name": "Общие продажи и тренды - KPI. Количество заказов (Месяц)",
                        "type": "markup_wizard_node",
                        "annotation": {
                            "description": ""
                        }
                    }
                },
                "22": {
                    "widget": {
                        "data": {
                            "shared": {
                                "sort": [],
                                "type": "datalens",
                                "links": [],
                                "colors": [],
                                "labels": [],
                                "shapes": [],
                                "filters": [],
                                "updates": [
                                    {
                                        "field": {
                                            "cast": "integer",
                                            "guid": "0dcb3a50-aa55-11f0-8c7c-59e14d3324ab",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Кол-во заказов за последнюю неделю",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "COUNTD_IF([id], [purchase_datedate] > DATEADD([end_date], 'week', -1) AND [purchase_datedate] <= [end_date])",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "integer",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "COUNTD_IF([id_scne], [461ec3e0-a929-11f0-976d-099c0b05b9ec] > DATEADD([end_date], 'week', -1) AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= [end_date])",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "integer",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "string",
                                            "guid": "a5f6be50-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Кол-во заказов за последнюю неделю (текст)",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "STR([Кол-во заказов за последнюю неделю])",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "string",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "STR([0dcb3a50-aa55-11f0-8c7c-59e14d3324ab])",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "string",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "markup",
                                            "guid": "7dac49e0-aa64-11f0-956d-c14801191fc6",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "ТЕКСТ",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "'Заказы за последнюю неделю: ' + BR() +\r\nSIZE(COLOR(BOLD([Кол-во заказов за последнюю неделю (текст)]), '#84D1EE'), '24px') + ' ' + \r\n    TOOLTIP(\r\n        IF [Кол-во заказов неделя изменения] > 0 THEN COLOR('▲' + STR([Кол-во заказов неделя изменения]) +'%', '#54A520')\r\n        ELSE COLOR('▼' + STR([Кол-во заказов неделя изменения]) +'%', '#BE2443') END,\r\n        'Относительно предыдущей недели')\r\n+ BR() + BR() +\r\n'Заказы с начала недели: ' \r\n+ BR() +\r\nSIZE(COLOR(BOLD([Кол-во заказов с начала недели (текст)]), '#84D1EE'), '24px') + ' ' +\r\n    TOOLTIP(\r\n        IF [Кол-во заказов с начала недели процент] < 100 THEN COLOR(STR([Кол-во заказов с начала недели процент]) + '%', '#BE2443')\r\n        ELSE COLOR(STR([Кол-во заказов с начала недели процент]) + '%', '#54A520') END,\r\n        'Доля от последней полной недели')",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "markup",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "'Заказы за последнюю неделю: ' + BR() +\r\nSIZE(COLOR(BOLD([a5f6be50-aa67-11f0-8ec6-3da0d05fc0c9]), '#84D1EE'), '24px') + ' ' + \r\n    TOOLTIP(\r\n        IF [2beb7fa0-aa68-11f0-8ec6-3da0d05fc0c9] > 0 THEN COLOR('▲' + STR([2beb7fa0-aa68-11f0-8ec6-3da0d05fc0c9]) +'%', '#54A520')\r\n        ELSE COLOR('▼' + STR([2beb7fa0-aa68-11f0-8ec6-3da0d05fc0c9]) +'%', '#BE2443') END,\r\n        'Относительно предыдущей недели')\r\n+ BR() + BR() +\r\n'Заказы с начала недели: ' \r\n+ BR() +\r\nSIZE(COLOR(BOLD([c2566280-aa67-11f0-8ec6-3da0d05fc0c9]), '#84D1EE'), '24px') + ' ' +\r\n    TOOLTIP(\r\n        IF [31eb5640-aa69-11f0-8ec6-3da0d05fc0c9] < 100 THEN COLOR(STR([31eb5640-aa69-11f0-8ec6-3da0d05fc0c9]) + '%', '#BE2443')\r\n        ELSE COLOR(STR([31eb5640-aa69-11f0-8ec6-3da0d05fc0c9]) + '%', '#54A520') END,\r\n        'Доля от последней полной недели')",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "markup",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "integer",
                                            "guid": "da27cc00-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Кол-во заказов за предпоследнюю неделю",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "COUNTD_IF([id], [purchase_datedate] > DATEADD([end_date], 'week', -2) AND [purchase_datedate] <= DATEADD([end_date], 'week', -1))",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "integer",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "COUNTD_IF([id_scne], [461ec3e0-a929-11f0-976d-099c0b05b9ec] > DATEADD([end_date], 'week', -2) AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= DATEADD([end_date], 'week', -1))",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "integer",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "string",
                                            "guid": "f0591a10-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Кол-во заказов за предпоследнюю неделю (текст)",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "STR([Кол-во заказов за предпоследнюю неделю])",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "string",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "STR([da27cc00-aa67-11f0-8ec6-3da0d05fc0c9])",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "string",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "integer",
                                            "guid": "40962a80-aa64-11f0-956d-c14801191fc6",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Кол-во заказов с начала недели",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "COUNTD_IF([id], [purchase_datedate] >= DATETRUNC([end_date], 'week') AND [purchase_datedate] <= [end_date])",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "integer",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "COUNTD_IF([id_scne], [461ec3e0-a929-11f0-976d-099c0b05b9ec] >= DATETRUNC([end_date], 'week') AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= [end_date])",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "integer",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "string",
                                            "guid": "c2566280-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Кол-во заказов с начала недели (текст)",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "STR([Кол-во заказов с начала недели])",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "string",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "STR([40962a80-aa64-11f0-956d-c14801191fc6])",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "string",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "float",
                                            "guid": "31eb5640-aa69-11f0-8ec6-3da0d05fc0c9",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Кол-во заказов с начала недели процент",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "ROUND([Кол-во заказов с начала недели] / [Кол-во заказов за последнюю неделю] * 10000) / 100",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "float",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "ROUND([40962a80-aa64-11f0-956d-c14801191fc6] / [0dcb3a50-aa55-11f0-8c7c-59e14d3324ab] * 10000) / 100",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "float",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "float",
                                            "guid": "2beb7fa0-aa68-11f0-8ec6-3da0d05fc0c9",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Кол-во заказов неделя изменения",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "ROUND(([Кол-во заказов за последнюю неделю]-[Кол-во заказов за предпоследнюю неделю]) / [Кол-во заказов за предпоследнюю неделю] * 10000) / 100",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "float",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "ROUND(([0dcb3a50-aa55-11f0-8c7c-59e14d3324ab]-[da27cc00-aa67-11f0-8ec6-3da0d05fc0c9]) / [da27cc00-aa67-11f0-8ec6-3da0d05fc0c9] * 10000) / 100",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "float",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    }
                                ],
                                "version": "14",
                                "segments": [],
                                "tooltips": [],
                                "datasetsIds": [
                                    "6"
                                ],
                                "hierarchies": [],
                                "colorsConfig": {},
                                "shapesConfig": {},
                                "extraSettings": {
                                    "feed": "",
                                    "title": "Общие продажи и тренды - KPI. Общая выручка",
                                    "stacking": "on",
                                    "zoomMode": "auto",
                                    "titleMode": "hide",
                                    "legendMode": "show",
                                    "tooltipSum": "on",
                                    "mapCenterMode": "auto",
                                    "metricFontSize": "m",
                                    "metricFontColor": "#0FA08D",
                                    "pivotInlineSort": "on",
                                    "navigatorSettings": {
                                        "selectedLines": [],
                                        "isNavigatorAvailable": false
                                    },
                                    "indicatorTitleMode": "hide",
                                    "metricFontColorIndex": 12
                                },
                                "visualization": {
                                    "id": "metric",
                                    "name": "label_visualization-metric",
                                    "type": "metric",
                                    "allowSort": false,
                                    "iconProps": {
                                        "id": "visMetric",
                                        "width": "24"
                                    },
                                    "allowLabels": false,
                                    "allowFilters": true,
                                    "placeholders": [
                                        {
                                            "id": "measures",
                                            "type": "measures",
                                            "items": [
                                                {
                                                    "id": "measure-1",
                                                    "cast": "markup",
                                                    "guid": "7dac49e0-aa64-11f0-956d-c14801191fc6",
                                                    "type": "MEASURE",
                                                    "local": true,
                                                    "title": "ТЕКСТ",
                                                    "valid": true,
                                                    "hidden": false,
                                                    "source": "",
                                                    "formula": "'Заказы за последнюю неделю: ' + BR() +\r\nSIZE(COLOR(BOLD([Кол-во заказов за последнюю неделю (текст)]), '#84D1EE'), '24px') + ' ' + \r\n    TOOLTIP(\r\n        IF [Кол-во заказов неделя изменения] > 0 THEN COLOR('▲' + STR([Кол-во заказов неделя изменения]) +'%', '#54A520')\r\n        ELSE COLOR('▼' + STR([Кол-во заказов неделя изменения]) +'%', '#BE2443') END,\r\n        'Относительно предыдущей недели')\r\n+ BR() + BR() +\r\n'Заказы с начала недели: ' \r\n+ BR() +\r\nSIZE(COLOR(BOLD([Кол-во заказов с начала недели (текст)]), '#84D1EE'), '24px') + ' ' +\r\n    TOOLTIP(\r\n        IF [Кол-во заказов с начала недели процент] < 100 THEN COLOR(STR([Кол-во заказов с начала недели процент]) + '%', '#BE2443')\r\n        ELSE COLOR(STR([Кол-во заказов с начала недели процент]) + '%', '#54A520') END,\r\n        'Доля от последней полной недели')",
                                                    "virtual": false,
                                                    "avatar_id": null,
                                                    "calc_mode": "formula",
                                                    "data_type": "markup",
                                                    "datasetId": "6",
                                                    "managed_by": "user",
                                                    "aggregation": "none",
                                                    "datasetName": "Данные о продажах",
                                                    "description": "",
                                                    "ui_settings": "",
                                                    "guid_formula": "'Заказы за последнюю неделю: ' + BR() +\r\nSIZE(COLOR(BOLD([a5f6be50-aa67-11f0-8ec6-3da0d05fc0c9]), '#84D1EE'), '24px') + ' ' + \r\n    TOOLTIP(\r\n        IF [2beb7fa0-aa68-11f0-8ec6-3da0d05fc0c9] > 0 THEN COLOR('▲' + STR([2beb7fa0-aa68-11f0-8ec6-3da0d05fc0c9]) +'%', '#54A520')\r\n        ELSE COLOR('▼' + STR([2beb7fa0-aa68-11f0-8ec6-3da0d05fc0c9]) +'%', '#BE2443') END,\r\n        'Относительно предыдущей недели')\r\n+ BR() + BR() +\r\n'Заказы с начала недели: ' \r\n+ BR() +\r\nSIZE(COLOR(BOLD([c2566280-aa67-11f0-8ec6-3da0d05fc0c9]), '#84D1EE'), '24px') + ' ' +\r\n    TOOLTIP(\r\n        IF [31eb5640-aa69-11f0-8ec6-3da0d05fc0c9] < 100 THEN COLOR(STR([31eb5640-aa69-11f0-8ec6-3da0d05fc0c9]) + '%', '#BE2443')\r\n        ELSE COLOR(STR([31eb5640-aa69-11f0-8ec6-3da0d05fc0c9]) + '%', '#54A520') END,\r\n        'Доля от последней полной недели')",
                                                    "default_value": null,
                                                    "autoaggregated": true,
                                                    "lock_aggregation": false,
                                                    "value_constraint": null,
                                                    "initial_data_type": "markup",
                                                    "aggregation_locked": true,
                                                    "has_auto_aggregation": true
                                                }
                                            ],
                                            "title": "section_measure",
                                            "capacity": 1,
                                            "required": true,
                                            "settings": {},
                                            "iconProps": {},
                                            "allowedTypes": {},
                                            "allowedDataTypes": {},
                                            "allowedFinalTypes": {}
                                        }
                                    ],
                                    "allowLayerFilters": false
                                },
                                "geopointsConfig": {},
                                "datasetsPartialFields": [
                                    [
                                        {
                                            "guid": "0dcb3a50-aa55-11f0-8c7c-59e14d3324ab",
                                            "title": "Кол-во заказов за последнюю неделю",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "7dac49e0-aa64-11f0-956d-c14801191fc6",
                                            "title": "ТЕКСТ",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "da27cc00-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "title": "Кол-во заказов за предпоследнюю неделю",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "40962a80-aa64-11f0-956d-c14801191fc6",
                                            "title": "Кол-во заказов с начала недели",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "2beb7fa0-aa68-11f0-8ec6-3da0d05fc0c9",
                                            "title": "Кол-во заказов неделя изменения",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "31eb5640-aa69-11f0-8ec6-3da0d05fc0c9",
                                            "title": "Кол-во заказов с начала недели процент",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "c2566280-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "title": "Кол-во заказов с начала недели (текст)",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "f0591a10-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "title": "Кол-во заказов за предпоследнюю неделю (текст)",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "a5f6be50-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "title": "Кол-во заказов за последнюю неделю (текст)",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "e3a1cfe0-aa55-11f0-8395-f32b2462dd84",
                                            "title": "Фильтр даты",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "end_date",
                                            "title": "end_date",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "start_date",
                                            "title": "start_date",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "f828f540-a935-11f0-976d-099c0b05b9ec",
                                            "title": "%_discount",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "584ad600-a92c-11f0-976d-099c0b05b9ec",
                                            "title": "scale_value",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "scale",
                                            "title": "scale",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "660eb030-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_month",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "d02fc430-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_week",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "1cf44850-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_hour",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "3352b650-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_quarter",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "268ce800-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_year",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "087e5b50-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_date",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "id_scne",
                                            "title": "id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "client_id_lbc6",
                                            "title": "client_id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "gender_fzxw",
                                            "title": "gender",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "product_id_ey10",
                                            "title": "product_id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "quantity_k4iu",
                                            "title": "quantity",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "price_per_item_3dwq",
                                            "title": "price_per_item",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "discount_per_item_7maq",
                                            "title": "discount_per_item",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "total_price_1u2g",
                                            "title": "total_price",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "purchase_datetime_pvoa",
                                            "title": "purchase_datetime",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "461ec3e0-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_datedate",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "created_at_s6qq",
                                            "title": "created_at",
                                            "calc_mode": "direct"
                                        }
                                    ]
                                ]
                            }
                        },
                        "name": "Общие продажи и тренды - KPI. Количество заказов (Неделя)",
                        "type": "markup_wizard_node",
                        "annotation": {
                            "description": ""
                        }
                    }
                },
                "23": {
                    "widget": {
                        "data": {
                            "shared": {
                                "sort": [],
                                "type": "datalens",
                                "links": [],
                                "colors": [],
                                "labels": [],
                                "shapes": [],
                                "filters": [],
                                "updates": [
                                    {
                                        "field": {
                                            "cast": "integer",
                                            "guid": "40962a80-aa64-11f0-956d-c14801191fc6",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Кол-во заказов с начала недели",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "COUNTD_IF([id], [purchase_datetime] >= DATETRUNC([end_date], 'week') AND [purchase_datedate] <= [end_date])",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "integer",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "COUNTD_IF([id_scne], [purchase_datetime_pvoa] >= DATETRUNC([end_date], 'week') AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= [end_date])",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "integer",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "integer",
                                            "guid": "dfe04950-aa7c-11f0-a563-69be3ea7bf44",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Кол-во заказов за последний день",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "COUNTD_IF([id], [purchase_datedate] = [end_date])",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "integer",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "COUNTD_IF([id_scne], [461ec3e0-a929-11f0-976d-099c0b05b9ec] = [end_date])",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "integer",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "string",
                                            "guid": "c2566280-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Кол-во заказов с начала недели (текст)",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "STR(ROUND([Кол-во заказов с начала недели]))",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "string",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "STR(ROUND([40962a80-aa64-11f0-956d-c14801191fc6]))",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "string",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "string",
                                            "guid": "f0591a10-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Кол-во заказов средняя за месяц (текст)",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "STR(ROUND([Кол-во заказов средняя за месяц]))",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "string",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "STR(ROUND([da27cc00-aa67-11f0-8ec6-3da0d05fc0c9]))",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "string",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "string",
                                            "guid": "a5f6be50-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Кол-во заказов средняя за неделю (текст)",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "STR(ROUND([Кол-во заказов средняя за неделю]))",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "string",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "STR(ROUND([0dcb3a50-aa55-11f0-8c7c-59e14d3324ab]))",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "string",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "float",
                                            "guid": "6d3502f0-aa7d-11f0-a563-69be3ea7bf44",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Кол-во заказов день со средней за месяц",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "ROUND(([Кол-во заказов за последний день] - [Кол-во заказов средняя за месяц]) / [Кол-во заказов средняя за месяц] *10000)/100",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "float",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "ROUND(([dfe04950-aa7c-11f0-a563-69be3ea7bf44] - [da27cc00-aa67-11f0-8ec6-3da0d05fc0c9]) / [da27cc00-aa67-11f0-8ec6-3da0d05fc0c9] *10000)/100",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "float",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "float",
                                            "guid": "8178cf50-aa71-11f0-b285-094080387588",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Кол-во заказов день со средней за неделю",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "ROUND(([Кол-во заказов за последний день] - [Кол-во заказов средняя за неделю]) / [Кол-во заказов средняя за неделю] * 10000)/100",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "float",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "ROUND(([dfe04950-aa7c-11f0-a563-69be3ea7bf44] - [0dcb3a50-aa55-11f0-8c7c-59e14d3324ab]) / [0dcb3a50-aa55-11f0-8c7c-59e14d3324ab] * 10000)/100",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "float",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "float",
                                            "guid": "da27cc00-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Кол-во заказов средняя за месяц",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "COUNTD_IF([id], [purchase_datetime] >= DATEADD([end_date], 'day', -29) AND [purchase_datedate] <= [end_date]) / 30",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "float",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "COUNTD_IF([id_scne], [purchase_datetime_pvoa] >= DATEADD([end_date], 'day', -29) AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= [end_date]) / 30",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "float",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "float",
                                            "guid": "0dcb3a50-aa55-11f0-8c7c-59e14d3324ab",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Кол-во заказов средняя за неделю",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "COUNTD_IF([id], [purchase_datetime] >= DATEADD([end_date], 'day', -6) AND [purchase_datedate] <= [end_date]) / 7",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "float",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "COUNTD_IF([id_scne], [purchase_datetime_pvoa] >= DATEADD([end_date], 'day', -6) AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= [end_date]) / 7",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "float",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "markup",
                                            "guid": "7dac49e0-aa64-11f0-956d-c14801191fc6",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "ТЕКСТ",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "'Среднее к-во заказов за неделю: ' + BR() +\r\nSIZE(COLOR(BOLD([Кол-во заказов средняя за неделю (текст)]), '#84D1EE'), '24px') + ' ' + \r\n    TOOLTIP(\r\n        IF [Кол-во заказов день со средней за неделю] > 0 THEN COLOR('▲' + STR([Кол-во заказов день со средней за неделю]) +'%', '#54A520')\r\n        ELSE COLOR('▼' + STR([Кол-во заказов день со средней за неделю]) +'%', '#BE2443') END,\r\n        'Последний день относительно среднего за неделю')\r\n+ BR() + BR() +\r\n'Среднее к-во заказов за месяц: ' + BR() +\r\nSIZE(COLOR(BOLD([Кол-во заказов средняя за месяц (текст)]), '#84D1EE'), '24px') + ' ' +\r\n    TOOLTIP(\r\n        IF [Кол-во заказов день со средней за месяц] > 0 THEN COLOR('▼' + STR([Кол-во заказов день со средней за месяц]) + '%', '#54A520')\r\n        ELSE COLOR('▲' + STR(ABS([Кол-во заказов день со средней за месяц])) + '%', '#BE2443') END,\r\n        'Последний день относительно среднего за месяц')",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "markup",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "'Среднее к-во заказов за неделю: ' + BR() +\r\nSIZE(COLOR(BOLD([a5f6be50-aa67-11f0-8ec6-3da0d05fc0c9]), '#84D1EE'), '24px') + ' ' + \r\n    TOOLTIP(\r\n        IF [8178cf50-aa71-11f0-b285-094080387588] > 0 THEN COLOR('▲' + STR([8178cf50-aa71-11f0-b285-094080387588]) +'%', '#54A520')\r\n        ELSE COLOR('▼' + STR([8178cf50-aa71-11f0-b285-094080387588]) +'%', '#BE2443') END,\r\n        'Последний день относительно среднего за неделю')\r\n+ BR() + BR() +\r\n'Среднее к-во заказов за месяц: ' + BR() +\r\nSIZE(COLOR(BOLD([f0591a10-aa67-11f0-8ec6-3da0d05fc0c9]), '#84D1EE'), '24px') + ' ' +\r\n    TOOLTIP(\r\n        IF [6d3502f0-aa7d-11f0-a563-69be3ea7bf44] > 0 THEN COLOR('▼' + STR([6d3502f0-aa7d-11f0-a563-69be3ea7bf44]) + '%', '#54A520')\r\n        ELSE COLOR('▲' + STR(ABS([6d3502f0-aa7d-11f0-a563-69be3ea7bf44])) + '%', '#BE2443') END,\r\n        'Последний день относительно среднего за месяц')",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "markup",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    }
                                ],
                                "version": "14",
                                "segments": [],
                                "tooltips": [],
                                "datasetsIds": [
                                    "6"
                                ],
                                "hierarchies": [],
                                "colorsConfig": {},
                                "shapesConfig": {},
                                "extraSettings": {
                                    "feed": "",
                                    "title": "Общие продажи и тренды - KPI. Общая выручка",
                                    "stacking": "on",
                                    "zoomMode": "auto",
                                    "titleMode": "hide",
                                    "legendMode": "show",
                                    "tooltipSum": "on",
                                    "mapCenterMode": "auto",
                                    "metricFontSize": "m",
                                    "metricFontColor": "#0FA08D",
                                    "pivotInlineSort": "on",
                                    "navigatorSettings": {
                                        "selectedLines": [],
                                        "isNavigatorAvailable": false
                                    },
                                    "indicatorTitleMode": "hide",
                                    "metricFontColorIndex": 12
                                },
                                "visualization": {
                                    "id": "metric",
                                    "name": "label_visualization-metric",
                                    "type": "metric",
                                    "allowSort": false,
                                    "iconProps": {
                                        "id": "visMetric",
                                        "width": "24"
                                    },
                                    "allowLabels": false,
                                    "allowFilters": true,
                                    "placeholders": [
                                        {
                                            "id": "measures",
                                            "type": "measures",
                                            "items": [
                                                {
                                                    "id": "measure-2",
                                                    "cast": "markup",
                                                    "guid": "7dac49e0-aa64-11f0-956d-c14801191fc6",
                                                    "type": "MEASURE",
                                                    "local": true,
                                                    "title": "ТЕКСТ",
                                                    "valid": true,
                                                    "hidden": false,
                                                    "source": "",
                                                    "formula": "'Среднее к-во заказов за неделю: ' + BR() +\r\nSIZE(COLOR(BOLD([Кол-во заказов средняя за неделю (текст)]), '#84D1EE'), '24px') + ' ' + \r\n    TOOLTIP(\r\n        IF [Кол-во заказов день со средней за неделю] > 0 THEN COLOR('▲' + STR([Кол-во заказов день со средней за неделю]) +'%', '#54A520')\r\n        ELSE COLOR('▼' + STR([Кол-во заказов день со средней за неделю]) +'%', '#BE2443') END,\r\n        'Последний день относительно среднего за неделю')\r\n+ BR() + BR() +\r\n'Среднее к-во заказов за месяц: ' + BR() +\r\nSIZE(COLOR(BOLD([Кол-во заказов средняя за месяц (текст)]), '#84D1EE'), '24px') + ' ' +\r\n    TOOLTIP(\r\n        IF [Кол-во заказов день со средней за месяц] > 0 THEN COLOR('▼' + STR([Кол-во заказов день со средней за месяц]) + '%', '#54A520')\r\n        ELSE COLOR('▲' + STR(ABS([Кол-во заказов день со средней за месяц])) + '%', '#BE2443') END,\r\n        'Последний день относительно среднего за месяц')",
                                                    "virtual": false,
                                                    "avatar_id": null,
                                                    "calc_mode": "formula",
                                                    "data_type": "markup",
                                                    "datasetId": "6",
                                                    "managed_by": "user",
                                                    "aggregation": "none",
                                                    "datasetName": "Данные о продажах",
                                                    "description": "",
                                                    "ui_settings": "",
                                                    "guid_formula": "'Среднее к-во заказов за неделю: ' + BR() +\r\nSIZE(COLOR(BOLD([a5f6be50-aa67-11f0-8ec6-3da0d05fc0c9]), '#84D1EE'), '24px') + ' ' + \r\n    TOOLTIP(\r\n        IF [8178cf50-aa71-11f0-b285-094080387588] > 0 THEN COLOR('▲' + STR([8178cf50-aa71-11f0-b285-094080387588]) +'%', '#54A520')\r\n        ELSE COLOR('▼' + STR([8178cf50-aa71-11f0-b285-094080387588]) +'%', '#BE2443') END,\r\n        'Последний день относительно среднего за неделю')\r\n+ BR() + BR() +\r\n'Среднее к-во заказов за месяц: ' + BR() +\r\nSIZE(COLOR(BOLD([f0591a10-aa67-11f0-8ec6-3da0d05fc0c9]), '#84D1EE'), '24px') + ' ' +\r\n    TOOLTIP(\r\n        IF [6d3502f0-aa7d-11f0-a563-69be3ea7bf44] > 0 THEN COLOR('▼' + STR([6d3502f0-aa7d-11f0-a563-69be3ea7bf44]) + '%', '#54A520')\r\n        ELSE COLOR('▲' + STR(ABS([6d3502f0-aa7d-11f0-a563-69be3ea7bf44])) + '%', '#BE2443') END,\r\n        'Последний день относительно среднего за месяц')",
                                                    "default_value": null,
                                                    "autoaggregated": true,
                                                    "lock_aggregation": false,
                                                    "value_constraint": null,
                                                    "initial_data_type": "markup",
                                                    "aggregation_locked": true,
                                                    "has_auto_aggregation": true
                                                }
                                            ],
                                            "title": "section_measure",
                                            "capacity": 1,
                                            "required": true,
                                            "settings": {},
                                            "iconProps": {},
                                            "allowedTypes": {},
                                            "allowedDataTypes": {},
                                            "allowedFinalTypes": {}
                                        }
                                    ],
                                    "allowLayerFilters": false
                                },
                                "geopointsConfig": {},
                                "datasetsPartialFields": [
                                    [
                                        {
                                            "guid": "0dcb3a50-aa55-11f0-8c7c-59e14d3324ab",
                                            "title": "Кол-во заказов средняя за неделю",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "da27cc00-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "title": "Кол-во заказов средняя за месяц",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "7dac49e0-aa64-11f0-956d-c14801191fc6",
                                            "title": "ТЕКСТ",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "8178cf50-aa71-11f0-b285-094080387588",
                                            "title": "Кол-во заказов день со средней за неделю",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "6d3502f0-aa7d-11f0-a563-69be3ea7bf44",
                                            "title": "Кол-во заказов день со средней за месяц",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "a5f6be50-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "title": "Кол-во заказов средняя за неделю (текст)",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "f0591a10-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "title": "Кол-во заказов средняя за месяц (текст)",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "c2566280-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "title": "Кол-во заказов с начала недели (текст)",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "dfe04950-aa7c-11f0-a563-69be3ea7bf44",
                                            "title": "Кол-во заказов за последний день",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "40962a80-aa64-11f0-956d-c14801191fc6",
                                            "title": "Кол-во заказов с начала недели",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "e3a1cfe0-aa55-11f0-8395-f32b2462dd84",
                                            "title": "Фильтр даты",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "end_date",
                                            "title": "end_date",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "start_date",
                                            "title": "start_date",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "f828f540-a935-11f0-976d-099c0b05b9ec",
                                            "title": "%_discount",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "584ad600-a92c-11f0-976d-099c0b05b9ec",
                                            "title": "scale_value",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "scale",
                                            "title": "scale",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "660eb030-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_month",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "d02fc430-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_week",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "1cf44850-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_hour",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "3352b650-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_quarter",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "268ce800-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_year",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "087e5b50-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_date",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "id_scne",
                                            "title": "id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "client_id_lbc6",
                                            "title": "client_id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "gender_fzxw",
                                            "title": "gender",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "product_id_ey10",
                                            "title": "product_id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "quantity_k4iu",
                                            "title": "quantity",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "price_per_item_3dwq",
                                            "title": "price_per_item",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "discount_per_item_7maq",
                                            "title": "discount_per_item",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "total_price_1u2g",
                                            "title": "total_price",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "purchase_datetime_pvoa",
                                            "title": "purchase_datetime",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "461ec3e0-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_datedate",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "created_at_s6qq",
                                            "title": "created_at",
                                            "calc_mode": "direct"
                                        }
                                    ]
                                ]
                            }
                        },
                        "name": "Общие продажи и тренды - KPI. Количество заказов  (День) среднее",
                        "type": "markup_wizard_node",
                        "annotation": {
                            "description": ""
                        }
                    }
                },
                "24": {
                    "widget": {
                        "data": {
                            "shared": {
                                "sort": [],
                                "type": "datalens",
                                "links": [],
                                "colors": [],
                                "labels": [],
                                "shapes": [],
                                "filters": [],
                                "updates": [
                                    {
                                        "field": {
                                            "cast": "integer",
                                            "guid": "0dcb3a50-aa55-11f0-8c7c-59e14d3324ab",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Кол-во заказов за последний день",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "COUNTD_IF([id], [purchase_datedate] = [end_date])",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "integer",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "COUNTD_IF([id_scne], [461ec3e0-a929-11f0-976d-099c0b05b9ec] = [end_date])",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "integer",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "string",
                                            "guid": "a5f6be50-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Кол-во заказов за последний день (текст)",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "STR([Кол-во заказов за последний день])",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "string",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "STR([0dcb3a50-aa55-11f0-8c7c-59e14d3324ab])",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "string",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "float",
                                            "guid": "2beb7fa0-aa68-11f0-8ec6-3da0d05fc0c9",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Кол-во заказов день изменения",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "ROUND(([Кол-во заказов за последний день] - [Кол-во заказов за предпоследний день]) / [Кол-во заказов за предпоследний день] * 10000) / 100",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "float",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "ROUND(([0dcb3a50-aa55-11f0-8c7c-59e14d3324ab] - [da27cc00-aa67-11f0-8ec6-3da0d05fc0c9]) / [da27cc00-aa67-11f0-8ec6-3da0d05fc0c9] * 10000) / 100",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "float",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "integer",
                                            "guid": "8178cf50-aa71-11f0-b285-094080387588",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Кол-во заказов день изменения номианльная",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "ROUND([Кол-во заказов за последний день] - [Кол-во заказов за предпоследний день])",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "integer",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "ROUND([0dcb3a50-aa55-11f0-8c7c-59e14d3324ab] - [da27cc00-aa67-11f0-8ec6-3da0d05fc0c9])",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "integer",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "integer",
                                            "guid": "da27cc00-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Кол-во заказов за предпоследний день",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "COUNTD_IF([id], [purchase_datedate] = DATEADD([end_date], 'day', -1))",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "integer",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "COUNTD_IF([id_scne], [461ec3e0-a929-11f0-976d-099c0b05b9ec] = DATEADD([end_date], 'day', -1))",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "integer",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "string",
                                            "guid": "f0591a10-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Кол-во заказов за предпоследний день (текст)",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "STR([Кол-во заказов за предпоследний день])",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "string",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "STR([da27cc00-aa67-11f0-8ec6-3da0d05fc0c9])",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "string",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "integer",
                                            "guid": "40962a80-aa64-11f0-956d-c14801191fc6",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Кол-во заказов с начала недели",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "COUNTD_IF([id], [purchase_datetime] >= DATETRUNC([end_date], 'week') AND [purchase_datedate] <= [end_date])",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "integer",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "COUNTD_IF([id_scne], [purchase_datetime_pvoa] >= DATETRUNC([end_date], 'week') AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= [end_date])",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "integer",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "string",
                                            "guid": "c2566280-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Кол-во заказов с начала недели (текст)",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "STR([Кол-во заказов с начала недели])",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "string",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "STR([40962a80-aa64-11f0-956d-c14801191fc6])",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "string",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "float",
                                            "guid": "31eb5640-aa69-11f0-8ec6-3da0d05fc0c9",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Кол-во заказов с начала недели процент",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "ROUND([Кол-во заказов с начала недели] / [Кол-во заказов за последний день] * 10000) /100",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "float",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "ROUND([40962a80-aa64-11f0-956d-c14801191fc6] / [0dcb3a50-aa55-11f0-8c7c-59e14d3324ab] * 10000) /100",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "float",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "markup",
                                            "guid": "7dac49e0-aa64-11f0-956d-c14801191fc6",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "ТЕКСТ",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "'Заказы за последний день: ' + BR() +\r\nSIZE(COLOR(BOLD([Кол-во заказов за последний день (текст)]), '#84D1EE'), '24px') + ' ' + \r\n    TOOLTIP(\r\n        IF [Кол-во заказов день изменения] > 0 THEN COLOR('▲' + STR([Кол-во заказов день изменения]) +'%', '#54A520')\r\n        ELSE COLOR('▼' + STR(ABS([Кол-во заказов день изменения])) +'%', '#BE2443') END,\r\n        'Относительно предыдущего дня')\r\n+ BR() + BR() +\r\n'Заказы за предыдущий день: ' \r\n+ BR() +\r\nSIZE(COLOR(BOLD([Кол-во заказов за предпоследний день (текст)]), '#84D1EE'), '24px') + ' ' +\r\n    TOOLTIP(\r\n        IF [Кол-во заказов день изменения номианльная] > 0 THEN COLOR('▼' + STR([Кол-во заказов день изменения номианльная]), '#54A520')\r\n        ELSE COLOR('▲' + STR(ABS([Кол-во заказов день изменения номианльная])), '#BE2443') END,\r\n        'Номинальная разница (прошлый день - позапрошлый день)')",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "markup",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "'Заказы за последний день: ' + BR() +\r\nSIZE(COLOR(BOLD([a5f6be50-aa67-11f0-8ec6-3da0d05fc0c9]), '#84D1EE'), '24px') + ' ' + \r\n    TOOLTIP(\r\n        IF [2beb7fa0-aa68-11f0-8ec6-3da0d05fc0c9] > 0 THEN COLOR('▲' + STR([2beb7fa0-aa68-11f0-8ec6-3da0d05fc0c9]) +'%', '#54A520')\r\n        ELSE COLOR('▼' + STR(ABS([2beb7fa0-aa68-11f0-8ec6-3da0d05fc0c9])) +'%', '#BE2443') END,\r\n        'Относительно предыдущего дня')\r\n+ BR() + BR() +\r\n'Заказы за предыдущий день: ' \r\n+ BR() +\r\nSIZE(COLOR(BOLD([f0591a10-aa67-11f0-8ec6-3da0d05fc0c9]), '#84D1EE'), '24px') + ' ' +\r\n    TOOLTIP(\r\n        IF [8178cf50-aa71-11f0-b285-094080387588] > 0 THEN COLOR('▼' + STR([8178cf50-aa71-11f0-b285-094080387588]), '#54A520')\r\n        ELSE COLOR('▲' + STR(ABS([8178cf50-aa71-11f0-b285-094080387588])), '#BE2443') END,\r\n        'Номинальная разница (прошлый день - позапрошлый день)')",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "markup",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    }
                                ],
                                "version": "14",
                                "segments": [],
                                "tooltips": [],
                                "datasetsIds": [
                                    "6"
                                ],
                                "hierarchies": [],
                                "colorsConfig": {},
                                "shapesConfig": {},
                                "extraSettings": {
                                    "feed": "",
                                    "title": "Общие продажи и тренды - KPI. Общая выручка",
                                    "stacking": "on",
                                    "zoomMode": "auto",
                                    "titleMode": "hide",
                                    "legendMode": "show",
                                    "tooltipSum": "on",
                                    "mapCenterMode": "auto",
                                    "metricFontSize": "m",
                                    "metricFontColor": "#0FA08D",
                                    "pivotInlineSort": "on",
                                    "navigatorSettings": {
                                        "selectedLines": [],
                                        "isNavigatorAvailable": false
                                    },
                                    "indicatorTitleMode": "hide",
                                    "metricFontColorIndex": 12
                                },
                                "visualization": {
                                    "id": "metric",
                                    "name": "label_visualization-metric",
                                    "type": "metric",
                                    "allowSort": false,
                                    "iconProps": {
                                        "id": "visMetric",
                                        "width": "24"
                                    },
                                    "allowLabels": false,
                                    "allowFilters": true,
                                    "placeholders": [
                                        {
                                            "id": "measures",
                                            "type": "measures",
                                            "items": [
                                                {
                                                    "id": "measure-0",
                                                    "cast": "markup",
                                                    "guid": "7dac49e0-aa64-11f0-956d-c14801191fc6",
                                                    "type": "MEASURE",
                                                    "local": true,
                                                    "title": "ТЕКСТ",
                                                    "valid": true,
                                                    "hidden": false,
                                                    "source": "",
                                                    "formula": "'Заказы за последний день: ' + BR() +\r\nSIZE(COLOR(BOLD([Кол-во заказов за последний день (текст)]), '#84D1EE'), '24px') + ' ' + \r\n    TOOLTIP(\r\n        IF [Кол-во заказов день изменения] > 0 THEN COLOR('▲' + STR([Кол-во заказов день изменения]) +'%', '#54A520')\r\n        ELSE COLOR('▼' + STR(ABS([Кол-во заказов день изменения])) +'%', '#BE2443') END,\r\n        'Относительно предыдущего дня')\r\n+ BR() + BR() +\r\n'Заказы за предыдущий день: ' \r\n+ BR() +\r\nSIZE(COLOR(BOLD([Кол-во заказов за предпоследний день (текст)]), '#84D1EE'), '24px') + ' ' +\r\n    TOOLTIP(\r\n        IF [Кол-во заказов день изменения номианльная] > 0 THEN COLOR('▼' + STR([Кол-во заказов день изменения номианльная]), '#54A520')\r\n        ELSE COLOR('▲' + STR(ABS([Кол-во заказов день изменения номианльная])), '#BE2443') END,\r\n        'Номинальная разница (прошлый день - позапрошлый день)')",
                                                    "virtual": false,
                                                    "avatar_id": null,
                                                    "calc_mode": "formula",
                                                    "data_type": "markup",
                                                    "datasetId": "6",
                                                    "managed_by": "user",
                                                    "aggregation": "none",
                                                    "datasetName": "Данные о продажах",
                                                    "description": "",
                                                    "ui_settings": "",
                                                    "guid_formula": "'Заказы за последний день: ' + BR() +\r\nSIZE(COLOR(BOLD([a5f6be50-aa67-11f0-8ec6-3da0d05fc0c9]), '#84D1EE'), '24px') + ' ' + \r\n    TOOLTIP(\r\n        IF [2beb7fa0-aa68-11f0-8ec6-3da0d05fc0c9] > 0 THEN COLOR('▲' + STR([2beb7fa0-aa68-11f0-8ec6-3da0d05fc0c9]) +'%', '#54A520')\r\n        ELSE COLOR('▼' + STR(ABS([2beb7fa0-aa68-11f0-8ec6-3da0d05fc0c9])) +'%', '#BE2443') END,\r\n        'Относительно предыдущего дня')\r\n+ BR() + BR() +\r\n'Заказы за предыдущий день: ' \r\n+ BR() +\r\nSIZE(COLOR(BOLD([f0591a10-aa67-11f0-8ec6-3da0d05fc0c9]), '#84D1EE'), '24px') + ' ' +\r\n    TOOLTIP(\r\n        IF [8178cf50-aa71-11f0-b285-094080387588] > 0 THEN COLOR('▼' + STR([8178cf50-aa71-11f0-b285-094080387588]), '#54A520')\r\n        ELSE COLOR('▲' + STR(ABS([8178cf50-aa71-11f0-b285-094080387588])), '#BE2443') END,\r\n        'Номинальная разница (прошлый день - позапрошлый день)')",
                                                    "default_value": null,
                                                    "autoaggregated": true,
                                                    "lock_aggregation": false,
                                                    "value_constraint": null,
                                                    "initial_data_type": "markup",
                                                    "aggregation_locked": true,
                                                    "has_auto_aggregation": true
                                                }
                                            ],
                                            "title": "section_measure",
                                            "capacity": 1,
                                            "required": true,
                                            "settings": {},
                                            "iconProps": {},
                                            "allowedTypes": {},
                                            "allowedDataTypes": {},
                                            "allowedFinalTypes": {}
                                        }
                                    ],
                                    "allowLayerFilters": false
                                },
                                "geopointsConfig": {},
                                "datasetsPartialFields": [
                                    [
                                        {
                                            "guid": "7dac49e0-aa64-11f0-956d-c14801191fc6",
                                            "title": "ТЕКСТ",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "31eb5640-aa69-11f0-8ec6-3da0d05fc0c9",
                                            "title": "Кол-во заказов с начала недели процент",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "c2566280-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "title": "Кол-во заказов с начала недели (текст)",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "40962a80-aa64-11f0-956d-c14801191fc6",
                                            "title": "Кол-во заказов с начала недели",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "f0591a10-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "title": "Кол-во заказов за предпоследний день (текст)",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "da27cc00-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "title": "Кол-во заказов за предпоследний день",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "8178cf50-aa71-11f0-b285-094080387588",
                                            "title": "Кол-во заказов день изменения номианльная",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "2beb7fa0-aa68-11f0-8ec6-3da0d05fc0c9",
                                            "title": "Кол-во заказов день изменения",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "a5f6be50-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "title": "Кол-во заказов за последний день (текст)",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "0dcb3a50-aa55-11f0-8c7c-59e14d3324ab",
                                            "title": "Кол-во заказов за последний день",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "e3a1cfe0-aa55-11f0-8395-f32b2462dd84",
                                            "title": "Фильтр даты",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "end_date",
                                            "title": "end_date",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "start_date",
                                            "title": "start_date",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "f828f540-a935-11f0-976d-099c0b05b9ec",
                                            "title": "%_discount",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "584ad600-a92c-11f0-976d-099c0b05b9ec",
                                            "title": "scale_value",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "scale",
                                            "title": "scale",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "660eb030-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_month",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "d02fc430-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_week",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "1cf44850-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_hour",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "3352b650-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_quarter",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "268ce800-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_year",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "087e5b50-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_date",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "id_scne",
                                            "title": "id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "client_id_lbc6",
                                            "title": "client_id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "gender_fzxw",
                                            "title": "gender",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "product_id_ey10",
                                            "title": "product_id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "quantity_k4iu",
                                            "title": "quantity",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "price_per_item_3dwq",
                                            "title": "price_per_item",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "discount_per_item_7maq",
                                            "title": "discount_per_item",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "total_price_1u2g",
                                            "title": "total_price",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "purchase_datetime_pvoa",
                                            "title": "purchase_datetime",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "461ec3e0-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_datedate",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "created_at_s6qq",
                                            "title": "created_at",
                                            "calc_mode": "direct"
                                        }
                                    ]
                                ]
                            }
                        },
                        "name": "Общие продажи и тренды - KPI. Количество заказов (День)",
                        "type": "markup_wizard_node",
                        "annotation": {
                            "description": ""
                        }
                    }
                },
                "25": {
                    "widget": {
                        "data": {
                            "shared": {
                                "sort": [],
                                "type": "datalens",
                                "links": [],
                                "colors": [],
                                "labels": [],
                                "shapes": [],
                                "filters": [],
                                "updates": [
                                    {
                                        "field": {
                                            "cast": "float",
                                            "guid": "0dcb3a50-aa55-11f0-8c7c-59e14d3324ab",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Ср чек за последний месяц",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "SUM_IF([total_price], [purchase_datedate] > DATEADD([end_date], 'month', -1) AND [purchase_datedate] <= [end_date])/COUNTD_IF([id], [purchase_datedate] > DATEADD([end_date], 'month', -1) AND [purchase_datedate] <= [end_date])",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "float",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "SUM_IF([total_price_1u2g], [461ec3e0-a929-11f0-976d-099c0b05b9ec] > DATEADD([end_date], 'month', -1) AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= [end_date])/COUNTD_IF([id_scne], [461ec3e0-a929-11f0-976d-099c0b05b9ec] > DATEADD([end_date], 'month', -1) AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= [end_date])",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "float",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "string",
                                            "guid": "a5f6be50-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Ср чек за последний месяц (текст)",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "STR(ROUND([Ср чек за последний месяц]))",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "string",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "STR(ROUND([0dcb3a50-aa55-11f0-8c7c-59e14d3324ab]))",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "string",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "markup",
                                            "guid": "7dac49e0-aa64-11f0-956d-c14801191fc6",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "ТЕКСТ",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "'Ср. чек за последний месяц: ' + BR() +\r\nSIZE(COLOR(BOLD([Ср чек за последний месяц (текст)]), '#4DA2F1'), '24px') + ' ' + \r\n    TOOLTIP(\r\n        IF [Ср чек месяц изменения] > 0 THEN COLOR('▲' + STR([Ср чек месяц изменения]) +'%', '#54A520')\r\n        ELSE COLOR('▼' + STR([Ср чек месяц изменения]) +'%', '#BE2443') END,\r\n        'Относительно предыдущего месяца')\r\n+ BR() + BR() +\r\n'Ср. чек с начала месяца: ' \r\n+ BR() +\r\nSIZE(COLOR(BOLD([Ср чек с начала месяца (текст)]), '#4DA2F1'), '24px') + ' ' +\r\n    TOOLTIP(\r\n        IF [Ср чек с начала месяца процент] < 100 THEN COLOR(STR([Ср чек с начала месяца процент]) + '%', '#BE2443')\r\n        ELSE COLOR(STR([Ср чек с начала месяца процент]) + '%', '#54A520') END,\r\n        'Доля от последнего полного месяца')",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "markup",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "'Ср. чек за последний месяц: ' + BR() +\r\nSIZE(COLOR(BOLD([a5f6be50-aa67-11f0-8ec6-3da0d05fc0c9]), '#4DA2F1'), '24px') + ' ' + \r\n    TOOLTIP(\r\n        IF [2beb7fa0-aa68-11f0-8ec6-3da0d05fc0c9] > 0 THEN COLOR('▲' + STR([2beb7fa0-aa68-11f0-8ec6-3da0d05fc0c9]) +'%', '#54A520')\r\n        ELSE COLOR('▼' + STR([2beb7fa0-aa68-11f0-8ec6-3da0d05fc0c9]) +'%', '#BE2443') END,\r\n        'Относительно предыдущего месяца')\r\n+ BR() + BR() +\r\n'Ср. чек с начала месяца: ' \r\n+ BR() +\r\nSIZE(COLOR(BOLD([c2566280-aa67-11f0-8ec6-3da0d05fc0c9]), '#4DA2F1'), '24px') + ' ' +\r\n    TOOLTIP(\r\n        IF [31eb5640-aa69-11f0-8ec6-3da0d05fc0c9] < 100 THEN COLOR(STR([31eb5640-aa69-11f0-8ec6-3da0d05fc0c9]) + '%', '#BE2443')\r\n        ELSE COLOR(STR([31eb5640-aa69-11f0-8ec6-3da0d05fc0c9]) + '%', '#54A520') END,\r\n        'Доля от последнего полного месяца')",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "markup",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "string",
                                            "guid": "f0591a10-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Ср чек за предпоследний месяц (текст)",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "STR([Ср чек за предпоследний месяц])",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "string",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "STR([da27cc00-aa67-11f0-8ec6-3da0d05fc0c9])",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "string",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "float",
                                            "guid": "da27cc00-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Ср чек за предпоследний месяц",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "SUM_IF([total_price], [purchase_datedate] > DATEADD([end_date], 'month', -2) AND [purchase_datedate] <= DATEADD([end_date], 'month', -1))\r\n/ COUNTD_IF([id], [purchase_datedate] > DATEADD([end_date], 'month', -2) AND [purchase_datedate] <= DATEADD([end_date], 'month', -1))\r\n",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "float",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "SUM_IF([total_price_1u2g], [461ec3e0-a929-11f0-976d-099c0b05b9ec] > DATEADD([end_date], 'month', -2) AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= DATEADD([end_date], 'month', -1))\r\n/ COUNTD_IF([id_scne], [461ec3e0-a929-11f0-976d-099c0b05b9ec] > DATEADD([end_date], 'month', -2) AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= DATEADD([end_date], 'month', -1))\r\n",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "float",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "float",
                                            "guid": "40962a80-aa64-11f0-956d-c14801191fc6",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Ср чек с начала месяца",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "SUM_IF([total_price], [purchase_datetime] >= DATETRUNC([end_date], 'month') AND [purchase_datedate] <= [end_date]) / COUNTD_IF([id], [purchase_datetime] >= DATETRUNC([end_date], 'month') AND [purchase_datedate] <= [end_date])",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "float",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "SUM_IF([total_price_1u2g], [purchase_datetime_pvoa] >= DATETRUNC([end_date], 'month') AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= [end_date]) / COUNTD_IF([id_scne], [purchase_datetime_pvoa] >= DATETRUNC([end_date], 'month') AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= [end_date])",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "float",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "string",
                                            "guid": "c2566280-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Ср чек с начала месяца (текст)",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "STR(ROUND([Ср чек с начала месяца]))",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "string",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "STR(ROUND([40962a80-aa64-11f0-956d-c14801191fc6]))",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "string",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "float",
                                            "guid": "2beb7fa0-aa68-11f0-8ec6-3da0d05fc0c9",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Ср чек месяц изменения",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "ROUND(([Ср чек за последний месяц]-[Ср чек за предпоследний месяц])/[Ср чек за предпоследний месяц] * 10000) / 100",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "float",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "ROUND(([0dcb3a50-aa55-11f0-8c7c-59e14d3324ab]-[da27cc00-aa67-11f0-8ec6-3da0d05fc0c9])/[da27cc00-aa67-11f0-8ec6-3da0d05fc0c9] * 10000) / 100",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "float",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "float",
                                            "guid": "31eb5640-aa69-11f0-8ec6-3da0d05fc0c9",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Ср чек с начала месяца процент",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "ROUND([Ср чек с начала месяца] / [Ср чек за последний месяц] * 10000) / 100",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "float",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "ROUND([40962a80-aa64-11f0-956d-c14801191fc6] / [0dcb3a50-aa55-11f0-8c7c-59e14d3324ab] * 10000) / 100",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "float",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    }
                                ],
                                "version": "14",
                                "segments": [],
                                "tooltips": [],
                                "datasetsIds": [
                                    "6"
                                ],
                                "hierarchies": [],
                                "colorsConfig": {},
                                "shapesConfig": {},
                                "extraSettings": {
                                    "feed": "",
                                    "title": "Общие продажи и тренды - KPI. Общая выручка",
                                    "stacking": "on",
                                    "zoomMode": "auto",
                                    "titleMode": "hide",
                                    "legendMode": "show",
                                    "tooltipSum": "on",
                                    "mapCenterMode": "auto",
                                    "metricFontSize": "m",
                                    "metricFontColor": "#0FA08D",
                                    "pivotInlineSort": "on",
                                    "navigatorSettings": {
                                        "selectedLines": [],
                                        "isNavigatorAvailable": false
                                    },
                                    "indicatorTitleMode": "hide",
                                    "metricFontColorIndex": 12
                                },
                                "visualization": {
                                    "id": "metric",
                                    "name": "label_visualization-metric",
                                    "type": "metric",
                                    "allowSort": false,
                                    "iconProps": {
                                        "id": "visMetric",
                                        "width": "24"
                                    },
                                    "allowLabels": false,
                                    "allowFilters": true,
                                    "placeholders": [
                                        {
                                            "id": "measures",
                                            "type": "measures",
                                            "items": [
                                                {
                                                    "id": "measure-0",
                                                    "cast": "markup",
                                                    "guid": "7dac49e0-aa64-11f0-956d-c14801191fc6",
                                                    "type": "MEASURE",
                                                    "local": true,
                                                    "title": "ТЕКСТ",
                                                    "valid": true,
                                                    "hidden": false,
                                                    "source": "",
                                                    "formula": "'Ср. чек за последний месяц: ' + BR() +\r\nSIZE(COLOR(BOLD([Ср чек за последний месяц (текст)]), '#4DA2F1'), '24px') + ' ' + \r\n    TOOLTIP(\r\n        IF [Ср чек месяц изменения] > 0 THEN COLOR('▲' + STR([Ср чек месяц изменения]) +'%', '#54A520')\r\n        ELSE COLOR('▼' + STR([Ср чек месяц изменения]) +'%', '#BE2443') END,\r\n        'Относительно предыдущего месяца')\r\n+ BR() + BR() +\r\n'Ср. чек с начала месяца: ' \r\n+ BR() +\r\nSIZE(COLOR(BOLD([Ср чек с начала месяца (текст)]), '#4DA2F1'), '24px') + ' ' +\r\n    TOOLTIP(\r\n        IF [Ср чек с начала месяца процент] < 100 THEN COLOR(STR([Ср чек с начала месяца процент]) + '%', '#BE2443')\r\n        ELSE COLOR(STR([Ср чек с начала месяца процент]) + '%', '#54A520') END,\r\n        'Доля от последнего полного месяца')",
                                                    "virtual": false,
                                                    "avatar_id": null,
                                                    "calc_mode": "formula",
                                                    "data_type": "markup",
                                                    "datasetId": "6",
                                                    "managed_by": "user",
                                                    "aggregation": "none",
                                                    "datasetName": "Данные о продажах",
                                                    "description": "",
                                                    "ui_settings": "",
                                                    "guid_formula": "'Ср. чек за последний месяц: ' + BR() +\r\nSIZE(COLOR(BOLD([a5f6be50-aa67-11f0-8ec6-3da0d05fc0c9]), '#4DA2F1'), '24px') + ' ' + \r\n    TOOLTIP(\r\n        IF [2beb7fa0-aa68-11f0-8ec6-3da0d05fc0c9] > 0 THEN COLOR('▲' + STR([2beb7fa0-aa68-11f0-8ec6-3da0d05fc0c9]) +'%', '#54A520')\r\n        ELSE COLOR('▼' + STR([2beb7fa0-aa68-11f0-8ec6-3da0d05fc0c9]) +'%', '#BE2443') END,\r\n        'Относительно предыдущего месяца')\r\n+ BR() + BR() +\r\n'Ср. чек с начала месяца: ' \r\n+ BR() +\r\nSIZE(COLOR(BOLD([c2566280-aa67-11f0-8ec6-3da0d05fc0c9]), '#4DA2F1'), '24px') + ' ' +\r\n    TOOLTIP(\r\n        IF [31eb5640-aa69-11f0-8ec6-3da0d05fc0c9] < 100 THEN COLOR(STR([31eb5640-aa69-11f0-8ec6-3da0d05fc0c9]) + '%', '#BE2443')\r\n        ELSE COLOR(STR([31eb5640-aa69-11f0-8ec6-3da0d05fc0c9]) + '%', '#54A520') END,\r\n        'Доля от последнего полного месяца')",
                                                    "default_value": null,
                                                    "autoaggregated": true,
                                                    "lock_aggregation": false,
                                                    "value_constraint": null,
                                                    "initial_data_type": "markup",
                                                    "aggregation_locked": true,
                                                    "has_auto_aggregation": true
                                                }
                                            ],
                                            "title": "section_measure",
                                            "capacity": 1,
                                            "required": true,
                                            "settings": {},
                                            "iconProps": {},
                                            "allowedTypes": {},
                                            "allowedDataTypes": {},
                                            "allowedFinalTypes": {}
                                        }
                                    ],
                                    "allowLayerFilters": false
                                },
                                "geopointsConfig": {},
                                "datasetsPartialFields": [
                                    [
                                        {
                                            "guid": "7dac49e0-aa64-11f0-956d-c14801191fc6",
                                            "title": "ТЕКСТ",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "31eb5640-aa69-11f0-8ec6-3da0d05fc0c9",
                                            "title": "Ср чек с начала месяца процент",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "2beb7fa0-aa68-11f0-8ec6-3da0d05fc0c9",
                                            "title": "Ср чек месяц изменения",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "c2566280-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "title": "Ср чек с начала месяца (текст)",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "40962a80-aa64-11f0-956d-c14801191fc6",
                                            "title": "Ср чек с начала месяца",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "da27cc00-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "title": "Ср чек за предпоследний месяц",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "f0591a10-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "title": "Ср чек за предпоследний месяц (текст)",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "a5f6be50-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "title": "Ср чек за последний месяц (текст)",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "0dcb3a50-aa55-11f0-8c7c-59e14d3324ab",
                                            "title": "Ср чек за последний месяц",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "e3a1cfe0-aa55-11f0-8395-f32b2462dd84",
                                            "title": "Фильтр даты",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "end_date",
                                            "title": "end_date",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "start_date",
                                            "title": "start_date",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "f828f540-a935-11f0-976d-099c0b05b9ec",
                                            "title": "%_discount",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "584ad600-a92c-11f0-976d-099c0b05b9ec",
                                            "title": "scale_value",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "scale",
                                            "title": "scale",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "660eb030-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_month",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "d02fc430-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_week",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "1cf44850-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_hour",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "3352b650-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_quarter",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "268ce800-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_year",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "087e5b50-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_date",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "id_scne",
                                            "title": "id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "client_id_lbc6",
                                            "title": "client_id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "gender_fzxw",
                                            "title": "gender",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "product_id_ey10",
                                            "title": "product_id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "quantity_k4iu",
                                            "title": "quantity",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "price_per_item_3dwq",
                                            "title": "price_per_item",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "discount_per_item_7maq",
                                            "title": "discount_per_item",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "total_price_1u2g",
                                            "title": "total_price",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "purchase_datetime_pvoa",
                                            "title": "purchase_datetime",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "461ec3e0-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_datedate",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "created_at_s6qq",
                                            "title": "created_at",
                                            "calc_mode": "direct"
                                        }
                                    ]
                                ]
                            }
                        },
                        "name": "Общие продажи и тренды - KPI. Средний чек (Месяц)",
                        "type": "markup_wizard_node",
                        "annotation": {
                            "description": ""
                        }
                    }
                },
                "26": {
                    "widget": {
                        "data": {
                            "shared": {
                                "sort": [],
                                "type": "datalens",
                                "links": [],
                                "colors": [],
                                "labels": [],
                                "shapes": [],
                                "filters": [],
                                "updates": [
                                    {
                                        "field": {
                                            "cast": "markup",
                                            "guid": "7dac49e0-aa64-11f0-956d-c14801191fc6",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "ТЕКСТ",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "'Ср. чек за последнюю неделю: ' + BR() +\r\nSIZE(COLOR(BOLD([Ср чек за последнюю неделю (текст)]), '#4DA2F1'), '24px') + ' ' + \r\n    TOOLTIP(\r\n        IF [Ср чек неделя изменения] > 0 THEN COLOR('▲' + STR([Ср чек неделя изменения]) +'%', '#54A520')\r\n        ELSE COLOR('▼' + STR([Ср чек неделя изменения]) +'%', '#BE2443') END,\r\n        'Относительно предыдущей недели')\r\n+ BR() + BR() +\r\n'Ср. чек с начала недели: ' \r\n+ BR() +\r\nSIZE(COLOR(BOLD([Ср чек с начала недели (текст)]), '#4DA2F1'), '24px') + ' ' +\r\n    TOOLTIP(\r\n        IF [Ср чек с начала недели процент] < 100 THEN COLOR(STR([Ср чек с начала недели процент]) + '%', '#BE2443')\r\n        ELSE COLOR(STR([Ср чек с начала недели процент]) + '%', '#54A520') END,\r\n        'Доля от последней полной недели')",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "markup",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "'Ср. чек за последнюю неделю: ' + BR() +\r\nSIZE(COLOR(BOLD([a5f6be50-aa67-11f0-8ec6-3da0d05fc0c9]), '#4DA2F1'), '24px') + ' ' + \r\n    TOOLTIP(\r\n        IF [2beb7fa0-aa68-11f0-8ec6-3da0d05fc0c9] > 0 THEN COLOR('▲' + STR([2beb7fa0-aa68-11f0-8ec6-3da0d05fc0c9]) +'%', '#54A520')\r\n        ELSE COLOR('▼' + STR([2beb7fa0-aa68-11f0-8ec6-3da0d05fc0c9]) +'%', '#BE2443') END,\r\n        'Относительно предыдущей недели')\r\n+ BR() + BR() +\r\n'Ср. чек с начала недели: ' \r\n+ BR() +\r\nSIZE(COLOR(BOLD([c2566280-aa67-11f0-8ec6-3da0d05fc0c9]), '#4DA2F1'), '24px') + ' ' +\r\n    TOOLTIP(\r\n        IF [31eb5640-aa69-11f0-8ec6-3da0d05fc0c9] < 100 THEN COLOR(STR([31eb5640-aa69-11f0-8ec6-3da0d05fc0c9]) + '%', '#BE2443')\r\n        ELSE COLOR(STR([31eb5640-aa69-11f0-8ec6-3da0d05fc0c9]) + '%', '#54A520') END,\r\n        'Доля от последней полной недели')",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "markup",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "float",
                                            "guid": "0dcb3a50-aa55-11f0-8c7c-59e14d3324ab",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Ср чек за последнюю неделю",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "SUM_IF([total_price], [purchase_datedate] > DATEADD([end_date], 'week', -1) AND [purchase_datedate] <= [end_date]) / COUNTD_IF([id], [purchase_datedate] > DATEADD([end_date], 'week', -1) AND [purchase_datedate] <= [end_date])",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "float",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "SUM_IF([total_price_1u2g], [461ec3e0-a929-11f0-976d-099c0b05b9ec] > DATEADD([end_date], 'week', -1) AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= [end_date]) / COUNTD_IF([id_scne], [461ec3e0-a929-11f0-976d-099c0b05b9ec] > DATEADD([end_date], 'week', -1) AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= [end_date])",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "float",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "string",
                                            "guid": "a5f6be50-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Ср чек за последнюю неделю (текст)",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "STR(ROUND([Ср чек за последнюю неделю]))",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "string",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "STR(ROUND([0dcb3a50-aa55-11f0-8c7c-59e14d3324ab]))",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "string",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "float",
                                            "guid": "da27cc00-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Ср чек за предпоследнюю неделю",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "SUM_IF([total_price], [purchase_datedate] > DATEADD([end_date], 'week', -2) AND [purchase_datedate] <= DATEADD([end_date], 'week', -1)) / COUNTD_IF([id], [purchase_datedate] > DATEADD([end_date], 'week', -2) AND [purchase_datedate] <= DATEADD([end_date], 'week', -1))",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "float",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "SUM_IF([total_price_1u2g], [461ec3e0-a929-11f0-976d-099c0b05b9ec] > DATEADD([end_date], 'week', -2) AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= DATEADD([end_date], 'week', -1)) / COUNTD_IF([id_scne], [461ec3e0-a929-11f0-976d-099c0b05b9ec] > DATEADD([end_date], 'week', -2) AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= DATEADD([end_date], 'week', -1))",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "float",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "string",
                                            "guid": "f0591a10-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Ср чек за предпоследнюю неделю (текст)",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "STR(ROUND([Ср чек за предпоследнюю неделю]))",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "string",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "STR(ROUND([da27cc00-aa67-11f0-8ec6-3da0d05fc0c9]))",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "string",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "float",
                                            "guid": "2beb7fa0-aa68-11f0-8ec6-3da0d05fc0c9",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Ср чек неделя изменения",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "ROUND(([Ср чек за последнюю неделю]-[Ср чек за предпоследнюю неделю]) / [Ср чек за предпоследнюю неделю] * 10000) / 100",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "float",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "ROUND(([0dcb3a50-aa55-11f0-8c7c-59e14d3324ab]-[da27cc00-aa67-11f0-8ec6-3da0d05fc0c9]) / [da27cc00-aa67-11f0-8ec6-3da0d05fc0c9] * 10000) / 100",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "float",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "float",
                                            "guid": "40962a80-aa64-11f0-956d-c14801191fc6",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Ср чек с начала недели",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "SUM_IF([total_price], [purchase_datedate] >= DATETRUNC([end_date], 'week') AND [purchase_datedate] <= [end_date]) / COUNTD_IF([id], [purchase_datedate] >= DATETRUNC([end_date], 'week') AND [purchase_datedate] <= [end_date])",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "float",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "SUM_IF([total_price_1u2g], [461ec3e0-a929-11f0-976d-099c0b05b9ec] >= DATETRUNC([end_date], 'week') AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= [end_date]) / COUNTD_IF([id_scne], [461ec3e0-a929-11f0-976d-099c0b05b9ec] >= DATETRUNC([end_date], 'week') AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= [end_date])",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "float",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "string",
                                            "guid": "c2566280-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Ср чек с начала недели (текст)",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "STR(ROUND([Ср чек с начала недели]))",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "string",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "STR(ROUND([40962a80-aa64-11f0-956d-c14801191fc6]))",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "string",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "float",
                                            "guid": "31eb5640-aa69-11f0-8ec6-3da0d05fc0c9",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Ср чек с начала недели процент",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "ROUND([Ср чек с начала недели] / [Ср чек за последнюю неделю] * 10000) / 100",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "float",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "ROUND([40962a80-aa64-11f0-956d-c14801191fc6] / [0dcb3a50-aa55-11f0-8c7c-59e14d3324ab] * 10000) / 100",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "float",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    }
                                ],
                                "version": "14",
                                "segments": [],
                                "tooltips": [],
                                "datasetsIds": [
                                    "6"
                                ],
                                "hierarchies": [],
                                "colorsConfig": {},
                                "shapesConfig": {},
                                "extraSettings": {
                                    "feed": "",
                                    "title": "Общие продажи и тренды - KPI. Общая выручка",
                                    "stacking": "on",
                                    "zoomMode": "auto",
                                    "titleMode": "hide",
                                    "legendMode": "show",
                                    "tooltipSum": "on",
                                    "mapCenterMode": "auto",
                                    "metricFontSize": "m",
                                    "metricFontColor": "#0FA08D",
                                    "pivotInlineSort": "on",
                                    "navigatorSettings": {
                                        "selectedLines": [],
                                        "isNavigatorAvailable": false
                                    },
                                    "indicatorTitleMode": "hide",
                                    "metricFontColorIndex": 12
                                },
                                "visualization": {
                                    "id": "metric",
                                    "name": "label_visualization-metric",
                                    "type": "metric",
                                    "allowSort": false,
                                    "iconProps": {
                                        "id": "visMetric",
                                        "width": "24"
                                    },
                                    "allowLabels": false,
                                    "allowFilters": true,
                                    "placeholders": [
                                        {
                                            "id": "measures",
                                            "type": "measures",
                                            "items": [
                                                {
                                                    "id": "measure-0",
                                                    "cast": "markup",
                                                    "guid": "7dac49e0-aa64-11f0-956d-c14801191fc6",
                                                    "type": "MEASURE",
                                                    "local": true,
                                                    "title": "ТЕКСТ",
                                                    "valid": true,
                                                    "hidden": false,
                                                    "source": "",
                                                    "formula": "'Ср. чек за последнюю неделю: ' + BR() +\r\nSIZE(COLOR(BOLD([Ср чек за последнюю неделю (текст)]), '#4DA2F1'), '24px') + ' ' + \r\n    TOOLTIP(\r\n        IF [Ср чек неделя изменения] > 0 THEN COLOR('▲' + STR([Ср чек неделя изменения]) +'%', '#54A520')\r\n        ELSE COLOR('▼' + STR([Ср чек неделя изменения]) +'%', '#BE2443') END,\r\n        'Относительно предыдущей недели')\r\n+ BR() + BR() +\r\n'Ср. чек с начала недели: ' \r\n+ BR() +\r\nSIZE(COLOR(BOLD([Ср чек с начала недели (текст)]), '#4DA2F1'), '24px') + ' ' +\r\n    TOOLTIP(\r\n        IF [Ср чек с начала недели процент] < 100 THEN COLOR(STR([Ср чек с начала недели процент]) + '%', '#BE2443')\r\n        ELSE COLOR(STR([Ср чек с начала недели процент]) + '%', '#54A520') END,\r\n        'Доля от последней полной недели')",
                                                    "virtual": false,
                                                    "avatar_id": null,
                                                    "calc_mode": "formula",
                                                    "data_type": "markup",
                                                    "datasetId": "6",
                                                    "managed_by": "user",
                                                    "aggregation": "none",
                                                    "datasetName": "Данные о продажах",
                                                    "description": "",
                                                    "ui_settings": "",
                                                    "guid_formula": "'Ср. чек за последнюю неделю: ' + BR() +\r\nSIZE(COLOR(BOLD([a5f6be50-aa67-11f0-8ec6-3da0d05fc0c9]), '#4DA2F1'), '24px') + ' ' + \r\n    TOOLTIP(\r\n        IF [2beb7fa0-aa68-11f0-8ec6-3da0d05fc0c9] > 0 THEN COLOR('▲' + STR([2beb7fa0-aa68-11f0-8ec6-3da0d05fc0c9]) +'%', '#54A520')\r\n        ELSE COLOR('▼' + STR([2beb7fa0-aa68-11f0-8ec6-3da0d05fc0c9]) +'%', '#BE2443') END,\r\n        'Относительно предыдущей недели')\r\n+ BR() + BR() +\r\n'Ср. чек с начала недели: ' \r\n+ BR() +\r\nSIZE(COLOR(BOLD([c2566280-aa67-11f0-8ec6-3da0d05fc0c9]), '#4DA2F1'), '24px') + ' ' +\r\n    TOOLTIP(\r\n        IF [31eb5640-aa69-11f0-8ec6-3da0d05fc0c9] < 100 THEN COLOR(STR([31eb5640-aa69-11f0-8ec6-3da0d05fc0c9]) + '%', '#BE2443')\r\n        ELSE COLOR(STR([31eb5640-aa69-11f0-8ec6-3da0d05fc0c9]) + '%', '#54A520') END,\r\n        'Доля от последней полной недели')",
                                                    "default_value": null,
                                                    "autoaggregated": true,
                                                    "lock_aggregation": false,
                                                    "value_constraint": null,
                                                    "initial_data_type": "markup",
                                                    "aggregation_locked": true,
                                                    "has_auto_aggregation": true
                                                }
                                            ],
                                            "title": "section_measure",
                                            "capacity": 1,
                                            "required": true,
                                            "settings": {},
                                            "iconProps": {},
                                            "allowedTypes": {},
                                            "allowedDataTypes": {},
                                            "allowedFinalTypes": {}
                                        }
                                    ],
                                    "allowLayerFilters": false
                                },
                                "geopointsConfig": {},
                                "datasetsPartialFields": [
                                    [
                                        {
                                            "guid": "7dac49e0-aa64-11f0-956d-c14801191fc6",
                                            "title": "ТЕКСТ",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "2beb7fa0-aa68-11f0-8ec6-3da0d05fc0c9",
                                            "title": "Ср чек неделя изменения",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "31eb5640-aa69-11f0-8ec6-3da0d05fc0c9",
                                            "title": "Ср чек с начала недели процент",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "c2566280-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "title": "Ср чек с начала недели (текст)",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "40962a80-aa64-11f0-956d-c14801191fc6",
                                            "title": "Ср чек с начала недели",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "f0591a10-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "title": "Ср чек за предпоследнюю неделю (текст)",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "da27cc00-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "title": "Ср чек за предпоследнюю неделю",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "a5f6be50-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "title": "Ср чек за последнюю неделю (текст)",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "0dcb3a50-aa55-11f0-8c7c-59e14d3324ab",
                                            "title": "Ср чек за последнюю неделю",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "e3a1cfe0-aa55-11f0-8395-f32b2462dd84",
                                            "title": "Фильтр даты",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "end_date",
                                            "title": "end_date",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "start_date",
                                            "title": "start_date",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "f828f540-a935-11f0-976d-099c0b05b9ec",
                                            "title": "%_discount",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "584ad600-a92c-11f0-976d-099c0b05b9ec",
                                            "title": "scale_value",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "scale",
                                            "title": "scale",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "660eb030-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_month",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "d02fc430-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_week",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "1cf44850-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_hour",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "3352b650-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_quarter",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "268ce800-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_year",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "087e5b50-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_date",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "id_scne",
                                            "title": "id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "client_id_lbc6",
                                            "title": "client_id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "gender_fzxw",
                                            "title": "gender",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "product_id_ey10",
                                            "title": "product_id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "quantity_k4iu",
                                            "title": "quantity",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "price_per_item_3dwq",
                                            "title": "price_per_item",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "discount_per_item_7maq",
                                            "title": "discount_per_item",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "total_price_1u2g",
                                            "title": "total_price",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "purchase_datetime_pvoa",
                                            "title": "purchase_datetime",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "461ec3e0-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_datedate",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "created_at_s6qq",
                                            "title": "created_at",
                                            "calc_mode": "direct"
                                        }
                                    ]
                                ]
                            }
                        },
                        "name": "Общие продажи и тренды - KPI. Средний чек (Неделя)",
                        "type": "markup_wizard_node",
                        "annotation": {
                            "description": ""
                        }
                    }
                },
                "27": {
                    "widget": {
                        "data": {
                            "shared": {
                                "sort": [],
                                "type": "datalens",
                                "links": [],
                                "colors": [],
                                "labels": [],
                                "shapes": [],
                                "filters": [],
                                "updates": [
                                    {
                                        "field": {
                                            "cast": "float",
                                            "guid": "2beb7fa0-aa68-11f0-8ec6-3da0d05fc0c9",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Кол-во заказов день изменения",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "ROUND(([Ср чек за последний день] - [Ср чек за предпоследний день]) / [Ср чек за предпоследний день] * 10000) / 100",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "float",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "ROUND(([0dcb3a50-aa55-11f0-8c7c-59e14d3324ab] - [da27cc00-aa67-11f0-8ec6-3da0d05fc0c9]) / [da27cc00-aa67-11f0-8ec6-3da0d05fc0c9] * 10000) / 100",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "float",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "integer",
                                            "guid": "8178cf50-aa71-11f0-b285-094080387588",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Кол-во заказов день изменения номианльная",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "ROUND([Ср чек за последний день] - [Ср чек за предпоследний день])",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "integer",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "ROUND([0dcb3a50-aa55-11f0-8c7c-59e14d3324ab] - [da27cc00-aa67-11f0-8ec6-3da0d05fc0c9])",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "integer",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "float",
                                            "guid": "31eb5640-aa69-11f0-8ec6-3da0d05fc0c9",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Кол-во заказов с начала недели процент",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "ROUND([Ср чек с начала недели] / [Ср чек за последний день] * 10000) /100",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "float",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "ROUND([40962a80-aa64-11f0-956d-c14801191fc6] / [0dcb3a50-aa55-11f0-8c7c-59e14d3324ab] * 10000) /100",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "float",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "string",
                                            "guid": "a5f6be50-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Ср чек за последний день (текст)",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "STR(ROUND([Ср чек за последний день]))",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "string",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "STR(ROUND([0dcb3a50-aa55-11f0-8c7c-59e14d3324ab]))",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "string",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "float",
                                            "guid": "da27cc00-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Ср чек за предпоследний день",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "SUM_IF([total_price], [purchase_datedate] = DATEADD([end_date], 'day', -1)) / COUNTD_IF([id], [purchase_datedate] = DATEADD([end_date], 'day', -1))",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "float",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "SUM_IF([total_price_1u2g], [461ec3e0-a929-11f0-976d-099c0b05b9ec] = DATEADD([end_date], 'day', -1)) / COUNTD_IF([id_scne], [461ec3e0-a929-11f0-976d-099c0b05b9ec] = DATEADD([end_date], 'day', -1))",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "float",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "string",
                                            "guid": "f0591a10-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Ср чек за предпоследний день (текст)",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "STR(ROUND([Ср чек за предпоследний день]))",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "string",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "STR(ROUND([da27cc00-aa67-11f0-8ec6-3da0d05fc0c9]))",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "string",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "float",
                                            "guid": "40962a80-aa64-11f0-956d-c14801191fc6",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Ср чек с начала недели",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "SUM_IF([total_price], [purchase_datetime] >= DATETRUNC([end_date], 'week') AND [purchase_datedate] <= [end_date])/COUNTD_IF([id], [purchase_datetime] >= DATETRUNC([end_date], 'week') AND [purchase_datedate] <= [end_date])",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "float",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "SUM_IF([total_price_1u2g], [purchase_datetime_pvoa] >= DATETRUNC([end_date], 'week') AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= [end_date])/COUNTD_IF([id_scne], [purchase_datetime_pvoa] >= DATETRUNC([end_date], 'week') AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= [end_date])",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "float",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "string",
                                            "guid": "c2566280-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Ср чек с начала недели (текст)",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "STR(ROUND([Ср чек с начала недели]))",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "string",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "STR(ROUND([40962a80-aa64-11f0-956d-c14801191fc6]))",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "string",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "float",
                                            "guid": "0dcb3a50-aa55-11f0-8c7c-59e14d3324ab",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Ср чек за последний день",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "SUM_IF([total_price], [purchase_datedate] = [end_date]) / COUNTD_IF([id], [purchase_datedate] = [end_date])",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "float",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "SUM_IF([total_price_1u2g], [461ec3e0-a929-11f0-976d-099c0b05b9ec] = [end_date]) / COUNTD_IF([id_scne], [461ec3e0-a929-11f0-976d-099c0b05b9ec] = [end_date])",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "float",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "markup",
                                            "guid": "7dac49e0-aa64-11f0-956d-c14801191fc6",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "ТЕКСТ",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "'Средний чек за последний день: ' + BR() +\r\nSIZE(COLOR(BOLD([Ср чек за последний день (текст)]), '#4DA2F1'), '24px') + ' ' + \r\n    TOOLTIP(\r\n        IF [Кол-во заказов день изменения] > 0 THEN COLOR('▲' + STR([Кол-во заказов день изменения]) +'%', '#54A520')\r\n        ELSE COLOR('▼' + STR(ABS([Кол-во заказов день изменения])) +'%', '#BE2443') END,\r\n        'Относительно предыдущего дня')\r\n+ BR() + BR() +\r\n'Средний чек за предыдущий день: ' \r\n+ BR() +\r\nSIZE(COLOR(BOLD([Ср чек за предпоследний день (текст)]), '#4DA2F1'), '24px') + ' ' +\r\n    TOOLTIP(\r\n        IF [Кол-во заказов день изменения номианльная] > 0 THEN COLOR('▼' + STR([Кол-во заказов день изменения номианльная]), '#54A520')\r\n        ELSE COLOR('▲' + STR(ABS([Кол-во заказов день изменения номианльная])), '#BE2443') END,\r\n        'Номинальная разница (прошлый день - позапрошлый день)')",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "markup",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "'Средний чек за последний день: ' + BR() +\r\nSIZE(COLOR(BOLD([a5f6be50-aa67-11f0-8ec6-3da0d05fc0c9]), '#4DA2F1'), '24px') + ' ' + \r\n    TOOLTIP(\r\n        IF [2beb7fa0-aa68-11f0-8ec6-3da0d05fc0c9] > 0 THEN COLOR('▲' + STR([2beb7fa0-aa68-11f0-8ec6-3da0d05fc0c9]) +'%', '#54A520')\r\n        ELSE COLOR('▼' + STR(ABS([2beb7fa0-aa68-11f0-8ec6-3da0d05fc0c9])) +'%', '#BE2443') END,\r\n        'Относительно предыдущего дня')\r\n+ BR() + BR() +\r\n'Средний чек за предыдущий день: ' \r\n+ BR() +\r\nSIZE(COLOR(BOLD([f0591a10-aa67-11f0-8ec6-3da0d05fc0c9]), '#4DA2F1'), '24px') + ' ' +\r\n    TOOLTIP(\r\n        IF [8178cf50-aa71-11f0-b285-094080387588] > 0 THEN COLOR('▼' + STR([8178cf50-aa71-11f0-b285-094080387588]), '#54A520')\r\n        ELSE COLOR('▲' + STR(ABS([8178cf50-aa71-11f0-b285-094080387588])), '#BE2443') END,\r\n        'Номинальная разница (прошлый день - позапрошлый день)')",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "markup",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    }
                                ],
                                "version": "14",
                                "segments": [],
                                "tooltips": [],
                                "datasetsIds": [
                                    "6"
                                ],
                                "hierarchies": [],
                                "colorsConfig": {},
                                "shapesConfig": {},
                                "extraSettings": {
                                    "feed": "",
                                    "title": "Общие продажи и тренды - KPI. Общая выручка",
                                    "stacking": "on",
                                    "zoomMode": "auto",
                                    "titleMode": "hide",
                                    "legendMode": "show",
                                    "tooltipSum": "on",
                                    "mapCenterMode": "auto",
                                    "metricFontSize": "m",
                                    "metricFontColor": "#0FA08D",
                                    "pivotInlineSort": "on",
                                    "navigatorSettings": {
                                        "selectedLines": [],
                                        "isNavigatorAvailable": false
                                    },
                                    "indicatorTitleMode": "hide",
                                    "metricFontColorIndex": 12
                                },
                                "visualization": {
                                    "id": "metric",
                                    "name": "label_visualization-metric",
                                    "type": "metric",
                                    "allowSort": false,
                                    "iconProps": {
                                        "id": "visMetric",
                                        "width": "24"
                                    },
                                    "allowLabels": false,
                                    "allowFilters": true,
                                    "placeholders": [
                                        {
                                            "id": "measures",
                                            "type": "measures",
                                            "items": [
                                                {
                                                    "id": "measure-1",
                                                    "cast": "markup",
                                                    "guid": "7dac49e0-aa64-11f0-956d-c14801191fc6",
                                                    "type": "MEASURE",
                                                    "local": true,
                                                    "title": "ТЕКСТ",
                                                    "valid": true,
                                                    "hidden": false,
                                                    "source": "",
                                                    "formula": "'Средний чек за последний день: ' + BR() +\r\nSIZE(COLOR(BOLD([Ср чек за последний день (текст)]), '#4DA2F1'), '24px') + ' ' + \r\n    TOOLTIP(\r\n        IF [Кол-во заказов день изменения] > 0 THEN COLOR('▲' + STR([Кол-во заказов день изменения]) +'%', '#54A520')\r\n        ELSE COLOR('▼' + STR(ABS([Кол-во заказов день изменения])) +'%', '#BE2443') END,\r\n        'Относительно предыдущего дня')\r\n+ BR() + BR() +\r\n'Средний чек за предыдущий день: ' \r\n+ BR() +\r\nSIZE(COLOR(BOLD([Ср чек за предпоследний день (текст)]), '#4DA2F1'), '24px') + ' ' +\r\n    TOOLTIP(\r\n        IF [Кол-во заказов день изменения номианльная] > 0 THEN COLOR('▼' + STR([Кол-во заказов день изменения номианльная]), '#54A520')\r\n        ELSE COLOR('▲' + STR(ABS([Кол-во заказов день изменения номианльная])), '#BE2443') END,\r\n        'Номинальная разница (прошлый день - позапрошлый день)')",
                                                    "virtual": false,
                                                    "avatar_id": null,
                                                    "calc_mode": "formula",
                                                    "data_type": "markup",
                                                    "datasetId": "6",
                                                    "managed_by": "user",
                                                    "aggregation": "none",
                                                    "datasetName": "Данные о продажах",
                                                    "description": "",
                                                    "ui_settings": "",
                                                    "guid_formula": "'Средний чек за последний день: ' + BR() +\r\nSIZE(COLOR(BOLD([a5f6be50-aa67-11f0-8ec6-3da0d05fc0c9]), '#4DA2F1'), '24px') + ' ' + \r\n    TOOLTIP(\r\n        IF [2beb7fa0-aa68-11f0-8ec6-3da0d05fc0c9] > 0 THEN COLOR('▲' + STR([2beb7fa0-aa68-11f0-8ec6-3da0d05fc0c9]) +'%', '#54A520')\r\n        ELSE COLOR('▼' + STR(ABS([2beb7fa0-aa68-11f0-8ec6-3da0d05fc0c9])) +'%', '#BE2443') END,\r\n        'Относительно предыдущего дня')\r\n+ BR() + BR() +\r\n'Средний чек за предыдущий день: ' \r\n+ BR() +\r\nSIZE(COLOR(BOLD([f0591a10-aa67-11f0-8ec6-3da0d05fc0c9]), '#4DA2F1'), '24px') + ' ' +\r\n    TOOLTIP(\r\n        IF [8178cf50-aa71-11f0-b285-094080387588] > 0 THEN COLOR('▼' + STR([8178cf50-aa71-11f0-b285-094080387588]), '#54A520')\r\n        ELSE COLOR('▲' + STR(ABS([8178cf50-aa71-11f0-b285-094080387588])), '#BE2443') END,\r\n        'Номинальная разница (прошлый день - позапрошлый день)')",
                                                    "default_value": null,
                                                    "autoaggregated": true,
                                                    "lock_aggregation": false,
                                                    "value_constraint": null,
                                                    "initial_data_type": "markup",
                                                    "aggregation_locked": true,
                                                    "has_auto_aggregation": true
                                                }
                                            ],
                                            "title": "section_measure",
                                            "capacity": 1,
                                            "required": true,
                                            "settings": {},
                                            "iconProps": {},
                                            "allowedTypes": {},
                                            "allowedDataTypes": {},
                                            "allowedFinalTypes": {}
                                        }
                                    ],
                                    "allowLayerFilters": false
                                },
                                "geopointsConfig": {},
                                "datasetsPartialFields": [
                                    [
                                        {
                                            "guid": "0dcb3a50-aa55-11f0-8c7c-59e14d3324ab",
                                            "title": "Ср чек за последний день",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "7dac49e0-aa64-11f0-956d-c14801191fc6",
                                            "title": "ТЕКСТ",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "c2566280-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "title": "Ср чек с начала недели (текст)",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "40962a80-aa64-11f0-956d-c14801191fc6",
                                            "title": "Ср чек с начала недели",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "f0591a10-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "title": "Ср чек за предпоследний день (текст)",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "da27cc00-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "title": "Ср чек за предпоследний день",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "a5f6be50-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "title": "Ср чек за последний день (текст)",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "31eb5640-aa69-11f0-8ec6-3da0d05fc0c9",
                                            "title": "Кол-во заказов с начала недели процент",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "8178cf50-aa71-11f0-b285-094080387588",
                                            "title": "Кол-во заказов день изменения номианльная",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "2beb7fa0-aa68-11f0-8ec6-3da0d05fc0c9",
                                            "title": "Кол-во заказов день изменения",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "e3a1cfe0-aa55-11f0-8395-f32b2462dd84",
                                            "title": "Фильтр даты",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "end_date",
                                            "title": "end_date",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "start_date",
                                            "title": "start_date",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "f828f540-a935-11f0-976d-099c0b05b9ec",
                                            "title": "%_discount",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "584ad600-a92c-11f0-976d-099c0b05b9ec",
                                            "title": "scale_value",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "scale",
                                            "title": "scale",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "660eb030-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_month",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "d02fc430-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_week",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "1cf44850-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_hour",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "3352b650-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_quarter",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "268ce800-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_year",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "087e5b50-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_date",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "id_scne",
                                            "title": "id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "client_id_lbc6",
                                            "title": "client_id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "gender_fzxw",
                                            "title": "gender",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "product_id_ey10",
                                            "title": "product_id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "quantity_k4iu",
                                            "title": "quantity",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "price_per_item_3dwq",
                                            "title": "price_per_item",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "discount_per_item_7maq",
                                            "title": "discount_per_item",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "total_price_1u2g",
                                            "title": "total_price",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "purchase_datetime_pvoa",
                                            "title": "purchase_datetime",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "461ec3e0-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_datedate",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "created_at_s6qq",
                                            "title": "created_at",
                                            "calc_mode": "direct"
                                        }
                                    ]
                                ]
                            }
                        },
                        "name": "Общие продажи и тренды - KPI. Средний чек (День)",
                        "type": "markup_wizard_node",
                        "annotation": {
                            "description": ""
                        }
                    }
                },
                "28": {
                    "widget": {
                        "data": {
                            "shared": {
                                "sort": [],
                                "type": "datalens",
                                "links": [],
                                "colors": [],
                                "labels": [],
                                "shapes": [],
                                "filters": [],
                                "updates": [
                                    {
                                        "field": {
                                            "cast": "string",
                                            "guid": "c2566280-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Ср чек с начала недели (текст)",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "STR(ROUND([Ср чек с начала недели]))",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "string",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "STR(ROUND([40962a80-aa64-11f0-956d-c14801191fc6]))",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "string",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "string",
                                            "guid": "a5f6be50-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Ср чек за неделю (текст)",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "STR(ROUND([Ср чек за неделю]))",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "string",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "STR(ROUND([0dcb3a50-aa55-11f0-8c7c-59e14d3324ab]))",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "string",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "float",
                                            "guid": "40962a80-aa64-11f0-956d-c14801191fc6",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Ср чек с начала недели",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "AVG_IF([total_price], [purchase_datetime] >= DATETRUNC([end_date], 'week') AND [purchase_datedate] <= [end_date])",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "float",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "AVG_IF([total_price_1u2g], [purchase_datetime_pvoa] >= DATETRUNC([end_date], 'week') AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= [end_date])",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "float",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "float",
                                            "guid": "0dcb3a50-aa55-11f0-8c7c-59e14d3324ab",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Ср чек за неделю",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "AVG_IF([total_price], [purchase_datetime] >= DATEADD([end_date], 'day', -6) AND [purchase_datedate] <= [end_date])",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "float",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "AVG_IF([total_price_1u2g], [purchase_datetime_pvoa] >= DATEADD([end_date], 'day', -6) AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= [end_date])",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "float",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "string",
                                            "guid": "f0591a10-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Ср чек за месяц (текст)",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "STR(ROUND([Ср чек за месяц]))",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "string",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "STR(ROUND([da27cc00-aa67-11f0-8ec6-3da0d05fc0c9]))",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "string",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "float",
                                            "guid": "dfe04950-aa7c-11f0-a563-69be3ea7bf44",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Ср чек за последний день",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "AVG_IF([total_price], [purchase_datedate] = [end_date])",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "float",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "AVG_IF([total_price_1u2g], [461ec3e0-a929-11f0-976d-099c0b05b9ec] = [end_date])",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "float",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "float",
                                            "guid": "6d3502f0-aa7d-11f0-a563-69be3ea7bf44",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Ср чек со средней за месяц",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "ROUND(([Ср чек за последний день] - [Ср чек за месяц]) / [Ср чек за месяц] *10000)/100",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "float",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "ROUND(([dfe04950-aa7c-11f0-a563-69be3ea7bf44] - [da27cc00-aa67-11f0-8ec6-3da0d05fc0c9]) / [da27cc00-aa67-11f0-8ec6-3da0d05fc0c9] *10000)/100",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "float",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "float",
                                            "guid": "8178cf50-aa71-11f0-b285-094080387588",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Ср чек со средней за неделю",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "ROUND(([Ср чек за последний день] - [Ср чек за неделю]) / [Ср чек за неделю] * 10000)/100",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "float",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "ROUND(([dfe04950-aa7c-11f0-a563-69be3ea7bf44] - [0dcb3a50-aa55-11f0-8c7c-59e14d3324ab]) / [0dcb3a50-aa55-11f0-8c7c-59e14d3324ab] * 10000)/100",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "float",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "markup",
                                            "guid": "7dac49e0-aa64-11f0-956d-c14801191fc6",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "ТЕКСТ",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "'Средний чек за неделю: ' + BR() +\r\nSIZE(COLOR(BOLD([Ср чек за неделю (текст)]), '#4DA2F1'), '24px') + ' ' + \r\n    TOOLTIP(\r\n        IF [Ср чек со средней за неделю] > 0 THEN COLOR('▲' + STR([Ср чек со средней за неделю]) +'%', '#54A520')\r\n        ELSE COLOR('▼' + STR(ABS([Ср чек со средней за неделю])) +'%', '#BE2443') END,\r\n        'Последний день относительно среднего за неделю')\r\n+ BR() + BR() +\r\n'Средний чек за месяц: ' + BR() +\r\nSIZE(COLOR(BOLD([Ср чек за месяц (текст)]), '#4DA2F1'), '24px') + ' ' +\r\n    TOOLTIP(\r\n        IF [Ср чек со средней за месяц] > 0 THEN COLOR('▼' + STR([Ср чек со средней за месяц]) + '%', '#54A520')\r\n        ELSE COLOR('▲' + STR(ABS([Ср чек со средней за месяц])) + '%', '#BE2443') END,\r\n        'Последний день относительно среднего за месяц')",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "markup",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "'Средний чек за неделю: ' + BR() +\r\nSIZE(COLOR(BOLD([a5f6be50-aa67-11f0-8ec6-3da0d05fc0c9]), '#4DA2F1'), '24px') + ' ' + \r\n    TOOLTIP(\r\n        IF [8178cf50-aa71-11f0-b285-094080387588] > 0 THEN COLOR('▲' + STR([8178cf50-aa71-11f0-b285-094080387588]) +'%', '#54A520')\r\n        ELSE COLOR('▼' + STR(ABS([8178cf50-aa71-11f0-b285-094080387588])) +'%', '#BE2443') END,\r\n        'Последний день относительно среднего за неделю')\r\n+ BR() + BR() +\r\n'Средний чек за месяц: ' + BR() +\r\nSIZE(COLOR(BOLD([f0591a10-aa67-11f0-8ec6-3da0d05fc0c9]), '#4DA2F1'), '24px') + ' ' +\r\n    TOOLTIP(\r\n        IF [6d3502f0-aa7d-11f0-a563-69be3ea7bf44] > 0 THEN COLOR('▼' + STR([6d3502f0-aa7d-11f0-a563-69be3ea7bf44]) + '%', '#54A520')\r\n        ELSE COLOR('▲' + STR(ABS([6d3502f0-aa7d-11f0-a563-69be3ea7bf44])) + '%', '#BE2443') END,\r\n        'Последний день относительно среднего за месяц')",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "markup",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "float",
                                            "guid": "da27cc00-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Ср чек за месяц",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "AVG_IF([total_price], [purchase_datetime] >= DATEADD([end_date], 'day', -29) AND [purchase_datedate] <= [end_date])",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "float",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "AVG_IF([total_price_1u2g], [purchase_datetime_pvoa] >= DATEADD([end_date], 'day', -29) AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= [end_date])",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "float",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    }
                                ],
                                "version": "14",
                                "segments": [],
                                "tooltips": [],
                                "datasetsIds": [
                                    "6"
                                ],
                                "hierarchies": [],
                                "colorsConfig": {},
                                "shapesConfig": {},
                                "extraSettings": {
                                    "feed": "",
                                    "title": "Общие продажи и тренды - KPI. Общая выручка",
                                    "stacking": "on",
                                    "zoomMode": "auto",
                                    "titleMode": "hide",
                                    "legendMode": "show",
                                    "tooltipSum": "on",
                                    "mapCenterMode": "auto",
                                    "metricFontSize": "m",
                                    "metricFontColor": "#0FA08D",
                                    "pivotInlineSort": "on",
                                    "navigatorSettings": {
                                        "selectedLines": [],
                                        "isNavigatorAvailable": false
                                    },
                                    "indicatorTitleMode": "hide",
                                    "metricFontColorIndex": 12
                                },
                                "visualization": {
                                    "id": "metric",
                                    "name": "label_visualization-metric",
                                    "type": "metric",
                                    "allowSort": false,
                                    "iconProps": {
                                        "id": "visMetric",
                                        "width": "24"
                                    },
                                    "allowLabels": false,
                                    "allowFilters": true,
                                    "placeholders": [
                                        {
                                            "id": "measures",
                                            "type": "measures",
                                            "items": [
                                                {
                                                    "id": "measure-0",
                                                    "cast": "markup",
                                                    "guid": "7dac49e0-aa64-11f0-956d-c14801191fc6",
                                                    "type": "MEASURE",
                                                    "local": true,
                                                    "title": "ТЕКСТ",
                                                    "valid": true,
                                                    "hidden": false,
                                                    "source": "",
                                                    "formula": "'Средний чек за неделю: ' + BR() +\r\nSIZE(COLOR(BOLD([Ср чек за неделю (текст)]), '#4DA2F1'), '24px') + ' ' + \r\n    TOOLTIP(\r\n        IF [Ср чек со средней за неделю] > 0 THEN COLOR('▲' + STR([Ср чек со средней за неделю]) +'%', '#54A520')\r\n        ELSE COLOR('▼' + STR(ABS([Ср чек со средней за неделю])) +'%', '#BE2443') END,\r\n        'Последний день относительно среднего за неделю')\r\n+ BR() + BR() +\r\n'Средний чек за месяц: ' + BR() +\r\nSIZE(COLOR(BOLD([Ср чек за месяц (текст)]), '#4DA2F1'), '24px') + ' ' +\r\n    TOOLTIP(\r\n        IF [Ср чек со средней за месяц] > 0 THEN COLOR('▼' + STR([Ср чек со средней за месяц]) + '%', '#54A520')\r\n        ELSE COLOR('▲' + STR(ABS([Ср чек со средней за месяц])) + '%', '#BE2443') END,\r\n        'Последний день относительно среднего за месяц')",
                                                    "virtual": false,
                                                    "avatar_id": null,
                                                    "calc_mode": "formula",
                                                    "data_type": "markup",
                                                    "datasetId": "6",
                                                    "managed_by": "user",
                                                    "aggregation": "none",
                                                    "datasetName": "Данные о продажах",
                                                    "description": "",
                                                    "ui_settings": "",
                                                    "guid_formula": "'Средний чек за неделю: ' + BR() +\r\nSIZE(COLOR(BOLD([a5f6be50-aa67-11f0-8ec6-3da0d05fc0c9]), '#4DA2F1'), '24px') + ' ' + \r\n    TOOLTIP(\r\n        IF [8178cf50-aa71-11f0-b285-094080387588] > 0 THEN COLOR('▲' + STR([8178cf50-aa71-11f0-b285-094080387588]) +'%', '#54A520')\r\n        ELSE COLOR('▼' + STR(ABS([8178cf50-aa71-11f0-b285-094080387588])) +'%', '#BE2443') END,\r\n        'Последний день относительно среднего за неделю')\r\n+ BR() + BR() +\r\n'Средний чек за месяц: ' + BR() +\r\nSIZE(COLOR(BOLD([f0591a10-aa67-11f0-8ec6-3da0d05fc0c9]), '#4DA2F1'), '24px') + ' ' +\r\n    TOOLTIP(\r\n        IF [6d3502f0-aa7d-11f0-a563-69be3ea7bf44] > 0 THEN COLOR('▼' + STR([6d3502f0-aa7d-11f0-a563-69be3ea7bf44]) + '%', '#54A520')\r\n        ELSE COLOR('▲' + STR(ABS([6d3502f0-aa7d-11f0-a563-69be3ea7bf44])) + '%', '#BE2443') END,\r\n        'Последний день относительно среднего за месяц')",
                                                    "default_value": null,
                                                    "autoaggregated": true,
                                                    "lock_aggregation": false,
                                                    "value_constraint": null,
                                                    "initial_data_type": "markup",
                                                    "aggregation_locked": true,
                                                    "has_auto_aggregation": true
                                                }
                                            ],
                                            "title": "section_measure",
                                            "capacity": 1,
                                            "required": true,
                                            "settings": {},
                                            "iconProps": {},
                                            "allowedTypes": {},
                                            "allowedDataTypes": {},
                                            "allowedFinalTypes": {}
                                        }
                                    ],
                                    "allowLayerFilters": false
                                },
                                "geopointsConfig": {},
                                "datasetsPartialFields": [
                                    [
                                        {
                                            "guid": "7dac49e0-aa64-11f0-956d-c14801191fc6",
                                            "title": "ТЕКСТ",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "8178cf50-aa71-11f0-b285-094080387588",
                                            "title": "Ср чек со средней за неделю",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "6d3502f0-aa7d-11f0-a563-69be3ea7bf44",
                                            "title": "Ср чек со средней за месяц",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "a5f6be50-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "title": "Ср чек за неделю (текст)",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "f0591a10-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "title": "Ср чек за месяц (текст)",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "c2566280-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "title": "Ср чек с начала недели (текст)",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "da27cc00-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "title": "Ср чек за месяц",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "0dcb3a50-aa55-11f0-8c7c-59e14d3324ab",
                                            "title": "Ср чек за неделю",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "dfe04950-aa7c-11f0-a563-69be3ea7bf44",
                                            "title": "Ср чек за последний день",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "40962a80-aa64-11f0-956d-c14801191fc6",
                                            "title": "Ср чек с начала недели",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "e3a1cfe0-aa55-11f0-8395-f32b2462dd84",
                                            "title": "Фильтр даты",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "end_date",
                                            "title": "end_date",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "start_date",
                                            "title": "start_date",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "f828f540-a935-11f0-976d-099c0b05b9ec",
                                            "title": "%_discount",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "584ad600-a92c-11f0-976d-099c0b05b9ec",
                                            "title": "scale_value",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "scale",
                                            "title": "scale",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "660eb030-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_month",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "d02fc430-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_week",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "1cf44850-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_hour",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "3352b650-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_quarter",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "268ce800-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_year",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "087e5b50-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_date",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "id_scne",
                                            "title": "id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "client_id_lbc6",
                                            "title": "client_id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "gender_fzxw",
                                            "title": "gender",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "product_id_ey10",
                                            "title": "product_id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "quantity_k4iu",
                                            "title": "quantity",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "price_per_item_3dwq",
                                            "title": "price_per_item",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "discount_per_item_7maq",
                                            "title": "discount_per_item",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "total_price_1u2g",
                                            "title": "total_price",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "purchase_datetime_pvoa",
                                            "title": "purchase_datetime",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "461ec3e0-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_datedate",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "created_at_s6qq",
                                            "title": "created_at",
                                            "calc_mode": "direct"
                                        }
                                    ]
                                ]
                            }
                        },
                        "name": "Общие продажи и тренды - KPI.  Средний чек (День) среднее",
                        "type": "markup_wizard_node",
                        "annotation": {
                            "description": ""
                        }
                    }
                },
                "29": {
                    "widget": {
                        "data": {
                            "shared": {
                                "sort": [],
                                "type": "datalens",
                                "links": [],
                                "colors": [],
                                "labels": [],
                                "shapes": [],
                                "filters": [],
                                "updates": [
                                    {
                                        "field": {
                                            "cast": "string",
                                            "guid": "a5f6be50-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Ср чек за последний месяц (текст)",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "STR(ROUND([Ср чек за последний месяц]))",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "string",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "STR(ROUND([0dcb3a50-aa55-11f0-8c7c-59e14d3324ab]))",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "string",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "string",
                                            "guid": "f0591a10-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Ср чек за предпоследний месяц (текст)",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "STR([Ср чек за предпоследний месяц])",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "string",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "STR([da27cc00-aa67-11f0-8ec6-3da0d05fc0c9])",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "string",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "string",
                                            "guid": "c2566280-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Ср чек с начала месяца (текст)",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "STR(ROUND([Ср чек с начала месяца]))",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "string",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "STR(ROUND([40962a80-aa64-11f0-956d-c14801191fc6]))",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "string",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "float",
                                            "guid": "2beb7fa0-aa68-11f0-8ec6-3da0d05fc0c9",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Ср чек месяц изменения",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "ROUND(([Ср чек за последний месяц]-[Ср чек за предпоследний месяц])/[Ср чек за предпоследний месяц] * 10000) / 100",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "float",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "ROUND(([0dcb3a50-aa55-11f0-8c7c-59e14d3324ab]-[da27cc00-aa67-11f0-8ec6-3da0d05fc0c9])/[da27cc00-aa67-11f0-8ec6-3da0d05fc0c9] * 10000) / 100",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "float",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "float",
                                            "guid": "31eb5640-aa69-11f0-8ec6-3da0d05fc0c9",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Ср чек с начала месяца процент",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "ROUND([Ср чек с начала месяца] / [Ср чек за последний месяц] * 10000) / 100",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "float",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "ROUND([40962a80-aa64-11f0-956d-c14801191fc6] / [0dcb3a50-aa55-11f0-8c7c-59e14d3324ab] * 10000) / 100",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "float",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "float",
                                            "guid": "da27cc00-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Ср чек за предпоследний месяц",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "SUM_IF([total_price], [purchase_datedate] > DATEADD([end_date], 'month', -2) AND [purchase_datedate] <= DATEADD([end_date], 'month', -1))\r\n/ COUNTD_IF([client_id], [purchase_datedate] > DATEADD([end_date], 'month', -2) AND [purchase_datedate] <= DATEADD([end_date], 'month', -1))\r\n",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "float",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "SUM_IF([total_price_1u2g], [461ec3e0-a929-11f0-976d-099c0b05b9ec] > DATEADD([end_date], 'month', -2) AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= DATEADD([end_date], 'month', -1))\r\n/ COUNTD_IF([client_id_lbc6], [461ec3e0-a929-11f0-976d-099c0b05b9ec] > DATEADD([end_date], 'month', -2) AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= DATEADD([end_date], 'month', -1))\r\n",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "float",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "markup",
                                            "guid": "7dac49e0-aa64-11f0-956d-c14801191fc6",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "ТЕКСТ",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "'Ср. чек п. за последний месяц: ' + BR() +\r\nSIZE(COLOR(BOLD([Ср чек за последний месяц (текст)]), '#1F68A9'), '24px') + ' ' + \r\n    TOOLTIP(\r\n        IF [Ср чек месяц изменения] > 0 THEN COLOR('▲' + STR([Ср чек месяц изменения]) +'%', '#54A520')\r\n        ELSE COLOR('▼' + STR([Ср чек месяц изменения]) +'%', '#BE2443') END,\r\n        'Относительно предыдущего месяца')\r\n+ BR() + BR() +\r\n'Ср. чек п. с начала месяца: ' \r\n+ BR() +\r\nSIZE(COLOR(BOLD([Ср чек с начала месяца (текст)]), '#1F68A9'), '24px') + ' ' +\r\n    TOOLTIP(\r\n        IF [Ср чек с начала месяца процент] < 100 THEN COLOR(STR([Ср чек с начала месяца процент]) + '%', '#BE2443')\r\n        ELSE COLOR(STR([Ср чек с начала месяца процент]) + '%', '#54A520') END,\r\n        'Доля от последнего полного месяца')",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "markup",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "'Ср. чек п. за последний месяц: ' + BR() +\r\nSIZE(COLOR(BOLD([a5f6be50-aa67-11f0-8ec6-3da0d05fc0c9]), '#1F68A9'), '24px') + ' ' + \r\n    TOOLTIP(\r\n        IF [2beb7fa0-aa68-11f0-8ec6-3da0d05fc0c9] > 0 THEN COLOR('▲' + STR([2beb7fa0-aa68-11f0-8ec6-3da0d05fc0c9]) +'%', '#54A520')\r\n        ELSE COLOR('▼' + STR([2beb7fa0-aa68-11f0-8ec6-3da0d05fc0c9]) +'%', '#BE2443') END,\r\n        'Относительно предыдущего месяца')\r\n+ BR() + BR() +\r\n'Ср. чек п. с начала месяца: ' \r\n+ BR() +\r\nSIZE(COLOR(BOLD([c2566280-aa67-11f0-8ec6-3da0d05fc0c9]), '#1F68A9'), '24px') + ' ' +\r\n    TOOLTIP(\r\n        IF [31eb5640-aa69-11f0-8ec6-3da0d05fc0c9] < 100 THEN COLOR(STR([31eb5640-aa69-11f0-8ec6-3da0d05fc0c9]) + '%', '#BE2443')\r\n        ELSE COLOR(STR([31eb5640-aa69-11f0-8ec6-3da0d05fc0c9]) + '%', '#54A520') END,\r\n        'Доля от последнего полного месяца')",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "markup",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "float",
                                            "guid": "0dcb3a50-aa55-11f0-8c7c-59e14d3324ab",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Ср чек за последний месяц",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "SUM_IF([total_price], [purchase_datedate] > DATEADD([end_date], 'month', -1) AND [purchase_datedate] <= [end_date])/\r\nCOUNTD_IF([client_id], [purchase_datedate] > DATEADD([end_date], 'month', -1) AND [purchase_datedate] <= [end_date])",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "float",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "SUM_IF([total_price_1u2g], [461ec3e0-a929-11f0-976d-099c0b05b9ec] > DATEADD([end_date], 'month', -1) AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= [end_date])/\r\nCOUNTD_IF([client_id_lbc6], [461ec3e0-a929-11f0-976d-099c0b05b9ec] > DATEADD([end_date], 'month', -1) AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= [end_date])",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "float",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "float",
                                            "guid": "40962a80-aa64-11f0-956d-c14801191fc6",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Ср чек с начала месяца",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "SUM_IF([total_price], [purchase_datetime] >= DATETRUNC([end_date], 'month') AND [purchase_datedate] <= [end_date]) /\r\nCOUNTD_IF([client_id], [purchase_datetime] >= DATETRUNC([end_date], 'month') AND [purchase_datedate] <= [end_date])",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "float",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "SUM_IF([total_price_1u2g], [purchase_datetime_pvoa] >= DATETRUNC([end_date], 'month') AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= [end_date]) /\r\nCOUNTD_IF([client_id_lbc6], [purchase_datetime_pvoa] >= DATETRUNC([end_date], 'month') AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= [end_date])",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "float",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    }
                                ],
                                "version": "14",
                                "segments": [],
                                "tooltips": [],
                                "datasetsIds": [
                                    "6"
                                ],
                                "hierarchies": [],
                                "colorsConfig": {},
                                "shapesConfig": {},
                                "extraSettings": {
                                    "feed": "",
                                    "title": "Общие продажи и тренды - KPI. Общая выручка",
                                    "stacking": "on",
                                    "zoomMode": "auto",
                                    "titleMode": "hide",
                                    "legendMode": "show",
                                    "tooltipSum": "on",
                                    "mapCenterMode": "auto",
                                    "metricFontSize": "m",
                                    "metricFontColor": "#0FA08D",
                                    "pivotInlineSort": "on",
                                    "navigatorSettings": {
                                        "selectedLines": [],
                                        "isNavigatorAvailable": false
                                    },
                                    "indicatorTitleMode": "hide",
                                    "metricFontColorIndex": 12
                                },
                                "visualization": {
                                    "id": "metric",
                                    "name": "label_visualization-metric",
                                    "type": "metric",
                                    "allowSort": false,
                                    "iconProps": {
                                        "id": "visMetric",
                                        "width": "24"
                                    },
                                    "allowLabels": false,
                                    "allowFilters": true,
                                    "placeholders": [
                                        {
                                            "id": "measures",
                                            "type": "measures",
                                            "items": [
                                                {
                                                    "id": "measure-6",
                                                    "cast": "markup",
                                                    "guid": "7dac49e0-aa64-11f0-956d-c14801191fc6",
                                                    "type": "MEASURE",
                                                    "local": true,
                                                    "title": "ТЕКСТ",
                                                    "valid": true,
                                                    "hidden": false,
                                                    "source": "",
                                                    "formula": "'Ср. чек п. за последний месяц: ' + BR() +\r\nSIZE(COLOR(BOLD([Ср чек за последний месяц (текст)]), '#1F68A9'), '24px') + ' ' + \r\n    TOOLTIP(\r\n        IF [Ср чек месяц изменения] > 0 THEN COLOR('▲' + STR([Ср чек месяц изменения]) +'%', '#54A520')\r\n        ELSE COLOR('▼' + STR([Ср чек месяц изменения]) +'%', '#BE2443') END,\r\n        'Относительно предыдущего месяца')\r\n+ BR() + BR() +\r\n'Ср. чек п. с начала месяца: ' \r\n+ BR() +\r\nSIZE(COLOR(BOLD([Ср чек с начала месяца (текст)]), '#1F68A9'), '24px') + ' ' +\r\n    TOOLTIP(\r\n        IF [Ср чек с начала месяца процент] < 100 THEN COLOR(STR([Ср чек с начала месяца процент]) + '%', '#BE2443')\r\n        ELSE COLOR(STR([Ср чек с начала месяца процент]) + '%', '#54A520') END,\r\n        'Доля от последнего полного месяца')",
                                                    "virtual": false,
                                                    "avatar_id": null,
                                                    "calc_mode": "formula",
                                                    "data_type": "markup",
                                                    "datasetId": "6",
                                                    "managed_by": "user",
                                                    "aggregation": "none",
                                                    "datasetName": "Данные о продажах",
                                                    "description": "",
                                                    "ui_settings": "",
                                                    "guid_formula": "'Ср. чек п. за последний месяц: ' + BR() +\r\nSIZE(COLOR(BOLD([a5f6be50-aa67-11f0-8ec6-3da0d05fc0c9]), '#1F68A9'), '24px') + ' ' + \r\n    TOOLTIP(\r\n        IF [2beb7fa0-aa68-11f0-8ec6-3da0d05fc0c9] > 0 THEN COLOR('▲' + STR([2beb7fa0-aa68-11f0-8ec6-3da0d05fc0c9]) +'%', '#54A520')\r\n        ELSE COLOR('▼' + STR([2beb7fa0-aa68-11f0-8ec6-3da0d05fc0c9]) +'%', '#BE2443') END,\r\n        'Относительно предыдущего месяца')\r\n+ BR() + BR() +\r\n'Ср. чек п. с начала месяца: ' \r\n+ BR() +\r\nSIZE(COLOR(BOLD([c2566280-aa67-11f0-8ec6-3da0d05fc0c9]), '#1F68A9'), '24px') + ' ' +\r\n    TOOLTIP(\r\n        IF [31eb5640-aa69-11f0-8ec6-3da0d05fc0c9] < 100 THEN COLOR(STR([31eb5640-aa69-11f0-8ec6-3da0d05fc0c9]) + '%', '#BE2443')\r\n        ELSE COLOR(STR([31eb5640-aa69-11f0-8ec6-3da0d05fc0c9]) + '%', '#54A520') END,\r\n        'Доля от последнего полного месяца')",
                                                    "default_value": null,
                                                    "autoaggregated": true,
                                                    "lock_aggregation": false,
                                                    "value_constraint": null,
                                                    "initial_data_type": "markup",
                                                    "aggregation_locked": true,
                                                    "has_auto_aggregation": true
                                                }
                                            ],
                                            "title": "section_measure",
                                            "capacity": 1,
                                            "required": true,
                                            "settings": {},
                                            "iconProps": {},
                                            "allowedTypes": {},
                                            "allowedDataTypes": {},
                                            "allowedFinalTypes": {}
                                        }
                                    ],
                                    "allowLayerFilters": false
                                },
                                "geopointsConfig": {},
                                "datasetsPartialFields": [
                                    [
                                        {
                                            "guid": "31eb5640-aa69-11f0-8ec6-3da0d05fc0c9",
                                            "title": "Ср чек с начала месяца процент",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "2beb7fa0-aa68-11f0-8ec6-3da0d05fc0c9",
                                            "title": "Ср чек месяц изменения",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "c2566280-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "title": "Ср чек с начала месяца (текст)",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "40962a80-aa64-11f0-956d-c14801191fc6",
                                            "title": "Ср чек с начала месяца",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "da27cc00-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "title": "Ср чек за предпоследний месяц",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "f0591a10-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "title": "Ср чек за предпоследний месяц (текст)",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "7dac49e0-aa64-11f0-956d-c14801191fc6",
                                            "title": "ТЕКСТ",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "a5f6be50-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "title": "Ср чек за последний месяц (текст)",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "0dcb3a50-aa55-11f0-8c7c-59e14d3324ab",
                                            "title": "Ср чек за последний месяц",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "e3a1cfe0-aa55-11f0-8395-f32b2462dd84",
                                            "title": "Фильтр даты",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "end_date",
                                            "title": "end_date",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "start_date",
                                            "title": "start_date",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "f828f540-a935-11f0-976d-099c0b05b9ec",
                                            "title": "%_discount",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "584ad600-a92c-11f0-976d-099c0b05b9ec",
                                            "title": "scale_value",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "scale",
                                            "title": "scale",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "660eb030-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_month",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "d02fc430-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_week",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "1cf44850-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_hour",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "3352b650-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_quarter",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "268ce800-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_year",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "087e5b50-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_date",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "id_scne",
                                            "title": "id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "client_id_lbc6",
                                            "title": "client_id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "gender_fzxw",
                                            "title": "gender",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "product_id_ey10",
                                            "title": "product_id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "quantity_k4iu",
                                            "title": "quantity",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "price_per_item_3dwq",
                                            "title": "price_per_item",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "discount_per_item_7maq",
                                            "title": "discount_per_item",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "total_price_1u2g",
                                            "title": "total_price",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "purchase_datetime_pvoa",
                                            "title": "purchase_datetime",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "461ec3e0-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_datedate",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "created_at_s6qq",
                                            "title": "created_at",
                                            "calc_mode": "direct"
                                        }
                                    ]
                                ]
                            }
                        },
                        "name": "Общие продажи и тренды - KPI. Средний чек покупателя (Месяц)",
                        "type": "markup_wizard_node",
                        "annotation": {
                            "description": ""
                        }
                    }
                },
                "30": {
                    "widget": {
                        "data": {
                            "shared": {
                                "sort": [],
                                "type": "datalens",
                                "links": [],
                                "colors": [],
                                "labels": [],
                                "shapes": [],
                                "filters": [],
                                "updates": [
                                    {
                                        "field": {
                                            "cast": "string",
                                            "guid": "a5f6be50-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Ср чек за последнюю неделю (текст)",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "STR(ROUND([Ср чек за последнюю неделю]))",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "string",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "STR(ROUND([0dcb3a50-aa55-11f0-8c7c-59e14d3324ab]))",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "string",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "string",
                                            "guid": "f0591a10-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Ср чек за предпоследнюю неделю (текст)",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "STR(ROUND([Ср чек за предпоследнюю неделю]))",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "string",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "STR(ROUND([da27cc00-aa67-11f0-8ec6-3da0d05fc0c9]))",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "string",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "float",
                                            "guid": "2beb7fa0-aa68-11f0-8ec6-3da0d05fc0c9",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Ср чек неделя изменения",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "ROUND(([Ср чек за последнюю неделю]-[Ср чек за предпоследнюю неделю]) / [Ср чек за предпоследнюю неделю] * 10000) / 100",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "float",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "ROUND(([0dcb3a50-aa55-11f0-8c7c-59e14d3324ab]-[da27cc00-aa67-11f0-8ec6-3da0d05fc0c9]) / [da27cc00-aa67-11f0-8ec6-3da0d05fc0c9] * 10000) / 100",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "float",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "string",
                                            "guid": "c2566280-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Ср чек с начала недели (текст)",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "STR(ROUND([Ср чек с начала недели]))",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "string",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "STR(ROUND([40962a80-aa64-11f0-956d-c14801191fc6]))",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "string",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "float",
                                            "guid": "31eb5640-aa69-11f0-8ec6-3da0d05fc0c9",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Ср чек с начала недели процент",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "ROUND([Ср чек с начала недели] / [Ср чек за последнюю неделю] * 10000) / 100",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "float",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "ROUND([40962a80-aa64-11f0-956d-c14801191fc6] / [0dcb3a50-aa55-11f0-8c7c-59e14d3324ab] * 10000) / 100",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "float",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "float",
                                            "guid": "0dcb3a50-aa55-11f0-8c7c-59e14d3324ab",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Ср чек за последнюю неделю",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "SUM_IF([total_price], [purchase_datedate] > DATEADD([end_date], 'week', -1) AND [purchase_datedate] <= [end_date]) / \r\nCOUNTD_IF([client_id], [purchase_datedate] > DATEADD([end_date], 'week', -1) AND [purchase_datedate] <= [end_date])",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "float",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "SUM_IF([total_price_1u2g], [461ec3e0-a929-11f0-976d-099c0b05b9ec] > DATEADD([end_date], 'week', -1) AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= [end_date]) / \r\nCOUNTD_IF([client_id_lbc6], [461ec3e0-a929-11f0-976d-099c0b05b9ec] > DATEADD([end_date], 'week', -1) AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= [end_date])",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "float",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "float",
                                            "guid": "da27cc00-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Ср чек за предпоследнюю неделю",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "SUM_IF([total_price], [purchase_datedate] > DATEADD([end_date], 'week', -2) AND [purchase_datedate] <= DATEADD([end_date], 'week', -1)) \r\n/ \r\nCOUNTD_IF([client_id], [purchase_datedate] > DATEADD([end_date], 'week', -2) AND [purchase_datedate] <= DATEADD([end_date], 'week', -1))",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "float",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "SUM_IF([total_price_1u2g], [461ec3e0-a929-11f0-976d-099c0b05b9ec] > DATEADD([end_date], 'week', -2) AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= DATEADD([end_date], 'week', -1)) \r\n/ \r\nCOUNTD_IF([client_id_lbc6], [461ec3e0-a929-11f0-976d-099c0b05b9ec] > DATEADD([end_date], 'week', -2) AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= DATEADD([end_date], 'week', -1))",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "float",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "float",
                                            "guid": "40962a80-aa64-11f0-956d-c14801191fc6",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Ср чек с начала недели",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "SUM_IF([total_price], [purchase_datedate] >= DATETRUNC([end_date], 'week') AND [purchase_datedate] <= [end_date]) /\r\nCOUNTD_IF([client_id], [purchase_datedate] >= DATETRUNC([end_date], 'week') AND [purchase_datedate] <= [end_date])",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "float",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "SUM_IF([total_price_1u2g], [461ec3e0-a929-11f0-976d-099c0b05b9ec] >= DATETRUNC([end_date], 'week') AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= [end_date]) /\r\nCOUNTD_IF([client_id_lbc6], [461ec3e0-a929-11f0-976d-099c0b05b9ec] >= DATETRUNC([end_date], 'week') AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= [end_date])",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "float",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "markup",
                                            "guid": "7dac49e0-aa64-11f0-956d-c14801191fc6",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "ТЕКСТ",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "'Ср. чек п. последнюю неделю: ' + BR() +\r\nSIZE(COLOR(BOLD([Ср чек за последнюю неделю (текст)]), '#1F68A9'), '24px') + ' ' + \r\n    TOOLTIP(\r\n        IF [Ср чек неделя изменения] > 0 THEN COLOR('▲' + STR([Ср чек неделя изменения]) +'%', '#54A520')\r\n        ELSE COLOR('▼' + STR([Ср чек неделя изменения]) +'%', '#BE2443') END,\r\n        'Относительно предыдущей недели')\r\n+ BR() + BR() +\r\n'Ср. чек п. с начала недели: ' \r\n+ BR() +\r\nSIZE(COLOR(BOLD([Ср чек с начала недели (текст)]), '#1F68A9'), '24px') + ' ' +\r\n    TOOLTIP(\r\n        IF [Ср чек с начала недели процент] < 100 THEN COLOR(STR([Ср чек с начала недели процент]) + '%', '#BE2443')\r\n        ELSE COLOR(STR([Ср чек с начала недели процент]) + '%', '#54A520') END,\r\n        'Доля от последней полной недели')",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "markup",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "'Ср. чек п. последнюю неделю: ' + BR() +\r\nSIZE(COLOR(BOLD([a5f6be50-aa67-11f0-8ec6-3da0d05fc0c9]), '#1F68A9'), '24px') + ' ' + \r\n    TOOLTIP(\r\n        IF [2beb7fa0-aa68-11f0-8ec6-3da0d05fc0c9] > 0 THEN COLOR('▲' + STR([2beb7fa0-aa68-11f0-8ec6-3da0d05fc0c9]) +'%', '#54A520')\r\n        ELSE COLOR('▼' + STR([2beb7fa0-aa68-11f0-8ec6-3da0d05fc0c9]) +'%', '#BE2443') END,\r\n        'Относительно предыдущей недели')\r\n+ BR() + BR() +\r\n'Ср. чек п. с начала недели: ' \r\n+ BR() +\r\nSIZE(COLOR(BOLD([c2566280-aa67-11f0-8ec6-3da0d05fc0c9]), '#1F68A9'), '24px') + ' ' +\r\n    TOOLTIP(\r\n        IF [31eb5640-aa69-11f0-8ec6-3da0d05fc0c9] < 100 THEN COLOR(STR([31eb5640-aa69-11f0-8ec6-3da0d05fc0c9]) + '%', '#BE2443')\r\n        ELSE COLOR(STR([31eb5640-aa69-11f0-8ec6-3da0d05fc0c9]) + '%', '#54A520') END,\r\n        'Доля от последней полной недели')",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "markup",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    }
                                ],
                                "version": "14",
                                "segments": [],
                                "tooltips": [],
                                "datasetsIds": [
                                    "6"
                                ],
                                "hierarchies": [],
                                "colorsConfig": {},
                                "shapesConfig": {},
                                "extraSettings": {
                                    "feed": "",
                                    "title": "Общие продажи и тренды - KPI. Общая выручка",
                                    "stacking": "on",
                                    "zoomMode": "auto",
                                    "titleMode": "hide",
                                    "legendMode": "show",
                                    "tooltipSum": "on",
                                    "mapCenterMode": "auto",
                                    "metricFontSize": "m",
                                    "metricFontColor": "#0FA08D",
                                    "pivotInlineSort": "on",
                                    "navigatorSettings": {
                                        "selectedLines": [],
                                        "isNavigatorAvailable": false
                                    },
                                    "indicatorTitleMode": "hide",
                                    "metricFontColorIndex": 12
                                },
                                "visualization": {
                                    "id": "metric",
                                    "name": "label_visualization-metric",
                                    "type": "metric",
                                    "allowSort": false,
                                    "iconProps": {
                                        "id": "visMetric",
                                        "width": "24"
                                    },
                                    "allowLabels": false,
                                    "allowFilters": true,
                                    "placeholders": [
                                        {
                                            "id": "measures",
                                            "type": "measures",
                                            "items": [
                                                {
                                                    "id": "measure-8",
                                                    "cast": "markup",
                                                    "guid": "7dac49e0-aa64-11f0-956d-c14801191fc6",
                                                    "type": "MEASURE",
                                                    "local": true,
                                                    "title": "ТЕКСТ",
                                                    "valid": true,
                                                    "hidden": false,
                                                    "source": "",
                                                    "formula": "'Ср. чек п. последнюю неделю: ' + BR() +\r\nSIZE(COLOR(BOLD([Ср чек за последнюю неделю (текст)]), '#1F68A9'), '24px') + ' ' + \r\n    TOOLTIP(\r\n        IF [Ср чек неделя изменения] > 0 THEN COLOR('▲' + STR([Ср чек неделя изменения]) +'%', '#54A520')\r\n        ELSE COLOR('▼' + STR([Ср чек неделя изменения]) +'%', '#BE2443') END,\r\n        'Относительно предыдущей недели')\r\n+ BR() + BR() +\r\n'Ср. чек п. с начала недели: ' \r\n+ BR() +\r\nSIZE(COLOR(BOLD([Ср чек с начала недели (текст)]), '#1F68A9'), '24px') + ' ' +\r\n    TOOLTIP(\r\n        IF [Ср чек с начала недели процент] < 100 THEN COLOR(STR([Ср чек с начала недели процент]) + '%', '#BE2443')\r\n        ELSE COLOR(STR([Ср чек с начала недели процент]) + '%', '#54A520') END,\r\n        'Доля от последней полной недели')",
                                                    "virtual": false,
                                                    "avatar_id": null,
                                                    "calc_mode": "formula",
                                                    "data_type": "markup",
                                                    "datasetId": "6",
                                                    "managed_by": "user",
                                                    "aggregation": "none",
                                                    "datasetName": "Данные о продажах",
                                                    "description": "",
                                                    "ui_settings": "",
                                                    "guid_formula": "'Ср. чек п. последнюю неделю: ' + BR() +\r\nSIZE(COLOR(BOLD([a5f6be50-aa67-11f0-8ec6-3da0d05fc0c9]), '#1F68A9'), '24px') + ' ' + \r\n    TOOLTIP(\r\n        IF [2beb7fa0-aa68-11f0-8ec6-3da0d05fc0c9] > 0 THEN COLOR('▲' + STR([2beb7fa0-aa68-11f0-8ec6-3da0d05fc0c9]) +'%', '#54A520')\r\n        ELSE COLOR('▼' + STR([2beb7fa0-aa68-11f0-8ec6-3da0d05fc0c9]) +'%', '#BE2443') END,\r\n        'Относительно предыдущей недели')\r\n+ BR() + BR() +\r\n'Ср. чек п. с начала недели: ' \r\n+ BR() +\r\nSIZE(COLOR(BOLD([c2566280-aa67-11f0-8ec6-3da0d05fc0c9]), '#1F68A9'), '24px') + ' ' +\r\n    TOOLTIP(\r\n        IF [31eb5640-aa69-11f0-8ec6-3da0d05fc0c9] < 100 THEN COLOR(STR([31eb5640-aa69-11f0-8ec6-3da0d05fc0c9]) + '%', '#BE2443')\r\n        ELSE COLOR(STR([31eb5640-aa69-11f0-8ec6-3da0d05fc0c9]) + '%', '#54A520') END,\r\n        'Доля от последней полной недели')",
                                                    "default_value": null,
                                                    "autoaggregated": true,
                                                    "lock_aggregation": false,
                                                    "value_constraint": null,
                                                    "initial_data_type": "markup",
                                                    "aggregation_locked": true,
                                                    "has_auto_aggregation": true
                                                }
                                            ],
                                            "title": "section_measure",
                                            "capacity": 1,
                                            "required": true,
                                            "settings": {},
                                            "iconProps": {},
                                            "allowedTypes": {},
                                            "allowedDataTypes": {},
                                            "allowedFinalTypes": {}
                                        }
                                    ],
                                    "allowLayerFilters": false
                                },
                                "geopointsConfig": {},
                                "datasetsPartialFields": [
                                    [
                                        {
                                            "guid": "31eb5640-aa69-11f0-8ec6-3da0d05fc0c9",
                                            "title": "Ср чек с начала недели процент",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "c2566280-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "title": "Ср чек с начала недели (текст)",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "40962a80-aa64-11f0-956d-c14801191fc6",
                                            "title": "Ср чек с начала недели",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "2beb7fa0-aa68-11f0-8ec6-3da0d05fc0c9",
                                            "title": "Ср чек неделя изменения",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "f0591a10-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "title": "Ср чек за предпоследнюю неделю (текст)",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "da27cc00-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "title": "Ср чек за предпоследнюю неделю",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "a5f6be50-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "title": "Ср чек за последнюю неделю (текст)",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "0dcb3a50-aa55-11f0-8c7c-59e14d3324ab",
                                            "title": "Ср чек за последнюю неделю",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "7dac49e0-aa64-11f0-956d-c14801191fc6",
                                            "title": "ТЕКСТ",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "e3a1cfe0-aa55-11f0-8395-f32b2462dd84",
                                            "title": "Фильтр даты",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "end_date",
                                            "title": "end_date",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "start_date",
                                            "title": "start_date",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "f828f540-a935-11f0-976d-099c0b05b9ec",
                                            "title": "%_discount",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "584ad600-a92c-11f0-976d-099c0b05b9ec",
                                            "title": "scale_value",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "scale",
                                            "title": "scale",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "660eb030-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_month",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "d02fc430-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_week",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "1cf44850-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_hour",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "3352b650-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_quarter",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "268ce800-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_year",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "087e5b50-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_date",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "id_scne",
                                            "title": "id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "client_id_lbc6",
                                            "title": "client_id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "gender_fzxw",
                                            "title": "gender",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "product_id_ey10",
                                            "title": "product_id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "quantity_k4iu",
                                            "title": "quantity",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "price_per_item_3dwq",
                                            "title": "price_per_item",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "discount_per_item_7maq",
                                            "title": "discount_per_item",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "total_price_1u2g",
                                            "title": "total_price",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "purchase_datetime_pvoa",
                                            "title": "purchase_datetime",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "461ec3e0-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_datedate",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "created_at_s6qq",
                                            "title": "created_at",
                                            "calc_mode": "direct"
                                        }
                                    ]
                                ]
                            }
                        },
                        "name": "Общие продажи и тренды - KPI. Средний чек покупателя (Неделя)",
                        "type": "markup_wizard_node",
                        "annotation": {
                            "description": ""
                        }
                    }
                },
                "31": {
                    "widget": {
                        "data": {
                            "shared": {
                                "sort": [],
                                "type": "datalens",
                                "links": [],
                                "colors": [],
                                "labels": [],
                                "shapes": [],
                                "filters": [],
                                "updates": [
                                    {
                                        "field": {
                                            "cast": "float",
                                            "guid": "2beb7fa0-aa68-11f0-8ec6-3da0d05fc0c9",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Кол-во заказов день изменения",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "ROUND(([Ср чек за последний день] - [Ср чек за предпоследний день]) / [Ср чек за предпоследний день] * 10000) / 100",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "float",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "ROUND(([0dcb3a50-aa55-11f0-8c7c-59e14d3324ab] - [da27cc00-aa67-11f0-8ec6-3da0d05fc0c9]) / [da27cc00-aa67-11f0-8ec6-3da0d05fc0c9] * 10000) / 100",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "float",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "integer",
                                            "guid": "8178cf50-aa71-11f0-b285-094080387588",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Кол-во заказов день изменения номианльная",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "ROUND([Ср чек за последний день] - [Ср чек за предпоследний день])",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "integer",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "ROUND([0dcb3a50-aa55-11f0-8c7c-59e14d3324ab] - [da27cc00-aa67-11f0-8ec6-3da0d05fc0c9])",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "integer",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "float",
                                            "guid": "31eb5640-aa69-11f0-8ec6-3da0d05fc0c9",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Кол-во заказов с начала недели процент",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "ROUND([Ср чек с начала недели] / [Ср чек за последний день] * 10000) /100",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "float",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "ROUND([40962a80-aa64-11f0-956d-c14801191fc6] / [0dcb3a50-aa55-11f0-8c7c-59e14d3324ab] * 10000) /100",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "float",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "string",
                                            "guid": "a5f6be50-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Ср чек за последний день (текст)",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "STR(ROUND([Ср чек за последний день]))",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "string",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "STR(ROUND([0dcb3a50-aa55-11f0-8c7c-59e14d3324ab]))",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "string",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "string",
                                            "guid": "f0591a10-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Ср чек за предпоследний день (текст)",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "STR(ROUND([Ср чек за предпоследний день]))",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "string",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "STR(ROUND([da27cc00-aa67-11f0-8ec6-3da0d05fc0c9]))",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "string",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "string",
                                            "guid": "c2566280-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Ср чек с начала недели (текст)",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "STR(ROUND([Ср чек с начала недели]))",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "string",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "STR(ROUND([40962a80-aa64-11f0-956d-c14801191fc6]))",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "string",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "float",
                                            "guid": "0dcb3a50-aa55-11f0-8c7c-59e14d3324ab",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Ср чек за последний день",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "SUM_IF([total_price], [purchase_datedate] = [end_date]) / COUNTD_IF([client_id], [purchase_datedate] = [end_date])",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "float",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "SUM_IF([total_price_1u2g], [461ec3e0-a929-11f0-976d-099c0b05b9ec] = [end_date]) / COUNTD_IF([client_id_lbc6], [461ec3e0-a929-11f0-976d-099c0b05b9ec] = [end_date])",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "float",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "float",
                                            "guid": "da27cc00-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Ср чек за предпоследний день",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "SUM_IF([total_price], [purchase_datedate] = DATEADD([end_date], 'day', -1)) / COUNTD_IF([client_id], [purchase_datedate] = DATEADD([end_date], 'day', -1))",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "float",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "SUM_IF([total_price_1u2g], [461ec3e0-a929-11f0-976d-099c0b05b9ec] = DATEADD([end_date], 'day', -1)) / COUNTD_IF([client_id_lbc6], [461ec3e0-a929-11f0-976d-099c0b05b9ec] = DATEADD([end_date], 'day', -1))",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "float",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "float",
                                            "guid": "40962a80-aa64-11f0-956d-c14801191fc6",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Ср чек с начала недели",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "SUM_IF([total_price], [purchase_datetime] >= DATETRUNC([end_date], 'week') AND [purchase_datedate] <= [end_date])/\r\nCOUNTD_IF([client_id], [purchase_datetime] >= DATETRUNC([end_date], 'week') AND [purchase_datedate] <= [end_date])",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "float",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "SUM_IF([total_price_1u2g], [purchase_datetime_pvoa] >= DATETRUNC([end_date], 'week') AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= [end_date])/\r\nCOUNTD_IF([client_id_lbc6], [purchase_datetime_pvoa] >= DATETRUNC([end_date], 'week') AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= [end_date])",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "float",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "markup",
                                            "guid": "7dac49e0-aa64-11f0-956d-c14801191fc6",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "ТЕКСТ",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "'Средний чек п. за последний день: ' + BR() +\r\nSIZE(COLOR(BOLD([Ср чек за последний день (текст)]), '#1F68A9'), '24px') + ' ' + \r\n    TOOLTIP(\r\n        IF [Кол-во заказов день изменения] > 0 THEN COLOR('▲' + STR([Кол-во заказов день изменения]) +'%', '#54A520')\r\n        ELSE COLOR('▼' + STR(ABS([Кол-во заказов день изменения])) +'%', '#BE2443') END,\r\n        'Относительно предыдущего дня')\r\n+ BR() + BR() +\r\n'Средний чек п. за предыдущий день: ' \r\n+ BR() +\r\nSIZE(COLOR(BOLD([Ср чек за предпоследний день (текст)]), '#1F68A9'), '24px') + ' ' +\r\n    TOOLTIP(\r\n        IF [Кол-во заказов день изменения номианльная] > 0 THEN COLOR('▼' + STR([Кол-во заказов день изменения номианльная]), '#54A520')\r\n        ELSE COLOR('▲' + STR(ABS([Кол-во заказов день изменения номианльная])), '#BE2443') END,\r\n        'Номинальная разница (прошлый день - позапрошлый день)')",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "markup",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "'Средний чек п. за последний день: ' + BR() +\r\nSIZE(COLOR(BOLD([a5f6be50-aa67-11f0-8ec6-3da0d05fc0c9]), '#1F68A9'), '24px') + ' ' + \r\n    TOOLTIP(\r\n        IF [2beb7fa0-aa68-11f0-8ec6-3da0d05fc0c9] > 0 THEN COLOR('▲' + STR([2beb7fa0-aa68-11f0-8ec6-3da0d05fc0c9]) +'%', '#54A520')\r\n        ELSE COLOR('▼' + STR(ABS([2beb7fa0-aa68-11f0-8ec6-3da0d05fc0c9])) +'%', '#BE2443') END,\r\n        'Относительно предыдущего дня')\r\n+ BR() + BR() +\r\n'Средний чек п. за предыдущий день: ' \r\n+ BR() +\r\nSIZE(COLOR(BOLD([f0591a10-aa67-11f0-8ec6-3da0d05fc0c9]), '#1F68A9'), '24px') + ' ' +\r\n    TOOLTIP(\r\n        IF [8178cf50-aa71-11f0-b285-094080387588] > 0 THEN COLOR('▼' + STR([8178cf50-aa71-11f0-b285-094080387588]), '#54A520')\r\n        ELSE COLOR('▲' + STR(ABS([8178cf50-aa71-11f0-b285-094080387588])), '#BE2443') END,\r\n        'Номинальная разница (прошлый день - позапрошлый день)')",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "markup",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    }
                                ],
                                "version": "14",
                                "segments": [],
                                "tooltips": [],
                                "datasetsIds": [
                                    "6"
                                ],
                                "hierarchies": [],
                                "colorsConfig": {},
                                "shapesConfig": {},
                                "extraSettings": {
                                    "feed": "",
                                    "title": "Общие продажи и тренды - KPI. Общая выручка",
                                    "stacking": "on",
                                    "zoomMode": "auto",
                                    "titleMode": "hide",
                                    "legendMode": "show",
                                    "tooltipSum": "on",
                                    "mapCenterMode": "auto",
                                    "metricFontSize": "m",
                                    "metricFontColor": "#0FA08D",
                                    "pivotInlineSort": "on",
                                    "navigatorSettings": {
                                        "selectedLines": [],
                                        "isNavigatorAvailable": false
                                    },
                                    "indicatorTitleMode": "hide",
                                    "metricFontColorIndex": 12
                                },
                                "visualization": {
                                    "id": "metric",
                                    "name": "label_visualization-metric",
                                    "type": "metric",
                                    "allowSort": false,
                                    "iconProps": {
                                        "id": "visMetric",
                                        "width": "24"
                                    },
                                    "allowLabels": false,
                                    "allowFilters": true,
                                    "placeholders": [
                                        {
                                            "id": "measures",
                                            "type": "measures",
                                            "items": [
                                                {
                                                    "id": "measure-3",
                                                    "cast": "markup",
                                                    "guid": "7dac49e0-aa64-11f0-956d-c14801191fc6",
                                                    "type": "MEASURE",
                                                    "local": true,
                                                    "title": "ТЕКСТ",
                                                    "valid": true,
                                                    "hidden": false,
                                                    "source": "",
                                                    "formula": "'Средний чек п. за последний день: ' + BR() +\r\nSIZE(COLOR(BOLD([Ср чек за последний день (текст)]), '#1F68A9'), '24px') + ' ' + \r\n    TOOLTIP(\r\n        IF [Кол-во заказов день изменения] > 0 THEN COLOR('▲' + STR([Кол-во заказов день изменения]) +'%', '#54A520')\r\n        ELSE COLOR('▼' + STR(ABS([Кол-во заказов день изменения])) +'%', '#BE2443') END,\r\n        'Относительно предыдущего дня')\r\n+ BR() + BR() +\r\n'Средний чек п. за предыдущий день: ' \r\n+ BR() +\r\nSIZE(COLOR(BOLD([Ср чек за предпоследний день (текст)]), '#1F68A9'), '24px') + ' ' +\r\n    TOOLTIP(\r\n        IF [Кол-во заказов день изменения номианльная] > 0 THEN COLOR('▼' + STR([Кол-во заказов день изменения номианльная]), '#54A520')\r\n        ELSE COLOR('▲' + STR(ABS([Кол-во заказов день изменения номианльная])), '#BE2443') END,\r\n        'Номинальная разница (прошлый день - позапрошлый день)')",
                                                    "virtual": false,
                                                    "avatar_id": null,
                                                    "calc_mode": "formula",
                                                    "data_type": "markup",
                                                    "datasetId": "6",
                                                    "managed_by": "user",
                                                    "aggregation": "none",
                                                    "datasetName": "Данные о продажах",
                                                    "description": "",
                                                    "ui_settings": "",
                                                    "guid_formula": "'Средний чек п. за последний день: ' + BR() +\r\nSIZE(COLOR(BOLD([a5f6be50-aa67-11f0-8ec6-3da0d05fc0c9]), '#1F68A9'), '24px') + ' ' + \r\n    TOOLTIP(\r\n        IF [2beb7fa0-aa68-11f0-8ec6-3da0d05fc0c9] > 0 THEN COLOR('▲' + STR([2beb7fa0-aa68-11f0-8ec6-3da0d05fc0c9]) +'%', '#54A520')\r\n        ELSE COLOR('▼' + STR(ABS([2beb7fa0-aa68-11f0-8ec6-3da0d05fc0c9])) +'%', '#BE2443') END,\r\n        'Относительно предыдущего дня')\r\n+ BR() + BR() +\r\n'Средний чек п. за предыдущий день: ' \r\n+ BR() +\r\nSIZE(COLOR(BOLD([f0591a10-aa67-11f0-8ec6-3da0d05fc0c9]), '#1F68A9'), '24px') + ' ' +\r\n    TOOLTIP(\r\n        IF [8178cf50-aa71-11f0-b285-094080387588] > 0 THEN COLOR('▼' + STR([8178cf50-aa71-11f0-b285-094080387588]), '#54A520')\r\n        ELSE COLOR('▲' + STR(ABS([8178cf50-aa71-11f0-b285-094080387588])), '#BE2443') END,\r\n        'Номинальная разница (прошлый день - позапрошлый день)')",
                                                    "default_value": null,
                                                    "autoaggregated": true,
                                                    "lock_aggregation": false,
                                                    "value_constraint": null,
                                                    "initial_data_type": "markup",
                                                    "aggregation_locked": true,
                                                    "has_auto_aggregation": true
                                                }
                                            ],
                                            "title": "section_measure",
                                            "capacity": 1,
                                            "required": true,
                                            "settings": {},
                                            "iconProps": {},
                                            "allowedTypes": {},
                                            "allowedDataTypes": {},
                                            "allowedFinalTypes": {}
                                        }
                                    ],
                                    "allowLayerFilters": false
                                },
                                "geopointsConfig": {},
                                "datasetsPartialFields": [
                                    [
                                        {
                                            "guid": "40962a80-aa64-11f0-956d-c14801191fc6",
                                            "title": "Ср чек с начала недели",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "da27cc00-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "title": "Ср чек за предпоследний день",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "0dcb3a50-aa55-11f0-8c7c-59e14d3324ab",
                                            "title": "Ср чек за последний день",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "7dac49e0-aa64-11f0-956d-c14801191fc6",
                                            "title": "ТЕКСТ",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "c2566280-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "title": "Ср чек с начала недели (текст)",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "f0591a10-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "title": "Ср чек за предпоследний день (текст)",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "a5f6be50-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "title": "Ср чек за последний день (текст)",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "31eb5640-aa69-11f0-8ec6-3da0d05fc0c9",
                                            "title": "Кол-во заказов с начала недели процент",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "8178cf50-aa71-11f0-b285-094080387588",
                                            "title": "Кол-во заказов день изменения номианльная",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "2beb7fa0-aa68-11f0-8ec6-3da0d05fc0c9",
                                            "title": "Кол-во заказов день изменения",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "e3a1cfe0-aa55-11f0-8395-f32b2462dd84",
                                            "title": "Фильтр даты",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "end_date",
                                            "title": "end_date",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "start_date",
                                            "title": "start_date",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "f828f540-a935-11f0-976d-099c0b05b9ec",
                                            "title": "%_discount",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "584ad600-a92c-11f0-976d-099c0b05b9ec",
                                            "title": "scale_value",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "scale",
                                            "title": "scale",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "660eb030-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_month",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "d02fc430-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_week",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "1cf44850-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_hour",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "3352b650-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_quarter",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "268ce800-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_year",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "087e5b50-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_date",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "id_scne",
                                            "title": "id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "client_id_lbc6",
                                            "title": "client_id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "gender_fzxw",
                                            "title": "gender",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "product_id_ey10",
                                            "title": "product_id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "quantity_k4iu",
                                            "title": "quantity",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "price_per_item_3dwq",
                                            "title": "price_per_item",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "discount_per_item_7maq",
                                            "title": "discount_per_item",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "total_price_1u2g",
                                            "title": "total_price",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "purchase_datetime_pvoa",
                                            "title": "purchase_datetime",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "461ec3e0-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_datedate",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "created_at_s6qq",
                                            "title": "created_at",
                                            "calc_mode": "direct"
                                        }
                                    ]
                                ]
                            }
                        },
                        "name": "Общие продажи и тренды - KPI. Средний чек покупателя (День)",
                        "type": "markup_wizard_node",
                        "annotation": {
                            "description": ""
                        }
                    }
                },
                "32": {
                    "widget": {
                        "data": {
                            "shared": {
                                "sort": [],
                                "type": "datalens",
                                "links": [],
                                "colors": [],
                                "labels": [],
                                "shapes": [],
                                "filters": [],
                                "updates": [
                                    {
                                        "field": {
                                            "cast": "string",
                                            "guid": "c2566280-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Ср чек с начала недели (текст)",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "STR(ROUND([Ср чек с начала недели]))",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "string",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "STR(ROUND([40962a80-aa64-11f0-956d-c14801191fc6]))",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "string",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "string",
                                            "guid": "a5f6be50-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Ср чек за неделю (текст)",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "STR(ROUND([Ср чек за неделю]))",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "string",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "STR(ROUND([0dcb3a50-aa55-11f0-8c7c-59e14d3324ab]))",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "string",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "string",
                                            "guid": "f0591a10-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Ср чек за месяц (текст)",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "STR(ROUND([Ср чек за месяц]))",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "string",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "STR(ROUND([da27cc00-aa67-11f0-8ec6-3da0d05fc0c9]))",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "string",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "float",
                                            "guid": "6d3502f0-aa7d-11f0-a563-69be3ea7bf44",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Ср чек со средней за месяц",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "ROUND(([Ср чек за последний день] - [Ср чек за месяц]) / [Ср чек за месяц] *10000)/100",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "float",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "ROUND(([dfe04950-aa7c-11f0-a563-69be3ea7bf44] - [da27cc00-aa67-11f0-8ec6-3da0d05fc0c9]) / [da27cc00-aa67-11f0-8ec6-3da0d05fc0c9] *10000)/100",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "float",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "float",
                                            "guid": "8178cf50-aa71-11f0-b285-094080387588",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Ср чек со средней за неделю",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "ROUND(([Ср чек за последний день] - [Ср чек за неделю]) / [Ср чек за неделю] * 10000)/100",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "float",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "ROUND(([dfe04950-aa7c-11f0-a563-69be3ea7bf44] - [0dcb3a50-aa55-11f0-8c7c-59e14d3324ab]) / [0dcb3a50-aa55-11f0-8c7c-59e14d3324ab] * 10000)/100",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "float",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "float",
                                            "guid": "da27cc00-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Ср чек за месяц",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "SUM_IF([total_price], [purchase_datetime] >= DATEADD([end_date], 'day', -29) AND [purchase_datedate] <= [end_date])\r\n/\r\nCOUNTD_IF([client_id], [purchase_datetime] >= DATEADD([end_date], 'day', -29) AND [purchase_datedate] <= [end_date])",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "float",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "SUM_IF([total_price_1u2g], [purchase_datetime_pvoa] >= DATEADD([end_date], 'day', -29) AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= [end_date])\r\n/\r\nCOUNTD_IF([client_id_lbc6], [purchase_datetime_pvoa] >= DATEADD([end_date], 'day', -29) AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= [end_date])",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "float",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "float",
                                            "guid": "0dcb3a50-aa55-11f0-8c7c-59e14d3324ab",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Ср чек за неделю",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "SUM_IF([total_price], [purchase_datetime] >= DATEADD([end_date], 'day', -6) AND [purchase_datedate] <= [end_date])/\r\nCOUNTD_IF([client_id], [purchase_datetime] >= DATEADD([end_date], 'day', -6) AND [purchase_datedate] <= [end_date])",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "float",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "SUM_IF([total_price_1u2g], [purchase_datetime_pvoa] >= DATEADD([end_date], 'day', -6) AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= [end_date])/\r\nCOUNTD_IF([client_id_lbc6], [purchase_datetime_pvoa] >= DATEADD([end_date], 'day', -6) AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= [end_date])",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "float",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "float",
                                            "guid": "dfe04950-aa7c-11f0-a563-69be3ea7bf44",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Ср чек за последний день",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "SUM_IF([total_price], [purchase_datedate] = [end_date])/\r\nCOUNTD_IF([client_id], [purchase_datedate] = [end_date])",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "float",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "SUM_IF([total_price_1u2g], [461ec3e0-a929-11f0-976d-099c0b05b9ec] = [end_date])/\r\nCOUNTD_IF([client_id_lbc6], [461ec3e0-a929-11f0-976d-099c0b05b9ec] = [end_date])",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "float",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "float",
                                            "guid": "40962a80-aa64-11f0-956d-c14801191fc6",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Ср чек с начала недели",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "SUM_IF([total_price], [purchase_datetime] >= DATETRUNC([end_date], 'week') AND [purchase_datedate] <= [end_date])/\r\nCOUNTD_IF([client_id], [purchase_datetime] >= DATETRUNC([end_date], 'week') AND [purchase_datedate] <= [end_date])",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "float",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "SUM_IF([total_price_1u2g], [purchase_datetime_pvoa] >= DATETRUNC([end_date], 'week') AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= [end_date])/\r\nCOUNTD_IF([client_id_lbc6], [purchase_datetime_pvoa] >= DATETRUNC([end_date], 'week') AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= [end_date])",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "float",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "markup",
                                            "guid": "7dac49e0-aa64-11f0-956d-c14801191fc6",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "ТЕКСТ",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "'Средний чек п. за неделю: ' + BR() +\r\nSIZE(COLOR(BOLD([Ср чек за неделю (текст)]), '#1F68A9'), '24px') + ' ' + \r\n    TOOLTIP(\r\n        IF [Ср чек со средней за неделю] > 0 THEN COLOR('▲' + STR([Ср чек со средней за неделю]) +'%', '#54A520')\r\n        ELSE COLOR('▼' + STR(ABS([Ср чек со средней за неделю])) +'%', '#BE2443') END,\r\n        'Последний день относительно среднего за неделю')\r\n+ BR() + BR() +\r\n'Средний чек п. за месяц: ' + BR() +\r\nSIZE(COLOR(BOLD([Ср чек за месяц (текст)]), '#1F68A9'), '24px') + ' ' +\r\n    TOOLTIP(\r\n        IF [Ср чек со средней за месяц] > 0 THEN COLOR('▼' + STR([Ср чек со средней за месяц]) + '%', '#54A520')\r\n        ELSE COLOR('▲' + STR(ABS([Ср чек со средней за месяц])) + '%', '#BE2443') END,\r\n        'Последний день относительно среднего за месяц')",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "markup",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "'Средний чек п. за неделю: ' + BR() +\r\nSIZE(COLOR(BOLD([a5f6be50-aa67-11f0-8ec6-3da0d05fc0c9]), '#1F68A9'), '24px') + ' ' + \r\n    TOOLTIP(\r\n        IF [8178cf50-aa71-11f0-b285-094080387588] > 0 THEN COLOR('▲' + STR([8178cf50-aa71-11f0-b285-094080387588]) +'%', '#54A520')\r\n        ELSE COLOR('▼' + STR(ABS([8178cf50-aa71-11f0-b285-094080387588])) +'%', '#BE2443') END,\r\n        'Последний день относительно среднего за неделю')\r\n+ BR() + BR() +\r\n'Средний чек п. за месяц: ' + BR() +\r\nSIZE(COLOR(BOLD([f0591a10-aa67-11f0-8ec6-3da0d05fc0c9]), '#1F68A9'), '24px') + ' ' +\r\n    TOOLTIP(\r\n        IF [6d3502f0-aa7d-11f0-a563-69be3ea7bf44] > 0 THEN COLOR('▼' + STR([6d3502f0-aa7d-11f0-a563-69be3ea7bf44]) + '%', '#54A520')\r\n        ELSE COLOR('▲' + STR(ABS([6d3502f0-aa7d-11f0-a563-69be3ea7bf44])) + '%', '#BE2443') END,\r\n        'Последний день относительно среднего за месяц')",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "markup",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    }
                                ],
                                "version": "14",
                                "segments": [],
                                "tooltips": [],
                                "datasetsIds": [
                                    "6"
                                ],
                                "hierarchies": [],
                                "colorsConfig": {},
                                "shapesConfig": {},
                                "extraSettings": {
                                    "feed": "",
                                    "title": "Общие продажи и тренды - KPI. Общая выручка",
                                    "stacking": "on",
                                    "zoomMode": "auto",
                                    "titleMode": "hide",
                                    "legendMode": "show",
                                    "tooltipSum": "on",
                                    "mapCenterMode": "auto",
                                    "metricFontSize": "m",
                                    "metricFontColor": "#0FA08D",
                                    "pivotInlineSort": "on",
                                    "navigatorSettings": {
                                        "selectedLines": [],
                                        "isNavigatorAvailable": false
                                    },
                                    "indicatorTitleMode": "hide",
                                    "metricFontColorIndex": 12
                                },
                                "visualization": {
                                    "id": "metric",
                                    "name": "label_visualization-metric",
                                    "type": "metric",
                                    "allowSort": false,
                                    "iconProps": {
                                        "id": "visMetric",
                                        "width": "24"
                                    },
                                    "allowLabels": false,
                                    "allowFilters": true,
                                    "placeholders": [
                                        {
                                            "id": "measures",
                                            "type": "measures",
                                            "items": [
                                                {
                                                    "id": "measure-1",
                                                    "cast": "markup",
                                                    "guid": "7dac49e0-aa64-11f0-956d-c14801191fc6",
                                                    "type": "MEASURE",
                                                    "local": true,
                                                    "title": "ТЕКСТ",
                                                    "valid": true,
                                                    "hidden": false,
                                                    "source": "",
                                                    "formula": "'Средний чек п. за неделю: ' + BR() +\r\nSIZE(COLOR(BOLD([Ср чек за неделю (текст)]), '#1F68A9'), '24px') + ' ' + \r\n    TOOLTIP(\r\n        IF [Ср чек со средней за неделю] > 0 THEN COLOR('▲' + STR([Ср чек со средней за неделю]) +'%', '#54A520')\r\n        ELSE COLOR('▼' + STR(ABS([Ср чек со средней за неделю])) +'%', '#BE2443') END,\r\n        'Последний день относительно среднего за неделю')\r\n+ BR() + BR() +\r\n'Средний чек п. за месяц: ' + BR() +\r\nSIZE(COLOR(BOLD([Ср чек за месяц (текст)]), '#1F68A9'), '24px') + ' ' +\r\n    TOOLTIP(\r\n        IF [Ср чек со средней за месяц] > 0 THEN COLOR('▼' + STR([Ср чек со средней за месяц]) + '%', '#54A520')\r\n        ELSE COLOR('▲' + STR(ABS([Ср чек со средней за месяц])) + '%', '#BE2443') END,\r\n        'Последний день относительно среднего за месяц')",
                                                    "virtual": false,
                                                    "avatar_id": null,
                                                    "calc_mode": "formula",
                                                    "data_type": "markup",
                                                    "datasetId": "6",
                                                    "managed_by": "user",
                                                    "aggregation": "none",
                                                    "datasetName": "Данные о продажах",
                                                    "description": "",
                                                    "ui_settings": "",
                                                    "guid_formula": "'Средний чек п. за неделю: ' + BR() +\r\nSIZE(COLOR(BOLD([a5f6be50-aa67-11f0-8ec6-3da0d05fc0c9]), '#1F68A9'), '24px') + ' ' + \r\n    TOOLTIP(\r\n        IF [8178cf50-aa71-11f0-b285-094080387588] > 0 THEN COLOR('▲' + STR([8178cf50-aa71-11f0-b285-094080387588]) +'%', '#54A520')\r\n        ELSE COLOR('▼' + STR(ABS([8178cf50-aa71-11f0-b285-094080387588])) +'%', '#BE2443') END,\r\n        'Последний день относительно среднего за неделю')\r\n+ BR() + BR() +\r\n'Средний чек п. за месяц: ' + BR() +\r\nSIZE(COLOR(BOLD([f0591a10-aa67-11f0-8ec6-3da0d05fc0c9]), '#1F68A9'), '24px') + ' ' +\r\n    TOOLTIP(\r\n        IF [6d3502f0-aa7d-11f0-a563-69be3ea7bf44] > 0 THEN COLOR('▼' + STR([6d3502f0-aa7d-11f0-a563-69be3ea7bf44]) + '%', '#54A520')\r\n        ELSE COLOR('▲' + STR(ABS([6d3502f0-aa7d-11f0-a563-69be3ea7bf44])) + '%', '#BE2443') END,\r\n        'Последний день относительно среднего за месяц')",
                                                    "default_value": null,
                                                    "autoaggregated": true,
                                                    "lock_aggregation": false,
                                                    "value_constraint": null,
                                                    "initial_data_type": "markup",
                                                    "aggregation_locked": true,
                                                    "has_auto_aggregation": true
                                                }
                                            ],
                                            "title": "section_measure",
                                            "capacity": 1,
                                            "required": true,
                                            "settings": {},
                                            "iconProps": {},
                                            "allowedTypes": {},
                                            "allowedDataTypes": {},
                                            "allowedFinalTypes": {}
                                        }
                                    ],
                                    "allowLayerFilters": false
                                },
                                "geopointsConfig": {},
                                "datasetsPartialFields": [
                                    [
                                        {
                                            "guid": "da27cc00-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "title": "Ср чек за месяц",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "7dac49e0-aa64-11f0-956d-c14801191fc6",
                                            "title": "ТЕКСТ",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "8178cf50-aa71-11f0-b285-094080387588",
                                            "title": "Ср чек со средней за неделю",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "6d3502f0-aa7d-11f0-a563-69be3ea7bf44",
                                            "title": "Ср чек со средней за месяц",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "dfe04950-aa7c-11f0-a563-69be3ea7bf44",
                                            "title": "Ср чек за последний день",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "f0591a10-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "title": "Ср чек за месяц (текст)",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "0dcb3a50-aa55-11f0-8c7c-59e14d3324ab",
                                            "title": "Ср чек за неделю",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "40962a80-aa64-11f0-956d-c14801191fc6",
                                            "title": "Ср чек с начала недели",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "a5f6be50-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "title": "Ср чек за неделю (текст)",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "c2566280-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "title": "Ср чек с начала недели (текст)",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "e3a1cfe0-aa55-11f0-8395-f32b2462dd84",
                                            "title": "Фильтр даты",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "end_date",
                                            "title": "end_date",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "start_date",
                                            "title": "start_date",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "f828f540-a935-11f0-976d-099c0b05b9ec",
                                            "title": "%_discount",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "584ad600-a92c-11f0-976d-099c0b05b9ec",
                                            "title": "scale_value",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "scale",
                                            "title": "scale",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "660eb030-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_month",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "d02fc430-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_week",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "1cf44850-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_hour",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "3352b650-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_quarter",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "268ce800-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_year",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "087e5b50-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_date",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "id_scne",
                                            "title": "id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "client_id_lbc6",
                                            "title": "client_id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "gender_fzxw",
                                            "title": "gender",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "product_id_ey10",
                                            "title": "product_id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "quantity_k4iu",
                                            "title": "quantity",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "price_per_item_3dwq",
                                            "title": "price_per_item",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "discount_per_item_7maq",
                                            "title": "discount_per_item",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "total_price_1u2g",
                                            "title": "total_price",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "purchase_datetime_pvoa",
                                            "title": "purchase_datetime",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "461ec3e0-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_datedate",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "created_at_s6qq",
                                            "title": "created_at",
                                            "calc_mode": "direct"
                                        }
                                    ]
                                ]
                            }
                        },
                        "name": "Общие продажи и тренды - KPI.  Средний чек покупателя (День) среднее",
                        "type": "markup_wizard_node",
                        "annotation": {
                            "description": ""
                        }
                    }
                },
                "33": {
                    "widget": {
                        "data": {
                            "shared": {
                                "sort": [],
                                "type": "datalens",
                                "links": [],
                                "colors": [],
                                "labels": [],
                                "shapes": [],
                                "filters": [],
                                "updates": [
                                    {
                                        "field": {
                                            "cast": "integer",
                                            "guid": "0dcb3a50-aa55-11f0-8c7c-59e14d3324ab",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Количество за последний месяц",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "SUM_IF([quantity], [purchase_datedate] > DATEADD([end_date], 'month', -1) AND [purchase_datedate] <= [end_date])",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "integer",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "SUM_IF([quantity_k4iu], [461ec3e0-a929-11f0-976d-099c0b05b9ec] > DATEADD([end_date], 'month', -1) AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= [end_date])",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "integer",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "integer",
                                            "guid": "da27cc00-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Количество за предпоследний месяц",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "SUM_IF([quantity], [purchase_datedate] > DATEADD([end_date], 'month', -2) AND [purchase_datedate] <= DATEADD([end_date], 'month', -1))",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "integer",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "SUM_IF([quantity_k4iu], [461ec3e0-a929-11f0-976d-099c0b05b9ec] > DATEADD([end_date], 'month', -2) AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= DATEADD([end_date], 'month', -1))",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "integer",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "float",
                                            "guid": "2beb7fa0-aa68-11f0-8ec6-3da0d05fc0c9",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Количество месяц изменения",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "ROUND(([Количество за последний месяц]-[Количество за предпоследний месяц])/[Количество за предпоследний месяц] * 10000) / 100",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "float",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "ROUND(([0dcb3a50-aa55-11f0-8c7c-59e14d3324ab]-[da27cc00-aa67-11f0-8ec6-3da0d05fc0c9])/[da27cc00-aa67-11f0-8ec6-3da0d05fc0c9] * 10000) / 100",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "float",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "integer",
                                            "guid": "40962a80-aa64-11f0-956d-c14801191fc6",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Количество с начала месяца",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "SUM_IF([quantity], [purchase_datetime] >= DATETRUNC([end_date], 'month') AND [purchase_datedate] <= [end_date])",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "integer",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "SUM_IF([quantity_k4iu], [purchase_datetime_pvoa] >= DATETRUNC([end_date], 'month') AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= [end_date])",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "integer",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "float",
                                            "guid": "31eb5640-aa69-11f0-8ec6-3da0d05fc0c9",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Количество с начала месяца процент",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "ROUND([Количество с начала месяца] / [Количество за последний месяц] * 10000) / 100",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "float",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "ROUND([40962a80-aa64-11f0-956d-c14801191fc6] / [0dcb3a50-aa55-11f0-8c7c-59e14d3324ab] * 10000) / 100",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "float",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "string",
                                            "guid": "f0591a10-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Количество за предпоследний месяц (текст)",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "STR([Количество за предпоследний месяц]/1000) + 'K'",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "string",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "STR([da27cc00-aa67-11f0-8ec6-3da0d05fc0c9]/1000) + 'K'",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "string",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "string",
                                            "guid": "a5f6be50-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Количество за последний месяц (текст)",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "STR(ROUND([Количество за последний месяц]/1000)) + \"K\"",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "string",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "STR(ROUND([0dcb3a50-aa55-11f0-8c7c-59e14d3324ab]/1000)) + \"K\"",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "string",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "string",
                                            "guid": "c2566280-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Количество с начала месяца (текст)",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "STR(ROUND([Количество с начала месяца]/1000))+\"K\"",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "string",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "STR(ROUND([40962a80-aa64-11f0-956d-c14801191fc6]/1000))+\"K\"",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "string",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "markup",
                                            "guid": "7dac49e0-aa64-11f0-956d-c14801191fc6",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "ТЕКСТ",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "'Кол-во товара за последний месяц: ' + BR() +\r\nSIZE(COLOR(BOLD([Количество за последний месяц (текст)]), '#70C1AF'), '24px') + ' ' + \r\n    TOOLTIP(\r\n        IF [Количество месяц изменения] > 0 THEN COLOR('▲' + STR([Количество месяц изменения]) +'%', '#54A520')\r\n        ELSE COLOR('▼' + STR([Количество месяц изменения]) +'%', '#BE2443') END,\r\n        'Относительно предыдущего месяца')\r\n+ BR() + BR() +\r\n'Кол-во товара с начала месяца: ' \r\n+ BR() +\r\nSIZE(COLOR(BOLD([Количество с начала месяца (текст)]), '#70C1AF'), '24px') + ' ' +\r\n    TOOLTIP(\r\n        IF [Количество с начала месяца процент] < 100 THEN COLOR(STR([Количество с начала месяца процент]) + '%', '#BE2443')\r\n        ELSE COLOR(STR([Количество с начала месяца процент]) + '%', '#54A520') END,\r\n        'Доля от последнего полного месяца')",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "markup",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "'Кол-во товара за последний месяц: ' + BR() +\r\nSIZE(COLOR(BOLD([a5f6be50-aa67-11f0-8ec6-3da0d05fc0c9]), '#70C1AF'), '24px') + ' ' + \r\n    TOOLTIP(\r\n        IF [2beb7fa0-aa68-11f0-8ec6-3da0d05fc0c9] > 0 THEN COLOR('▲' + STR([2beb7fa0-aa68-11f0-8ec6-3da0d05fc0c9]) +'%', '#54A520')\r\n        ELSE COLOR('▼' + STR([2beb7fa0-aa68-11f0-8ec6-3da0d05fc0c9]) +'%', '#BE2443') END,\r\n        'Относительно предыдущего месяца')\r\n+ BR() + BR() +\r\n'Кол-во товара с начала месяца: ' \r\n+ BR() +\r\nSIZE(COLOR(BOLD([c2566280-aa67-11f0-8ec6-3da0d05fc0c9]), '#70C1AF'), '24px') + ' ' +\r\n    TOOLTIP(\r\n        IF [31eb5640-aa69-11f0-8ec6-3da0d05fc0c9] < 100 THEN COLOR(STR([31eb5640-aa69-11f0-8ec6-3da0d05fc0c9]) + '%', '#BE2443')\r\n        ELSE COLOR(STR([31eb5640-aa69-11f0-8ec6-3da0d05fc0c9]) + '%', '#54A520') END,\r\n        'Доля от последнего полного месяца')",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "markup",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    }
                                ],
                                "version": "14",
                                "segments": [],
                                "tooltips": [],
                                "datasetsIds": [
                                    "6"
                                ],
                                "hierarchies": [],
                                "colorsConfig": {},
                                "shapesConfig": {},
                                "extraSettings": {
                                    "feed": "",
                                    "title": "Общие продажи и тренды - KPI. Общая выручка",
                                    "stacking": "on",
                                    "zoomMode": "auto",
                                    "titleMode": "hide",
                                    "legendMode": "show",
                                    "tooltipSum": "on",
                                    "mapCenterMode": "auto",
                                    "metricFontSize": "m",
                                    "metricFontColor": "#0FA08D",
                                    "pivotInlineSort": "on",
                                    "navigatorSettings": {
                                        "selectedLines": [],
                                        "isNavigatorAvailable": false
                                    },
                                    "indicatorTitleMode": "hide",
                                    "metricFontColorIndex": 12
                                },
                                "visualization": {
                                    "id": "metric",
                                    "name": "label_visualization-metric",
                                    "type": "metric",
                                    "allowSort": false,
                                    "iconProps": {
                                        "id": "visMetric",
                                        "width": "24"
                                    },
                                    "allowLabels": false,
                                    "allowFilters": true,
                                    "placeholders": [
                                        {
                                            "id": "measures",
                                            "type": "measures",
                                            "items": [
                                                {
                                                    "id": "measure-3",
                                                    "cast": "markup",
                                                    "guid": "7dac49e0-aa64-11f0-956d-c14801191fc6",
                                                    "type": "MEASURE",
                                                    "local": true,
                                                    "title": "ТЕКСТ",
                                                    "valid": true,
                                                    "hidden": false,
                                                    "source": "",
                                                    "formula": "'Кол-во товара за последний месяц: ' + BR() +\r\nSIZE(COLOR(BOLD([Количество за последний месяц (текст)]), '#70C1AF'), '24px') + ' ' + \r\n    TOOLTIP(\r\n        IF [Количество месяц изменения] > 0 THEN COLOR('▲' + STR([Количество месяц изменения]) +'%', '#54A520')\r\n        ELSE COLOR('▼' + STR([Количество месяц изменения]) +'%', '#BE2443') END,\r\n        'Относительно предыдущего месяца')\r\n+ BR() + BR() +\r\n'Кол-во товара с начала месяца: ' \r\n+ BR() +\r\nSIZE(COLOR(BOLD([Количество с начала месяца (текст)]), '#70C1AF'), '24px') + ' ' +\r\n    TOOLTIP(\r\n        IF [Количество с начала месяца процент] < 100 THEN COLOR(STR([Количество с начала месяца процент]) + '%', '#BE2443')\r\n        ELSE COLOR(STR([Количество с начала месяца процент]) + '%', '#54A520') END,\r\n        'Доля от последнего полного месяца')",
                                                    "virtual": false,
                                                    "avatar_id": null,
                                                    "calc_mode": "formula",
                                                    "data_type": "markup",
                                                    "datasetId": "6",
                                                    "managed_by": "user",
                                                    "aggregation": "none",
                                                    "datasetName": "Данные о продажах",
                                                    "description": "",
                                                    "ui_settings": "",
                                                    "guid_formula": "'Кол-во товара за последний месяц: ' + BR() +\r\nSIZE(COLOR(BOLD([a5f6be50-aa67-11f0-8ec6-3da0d05fc0c9]), '#70C1AF'), '24px') + ' ' + \r\n    TOOLTIP(\r\n        IF [2beb7fa0-aa68-11f0-8ec6-3da0d05fc0c9] > 0 THEN COLOR('▲' + STR([2beb7fa0-aa68-11f0-8ec6-3da0d05fc0c9]) +'%', '#54A520')\r\n        ELSE COLOR('▼' + STR([2beb7fa0-aa68-11f0-8ec6-3da0d05fc0c9]) +'%', '#BE2443') END,\r\n        'Относительно предыдущего месяца')\r\n+ BR() + BR() +\r\n'Кол-во товара с начала месяца: ' \r\n+ BR() +\r\nSIZE(COLOR(BOLD([c2566280-aa67-11f0-8ec6-3da0d05fc0c9]), '#70C1AF'), '24px') + ' ' +\r\n    TOOLTIP(\r\n        IF [31eb5640-aa69-11f0-8ec6-3da0d05fc0c9] < 100 THEN COLOR(STR([31eb5640-aa69-11f0-8ec6-3da0d05fc0c9]) + '%', '#BE2443')\r\n        ELSE COLOR(STR([31eb5640-aa69-11f0-8ec6-3da0d05fc0c9]) + '%', '#54A520') END,\r\n        'Доля от последнего полного месяца')",
                                                    "default_value": null,
                                                    "autoaggregated": true,
                                                    "lock_aggregation": false,
                                                    "value_constraint": null,
                                                    "initial_data_type": "markup",
                                                    "aggregation_locked": true,
                                                    "has_auto_aggregation": true
                                                }
                                            ],
                                            "title": "section_measure",
                                            "capacity": 1,
                                            "required": true,
                                            "settings": {},
                                            "iconProps": {},
                                            "allowedTypes": {},
                                            "allowedDataTypes": {},
                                            "allowedFinalTypes": {}
                                        }
                                    ],
                                    "allowLayerFilters": false
                                },
                                "geopointsConfig": {},
                                "datasetsPartialFields": [
                                    [
                                        {
                                            "guid": "c2566280-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "title": "Количество с начала месяца (текст)",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "a5f6be50-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "title": "Количество за последний месяц (текст)",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "f0591a10-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "title": "Количество за предпоследний месяц (текст)",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "7dac49e0-aa64-11f0-956d-c14801191fc6",
                                            "title": "ТЕКСТ",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "31eb5640-aa69-11f0-8ec6-3da0d05fc0c9",
                                            "title": "Количество с начала месяца процент",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "40962a80-aa64-11f0-956d-c14801191fc6",
                                            "title": "Количество с начала месяца",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "2beb7fa0-aa68-11f0-8ec6-3da0d05fc0c9",
                                            "title": "Количество месяц изменения",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "da27cc00-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "title": "Количество за предпоследний месяц",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "0dcb3a50-aa55-11f0-8c7c-59e14d3324ab",
                                            "title": "Количество за последний месяц",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "e3a1cfe0-aa55-11f0-8395-f32b2462dd84",
                                            "title": "Фильтр даты",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "end_date",
                                            "title": "end_date",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "start_date",
                                            "title": "start_date",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "f828f540-a935-11f0-976d-099c0b05b9ec",
                                            "title": "%_discount",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "584ad600-a92c-11f0-976d-099c0b05b9ec",
                                            "title": "scale_value",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "scale",
                                            "title": "scale",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "660eb030-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_month",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "d02fc430-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_week",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "1cf44850-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_hour",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "3352b650-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_quarter",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "268ce800-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_year",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "087e5b50-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_date",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "id_scne",
                                            "title": "id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "client_id_lbc6",
                                            "title": "client_id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "gender_fzxw",
                                            "title": "gender",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "product_id_ey10",
                                            "title": "product_id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "quantity_k4iu",
                                            "title": "quantity",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "price_per_item_3dwq",
                                            "title": "price_per_item",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "discount_per_item_7maq",
                                            "title": "discount_per_item",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "total_price_1u2g",
                                            "title": "total_price",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "purchase_datetime_pvoa",
                                            "title": "purchase_datetime",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "461ec3e0-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_datedate",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "created_at_s6qq",
                                            "title": "created_at",
                                            "calc_mode": "direct"
                                        }
                                    ]
                                ]
                            }
                        },
                        "name": "Общие продажи и тренды - KPI. Количество товаров (Месяц)",
                        "type": "markup_wizard_node",
                        "annotation": {
                            "description": ""
                        }
                    }
                },
                "34": {
                    "widget": {
                        "data": {
                            "shared": {
                                "sort": [],
                                "type": "datalens",
                                "links": [],
                                "colors": [],
                                "labels": [],
                                "shapes": [],
                                "filters": [],
                                "updates": [
                                    {
                                        "field": {
                                            "cast": "string",
                                            "guid": "c2566280-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Ср чек с начала недели (текст)",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "STR(ROUND([Ср кол-во товара с начала недели]))",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "string",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "STR(ROUND([40962a80-aa64-11f0-956d-c14801191fc6]))",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "string",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "float",
                                            "guid": "6d3502f0-aa7d-11f0-a563-69be3ea7bf44",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Ср чек со средней за месяц",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "ROUND(([Ср кол-во товара за последний день] - [Ср кол-во товара за месяц]) / [Ср кол-во товара за месяц] *10000)/100",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "float",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "ROUND(([dfe04950-aa7c-11f0-a563-69be3ea7bf44] - [da27cc00-aa67-11f0-8ec6-3da0d05fc0c9]) / [da27cc00-aa67-11f0-8ec6-3da0d05fc0c9] *10000)/100",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "float",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "float",
                                            "guid": "8178cf50-aa71-11f0-b285-094080387588",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Ср чек со средней за неделю",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "ROUND(([Ср кол-во товара за последний день] - [Ср кол-во товара за неделю]) / [Ср кол-во товара за неделю] * 10000)/100",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "float",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "ROUND(([dfe04950-aa7c-11f0-a563-69be3ea7bf44] - [0dcb3a50-aa55-11f0-8c7c-59e14d3324ab]) / [0dcb3a50-aa55-11f0-8c7c-59e14d3324ab] * 10000)/100",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "float",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "float",
                                            "guid": "da27cc00-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Ср кол-во товара за месяц",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "SUM_IF([quantity], [purchase_datetime] >= DATEADD([end_date], 'day', -29) AND [purchase_datedate] <= [end_date])/30",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "float",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "SUM_IF([quantity_k4iu], [purchase_datetime_pvoa] >= DATEADD([end_date], 'day', -29) AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= [end_date])/30",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "float",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "float",
                                            "guid": "0dcb3a50-aa55-11f0-8c7c-59e14d3324ab",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Ср кол-во товара за неделю",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "SUM_IF([quantity], [purchase_datetime] >= DATEADD([end_date], 'day', -6) AND [purchase_datedate] <= [end_date])/7",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "float",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "SUM_IF([quantity_k4iu], [purchase_datetime_pvoa] >= DATEADD([end_date], 'day', -6) AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= [end_date])/7",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "float",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "string",
                                            "guid": "a5f6be50-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Ср кол-во товара за неделю (текст)",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "STR(ROUND([Ср кол-во товара за неделю]/1000)) + \"K\"",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "string",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "STR(ROUND([0dcb3a50-aa55-11f0-8c7c-59e14d3324ab]/1000)) + \"K\"",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "string",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "string",
                                            "guid": "f0591a10-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Ср кол-во товара (текст)",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "STR(ROUND([Ср кол-во товара за месяц]/1000)) + \"K\"",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "string",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "STR(ROUND([da27cc00-aa67-11f0-8ec6-3da0d05fc0c9]/1000)) + \"K\"",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "string",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "integer",
                                            "guid": "dfe04950-aa7c-11f0-a563-69be3ea7bf44",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Ср кол-во товара за последний день",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "SUM_IF([quantity], [purchase_datedate] = [end_date])",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "integer",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "SUM_IF([quantity_k4iu], [461ec3e0-a929-11f0-976d-099c0b05b9ec] = [end_date])",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "integer",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "float",
                                            "guid": "40962a80-aa64-11f0-956d-c14801191fc6",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Ср кол-во товара с начала недели",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "SUM_IF([quantity], [purchase_datetime] >= DATETRUNC([end_date], 'week') AND [purchase_datedate] <= [end_date])/\r\nCOUNTD_IF([quantity], [purchase_datetime] >= DATETRUNC([end_date], 'week') AND [purchase_datedate] <= [end_date])",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "float",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "SUM_IF([quantity_k4iu], [purchase_datetime_pvoa] >= DATETRUNC([end_date], 'week') AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= [end_date])/\r\nCOUNTD_IF([quantity_k4iu], [purchase_datetime_pvoa] >= DATETRUNC([end_date], 'week') AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= [end_date])",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "float",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "markup",
                                            "guid": "7dac49e0-aa64-11f0-956d-c14801191fc6",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "ТЕКСТ",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "'Среднее кол-во товара за неделю: ' + BR() +\r\nSIZE(COLOR(BOLD([Ср кол-во товара за неделю (текст)]), '#70C1AF'), '24px') + ' ' + \r\n    TOOLTIP(\r\n        IF [Ср чек со средней за неделю] > 0 THEN COLOR('▲' + STR([Ср чек со средней за неделю]) +'%', '#54A520')\r\n        ELSE COLOR('▼' + STR(ABS([Ср чек со средней за неделю])) +'%', '#BE2443') END,\r\n        'Последний день относительно среднего за неделю')\r\n+ BR() + BR() +\r\n'Среднее кол-во товара за месяц: ' + BR() +\r\nSIZE(COLOR(BOLD([Ср кол-во товара (текст)]), '#70C1AF'), '24px') + ' ' +\r\n    TOOLTIP(\r\n        IF [Ср чек со средней за месяц] > 0 THEN COLOR('▼' + STR([Ср чек со средней за месяц]) + '%', '#54A520')\r\n        ELSE COLOR('▲' + STR(ABS([Ср чек со средней за месяц])) + '%', '#BE2443') END,\r\n        'Последний день относительно среднего за месяц')",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "markup",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "'Среднее кол-во товара за неделю: ' + BR() +\r\nSIZE(COLOR(BOLD([a5f6be50-aa67-11f0-8ec6-3da0d05fc0c9]), '#70C1AF'), '24px') + ' ' + \r\n    TOOLTIP(\r\n        IF [8178cf50-aa71-11f0-b285-094080387588] > 0 THEN COLOR('▲' + STR([8178cf50-aa71-11f0-b285-094080387588]) +'%', '#54A520')\r\n        ELSE COLOR('▼' + STR(ABS([8178cf50-aa71-11f0-b285-094080387588])) +'%', '#BE2443') END,\r\n        'Последний день относительно среднего за неделю')\r\n+ BR() + BR() +\r\n'Среднее кол-во товара за месяц: ' + BR() +\r\nSIZE(COLOR(BOLD([f0591a10-aa67-11f0-8ec6-3da0d05fc0c9]), '#70C1AF'), '24px') + ' ' +\r\n    TOOLTIP(\r\n        IF [6d3502f0-aa7d-11f0-a563-69be3ea7bf44] > 0 THEN COLOR('▼' + STR([6d3502f0-aa7d-11f0-a563-69be3ea7bf44]) + '%', '#54A520')\r\n        ELSE COLOR('▲' + STR(ABS([6d3502f0-aa7d-11f0-a563-69be3ea7bf44])) + '%', '#BE2443') END,\r\n        'Последний день относительно среднего за месяц')",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "markup",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    }
                                ],
                                "version": "14",
                                "segments": [],
                                "tooltips": [],
                                "datasetsIds": [
                                    "6"
                                ],
                                "hierarchies": [],
                                "colorsConfig": {},
                                "shapesConfig": {},
                                "extraSettings": {
                                    "feed": "",
                                    "title": "Общие продажи и тренды - KPI. Общая выручка",
                                    "stacking": "on",
                                    "zoomMode": "auto",
                                    "titleMode": "hide",
                                    "legendMode": "show",
                                    "tooltipSum": "on",
                                    "mapCenterMode": "auto",
                                    "metricFontSize": "m",
                                    "metricFontColor": "#0FA08D",
                                    "pivotInlineSort": "on",
                                    "navigatorSettings": {
                                        "selectedLines": [],
                                        "isNavigatorAvailable": false
                                    },
                                    "indicatorTitleMode": "hide",
                                    "metricFontColorIndex": 12
                                },
                                "visualization": {
                                    "id": "metric",
                                    "name": "label_visualization-metric",
                                    "type": "metric",
                                    "allowSort": false,
                                    "iconProps": {
                                        "id": "visMetric",
                                        "width": "24"
                                    },
                                    "allowLabels": false,
                                    "allowFilters": true,
                                    "placeholders": [
                                        {
                                            "id": "measures",
                                            "type": "measures",
                                            "items": [
                                                {
                                                    "id": "measure-0",
                                                    "cast": "markup",
                                                    "guid": "7dac49e0-aa64-11f0-956d-c14801191fc6",
                                                    "type": "MEASURE",
                                                    "local": true,
                                                    "title": "ТЕКСТ",
                                                    "valid": true,
                                                    "hidden": false,
                                                    "source": "",
                                                    "formula": "'Среднее кол-во товара за неделю: ' + BR() +\r\nSIZE(COLOR(BOLD([Ср кол-во товара за неделю (текст)]), '#70C1AF'), '24px') + ' ' + \r\n    TOOLTIP(\r\n        IF [Ср чек со средней за неделю] > 0 THEN COLOR('▲' + STR([Ср чек со средней за неделю]) +'%', '#54A520')\r\n        ELSE COLOR('▼' + STR(ABS([Ср чек со средней за неделю])) +'%', '#BE2443') END,\r\n        'Последний день относительно среднего за неделю')\r\n+ BR() + BR() +\r\n'Среднее кол-во товара за месяц: ' + BR() +\r\nSIZE(COLOR(BOLD([Ср кол-во товара (текст)]), '#70C1AF'), '24px') + ' ' +\r\n    TOOLTIP(\r\n        IF [Ср чек со средней за месяц] > 0 THEN COLOR('▼' + STR([Ср чек со средней за месяц]) + '%', '#54A520')\r\n        ELSE COLOR('▲' + STR(ABS([Ср чек со средней за месяц])) + '%', '#BE2443') END,\r\n        'Последний день относительно среднего за месяц')",
                                                    "virtual": false,
                                                    "avatar_id": null,
                                                    "calc_mode": "formula",
                                                    "data_type": "markup",
                                                    "datasetId": "6",
                                                    "managed_by": "user",
                                                    "aggregation": "none",
                                                    "datasetName": "Данные о продажах",
                                                    "description": "",
                                                    "ui_settings": "",
                                                    "guid_formula": "'Среднее кол-во товара за неделю: ' + BR() +\r\nSIZE(COLOR(BOLD([a5f6be50-aa67-11f0-8ec6-3da0d05fc0c9]), '#70C1AF'), '24px') + ' ' + \r\n    TOOLTIP(\r\n        IF [8178cf50-aa71-11f0-b285-094080387588] > 0 THEN COLOR('▲' + STR([8178cf50-aa71-11f0-b285-094080387588]) +'%', '#54A520')\r\n        ELSE COLOR('▼' + STR(ABS([8178cf50-aa71-11f0-b285-094080387588])) +'%', '#BE2443') END,\r\n        'Последний день относительно среднего за неделю')\r\n+ BR() + BR() +\r\n'Среднее кол-во товара за месяц: ' + BR() +\r\nSIZE(COLOR(BOLD([f0591a10-aa67-11f0-8ec6-3da0d05fc0c9]), '#70C1AF'), '24px') + ' ' +\r\n    TOOLTIP(\r\n        IF [6d3502f0-aa7d-11f0-a563-69be3ea7bf44] > 0 THEN COLOR('▼' + STR([6d3502f0-aa7d-11f0-a563-69be3ea7bf44]) + '%', '#54A520')\r\n        ELSE COLOR('▲' + STR(ABS([6d3502f0-aa7d-11f0-a563-69be3ea7bf44])) + '%', '#BE2443') END,\r\n        'Последний день относительно среднего за месяц')",
                                                    "default_value": null,
                                                    "autoaggregated": true,
                                                    "lock_aggregation": false,
                                                    "value_constraint": null,
                                                    "initial_data_type": "markup",
                                                    "aggregation_locked": true,
                                                    "has_auto_aggregation": true
                                                }
                                            ],
                                            "title": "section_measure",
                                            "capacity": 1,
                                            "required": true,
                                            "settings": {},
                                            "iconProps": {},
                                            "allowedTypes": {},
                                            "allowedDataTypes": {},
                                            "allowedFinalTypes": {}
                                        }
                                    ],
                                    "allowLayerFilters": false
                                },
                                "geopointsConfig": {},
                                "datasetsPartialFields": [
                                    [
                                        {
                                            "guid": "7dac49e0-aa64-11f0-956d-c14801191fc6",
                                            "title": "ТЕКСТ",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "40962a80-aa64-11f0-956d-c14801191fc6",
                                            "title": "Ср кол-во товара с начала недели",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "dfe04950-aa7c-11f0-a563-69be3ea7bf44",
                                            "title": "Ср кол-во товара за последний день",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "f0591a10-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "title": "Ср кол-во товара (текст)",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "a5f6be50-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "title": "Ср кол-во товара за неделю (текст)",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "0dcb3a50-aa55-11f0-8c7c-59e14d3324ab",
                                            "title": "Ср кол-во товара за неделю",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "da27cc00-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "title": "Ср кол-во товара за месяц",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "8178cf50-aa71-11f0-b285-094080387588",
                                            "title": "Ср чек со средней за неделю",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "6d3502f0-aa7d-11f0-a563-69be3ea7bf44",
                                            "title": "Ср чек со средней за месяц",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "c2566280-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "title": "Ср чек с начала недели (текст)",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "e3a1cfe0-aa55-11f0-8395-f32b2462dd84",
                                            "title": "Фильтр даты",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "end_date",
                                            "title": "end_date",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "start_date",
                                            "title": "start_date",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "f828f540-a935-11f0-976d-099c0b05b9ec",
                                            "title": "%_discount",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "584ad600-a92c-11f0-976d-099c0b05b9ec",
                                            "title": "scale_value",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "scale",
                                            "title": "scale",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "660eb030-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_month",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "d02fc430-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_week",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "1cf44850-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_hour",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "3352b650-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_quarter",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "268ce800-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_year",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "087e5b50-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_date",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "id_scne",
                                            "title": "id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "client_id_lbc6",
                                            "title": "client_id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "gender_fzxw",
                                            "title": "gender",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "product_id_ey10",
                                            "title": "product_id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "quantity_k4iu",
                                            "title": "quantity",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "price_per_item_3dwq",
                                            "title": "price_per_item",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "discount_per_item_7maq",
                                            "title": "discount_per_item",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "total_price_1u2g",
                                            "title": "total_price",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "purchase_datetime_pvoa",
                                            "title": "purchase_datetime",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "461ec3e0-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_datedate",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "created_at_s6qq",
                                            "title": "created_at",
                                            "calc_mode": "direct"
                                        }
                                    ]
                                ]
                            }
                        },
                        "name": "Общие продажи и тренды - KPI.  Количество товара (День) среднее",
                        "type": "markup_wizard_node",
                        "annotation": {
                            "description": ""
                        }
                    }
                },
                "35": {
                    "widget": {
                        "data": {
                            "shared": {
                                "sort": [],
                                "type": "datalens",
                                "links": [],
                                "colors": [],
                                "labels": [],
                                "shapes": [],
                                "filters": [],
                                "updates": [
                                    {
                                        "field": {
                                            "cast": "float",
                                            "guid": "2beb7fa0-aa68-11f0-8ec6-3da0d05fc0c9",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Кол-во товаров день изменения",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "ROUND(([Кол-во товаров за последний день] - [Кол-во товаров за предпоследний день]) / [Кол-во товаров за предпоследний день] * 10000) / 100",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "float",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "ROUND(([0dcb3a50-aa55-11f0-8c7c-59e14d3324ab] - [da27cc00-aa67-11f0-8ec6-3da0d05fc0c9]) / [da27cc00-aa67-11f0-8ec6-3da0d05fc0c9] * 10000) / 100",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "float",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "float",
                                            "guid": "31eb5640-aa69-11f0-8ec6-3da0d05fc0c9",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Кол-во товаров с начала недели процент",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "ROUND([Кол-во товаров с начала недели] / [Кол-во товаров за последний день] * 10000) /100",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "float",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "ROUND([40962a80-aa64-11f0-956d-c14801191fc6] / [0dcb3a50-aa55-11f0-8c7c-59e14d3324ab] * 10000) /100",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "float",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "integer",
                                            "guid": "8178cf50-aa71-11f0-b285-094080387588",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Кол-во товаров день изменения номианльная",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "ROUND([Кол-во товаров за последний день] - [Кол-во товаров за предпоследний день])",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "integer",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "ROUND([0dcb3a50-aa55-11f0-8c7c-59e14d3324ab] - [da27cc00-aa67-11f0-8ec6-3da0d05fc0c9])",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "integer",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "integer",
                                            "guid": "0dcb3a50-aa55-11f0-8c7c-59e14d3324ab",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Кол-во товаров за последний день",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "SUM_IF([quantity], [purchase_datedate] = [end_date])",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "integer",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "SUM_IF([quantity_k4iu], [461ec3e0-a929-11f0-976d-099c0b05b9ec] = [end_date])",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "integer",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "integer",
                                            "guid": "da27cc00-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Кол-во товаров за предпоследний день",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "SUM_IF([quantity], [purchase_datedate] = DATEADD([end_date], 'day', -1))",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "integer",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "SUM_IF([quantity_k4iu], [461ec3e0-a929-11f0-976d-099c0b05b9ec] = DATEADD([end_date], 'day', -1))",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "integer",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "string",
                                            "guid": "a5f6be50-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Кол-во товаров за последний день (текст)",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "STR(ROUND([Кол-во товаров за последний день]/1000)) + \"K\"",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "string",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "STR(ROUND([0dcb3a50-aa55-11f0-8c7c-59e14d3324ab]/1000)) + \"K\"",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "string",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "string",
                                            "guid": "f0591a10-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Кол-во товаров за предпоследний день (текст)",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "STR(ROUND([Кол-во товаров за предпоследний день]/1000)) + \"K\"",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "string",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "STR(ROUND([da27cc00-aa67-11f0-8ec6-3da0d05fc0c9]/1000)) + \"K\"",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "string",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "integer",
                                            "guid": "40962a80-aa64-11f0-956d-c14801191fc6",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Кол-во товаров с начала недели",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "SUM_IF([quantity], [purchase_datetime] >= DATETRUNC([end_date], 'week') AND [purchase_datedate] <= [end_date])",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "integer",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "SUM_IF([quantity_k4iu], [purchase_datetime_pvoa] >= DATETRUNC([end_date], 'week') AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= [end_date])",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "integer",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "string",
                                            "guid": "c2566280-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Кол-во товаров с начала недели (текст)",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "STR(ROUND([Кол-во товаров с начала недели]/1000)) + \"K\"",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "string",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "STR(ROUND([40962a80-aa64-11f0-956d-c14801191fc6]/1000)) + \"K\"",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "string",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "markup",
                                            "guid": "7dac49e0-aa64-11f0-956d-c14801191fc6",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "ТЕКСТ",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "'Кол-во товара за последний день: ' + BR() +\r\nSIZE(COLOR(BOLD([Кол-во товаров за последний день (текст)]), '#70C1AF'), '24px') + ' ' + \r\n    TOOLTIP(\r\n        IF [Кол-во товаров день изменения] > 0 THEN COLOR('▲' + STR([Кол-во товаров день изменения]) +'%', '#54A520')\r\n        ELSE COLOR('▼' + STR(ABS([Кол-во товаров день изменения])) +'%', '#BE2443') END,\r\n        'Относительно предыдущего дня')\r\n+ BR() + BR() +\r\n'Кол-во товара за предыдущий день: ' \r\n+ BR() +\r\nSIZE(COLOR(BOLD([Кол-во товаров за предпоследний день (текст)]), '#70C1AF'), '24px') + ' ' +\r\n    TOOLTIP(\r\n        IF [Кол-во товаров день изменения номианльная] > 0 THEN COLOR('▼' + STR([Кол-во товаров день изменения номианльная]), '#54A520')\r\n        ELSE COLOR('▲' + STR(ABS([Кол-во товаров день изменения номианльная])), '#BE2443') END,\r\n        'Номинальная разница (прошлый день - позапрошлый день)')",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "markup",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "'Кол-во товара за последний день: ' + BR() +\r\nSIZE(COLOR(BOLD([a5f6be50-aa67-11f0-8ec6-3da0d05fc0c9]), '#70C1AF'), '24px') + ' ' + \r\n    TOOLTIP(\r\n        IF [2beb7fa0-aa68-11f0-8ec6-3da0d05fc0c9] > 0 THEN COLOR('▲' + STR([2beb7fa0-aa68-11f0-8ec6-3da0d05fc0c9]) +'%', '#54A520')\r\n        ELSE COLOR('▼' + STR(ABS([2beb7fa0-aa68-11f0-8ec6-3da0d05fc0c9])) +'%', '#BE2443') END,\r\n        'Относительно предыдущего дня')\r\n+ BR() + BR() +\r\n'Кол-во товара за предыдущий день: ' \r\n+ BR() +\r\nSIZE(COLOR(BOLD([f0591a10-aa67-11f0-8ec6-3da0d05fc0c9]), '#70C1AF'), '24px') + ' ' +\r\n    TOOLTIP(\r\n        IF [8178cf50-aa71-11f0-b285-094080387588] > 0 THEN COLOR('▼' + STR([8178cf50-aa71-11f0-b285-094080387588]), '#54A520')\r\n        ELSE COLOR('▲' + STR(ABS([8178cf50-aa71-11f0-b285-094080387588])), '#BE2443') END,\r\n        'Номинальная разница (прошлый день - позапрошлый день)')",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "markup",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    }
                                ],
                                "version": "14",
                                "segments": [],
                                "tooltips": [],
                                "datasetsIds": [
                                    "6"
                                ],
                                "hierarchies": [],
                                "colorsConfig": {},
                                "shapesConfig": {},
                                "extraSettings": {
                                    "feed": "",
                                    "title": "Общие продажи и тренды - KPI. Общая выручка",
                                    "stacking": "on",
                                    "zoomMode": "auto",
                                    "titleMode": "hide",
                                    "legendMode": "show",
                                    "tooltipSum": "on",
                                    "mapCenterMode": "auto",
                                    "metricFontSize": "m",
                                    "metricFontColor": "#0FA08D",
                                    "pivotInlineSort": "on",
                                    "navigatorSettings": {
                                        "selectedLines": [],
                                        "isNavigatorAvailable": false
                                    },
                                    "indicatorTitleMode": "hide",
                                    "metricFontColorIndex": 12
                                },
                                "visualization": {
                                    "id": "metric",
                                    "name": "label_visualization-metric",
                                    "type": "metric",
                                    "allowSort": false,
                                    "iconProps": {
                                        "id": "visMetric",
                                        "width": "24"
                                    },
                                    "allowLabels": false,
                                    "allowFilters": true,
                                    "placeholders": [
                                        {
                                            "id": "measures",
                                            "type": "measures",
                                            "items": [
                                                {
                                                    "id": "measure-0",
                                                    "cast": "markup",
                                                    "guid": "7dac49e0-aa64-11f0-956d-c14801191fc6",
                                                    "type": "MEASURE",
                                                    "local": true,
                                                    "title": "ТЕКСТ",
                                                    "valid": true,
                                                    "hidden": false,
                                                    "source": "",
                                                    "formula": "'Кол-во товара за последний день: ' + BR() +\r\nSIZE(COLOR(BOLD([Кол-во товаров за последний день (текст)]), '#70C1AF'), '24px') + ' ' + \r\n    TOOLTIP(\r\n        IF [Кол-во товаров день изменения] > 0 THEN COLOR('▲' + STR([Кол-во товаров день изменения]) +'%', '#54A520')\r\n        ELSE COLOR('▼' + STR(ABS([Кол-во товаров день изменения])) +'%', '#BE2443') END,\r\n        'Относительно предыдущего дня')\r\n+ BR() + BR() +\r\n'Кол-во товара за предыдущий день: ' \r\n+ BR() +\r\nSIZE(COLOR(BOLD([Кол-во товаров за предпоследний день (текст)]), '#70C1AF'), '24px') + ' ' +\r\n    TOOLTIP(\r\n        IF [Кол-во товаров день изменения номианльная] > 0 THEN COLOR('▼' + STR([Кол-во товаров день изменения номианльная]), '#54A520')\r\n        ELSE COLOR('▲' + STR(ABS([Кол-во товаров день изменения номианльная])), '#BE2443') END,\r\n        'Номинальная разница (прошлый день - позапрошлый день)')",
                                                    "virtual": false,
                                                    "avatar_id": null,
                                                    "calc_mode": "formula",
                                                    "data_type": "markup",
                                                    "datasetId": "6",
                                                    "managed_by": "user",
                                                    "aggregation": "none",
                                                    "datasetName": "Данные о продажах",
                                                    "description": "",
                                                    "ui_settings": "",
                                                    "guid_formula": "'Кол-во товара за последний день: ' + BR() +\r\nSIZE(COLOR(BOLD([a5f6be50-aa67-11f0-8ec6-3da0d05fc0c9]), '#70C1AF'), '24px') + ' ' + \r\n    TOOLTIP(\r\n        IF [2beb7fa0-aa68-11f0-8ec6-3da0d05fc0c9] > 0 THEN COLOR('▲' + STR([2beb7fa0-aa68-11f0-8ec6-3da0d05fc0c9]) +'%', '#54A520')\r\n        ELSE COLOR('▼' + STR(ABS([2beb7fa0-aa68-11f0-8ec6-3da0d05fc0c9])) +'%', '#BE2443') END,\r\n        'Относительно предыдущего дня')\r\n+ BR() + BR() +\r\n'Кол-во товара за предыдущий день: ' \r\n+ BR() +\r\nSIZE(COLOR(BOLD([f0591a10-aa67-11f0-8ec6-3da0d05fc0c9]), '#70C1AF'), '24px') + ' ' +\r\n    TOOLTIP(\r\n        IF [8178cf50-aa71-11f0-b285-094080387588] > 0 THEN COLOR('▼' + STR([8178cf50-aa71-11f0-b285-094080387588]), '#54A520')\r\n        ELSE COLOR('▲' + STR(ABS([8178cf50-aa71-11f0-b285-094080387588])), '#BE2443') END,\r\n        'Номинальная разница (прошлый день - позапрошлый день)')",
                                                    "default_value": null,
                                                    "autoaggregated": true,
                                                    "lock_aggregation": false,
                                                    "value_constraint": null,
                                                    "initial_data_type": "markup",
                                                    "aggregation_locked": true,
                                                    "has_auto_aggregation": true
                                                }
                                            ],
                                            "title": "section_measure",
                                            "capacity": 1,
                                            "required": true,
                                            "settings": {},
                                            "iconProps": {},
                                            "allowedTypes": {},
                                            "allowedDataTypes": {},
                                            "allowedFinalTypes": {}
                                        }
                                    ],
                                    "allowLayerFilters": false
                                },
                                "geopointsConfig": {},
                                "datasetsPartialFields": [
                                    [
                                        {
                                            "guid": "7dac49e0-aa64-11f0-956d-c14801191fc6",
                                            "title": "ТЕКСТ",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "c2566280-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "title": "Кол-во товаров с начала недели (текст)",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "40962a80-aa64-11f0-956d-c14801191fc6",
                                            "title": "Кол-во товаров с начала недели",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "f0591a10-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "title": "Кол-во товаров за предпоследний день (текст)",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "a5f6be50-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "title": "Кол-во товаров за последний день (текст)",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "da27cc00-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "title": "Кол-во товаров за предпоследний день",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "0dcb3a50-aa55-11f0-8c7c-59e14d3324ab",
                                            "title": "Кол-во товаров за последний день",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "8178cf50-aa71-11f0-b285-094080387588",
                                            "title": "Кол-во товаров день изменения номианльная",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "31eb5640-aa69-11f0-8ec6-3da0d05fc0c9",
                                            "title": "Кол-во товаров с начала недели процент",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "2beb7fa0-aa68-11f0-8ec6-3da0d05fc0c9",
                                            "title": "Кол-во товаров день изменения",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "e3a1cfe0-aa55-11f0-8395-f32b2462dd84",
                                            "title": "Фильтр даты",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "end_date",
                                            "title": "end_date",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "start_date",
                                            "title": "start_date",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "f828f540-a935-11f0-976d-099c0b05b9ec",
                                            "title": "%_discount",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "584ad600-a92c-11f0-976d-099c0b05b9ec",
                                            "title": "scale_value",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "scale",
                                            "title": "scale",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "660eb030-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_month",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "d02fc430-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_week",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "1cf44850-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_hour",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "3352b650-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_quarter",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "268ce800-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_year",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "087e5b50-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_date",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "id_scne",
                                            "title": "id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "client_id_lbc6",
                                            "title": "client_id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "gender_fzxw",
                                            "title": "gender",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "product_id_ey10",
                                            "title": "product_id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "quantity_k4iu",
                                            "title": "quantity",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "price_per_item_3dwq",
                                            "title": "price_per_item",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "discount_per_item_7maq",
                                            "title": "discount_per_item",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "total_price_1u2g",
                                            "title": "total_price",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "purchase_datetime_pvoa",
                                            "title": "purchase_datetime",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "461ec3e0-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_datedate",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "created_at_s6qq",
                                            "title": "created_at",
                                            "calc_mode": "direct"
                                        }
                                    ]
                                ]
                            }
                        },
                        "name": "Общие продажи и тренды - KPI. Количество товара (День)",
                        "type": "markup_wizard_node",
                        "annotation": {
                            "description": ""
                        }
                    }
                },
                "37": {
                    "widget": {
                        "data": {
                            "shared": {
                                "sort": [],
                                "type": "datalens",
                                "links": [],
                                "colors": [],
                                "labels": [],
                                "shapes": [],
                                "filters": [],
                                "updates": [
                                    {
                                        "field": {
                                            "cast": "integer",
                                            "guid": "9bb2c890-ab1a-11f0-8bd0-c77a65061b1d",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Кол-во уник покупателей за период",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "COUNTD_IF([client_id], [purchase_datedate] >= [start_date] AND [purchase_datedate] <= [end_date])",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "integer",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "COUNTD_IF([client_id_lbc6], [461ec3e0-a929-11f0-976d-099c0b05b9ec] >= [start_date] AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= [end_date])",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "integer",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field"
                                    }
                                ],
                                "version": "14",
                                "segments": [],
                                "tooltips": [],
                                "datasetsIds": [
                                    "6"
                                ],
                                "hierarchies": [],
                                "colorsConfig": {},
                                "shapesConfig": {},
                                "extraSettings": {
                                    "feed": "",
                                    "title": "Новый чарт",
                                    "stacking": "on",
                                    "zoomMode": "auto",
                                    "titleMode": "hide",
                                    "legendMode": "show",
                                    "tooltipSum": "on",
                                    "mapCenterMode": "auto",
                                    "metricFontSize": "m",
                                    "metricFontColor": "#52A6C5",
                                    "pivotInlineSort": "on",
                                    "navigatorSettings": {
                                        "selectedLines": [],
                                        "isNavigatorAvailable": false
                                    },
                                    "indicatorTitleMode": "hide",
                                    "metricFontColorIndex": 15
                                },
                                "visualization": {
                                    "id": "metric",
                                    "name": "label_visualization-metric",
                                    "type": "metric",
                                    "allowSort": false,
                                    "iconProps": {
                                        "id": "visMetric",
                                        "width": "24"
                                    },
                                    "allowLabels": false,
                                    "allowFilters": true,
                                    "placeholders": [
                                        {
                                            "id": "measures",
                                            "type": "measures",
                                            "items": [
                                                {
                                                    "id": "measure-0",
                                                    "cast": "integer",
                                                    "guid": "9bb2c890-ab1a-11f0-8bd0-c77a65061b1d",
                                                    "type": "MEASURE",
                                                    "local": true,
                                                    "title": "Кол-во уник покупателей за период",
                                                    "valid": true,
                                                    "hidden": false,
                                                    "source": "",
                                                    "formula": "COUNTD_IF([client_id], [purchase_datedate] >= [start_date] AND [purchase_datedate] <= [end_date])",
                                                    "virtual": false,
                                                    "avatar_id": null,
                                                    "calc_mode": "formula",
                                                    "data_type": "integer",
                                                    "datasetId": "6",
                                                    "formatting": {
                                                        "format": "number",
                                                        "prefix": "",
                                                        "postfix": "",
                                                        "labelMode": "absolute",
                                                        "precision": 0,
                                                        "showRankDelimiter": true
                                                    },
                                                    "managed_by": "user",
                                                    "aggregation": "none",
                                                    "datasetName": "Данные о продажах",
                                                    "description": "",
                                                    "ui_settings": "",
                                                    "guid_formula": "COUNTD_IF([client_id_lbc6], [461ec3e0-a929-11f0-976d-099c0b05b9ec] >= [start_date] AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= [end_date])",
                                                    "default_value": null,
                                                    "hideLabelMode": "show",
                                                    "originalTitle": "client_id",
                                                    "autoaggregated": true,
                                                    "lock_aggregation": false,
                                                    "value_constraint": null,
                                                    "initial_data_type": "integer",
                                                    "aggregation_locked": true,
                                                    "has_auto_aggregation": true
                                                }
                                            ],
                                            "title": "section_measure",
                                            "capacity": 1,
                                            "required": true,
                                            "settings": {},
                                            "iconProps": {},
                                            "allowedTypes": {},
                                            "allowedDataTypes": {},
                                            "allowedFinalTypes": {}
                                        }
                                    ],
                                    "allowLayerFilters": false
                                },
                                "geopointsConfig": {},
                                "datasetsPartialFields": [
                                    [
                                        {
                                            "guid": "9bb2c890-ab1a-11f0-8bd0-c77a65061b1d",
                                            "title": "Кол-во уник покупателей за период",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "95f17b60-ab36-11f0-a2f4-fdfba76f64b3",
                                            "title": "Номер покупки",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "e3a1cfe0-aa55-11f0-8395-f32b2462dd84",
                                            "title": "Фильтр даты",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "end_date",
                                            "title": "end_date",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "start_date",
                                            "title": "start_date",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "f828f540-a935-11f0-976d-099c0b05b9ec",
                                            "title": "%_discount",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "584ad600-a92c-11f0-976d-099c0b05b9ec",
                                            "title": "scale_value",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "8125b920-ab28-11f0-bffa-65bc24252e3e",
                                            "title": "scale_value_sparkline",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "scale",
                                            "title": "scale",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "660eb030-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_month",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "d02fc430-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_week",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "1cf44850-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_hour",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "3352b650-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_quarter",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "268ce800-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_year",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "087e5b50-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_date",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "id_scne",
                                            "title": "id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "client_id_lbc6",
                                            "title": "client_id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "gender_fzxw",
                                            "title": "gender",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "product_id_ey10",
                                            "title": "product_id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "quantity_k4iu",
                                            "title": "quantity",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "price_per_item_3dwq",
                                            "title": "price_per_item",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "discount_per_item_7maq",
                                            "title": "discount_per_item",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "total_price_1u2g",
                                            "title": "total_price",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "purchase_datetime_pvoa",
                                            "title": "purchase_datetime",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "461ec3e0-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_datedate",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "created_at_s6qq",
                                            "title": "created_at",
                                            "calc_mode": "direct"
                                        }
                                    ]
                                ]
                            }
                        },
                        "name": "Анализ клиентов - KPI. Количество уникальных покупателей",
                        "type": "metric_wizard_node",
                        "annotation": {
                            "description": ""
                        }
                    }
                },
                "38": {
                    "widget": {
                        "data": {
                            "shared": {
                                "sort": [],
                                "type": "datalens",
                                "links": [],
                                "colors": [],
                                "labels": [],
                                "shapes": [],
                                "filters": [],
                                "updates": [
                                    {
                                        "field": {
                                            "cast": "integer",
                                            "guid": "9bb2c890-ab1a-11f0-8bd0-c77a65061b1d",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Кол-во уник покупателей за период",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "COUNT_IF([Номер покупки] = 1)",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "integer",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "COUNT_IF([95f17b60-ab36-11f0-a2f4-fdfba76f64b3] = 1)",
                                            "originalTitle": "client_id",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "integer",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    }
                                ],
                                "version": "14",
                                "segments": [],
                                "tooltips": [],
                                "datasetsIds": [
                                    "6"
                                ],
                                "hierarchies": [],
                                "colorsConfig": {},
                                "shapesConfig": {},
                                "extraSettings": {
                                    "feed": "",
                                    "title": "Новый чарт",
                                    "stacking": "on",
                                    "zoomMode": "auto",
                                    "titleMode": "hide",
                                    "legendMode": "show",
                                    "tooltipSum": "on",
                                    "mapCenterMode": "auto",
                                    "metricFontSize": "m",
                                    "metricFontColor": "#52A6C5",
                                    "pivotInlineSort": "on",
                                    "navigatorSettings": {
                                        "selectedLines": [],
                                        "isNavigatorAvailable": false
                                    },
                                    "indicatorTitleMode": "hide",
                                    "metricFontColorIndex": 15
                                },
                                "visualization": {
                                    "id": "metric",
                                    "name": "label_visualization-metric",
                                    "type": "metric",
                                    "allowSort": false,
                                    "iconProps": {
                                        "id": "visMetric",
                                        "width": "24"
                                    },
                                    "allowLabels": false,
                                    "allowFilters": true,
                                    "placeholders": [
                                        {
                                            "id": "measures",
                                            "type": "measures",
                                            "items": [
                                                {
                                                    "id": "measure-0",
                                                    "cast": "integer",
                                                    "guid": "9bb2c890-ab1a-11f0-8bd0-c77a65061b1d",
                                                    "type": "MEASURE",
                                                    "local": true,
                                                    "title": "Кол-во уник покупателей за период",
                                                    "valid": true,
                                                    "hidden": false,
                                                    "source": "",
                                                    "formula": "COUNT_IF([Номер покупки] = 1)",
                                                    "virtual": false,
                                                    "avatar_id": null,
                                                    "calc_mode": "formula",
                                                    "data_type": "integer",
                                                    "datasetId": "6",
                                                    "formatting": {
                                                        "format": "number",
                                                        "prefix": "",
                                                        "postfix": "",
                                                        "labelMode": "absolute",
                                                        "precision": 0,
                                                        "showRankDelimiter": true
                                                    },
                                                    "managed_by": "user",
                                                    "aggregation": "none",
                                                    "datasetName": "Данные о продажах",
                                                    "description": "",
                                                    "ui_settings": "",
                                                    "guid_formula": "COUNT_IF([95f17b60-ab36-11f0-a2f4-fdfba76f64b3] = 1)",
                                                    "default_value": null,
                                                    "hideLabelMode": "show",
                                                    "originalTitle": "client_id",
                                                    "autoaggregated": true,
                                                    "lock_aggregation": false,
                                                    "value_constraint": null,
                                                    "initial_data_type": "integer",
                                                    "aggregation_locked": true,
                                                    "has_auto_aggregation": true
                                                }
                                            ],
                                            "title": "section_measure",
                                            "capacity": 1,
                                            "required": true,
                                            "settings": {},
                                            "iconProps": {},
                                            "allowedTypes": {},
                                            "allowedDataTypes": {},
                                            "allowedFinalTypes": {}
                                        }
                                    ],
                                    "allowLayerFilters": false
                                },
                                "geopointsConfig": {},
                                "datasetsPartialFields": [
                                    [
                                        {
                                            "guid": "9bb2c890-ab1a-11f0-8bd0-c77a65061b1d",
                                            "title": "Кол-во уник покупателей за период",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "95f17b60-ab36-11f0-a2f4-fdfba76f64b3",
                                            "title": "Номер покупки",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "e3a1cfe0-aa55-11f0-8395-f32b2462dd84",
                                            "title": "Фильтр даты",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "end_date",
                                            "title": "end_date",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "start_date",
                                            "title": "start_date",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "f828f540-a935-11f0-976d-099c0b05b9ec",
                                            "title": "%_discount",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "584ad600-a92c-11f0-976d-099c0b05b9ec",
                                            "title": "scale_value",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "8125b920-ab28-11f0-bffa-65bc24252e3e",
                                            "title": "scale_value_sparkline",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "scale",
                                            "title": "scale",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "660eb030-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_month",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "d02fc430-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_week",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "1cf44850-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_hour",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "3352b650-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_quarter",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "268ce800-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_year",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "087e5b50-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_date",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "id_scne",
                                            "title": "id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "client_id_lbc6",
                                            "title": "client_id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "gender_fzxw",
                                            "title": "gender",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "product_id_ey10",
                                            "title": "product_id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "quantity_k4iu",
                                            "title": "quantity",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "price_per_item_3dwq",
                                            "title": "price_per_item",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "discount_per_item_7maq",
                                            "title": "discount_per_item",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "total_price_1u2g",
                                            "title": "total_price",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "purchase_datetime_pvoa",
                                            "title": "purchase_datetime",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "461ec3e0-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_datedate",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "created_at_s6qq",
                                            "title": "created_at",
                                            "calc_mode": "direct"
                                        }
                                    ]
                                ]
                            }
                        },
                        "name": "Анализ клиентов - KPI. Количество новых покупателей",
                        "type": "metric_wizard_node",
                        "annotation": {
                            "description": ""
                        }
                    }
                },
                "39": {
                    "widget": {
                        "data": {
                            "shared": {
                                "sort": [],
                                "type": "datalens",
                                "links": [],
                                "colors": [],
                                "labels": [],
                                "shapes": [],
                                "filters": [],
                                "updates": [
                                    {
                                        "field": {
                                            "cast": "integer",
                                            "guid": "9bb2c890-ab1a-11f0-8bd0-c77a65061b1d",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Кол-во уник покупателей за период",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "COUNTD_IF([client_id], [purchase_datedate] >= [start_date] AND [purchase_datedate] <= [end_date]) -\r\nCOUNT_IF([Номер покупки] = 1)",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "integer",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "COUNTD_IF([client_id_lbc6], [461ec3e0-a929-11f0-976d-099c0b05b9ec] >= [start_date] AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= [end_date]) -\r\nCOUNT_IF([95f17b60-ab36-11f0-a2f4-fdfba76f64b3] = 1)",
                                            "originalTitle": "client_id",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "integer",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    }
                                ],
                                "version": "14",
                                "segments": [],
                                "tooltips": [],
                                "datasetsIds": [
                                    "6"
                                ],
                                "hierarchies": [],
                                "colorsConfig": {},
                                "shapesConfig": {},
                                "extraSettings": {
                                    "feed": "",
                                    "title": "Новый чарт",
                                    "stacking": "on",
                                    "zoomMode": "auto",
                                    "titleMode": "hide",
                                    "legendMode": "show",
                                    "tooltipSum": "on",
                                    "mapCenterMode": "auto",
                                    "metricFontSize": "m",
                                    "metricFontColor": "#52A6C5",
                                    "pivotInlineSort": "on",
                                    "navigatorSettings": {
                                        "selectedLines": [],
                                        "isNavigatorAvailable": false
                                    },
                                    "indicatorTitleMode": "hide",
                                    "metricFontColorIndex": 15
                                },
                                "visualization": {
                                    "id": "metric",
                                    "name": "label_visualization-metric",
                                    "type": "metric",
                                    "allowSort": false,
                                    "iconProps": {
                                        "id": "visMetric",
                                        "width": "24"
                                    },
                                    "allowLabels": false,
                                    "allowFilters": true,
                                    "placeholders": [
                                        {
                                            "id": "measures",
                                            "type": "measures",
                                            "items": [
                                                {
                                                    "id": "measure-0",
                                                    "cast": "integer",
                                                    "guid": "9bb2c890-ab1a-11f0-8bd0-c77a65061b1d",
                                                    "type": "MEASURE",
                                                    "local": true,
                                                    "title": "Кол-во уник покупателей за период",
                                                    "valid": true,
                                                    "hidden": false,
                                                    "source": "",
                                                    "formula": "COUNTD_IF([client_id], [purchase_datedate] >= [start_date] AND [purchase_datedate] <= [end_date]) -\r\nCOUNT_IF([Номер покупки] = 1)",
                                                    "virtual": false,
                                                    "avatar_id": null,
                                                    "calc_mode": "formula",
                                                    "data_type": "integer",
                                                    "datasetId": "6",
                                                    "formatting": {
                                                        "format": "number",
                                                        "prefix": "",
                                                        "postfix": "",
                                                        "labelMode": "absolute",
                                                        "precision": 0,
                                                        "showRankDelimiter": true
                                                    },
                                                    "managed_by": "user",
                                                    "aggregation": "none",
                                                    "datasetName": "Данные о продажах",
                                                    "description": "",
                                                    "ui_settings": "",
                                                    "guid_formula": "COUNTD_IF([client_id_lbc6], [461ec3e0-a929-11f0-976d-099c0b05b9ec] >= [start_date] AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= [end_date]) -\r\nCOUNT_IF([95f17b60-ab36-11f0-a2f4-fdfba76f64b3] = 1)",
                                                    "default_value": null,
                                                    "hideLabelMode": "show",
                                                    "originalTitle": "client_id",
                                                    "autoaggregated": true,
                                                    "lock_aggregation": false,
                                                    "value_constraint": null,
                                                    "initial_data_type": "integer",
                                                    "aggregation_locked": true,
                                                    "has_auto_aggregation": true
                                                }
                                            ],
                                            "title": "section_measure",
                                            "capacity": 1,
                                            "required": true,
                                            "settings": {},
                                            "iconProps": {},
                                            "allowedTypes": {},
                                            "allowedDataTypes": {},
                                            "allowedFinalTypes": {}
                                        }
                                    ],
                                    "allowLayerFilters": false
                                },
                                "geopointsConfig": {},
                                "datasetsPartialFields": [
                                    [
                                        {
                                            "guid": "9bb2c890-ab1a-11f0-8bd0-c77a65061b1d",
                                            "title": "Кол-во уник покупателей за период",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "95f17b60-ab36-11f0-a2f4-fdfba76f64b3",
                                            "title": "Номер покупки",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "e3a1cfe0-aa55-11f0-8395-f32b2462dd84",
                                            "title": "Фильтр даты",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "end_date",
                                            "title": "end_date",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "start_date",
                                            "title": "start_date",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "f828f540-a935-11f0-976d-099c0b05b9ec",
                                            "title": "%_discount",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "584ad600-a92c-11f0-976d-099c0b05b9ec",
                                            "title": "scale_value",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "8125b920-ab28-11f0-bffa-65bc24252e3e",
                                            "title": "scale_value_sparkline",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "scale",
                                            "title": "scale",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "660eb030-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_month",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "d02fc430-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_week",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "1cf44850-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_hour",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "3352b650-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_quarter",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "268ce800-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_year",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "087e5b50-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_date",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "id_scne",
                                            "title": "id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "client_id_lbc6",
                                            "title": "client_id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "gender_fzxw",
                                            "title": "gender",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "product_id_ey10",
                                            "title": "product_id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "quantity_k4iu",
                                            "title": "quantity",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "price_per_item_3dwq",
                                            "title": "price_per_item",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "discount_per_item_7maq",
                                            "title": "discount_per_item",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "total_price_1u2g",
                                            "title": "total_price",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "purchase_datetime_pvoa",
                                            "title": "purchase_datetime",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "461ec3e0-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_datedate",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "created_at_s6qq",
                                            "title": "created_at",
                                            "calc_mode": "direct"
                                        }
                                    ]
                                ]
                            }
                        },
                        "name": "Анализ клиентов - KPI. Количество повторных покупателей",
                        "type": "metric_wizard_node",
                        "annotation": {
                            "description": ""
                        }
                    }
                },
                "40": {
                    "widget": {
                        "data": {
                            "shared": {
                                "sort": [
                                    {
                                        "guid": "f1f248e0-ab31-11f0-bb9d-2dd9e3091d37",
                                        "type": "MEASURE",
                                        "title": "Кол-во заказов",
                                        "source": "",
                                        "data_type": "integer",
                                        "datasetId": "6",
                                        "direction": "DESC"
                                    }
                                ],
                                "type": "datalens",
                                "links": [],
                                "colors": [],
                                "labels": [],
                                "shapes": [],
                                "filters": [
                                    {
                                        "guid": "d4d15b10-ab32-11f0-bb9d-2dd9e3091d37",
                                        "type": "MEASURE",
                                        "title": "ТОП",
                                        "filter": {
                                            "value": [
                                                "true"
                                            ],
                                            "operation": {
                                                "code": "EQ"
                                            }
                                        },
                                        "calc_mode": "formula",
                                        "datasetId": "6"
                                    },
                                    {
                                        "guid": "e3a1cfe0-aa55-11f0-8395-f32b2462dd84",
                                        "type": "DIMENSION",
                                        "title": "Фильтр даты",
                                        "filter": {
                                            "value": [
                                                "true"
                                            ],
                                            "operation": {
                                                "code": "EQ"
                                            }
                                        },
                                        "calc_mode": "formula",
                                        "datasetId": "6"
                                    }
                                ],
                                "updates": [
                                    {
                                        "field": {
                                            "cast": "integer",
                                            "guid": "top_sales",
                                            "type": "DIMENSION",
                                            "local": true,
                                            "title": "top_sales",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "",
                                            "virtual": false,
                                            "calc_mode": "parameter",
                                            "data_type": "integer",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "",
                                            "default_value": 5,
                                            "autoaggregated": false,
                                            "lock_aggregation": false,
                                            "template_enabled": false,
                                            "initial_data_type": "integer",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": false
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "boolean",
                                            "guid": "d4d15b10-ab32-11f0-bb9d-2dd9e3091d37",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "ТОП",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "RANK_UNIQUE(COUNT([id])) <= [top_sales]",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "boolean",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "RANK_UNIQUE(COUNT([id_scne])) <= [top_sales]",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "boolean",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "integer",
                                            "guid": "f1f248e0-ab31-11f0-bb9d-2dd9e3091d37",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Кол-во заказов",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "count([id])",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "integer",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "count([id_scne])",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "integer",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    }
                                ],
                                "version": "14",
                                "segments": [],
                                "tooltips": [],
                                "datasetsIds": [
                                    "6"
                                ],
                                "hierarchies": [],
                                "colorsConfig": {},
                                "shapesConfig": {},
                                "extraSettings": {
                                    "feed": "",
                                    "limit": 100,
                                    "title": "Новый чарт",
                                    "stacking": "on",
                                    "zoomMode": "auto",
                                    "titleMode": "hide",
                                    "legendMode": "show",
                                    "pagination": "on",
                                    "tooltipSum": "on",
                                    "mapCenterMode": "auto",
                                    "labelsPosition": "outside",
                                    "metricFontSize": "m",
                                    "metricFontColor": "#1F68A9",
                                    "pivotInlineSort": "on",
                                    "navigatorSettings": {
                                        "selectedLines": [],
                                        "isNavigatorAvailable": false
                                    },
                                    "indicatorTitleMode": "hide",
                                    "metricFontColorIndex": 10
                                },
                                "visualization": {
                                    "id": "flatTable",
                                    "name": "label_visualization-flat-table",
                                    "type": "table",
                                    "allowSort": true,
                                    "iconProps": {
                                        "id": "visFlatTable",
                                        "width": "24"
                                    },
                                    "allowColors": true,
                                    "allowFilters": true,
                                    "placeholders": [
                                        {
                                            "id": "flat-table-columns",
                                            "type": "flat-table-columns",
                                            "items": [
                                                {
                                                    "id": "dimension-17",
                                                    "cast": "integer",
                                                    "guid": "client_id_lbc6",
                                                    "type": "DIMENSION",
                                                    "title": "client_id",
                                                    "valid": true,
                                                    "hidden": false,
                                                    "source": "client_id",
                                                    "formula": "",
                                                    "virtual": false,
                                                    "avatar_id": "e2af43f0-a920-11f0-9254-7577ead3d7d0",
                                                    "calc_mode": "direct",
                                                    "data_type": "integer",
                                                    "datasetId": "6",
                                                    "fakeTitle": "Покупатель",
                                                    "formatting": {
                                                        "format": "number",
                                                        "prefix": "",
                                                        "postfix": "",
                                                        "labelMode": "absolute",
                                                        "precision": 0,
                                                        "showRankDelimiter": true
                                                    },
                                                    "managed_by": "user",
                                                    "aggregation": "none",
                                                    "datasetName": "Данные о продажах",
                                                    "description": "",
                                                    "ui_settings": "",
                                                    "guid_formula": "",
                                                    "default_value": null,
                                                    "hideLabelMode": "show",
                                                    "autoaggregated": false,
                                                    "lock_aggregation": false,
                                                    "value_constraint": null,
                                                    "initial_data_type": "integer",
                                                    "aggregation_locked": false,
                                                    "backgroundSettings": {
                                                        "enabled": false,
                                                        "settings": {
                                                            "isContinuous": false,
                                                            "paletteState": {
                                                                "palette": "",
                                                                "mountedColors": {}
                                                            },
                                                            "gradientState": {}
                                                        },
                                                        "settingsId": "de00ffc0-ab31-11f0-bb9d-2dd9e3091d37",
                                                        "colorFieldGuid": "client_id_lbc6"
                                                    },
                                                    "has_auto_aggregation": false
                                                },
                                                {
                                                    "id": "measure-1",
                                                    "cast": "integer",
                                                    "guid": "f1f248e0-ab31-11f0-bb9d-2dd9e3091d37",
                                                    "type": "MEASURE",
                                                    "local": true,
                                                    "title": "Кол-во заказов",
                                                    "valid": true,
                                                    "hidden": false,
                                                    "source": "",
                                                    "formula": "count([id])",
                                                    "virtual": false,
                                                    "avatar_id": null,
                                                    "calc_mode": "formula",
                                                    "data_type": "integer",
                                                    "datasetId": "6",
                                                    "formatting": {
                                                        "format": "number",
                                                        "prefix": "",
                                                        "postfix": "",
                                                        "labelMode": "absolute",
                                                        "precision": 0,
                                                        "showRankDelimiter": true
                                                    },
                                                    "managed_by": "user",
                                                    "aggregation": "none",
                                                    "datasetName": "Данные о продажах",
                                                    "description": "",
                                                    "ui_settings": "",
                                                    "barsSettings": {
                                                        "align": "default",
                                                        "scale": {
                                                            "mode": "auto"
                                                        },
                                                        "enabled": true,
                                                        "showLabels": true,
                                                        "colorSettings": {
                                                            "settings": {
                                                                "color": "#84D1EE",
                                                                "palette": "classic20",
                                                                "colorIndex": 5
                                                            },
                                                            "colorType": "one-color"
                                                        },
                                                        "showBarsInTotals": false
                                                    },
                                                    "guid_formula": "count([id_scne])",
                                                    "default_value": null,
                                                    "hideLabelMode": "show",
                                                    "autoaggregated": true,
                                                    "lock_aggregation": false,
                                                    "value_constraint": null,
                                                    "initial_data_type": "integer",
                                                    "aggregation_locked": true,
                                                    "backgroundSettings": {
                                                        "enabled": false,
                                                        "settings": {
                                                            "isContinuous": true,
                                                            "paletteState": {},
                                                            "gradientState": {
                                                                "reversed": false,
                                                                "gradientMode": "2-point",
                                                                "thresholdsMode": "auto",
                                                                "gradientPalette": "blue"
                                                            }
                                                        },
                                                        "settingsId": "ca115260-ab33-11f0-82d1-ad30b3f96ad7",
                                                        "colorFieldGuid": "f1f248e0-ab31-11f0-bb9d-2dd9e3091d37"
                                                    },
                                                    "has_auto_aggregation": true
                                                }
                                            ],
                                            "title": "section_columns",
                                            "required": true,
                                            "settings": {
                                                "groupping": "on"
                                            },
                                            "iconProps": {},
                                            "allowedTypes": {}
                                        }
                                    ],
                                    "allowLayerFilters": false
                                },
                                "geopointsConfig": {},
                                "datasetsPartialFields": [
                                    [
                                        {
                                            "guid": "d4d15b10-ab32-11f0-bb9d-2dd9e3091d37",
                                            "title": "ТОП",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "f1f248e0-ab31-11f0-bb9d-2dd9e3091d37",
                                            "title": "Кол-во заказов",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "top_sales",
                                            "title": "top_sales",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "e3a1cfe0-aa55-11f0-8395-f32b2462dd84",
                                            "title": "Фильтр даты",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "end_date",
                                            "title": "end_date",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "start_date",
                                            "title": "start_date",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "f828f540-a935-11f0-976d-099c0b05b9ec",
                                            "title": "%_discount",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "584ad600-a92c-11f0-976d-099c0b05b9ec",
                                            "title": "scale_value",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "8125b920-ab28-11f0-bffa-65bc24252e3e",
                                            "title": "scale_value_sparkline",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "scale",
                                            "title": "scale",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "660eb030-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_month",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "d02fc430-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_week",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "1cf44850-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_hour",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "3352b650-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_quarter",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "268ce800-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_year",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "087e5b50-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_date",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "id_scne",
                                            "title": "id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "client_id_lbc6",
                                            "title": "client_id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "gender_fzxw",
                                            "title": "gender",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "product_id_ey10",
                                            "title": "product_id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "quantity_k4iu",
                                            "title": "quantity",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "price_per_item_3dwq",
                                            "title": "price_per_item",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "discount_per_item_7maq",
                                            "title": "discount_per_item",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "total_price_1u2g",
                                            "title": "total_price",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "purchase_datetime_pvoa",
                                            "title": "purchase_datetime",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "461ec3e0-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_datedate",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "created_at_s6qq",
                                            "title": "created_at",
                                            "calc_mode": "direct"
                                        }
                                    ]
                                ]
                            }
                        },
                        "name": "Анализ клиентов - Таблица. Топ покупателей по покупкам",
                        "type": "table_wizard_node",
                        "annotation": {
                            "description": ""
                        }
                    }
                },
                "41": {
                    "widget": {
                        "data": {
                            "shared": {
                                "sort": [
                                    {
                                        "guid": "f1f248e0-ab31-11f0-bb9d-2dd9e3091d37",
                                        "type": "MEASURE",
                                        "title": "Сумма затрат",
                                        "source": "",
                                        "data_type": "float",
                                        "datasetId": "6",
                                        "direction": "DESC"
                                    }
                                ],
                                "type": "datalens",
                                "links": [],
                                "colors": [],
                                "labels": [],
                                "shapes": [],
                                "filters": [
                                    {
                                        "guid": "d4d15b10-ab32-11f0-bb9d-2dd9e3091d37",
                                        "type": "MEASURE",
                                        "title": "ТОП",
                                        "filter": {
                                            "value": [
                                                "true"
                                            ],
                                            "operation": {
                                                "code": "EQ"
                                            }
                                        },
                                        "calc_mode": "formula",
                                        "datasetId": "6"
                                    },
                                    {
                                        "guid": "e3a1cfe0-aa55-11f0-8395-f32b2462dd84",
                                        "type": "DIMENSION",
                                        "title": "Фильтр даты",
                                        "filter": {
                                            "value": [
                                                "true"
                                            ],
                                            "operation": {
                                                "code": "EQ"
                                            }
                                        },
                                        "calc_mode": "formula",
                                        "datasetId": "6"
                                    }
                                ],
                                "updates": [
                                    {
                                        "field": {
                                            "cast": "boolean",
                                            "guid": "d4d15b10-ab32-11f0-bb9d-2dd9e3091d37",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "ТОП",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "RANK_UNIQUE(COUNT([id])) <= [top_expenses]",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "boolean",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "RANK_UNIQUE(COUNT([id_scne])) <= [top_expenses]",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "boolean",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "float",
                                            "guid": "f1f248e0-ab31-11f0-bb9d-2dd9e3091d37",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Сумма затрат",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "SUM([total_price])",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "float",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "SUM([total_price_1u2g])",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "float",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "integer",
                                            "guid": "top_expenses",
                                            "type": "DIMENSION",
                                            "local": true,
                                            "title": "top_expenses",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "",
                                            "virtual": false,
                                            "calc_mode": "parameter",
                                            "data_type": "integer",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "",
                                            "default_value": 5,
                                            "autoaggregated": false,
                                            "lock_aggregation": false,
                                            "template_enabled": false,
                                            "initial_data_type": "integer",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": false
                                        },
                                        "action": "add_field"
                                    }
                                ],
                                "version": "14",
                                "segments": [],
                                "tooltips": [],
                                "datasetsIds": [
                                    "6"
                                ],
                                "hierarchies": [],
                                "colorsConfig": {},
                                "shapesConfig": {},
                                "extraSettings": {
                                    "feed": "",
                                    "limit": 100,
                                    "title": "Новый чарт",
                                    "stacking": "on",
                                    "zoomMode": "auto",
                                    "titleMode": "hide",
                                    "legendMode": "show",
                                    "pagination": "on",
                                    "tooltipSum": "on",
                                    "mapCenterMode": "auto",
                                    "labelsPosition": "outside",
                                    "metricFontSize": "m",
                                    "metricFontColor": "#1F68A9",
                                    "pivotInlineSort": "on",
                                    "navigatorSettings": {
                                        "selectedLines": [],
                                        "isNavigatorAvailable": false
                                    },
                                    "indicatorTitleMode": "hide",
                                    "metricFontColorIndex": 10
                                },
                                "visualization": {
                                    "id": "flatTable",
                                    "name": "label_visualization-flat-table",
                                    "type": "table",
                                    "allowSort": true,
                                    "iconProps": {
                                        "id": "visFlatTable",
                                        "width": "24"
                                    },
                                    "allowColors": true,
                                    "allowFilters": true,
                                    "placeholders": [
                                        {
                                            "id": "flat-table-columns",
                                            "type": "flat-table-columns",
                                            "items": [
                                                {
                                                    "id": "dimension-17",
                                                    "cast": "integer",
                                                    "guid": "client_id_lbc6",
                                                    "type": "DIMENSION",
                                                    "title": "client_id",
                                                    "valid": true,
                                                    "hidden": false,
                                                    "source": "client_id",
                                                    "formula": "",
                                                    "virtual": false,
                                                    "avatar_id": "e2af43f0-a920-11f0-9254-7577ead3d7d0",
                                                    "calc_mode": "direct",
                                                    "data_type": "integer",
                                                    "datasetId": "6",
                                                    "fakeTitle": "Покупатель",
                                                    "formatting": {
                                                        "format": "number",
                                                        "prefix": "",
                                                        "postfix": "",
                                                        "labelMode": "absolute",
                                                        "precision": 0,
                                                        "showRankDelimiter": true
                                                    },
                                                    "managed_by": "user",
                                                    "aggregation": "none",
                                                    "datasetName": "Данные о продажах",
                                                    "description": "",
                                                    "ui_settings": "",
                                                    "guid_formula": "",
                                                    "default_value": null,
                                                    "hideLabelMode": "show",
                                                    "autoaggregated": false,
                                                    "lock_aggregation": false,
                                                    "value_constraint": null,
                                                    "initial_data_type": "integer",
                                                    "aggregation_locked": false,
                                                    "backgroundSettings": {
                                                        "enabled": false,
                                                        "settings": {
                                                            "isContinuous": false,
                                                            "paletteState": {
                                                                "palette": "",
                                                                "mountedColors": {}
                                                            },
                                                            "gradientState": {}
                                                        },
                                                        "settingsId": "de00ffc0-ab31-11f0-bb9d-2dd9e3091d37",
                                                        "colorFieldGuid": "client_id_lbc6"
                                                    },
                                                    "has_auto_aggregation": false
                                                },
                                                {
                                                    "id": "measure-0",
                                                    "cast": "float",
                                                    "guid": "f1f248e0-ab31-11f0-bb9d-2dd9e3091d37",
                                                    "type": "MEASURE",
                                                    "local": true,
                                                    "title": "Сумма затрат",
                                                    "valid": true,
                                                    "hidden": false,
                                                    "source": "",
                                                    "formula": "SUM([total_price])",
                                                    "virtual": false,
                                                    "avatar_id": null,
                                                    "calc_mode": "formula",
                                                    "data_type": "float",
                                                    "datasetId": "6",
                                                    "formatting": {
                                                        "format": "number",
                                                        "prefix": "",
                                                        "postfix": "",
                                                        "labelMode": "absolute",
                                                        "precision": 0,
                                                        "showRankDelimiter": true
                                                    },
                                                    "managed_by": "user",
                                                    "aggregation": "none",
                                                    "datasetName": "Данные о продажах",
                                                    "description": "",
                                                    "ui_settings": "",
                                                    "barsSettings": {
                                                        "align": "default",
                                                        "scale": {
                                                            "mode": "auto"
                                                        },
                                                        "enabled": true,
                                                        "showLabels": true,
                                                        "colorSettings": {
                                                            "settings": {
                                                                "color": "#0FA08D",
                                                                "palette": "classic20",
                                                                "colorIndex": 12
                                                            },
                                                            "colorType": "one-color"
                                                        },
                                                        "showBarsInTotals": false
                                                    },
                                                    "guid_formula": "SUM([total_price_1u2g])",
                                                    "default_value": null,
                                                    "hideLabelMode": "show",
                                                    "autoaggregated": true,
                                                    "lock_aggregation": false,
                                                    "value_constraint": null,
                                                    "initial_data_type": "float",
                                                    "aggregation_locked": true,
                                                    "backgroundSettings": {
                                                        "enabled": false,
                                                        "settings": {
                                                            "isContinuous": true,
                                                            "paletteState": {},
                                                            "gradientState": {
                                                                "reversed": false,
                                                                "gradientMode": "2-point",
                                                                "thresholdsMode": "auto",
                                                                "gradientPalette": "blue"
                                                            }
                                                        },
                                                        "settingsId": "ca115260-ab33-11f0-82d1-ad30b3f96ad7",
                                                        "colorFieldGuid": "f1f248e0-ab31-11f0-bb9d-2dd9e3091d37"
                                                    },
                                                    "has_auto_aggregation": true
                                                }
                                            ],
                                            "title": "section_columns",
                                            "required": true,
                                            "settings": {
                                                "groupping": "on"
                                            },
                                            "iconProps": {},
                                            "allowedTypes": {}
                                        }
                                    ],
                                    "allowLayerFilters": false
                                },
                                "geopointsConfig": {},
                                "datasetsPartialFields": [
                                    [
                                        {
                                            "guid": "f1f248e0-ab31-11f0-bb9d-2dd9e3091d37",
                                            "title": "Сумма затрат",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "d4d15b10-ab32-11f0-bb9d-2dd9e3091d37",
                                            "title": "ТОП",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "top_expenses",
                                            "title": "top_expenses",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "e3a1cfe0-aa55-11f0-8395-f32b2462dd84",
                                            "title": "Фильтр даты",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "end_date",
                                            "title": "end_date",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "start_date",
                                            "title": "start_date",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "f828f540-a935-11f0-976d-099c0b05b9ec",
                                            "title": "%_discount",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "584ad600-a92c-11f0-976d-099c0b05b9ec",
                                            "title": "scale_value",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "8125b920-ab28-11f0-bffa-65bc24252e3e",
                                            "title": "scale_value_sparkline",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "scale",
                                            "title": "scale",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "660eb030-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_month",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "d02fc430-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_week",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "1cf44850-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_hour",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "3352b650-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_quarter",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "268ce800-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_year",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "087e5b50-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_date",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "id_scne",
                                            "title": "id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "client_id_lbc6",
                                            "title": "client_id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "gender_fzxw",
                                            "title": "gender",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "product_id_ey10",
                                            "title": "product_id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "quantity_k4iu",
                                            "title": "quantity",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "price_per_item_3dwq",
                                            "title": "price_per_item",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "discount_per_item_7maq",
                                            "title": "discount_per_item",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "total_price_1u2g",
                                            "title": "total_price",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "purchase_datetime_pvoa",
                                            "title": "purchase_datetime",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "461ec3e0-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_datedate",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "created_at_s6qq",
                                            "title": "created_at",
                                            "calc_mode": "direct"
                                        }
                                    ]
                                ]
                            }
                        },
                        "name": "Анализ клиентов - Таблица. Топ покупателей по затратам",
                        "type": "table_wizard_node",
                        "annotation": {
                            "description": ""
                        }
                    }
                },
                "42": {
                    "widget": {
                        "data": {
                            "shared": {
                                "sort": [],
                                "type": "datalens",
                                "links": [],
                                "colors": [],
                                "labels": [],
                                "shapes": [],
                                "filters": [],
                                "updates": [
                                    {
                                        "field": {
                                            "cast": "float",
                                            "guid": "9bb2c890-ab1a-11f0-8bd0-c77a65061b1d",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Средняя выручка на покупателя",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "SUM_IF([total_price], [purchase_datedate] >= [start_date] AND [purchase_datedate] <= [end_date]) /\r\nCOUNTD_IF([client_id], [purchase_datedate] >= [start_date] AND [purchase_datedate] <= [end_date])",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "float",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "SUM_IF([total_price_1u2g], [461ec3e0-a929-11f0-976d-099c0b05b9ec] >= [start_date] AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= [end_date]) /\r\nCOUNTD_IF([client_id_lbc6], [461ec3e0-a929-11f0-976d-099c0b05b9ec] >= [start_date] AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= [end_date])",
                                            "originalTitle": "client_id",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "float",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    }
                                ],
                                "version": "14",
                                "segments": [],
                                "tooltips": [],
                                "datasetsIds": [
                                    "6"
                                ],
                                "hierarchies": [],
                                "colorsConfig": {},
                                "shapesConfig": {},
                                "extraSettings": {
                                    "feed": "",
                                    "title": "Новый чарт",
                                    "stacking": "on",
                                    "zoomMode": "auto",
                                    "titleMode": "hide",
                                    "legendMode": "show",
                                    "tooltipSum": "on",
                                    "mapCenterMode": "auto",
                                    "metricFontSize": "m",
                                    "metricFontColor": "#0FA08D",
                                    "pivotInlineSort": "on",
                                    "navigatorSettings": {
                                        "selectedLines": [],
                                        "isNavigatorAvailable": false
                                    },
                                    "indicatorTitleMode": "hide",
                                    "metricFontColorIndex": 12
                                },
                                "visualization": {
                                    "id": "metric",
                                    "name": "label_visualization-metric",
                                    "type": "metric",
                                    "allowSort": false,
                                    "iconProps": {
                                        "id": "visMetric",
                                        "width": "24"
                                    },
                                    "allowLabels": false,
                                    "allowFilters": true,
                                    "placeholders": [
                                        {
                                            "id": "measures",
                                            "type": "measures",
                                            "items": [
                                                {
                                                    "id": "measure-0",
                                                    "cast": "float",
                                                    "guid": "9bb2c890-ab1a-11f0-8bd0-c77a65061b1d",
                                                    "type": "MEASURE",
                                                    "local": true,
                                                    "title": "Средняя выручка на покупателя",
                                                    "valid": true,
                                                    "hidden": false,
                                                    "source": "",
                                                    "formula": "SUM_IF([total_price], [purchase_datedate] >= [start_date] AND [purchase_datedate] <= [end_date]) /\r\nCOUNTD_IF([client_id], [purchase_datedate] >= [start_date] AND [purchase_datedate] <= [end_date])",
                                                    "virtual": false,
                                                    "avatar_id": null,
                                                    "calc_mode": "formula",
                                                    "data_type": "float",
                                                    "datasetId": "6",
                                                    "formatting": {
                                                        "format": "number",
                                                        "prefix": "",
                                                        "postfix": "",
                                                        "labelMode": "absolute",
                                                        "precision": 0,
                                                        "showRankDelimiter": true
                                                    },
                                                    "managed_by": "user",
                                                    "aggregation": "none",
                                                    "datasetName": "Данные о продажах",
                                                    "description": "",
                                                    "ui_settings": "",
                                                    "guid_formula": "SUM_IF([total_price_1u2g], [461ec3e0-a929-11f0-976d-099c0b05b9ec] >= [start_date] AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= [end_date]) /\r\nCOUNTD_IF([client_id_lbc6], [461ec3e0-a929-11f0-976d-099c0b05b9ec] >= [start_date] AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= [end_date])",
                                                    "default_value": null,
                                                    "hideLabelMode": "show",
                                                    "originalTitle": "client_id",
                                                    "autoaggregated": true,
                                                    "lock_aggregation": false,
                                                    "value_constraint": null,
                                                    "initial_data_type": "float",
                                                    "aggregation_locked": true,
                                                    "has_auto_aggregation": true
                                                }
                                            ],
                                            "title": "section_measure",
                                            "capacity": 1,
                                            "required": true,
                                            "settings": {},
                                            "iconProps": {},
                                            "allowedTypes": {},
                                            "allowedDataTypes": {},
                                            "allowedFinalTypes": {}
                                        }
                                    ],
                                    "allowLayerFilters": false
                                },
                                "geopointsConfig": {},
                                "datasetsPartialFields": [
                                    [
                                        {
                                            "guid": "9bb2c890-ab1a-11f0-8bd0-c77a65061b1d",
                                            "title": "Средняя выручка на покупателя",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "e3a1cfe0-aa55-11f0-8395-f32b2462dd84",
                                            "title": "Фильтр даты",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "end_date",
                                            "title": "end_date",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "start_date",
                                            "title": "start_date",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "f828f540-a935-11f0-976d-099c0b05b9ec",
                                            "title": "%_discount",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "584ad600-a92c-11f0-976d-099c0b05b9ec",
                                            "title": "scale_value",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "8125b920-ab28-11f0-bffa-65bc24252e3e",
                                            "title": "scale_value_sparkline",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "scale",
                                            "title": "scale",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "660eb030-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_month",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "d02fc430-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_week",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "1cf44850-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_hour",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "3352b650-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_quarter",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "268ce800-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_year",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "087e5b50-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_date",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "id_scne",
                                            "title": "id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "client_id_lbc6",
                                            "title": "client_id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "gender_fzxw",
                                            "title": "gender",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "product_id_ey10",
                                            "title": "product_id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "quantity_k4iu",
                                            "title": "quantity",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "price_per_item_3dwq",
                                            "title": "price_per_item",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "discount_per_item_7maq",
                                            "title": "discount_per_item",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "total_price_1u2g",
                                            "title": "total_price",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "purchase_datetime_pvoa",
                                            "title": "purchase_datetime",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "461ec3e0-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_datedate",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "created_at_s6qq",
                                            "title": "created_at",
                                            "calc_mode": "direct"
                                        }
                                    ]
                                ]
                            }
                        },
                        "name": "Анализ клиентов - KPI. Выручка на покупателя",
                        "type": "metric_wizard_node",
                        "annotation": {
                            "description": ""
                        }
                    }
                },
                "43": {
                    "widget": {
                        "data": {
                            "shared": {
                                "sort": [],
                                "type": "datalens",
                                "links": [],
                                "colors": [],
                                "labels": [],
                                "shapes": [],
                                "filters": [],
                                "updates": [
                                    {
                                        "field": {
                                            "cast": "integer",
                                            "guid": "9bb2c890-ab1a-11f0-8bd0-c77a65061b1d",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Количество покупателей",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "COUNTD_IF([client_id], [purchase_datedate] >= [start_date] AND [purchase_datedate] <= [end_date])",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "integer",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "COUNTD_IF([client_id_lbc6], [461ec3e0-a929-11f0-976d-099c0b05b9ec] >= [start_date] AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= [end_date])",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "integer",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "string",
                                            "guid": "b7a00d00-ab48-11f0-964a-d5531be95394",
                                            "type": "DIMENSION",
                                            "local": true,
                                            "title": "Пол",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "IF [gender] = \"F\" THEN \"Женщины\" ELSE \"Мужчины\" END",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "string",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "IF [gender_fzxw] = \"F\" THEN \"Женщины\" ELSE \"Мужчины\" END",
                                            "autoaggregated": false,
                                            "lock_aggregation": false,
                                            "initial_data_type": "string",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": false
                                        },
                                        "action": "add_field"
                                    }
                                ],
                                "version": "14",
                                "segments": [],
                                "tooltips": [],
                                "datasetsIds": [
                                    "6"
                                ],
                                "hierarchies": [],
                                "colorsConfig": {
                                    "palette": "datalens-neo-20",
                                    "colorMode": "palette",
                                    "fieldGuid": "b7a00d00-ab48-11f0-964a-d5531be95394",
                                    "mountedColors": {
                                        "Женщины": "19",
                                        "Мужчины": "9"
                                    },
                                    "polygonBorders": "show",
                                    "coloredByMeasure": false
                                },
                                "shapesConfig": {},
                                "extraSettings": {
                                    "feed": "",
                                    "title": "Новый чарт",
                                    "totals": "on",
                                    "stacking": "on",
                                    "zoomMode": "auto",
                                    "titleMode": "hide",
                                    "legendMode": "hide",
                                    "tooltipSum": "on",
                                    "mapCenterMode": "auto",
                                    "metricFontSize": "m",
                                    "metricFontColor": "#0FA08D",
                                    "pivotInlineSort": "on",
                                    "navigatorSettings": {
                                        "selectedLines": [],
                                        "isNavigatorAvailable": false
                                    },
                                    "indicatorTitleMode": "hide",
                                    "metricFontColorIndex": 12
                                },
                                "visualization": {
                                    "id": "donut",
                                    "name": "label_visualization-donut",
                                    "type": "pie",
                                    "hidden": false,
                                    "allowSort": true,
                                    "iconProps": {
                                        "id": "visDonut",
                                        "width": "24"
                                    },
                                    "allowLabels": true,
                                    "allowFilters": true,
                                    "highchartsId": "pie",
                                    "placeholders": [
                                        {
                                            "id": "dimensions",
                                            "type": "dimensions",
                                            "items": [],
                                            "title": "section_categories",
                                            "capacity": 1,
                                            "required": false,
                                            "settings": {},
                                            "iconProps": {},
                                            "allowedTypes": {},
                                            "allowedDataTypes": {},
                                            "allowedFinalTypes": {}
                                        },
                                        {
                                            "id": "colors",
                                            "type": "colors",
                                            "items": [
                                                {
                                                    "id": "dimension-0",
                                                    "cast": "string",
                                                    "guid": "b7a00d00-ab48-11f0-964a-d5531be95394",
                                                    "type": "DIMENSION",
                                                    "local": true,
                                                    "title": "Пол",
                                                    "valid": true,
                                                    "hidden": false,
                                                    "source": "",
                                                    "formula": "IF [gender] = \"F\" THEN \"Женщины\" ELSE \"Мужчины\" END",
                                                    "virtual": false,
                                                    "calc_mode": "formula",
                                                    "data_type": "string",
                                                    "datasetId": "6",
                                                    "managed_by": "user",
                                                    "aggregation": "none",
                                                    "datasetName": "Данные о продажах",
                                                    "description": "",
                                                    "ui_settings": "",
                                                    "guid_formula": "IF [gender_fzxw] = \"F\" THEN \"Женщины\" ELSE \"Мужчины\" END",
                                                    "autoaggregated": false,
                                                    "lock_aggregation": false,
                                                    "initial_data_type": "string",
                                                    "aggregation_locked": true,
                                                    "has_auto_aggregation": false
                                                }
                                            ],
                                            "title": "section_color",
                                            "capacity": 1,
                                            "required": false,
                                            "settings": {
                                                "axisModeMap": {
                                                    "b7a00d00-ab48-11f0-964a-d5531be95394": "discrete"
                                                }
                                            },
                                            "iconProps": {},
                                            "allowedTypes": {},
                                            "allowedDataTypes": {}
                                        },
                                        {
                                            "id": "measures",
                                            "type": "measures",
                                            "items": [
                                                {
                                                    "id": "measure-1",
                                                    "cast": "integer",
                                                    "guid": "9bb2c890-ab1a-11f0-8bd0-c77a65061b1d",
                                                    "type": "MEASURE",
                                                    "local": true,
                                                    "title": "Количество покупателей",
                                                    "valid": true,
                                                    "hidden": false,
                                                    "source": "",
                                                    "formula": "COUNTD_IF([client_id], [purchase_datedate] >= [start_date] AND [purchase_datedate] <= [end_date])",
                                                    "virtual": false,
                                                    "avatar_id": null,
                                                    "calc_mode": "formula",
                                                    "data_type": "integer",
                                                    "datasetId": "6",
                                                    "managed_by": "user",
                                                    "aggregation": "none",
                                                    "datasetName": "Данные о продажах",
                                                    "description": "",
                                                    "ui_settings": "",
                                                    "guid_formula": "COUNTD_IF([client_id_lbc6], [461ec3e0-a929-11f0-976d-099c0b05b9ec] >= [start_date] AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= [end_date])",
                                                    "default_value": null,
                                                    "autoaggregated": true,
                                                    "lock_aggregation": false,
                                                    "value_constraint": null,
                                                    "initial_data_type": "integer",
                                                    "aggregation_locked": true,
                                                    "has_auto_aggregation": true
                                                }
                                            ],
                                            "title": "section_measures",
                                            "capacity": 1,
                                            "required": true,
                                            "settings": {
                                                "axisModeMap": {
                                                    "9bb2c890-ab1a-11f0-8bd0-c77a65061b1d": "discrete"
                                                }
                                            },
                                            "iconProps": {},
                                            "allowedTypes": {},
                                            "allowedDataTypes": {},
                                            "allowedFinalTypes": {}
                                        }
                                    ],
                                    "allowLayerFilters": false,
                                    "availableLabelModes": [
                                        "absolute",
                                        "percent"
                                    ]
                                },
                                "geopointsConfig": {},
                                "datasetsPartialFields": [
                                    [
                                        {
                                            "guid": "b7a00d00-ab48-11f0-964a-d5531be95394",
                                            "title": "Пол",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "9bb2c890-ab1a-11f0-8bd0-c77a65061b1d",
                                            "title": "Количество покупателей",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "95f17b60-ab36-11f0-a2f4-fdfba76f64b3",
                                            "title": "Номер покупки",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "e3a1cfe0-aa55-11f0-8395-f32b2462dd84",
                                            "title": "Фильтр даты",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "end_date",
                                            "title": "end_date",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "start_date",
                                            "title": "start_date",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "f828f540-a935-11f0-976d-099c0b05b9ec",
                                            "title": "%_discount",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "584ad600-a92c-11f0-976d-099c0b05b9ec",
                                            "title": "scale_value",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "8125b920-ab28-11f0-bffa-65bc24252e3e",
                                            "title": "scale_value_sparkline",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "scale",
                                            "title": "scale",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "660eb030-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_month",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "d02fc430-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_week",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "1cf44850-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_hour",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "3352b650-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_quarter",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "268ce800-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_year",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "087e5b50-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_date",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "id_scne",
                                            "title": "id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "client_id_lbc6",
                                            "title": "client_id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "gender_fzxw",
                                            "title": "gender",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "product_id_ey10",
                                            "title": "product_id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "quantity_k4iu",
                                            "title": "quantity",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "price_per_item_3dwq",
                                            "title": "price_per_item",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "discount_per_item_7maq",
                                            "title": "discount_per_item",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "total_price_1u2g",
                                            "title": "total_price",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "purchase_datetime_pvoa",
                                            "title": "purchase_datetime",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "461ec3e0-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_datedate",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "created_at_s6qq",
                                            "title": "created_at",
                                            "calc_mode": "direct"
                                        }
                                    ]
                                ]
                            }
                        },
                        "name": "Анализ клиентов - Пайчарт. Распределение по полу",
                        "type": "graph_wizard_node",
                        "annotation": {
                            "description": ""
                        }
                    }
                },
                "45": {
                    "widget": {
                        "data": {
                            "shared": {
                                "sort": [],
                                "type": "datalens",
                                "links": [],
                                "colors": [],
                                "labels": [],
                                "shapes": [],
                                "filters": [],
                                "updates": [
                                    {
                                        "field": {
                                            "cast": "float",
                                            "guid": "d79687a0-ad79-11f0-8c0c-5b3e50c599e8",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "%_values",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "[values]/[max_cohort_value]",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "float",
                                            "datasetId": "44",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "[7bb51810-ad75-11f0-bd90-472eac6f2805]/[a7ada7c0-ad75-11f0-bd90-472eac6f2805]",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "float",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field"
                                    },
                                    {
                                        "field": {
                                            "cast": "integer",
                                            "guid": "7bb51810-ad75-11f0-bd90-472eac6f2805",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "values",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "COUNTD([client_id])",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "integer",
                                            "datasetId": "44",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "COUNTD([client_id_3d2i])",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "integer",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "integer",
                                            "guid": "a7ada7c0-ad75-11f0-bd90-472eac6f2805",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "max_cohort_value",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "MAX(COUNTD([client_id]) WITHIN [purchase_month])",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "integer",
                                            "datasetId": "44",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "MAX(COUNTD([client_id_3d2i]) WITHIN [b558d3c0-ab56-11f0-864e-7555cf0e0fb2])",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "integer",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    }
                                ],
                                "version": "14",
                                "segments": [],
                                "tooltips": [],
                                "datasetsIds": [
                                    "44"
                                ],
                                "hierarchies": [],
                                "colorsConfig": {},
                                "shapesConfig": {},
                                "extraSettings": {
                                    "feed": "",
                                    "title": "Анализ клиентов - Таблица. Когортный анализ",
                                    "totals": "off",
                                    "stacking": "on",
                                    "zoomMode": "auto",
                                    "titleMode": "hide",
                                    "legendMode": "show",
                                    "tooltipSum": "on",
                                    "mapCenterMode": "auto",
                                    "pivotFallback": "off",
                                    "pivotInlineSort": "on",
                                    "navigatorSettings": {
                                        "selectedLines": [],
                                        "isNavigatorAvailable": false
                                    },
                                    "indicatorTitleMode": "by-field"
                                },
                                "visualization": {
                                    "id": "pivotTable",
                                    "name": "label_visualization-pivot-table",
                                    "type": "table",
                                    "allowSort": true,
                                    "iconProps": {
                                        "id": "visPivot",
                                        "width": "24"
                                    },
                                    "allowColors": true,
                                    "allowFilters": true,
                                    "placeholders": [
                                        {
                                            "id": "pivot-table-columns",
                                            "type": "pivot-table-columns",
                                            "items": [
                                                {
                                                    "id": "dimension-6",
                                                    "cast": "integer",
                                                    "guid": "b92b2df0-ab55-11f0-8bf9-3590e82fd31a",
                                                    "type": "DIMENSION",
                                                    "title": "diff_months",
                                                    "valid": true,
                                                    "hidden": false,
                                                    "source": "",
                                                    "formula": "DATEPART(DATE(INT([purchase_date])-INT([purchase_min_date])), 'month') + [diff_years]*12",
                                                    "virtual": false,
                                                    "avatar_id": null,
                                                    "calc_mode": "formula",
                                                    "data_type": "integer",
                                                    "datasetId": "44",
                                                    "fakeTitle": "Количество месяцев с первой покупки",
                                                    "formatting": {
                                                        "format": "number",
                                                        "prefix": "",
                                                        "postfix": "",
                                                        "labelMode": "absolute",
                                                        "precision": 0,
                                                        "showRankDelimiter": true
                                                    },
                                                    "managed_by": "user",
                                                    "aggregation": "none",
                                                    "datasetName": "Когортный анализ",
                                                    "description": "",
                                                    "ui_settings": "",
                                                    "guid_formula": "DATEPART(DATE(INT([purchase_date_n7ct])-INT([purchase_min_date_fass])), 'month') + [cb015f40-ab55-11f0-8bf9-3590e82fd31a]*12",
                                                    "default_value": null,
                                                    "hideLabelMode": "show",
                                                    "autoaggregated": false,
                                                    "lock_aggregation": false,
                                                    "value_constraint": null,
                                                    "initial_data_type": "integer",
                                                    "subTotalsSettings": {
                                                        "enabled": false
                                                    },
                                                    "aggregation_locked": true,
                                                    "backgroundSettings": {
                                                        "enabled": false,
                                                        "settings": {
                                                            "isContinuous": false,
                                                            "paletteState": {
                                                                "palette": "",
                                                                "mountedColors": {}
                                                            },
                                                            "gradientState": {}
                                                        },
                                                        "settingsId": "bb867620-ad91-11f0-bdb4-4ddb9de3a292",
                                                        "colorFieldGuid": "b92b2df0-ab55-11f0-8bf9-3590e82fd31a"
                                                    },
                                                    "has_auto_aggregation": false
                                                }
                                            ],
                                            "title": "section_columns",
                                            "settings": {},
                                            "iconProps": {},
                                            "allowedTypes": {},
                                            "allowedDataTypes": {}
                                        },
                                        {
                                            "id": "rows",
                                            "type": "rows",
                                            "items": [
                                                {
                                                    "id": "dimension-4",
                                                    "cast": "string",
                                                    "guid": "b558d3c0-ab56-11f0-864e-7555cf0e0fb2",
                                                    "type": "DIMENSION",
                                                    "title": "purchase_month",
                                                    "valid": true,
                                                    "hidden": false,
                                                    "source": "",
                                                    "formula": "IF MONTH([purchase_min_date]) <= 9\r\nTHEN\r\n    STR(YEAR([purchase_min_date])) + '-0' + STR(MONTH([purchase_min_date]))\r\nELSE\r\n    STR(YEAR([purchase_min_date])) + '-' + STR(MONTH([purchase_min_date]))\r\nEND",
                                                    "virtual": false,
                                                    "avatar_id": null,
                                                    "calc_mode": "formula",
                                                    "data_type": "string",
                                                    "datasetId": "44",
                                                    "fakeTitle": "Когорта (месяц)",
                                                    "formatting": {
                                                        "format": "number",
                                                        "prefix": "",
                                                        "postfix": "",
                                                        "labelMode": "absolute",
                                                        "precision": 0,
                                                        "showRankDelimiter": true
                                                    },
                                                    "managed_by": "user",
                                                    "aggregation": "none",
                                                    "datasetName": "Когортный анализ",
                                                    "description": "",
                                                    "ui_settings": "",
                                                    "guid_formula": "IF MONTH([purchase_min_date_fass]) <= 9\r\nTHEN\r\n    STR(YEAR([purchase_min_date_fass])) + '-0' + STR(MONTH([purchase_min_date_fass]))\r\nELSE\r\n    STR(YEAR([purchase_min_date_fass])) + '-' + STR(MONTH([purchase_min_date_fass]))\r\nEND",
                                                    "default_value": null,
                                                    "hideLabelMode": "show",
                                                    "autoaggregated": false,
                                                    "lock_aggregation": false,
                                                    "value_constraint": null,
                                                    "initial_data_type": "string",
                                                    "subTotalsSettings": {
                                                        "enabled": false
                                                    },
                                                    "aggregation_locked": true,
                                                    "backgroundSettings": {
                                                        "enabled": false,
                                                        "settings": {
                                                            "isContinuous": false,
                                                            "paletteState": {
                                                                "palette": "",
                                                                "mountedColors": {}
                                                            },
                                                            "gradientState": {}
                                                        },
                                                        "settingsId": "b167fa10-ad91-11f0-bdb4-4ddb9de3a292",
                                                        "colorFieldGuid": "b558d3c0-ab56-11f0-864e-7555cf0e0fb2"
                                                    },
                                                    "has_auto_aggregation": false
                                                }
                                            ],
                                            "title": "section_rows",
                                            "settings": {},
                                            "iconProps": {},
                                            "allowedDataTypes": {}
                                        },
                                        {
                                            "id": "measures",
                                            "type": "measures",
                                            "items": [
                                                {
                                                    "id": "measure-2",
                                                    "cast": "float",
                                                    "guid": "d79687a0-ad79-11f0-8c0c-5b3e50c599e8",
                                                    "type": "MEASURE",
                                                    "local": true,
                                                    "title": "%_values",
                                                    "valid": true,
                                                    "hidden": false,
                                                    "source": "",
                                                    "formula": "[values]/[max_cohort_value]",
                                                    "virtual": false,
                                                    "avatar_id": null,
                                                    "calc_mode": "formula",
                                                    "data_type": "float",
                                                    "datasetId": "44",
                                                    "fakeTitle": "% от первого периода",
                                                    "formatting": {
                                                        "format": "percent",
                                                        "prefix": "",
                                                        "postfix": "",
                                                        "labelMode": "absolute",
                                                        "precision": 2,
                                                        "showRankDelimiter": true
                                                    },
                                                    "managed_by": "user",
                                                    "aggregation": "none",
                                                    "datasetName": "Когортный анализ",
                                                    "description": "",
                                                    "ui_settings": "",
                                                    "barsSettings": {
                                                        "align": "default",
                                                        "scale": {
                                                            "mode": "auto"
                                                        },
                                                        "enabled": false,
                                                        "showLabels": true,
                                                        "colorSettings": {
                                                            "settings": {
                                                                "negativeColorIndex": 1,
                                                                "positiveColorIndex": 2
                                                            },
                                                            "colorType": "two-color"
                                                        },
                                                        "showBarsInTotals": false
                                                    },
                                                    "guid_formula": "[7bb51810-ad75-11f0-bd90-472eac6f2805]/[a7ada7c0-ad75-11f0-bd90-472eac6f2805]",
                                                    "default_value": null,
                                                    "hideLabelMode": "show",
                                                    "autoaggregated": true,
                                                    "lock_aggregation": false,
                                                    "value_constraint": null,
                                                    "initial_data_type": "float",
                                                    "aggregation_locked": true,
                                                    "backgroundSettings": {
                                                        "enabled": true,
                                                        "settings": {
                                                            "isContinuous": true,
                                                            "paletteState": {},
                                                            "gradientState": {
                                                                "reversed": false,
                                                                "gradientMode": "3-point",
                                                                "leftThreshold": "0",
                                                                "rightThreshold": "1",
                                                                "thresholdsMode": "manual",
                                                                "gradientPalette": "red-orange-green",
                                                                "middleThreshold": ".5"
                                                            }
                                                        },
                                                        "settingsId": "e3d23e60-ad79-11f0-8c0c-5b3e50c599e8",
                                                        "colorFieldGuid": "d79687a0-ad79-11f0-8c0c-5b3e50c599e8"
                                                    },
                                                    "has_auto_aggregation": true
                                                }
                                            ],
                                            "title": "section_measures",
                                            "settings": {},
                                            "iconProps": {},
                                            "allowedTypes": {},
                                            "allowedFinalTypes": {}
                                        }
                                    ],
                                    "allowLayerFilters": false
                                },
                                "geopointsConfig": {},
                                "datasetsPartialFields": [
                                    [
                                        {
                                            "guid": "a7ada7c0-ad75-11f0-bd90-472eac6f2805",
                                            "title": "max_cohort_value",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "7bb51810-ad75-11f0-bd90-472eac6f2805",
                                            "title": "values",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "d79687a0-ad79-11f0-8c0c-5b3e50c599e8",
                                            "title": "%_values",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "23566930-ab59-11f0-864e-7555cf0e0fb2",
                                            "title": "filter_date",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "b558d3c0-ab56-11f0-864e-7555cf0e0fb2",
                                            "title": "purchase_month",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "cb015f40-ab55-11f0-8bf9-3590e82fd31a",
                                            "title": "diff_years",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "b92b2df0-ab55-11f0-8bf9-3590e82fd31a",
                                            "title": "diff_months",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "end_period",
                                            "title": "end_period",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "start_date",
                                            "title": "start_date",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "end_date",
                                            "title": "end_date",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "client_id_3d2i",
                                            "title": "client_id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "purchase_min_date_fass",
                                            "title": "purchase_min_date",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "purchase_date_n7ct",
                                            "title": "purchase_date",
                                            "calc_mode": "direct"
                                        }
                                    ]
                                ]
                            }
                        },
                        "name": "Анализ клиентов - Таблица. Когортный анализ",
                        "type": "table_wizard_node",
                        "annotation": {
                            "description": ""
                        }
                    }
                },
                "46": {
                    "widget": {
                        "data": {
                            "shared": {
                                "sort": [],
                                "type": "datalens",
                                "links": [],
                                "colors": [],
                                "labels": [],
                                "shapes": [],
                                "filters": [],
                                "updates": [
                                    {
                                        "field": {
                                            "cast": "float",
                                            "guid": "0dcb3a50-aa55-11f0-8c7c-59e14d3324ab",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Общая сумма предоставленных скидок",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "SUM_IF([quantity] * [discount_per_item], [purchase_datetime] >= [start_date] AND [purchase_datedate] <= [end_date])",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "float",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "SUM_IF([quantity_k4iu] * [discount_per_item_7maq], [purchase_datetime_pvoa] >= [start_date] AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= [end_date])",
                                            "originalTitle": "total_price",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "float",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    }
                                ],
                                "version": "14",
                                "segments": [],
                                "tooltips": [],
                                "datasetsIds": [
                                    "6"
                                ],
                                "hierarchies": [],
                                "colorsConfig": {},
                                "shapesConfig": {},
                                "extraSettings": {
                                    "feed": "",
                                    "title": "Общие продажи и тренды - KPI. Общая выручка",
                                    "stacking": "on",
                                    "zoomMode": "auto",
                                    "titleMode": "hide",
                                    "legendMode": "show",
                                    "tooltipSum": "on",
                                    "mapCenterMode": "auto",
                                    "metricFontSize": "m",
                                    "metricFontColor": "#EEB184",
                                    "pivotInlineSort": "on",
                                    "navigatorSettings": {
                                        "selectedLines": [],
                                        "isNavigatorAvailable": false
                                    },
                                    "indicatorTitleMode": "hide",
                                    "metricFontColorIndex": 11,
                                    "metricFontColorPalette": "datalens-neo-20"
                                },
                                "visualization": {
                                    "id": "metric",
                                    "name": "label_visualization-metric",
                                    "type": "metric",
                                    "allowSort": false,
                                    "iconProps": {
                                        "id": "visMetric",
                                        "width": "24"
                                    },
                                    "allowLabels": false,
                                    "allowFilters": true,
                                    "placeholders": [
                                        {
                                            "id": "measures",
                                            "type": "measures",
                                            "items": [
                                                {
                                                    "id": "measure-0",
                                                    "cast": "float",
                                                    "guid": "0dcb3a50-aa55-11f0-8c7c-59e14d3324ab",
                                                    "type": "MEASURE",
                                                    "local": true,
                                                    "title": "Общая сумма предоставленных скидок",
                                                    "valid": true,
                                                    "hidden": false,
                                                    "source": "",
                                                    "formula": "SUM_IF([quantity] * [discount_per_item], [purchase_datetime] >= [start_date] AND [purchase_datedate] <= [end_date])",
                                                    "virtual": false,
                                                    "grouping": "",
                                                    "avatar_id": null,
                                                    "calc_mode": "formula",
                                                    "data_type": "float",
                                                    "datasetId": "6",
                                                    "formatting": {
                                                        "unit": "m",
                                                        "format": "number",
                                                        "prefix": "",
                                                        "postfix": "",
                                                        "labelMode": "absolute",
                                                        "precision": 0,
                                                        "showRankDelimiter": true
                                                    },
                                                    "managed_by": "user",
                                                    "aggregation": "none",
                                                    "datasetName": "Данные о продажах",
                                                    "description": "",
                                                    "ui_settings": "",
                                                    "guid_formula": "SUM_IF([quantity_k4iu] * [discount_per_item_7maq], [purchase_datetime_pvoa] >= [start_date] AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= [end_date])",
                                                    "default_value": null,
                                                    "hideLabelMode": "show",
                                                    "originalTitle": "total_price",
                                                    "autoaggregated": true,
                                                    "lock_aggregation": false,
                                                    "value_constraint": null,
                                                    "initial_data_type": "float",
                                                    "aggregation_locked": true,
                                                    "has_auto_aggregation": true
                                                }
                                            ],
                                            "title": "section_measure",
                                            "capacity": 1,
                                            "required": true,
                                            "settings": {},
                                            "iconProps": {},
                                            "allowedTypes": {},
                                            "allowedDataTypes": {},
                                            "allowedFinalTypes": {}
                                        }
                                    ],
                                    "allowLayerFilters": false
                                },
                                "geopointsConfig": {},
                                "datasetsPartialFields": [
                                    [
                                        {
                                            "guid": "0dcb3a50-aa55-11f0-8c7c-59e14d3324ab",
                                            "title": "Общая сумма предоставленных скидок",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "95f17b60-ab36-11f0-a2f4-fdfba76f64b3",
                                            "title": "Номер покупки",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "e3a1cfe0-aa55-11f0-8395-f32b2462dd84",
                                            "title": "Фильтр даты",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "end_date",
                                            "title": "end_date",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "start_date",
                                            "title": "start_date",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "f828f540-a935-11f0-976d-099c0b05b9ec",
                                            "title": "%_discount",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "584ad600-a92c-11f0-976d-099c0b05b9ec",
                                            "title": "scale_value",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "8125b920-ab28-11f0-bffa-65bc24252e3e",
                                            "title": "scale_value_sparkline",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "scale",
                                            "title": "scale",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "660eb030-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_month",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "d02fc430-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_week",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "1cf44850-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_hour",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "3352b650-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_quarter",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "268ce800-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_year",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "087e5b50-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_date",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "id_scne",
                                            "title": "id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "client_id_lbc6",
                                            "title": "client_id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "gender_fzxw",
                                            "title": "gender",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "product_id_ey10",
                                            "title": "product_id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "quantity_k4iu",
                                            "title": "quantity",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "price_per_item_3dwq",
                                            "title": "price_per_item",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "discount_per_item_7maq",
                                            "title": "discount_per_item",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "total_price_1u2g",
                                            "title": "total_price",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "purchase_datetime_pvoa",
                                            "title": "purchase_datetime",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "461ec3e0-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_datedate",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "created_at_s6qq",
                                            "title": "created_at",
                                            "calc_mode": "direct"
                                        }
                                    ]
                                ]
                            }
                        },
                        "name": "Анализ товаров и ассортимента - KPI. Сумма скидок",
                        "type": "metric_wizard_node",
                        "annotation": {
                            "description": ""
                        }
                    }
                },
                "47": {
                    "widget": {
                        "data": {
                            "shared": {
                                "sort": [],
                                "type": "datalens",
                                "links": [],
                                "colors": [],
                                "labels": [],
                                "shapes": [],
                                "filters": [],
                                "updates": [
                                    {
                                        "field": {
                                            "cast": "float",
                                            "guid": "0dcb3a50-aa55-11f0-8c7c-59e14d3324ab",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Товарооброт",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "SUM_IF([quantity] * [total_price], [purchase_datetime] >= [start_date] AND [purchase_datedate] <= [end_date])",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "float",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "SUM_IF([quantity_k4iu] * [total_price_1u2g], [purchase_datetime_pvoa] >= [start_date] AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= [end_date])",
                                            "originalTitle": "total_price",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "float",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    }
                                ],
                                "version": "14",
                                "segments": [],
                                "tooltips": [],
                                "datasetsIds": [
                                    "6"
                                ],
                                "hierarchies": [],
                                "colorsConfig": {},
                                "shapesConfig": {},
                                "extraSettings": {
                                    "feed": "",
                                    "title": "Общие продажи и тренды - KPI. Общая выручка",
                                    "stacking": "on",
                                    "zoomMode": "auto",
                                    "titleMode": "hide",
                                    "legendMode": "show",
                                    "tooltipSum": "on",
                                    "mapCenterMode": "auto",
                                    "metricFontSize": "m",
                                    "metricFontColor": "#FFB46C",
                                    "pivotInlineSort": "on",
                                    "navigatorSettings": {
                                        "selectedLines": [],
                                        "isNavigatorAvailable": false
                                    },
                                    "indicatorTitleMode": "hide",
                                    "metricFontColorIndex": 17,
                                    "metricFontColorPalette": "datalens-neo-20"
                                },
                                "visualization": {
                                    "id": "metric",
                                    "name": "label_visualization-metric",
                                    "type": "metric",
                                    "allowSort": false,
                                    "iconProps": {
                                        "id": "visMetric",
                                        "width": "24"
                                    },
                                    "allowLabels": false,
                                    "allowFilters": true,
                                    "placeholders": [
                                        {
                                            "id": "measures",
                                            "type": "measures",
                                            "items": [
                                                {
                                                    "id": "measure-0",
                                                    "cast": "float",
                                                    "guid": "0dcb3a50-aa55-11f0-8c7c-59e14d3324ab",
                                                    "type": "MEASURE",
                                                    "local": true,
                                                    "title": "Товарооброт",
                                                    "valid": true,
                                                    "hidden": false,
                                                    "source": "",
                                                    "formula": "SUM_IF([quantity] * [total_price], [purchase_datetime] >= [start_date] AND [purchase_datedate] <= [end_date])",
                                                    "virtual": false,
                                                    "grouping": "",
                                                    "avatar_id": null,
                                                    "calc_mode": "formula",
                                                    "data_type": "float",
                                                    "datasetId": "6",
                                                    "formatting": {
                                                        "unit": "m",
                                                        "format": "number",
                                                        "prefix": "",
                                                        "postfix": "",
                                                        "labelMode": "absolute",
                                                        "precision": 0,
                                                        "showRankDelimiter": true
                                                    },
                                                    "managed_by": "user",
                                                    "aggregation": "none",
                                                    "datasetName": "Данные о продажах",
                                                    "description": "",
                                                    "ui_settings": "",
                                                    "guid_formula": "SUM_IF([quantity_k4iu] * [total_price_1u2g], [purchase_datetime_pvoa] >= [start_date] AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= [end_date])",
                                                    "default_value": null,
                                                    "hideLabelMode": "show",
                                                    "originalTitle": "total_price",
                                                    "autoaggregated": true,
                                                    "lock_aggregation": false,
                                                    "value_constraint": null,
                                                    "initial_data_type": "float",
                                                    "aggregation_locked": true,
                                                    "has_auto_aggregation": true
                                                }
                                            ],
                                            "title": "section_measure",
                                            "capacity": 1,
                                            "required": true,
                                            "settings": {},
                                            "iconProps": {},
                                            "allowedTypes": {},
                                            "allowedDataTypes": {},
                                            "allowedFinalTypes": {}
                                        }
                                    ],
                                    "allowLayerFilters": false
                                },
                                "geopointsConfig": {},
                                "datasetsPartialFields": [
                                    [
                                        {
                                            "guid": "0dcb3a50-aa55-11f0-8c7c-59e14d3324ab",
                                            "title": "Товарооброт",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "95f17b60-ab36-11f0-a2f4-fdfba76f64b3",
                                            "title": "Номер покупки",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "e3a1cfe0-aa55-11f0-8395-f32b2462dd84",
                                            "title": "Фильтр даты",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "end_date",
                                            "title": "end_date",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "start_date",
                                            "title": "start_date",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "f828f540-a935-11f0-976d-099c0b05b9ec",
                                            "title": "%_discount",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "584ad600-a92c-11f0-976d-099c0b05b9ec",
                                            "title": "scale_value",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "8125b920-ab28-11f0-bffa-65bc24252e3e",
                                            "title": "scale_value_sparkline",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "scale",
                                            "title": "scale",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "660eb030-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_month",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "d02fc430-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_week",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "1cf44850-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_hour",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "3352b650-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_quarter",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "268ce800-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_year",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "087e5b50-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_date",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "id_scne",
                                            "title": "id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "client_id_lbc6",
                                            "title": "client_id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "gender_fzxw",
                                            "title": "gender",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "product_id_ey10",
                                            "title": "product_id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "quantity_k4iu",
                                            "title": "quantity",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "price_per_item_3dwq",
                                            "title": "price_per_item",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "discount_per_item_7maq",
                                            "title": "discount_per_item",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "total_price_1u2g",
                                            "title": "total_price",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "purchase_datetime_pvoa",
                                            "title": "purchase_datetime",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "461ec3e0-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_datedate",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "created_at_s6qq",
                                            "title": "created_at",
                                            "calc_mode": "direct"
                                        }
                                    ]
                                ]
                            }
                        },
                        "name": "Анализ товаров и ассортимента - KPI. Товарооборот",
                        "type": "metric_wizard_node",
                        "annotation": {
                            "description": ""
                        }
                    }
                },
                "48": {
                    "widget": {
                        "data": {
                            "shared": {
                                "sort": [
                                    {
                                        "guid": "f1f248e0-ab31-11f0-bb9d-2dd9e3091d37",
                                        "type": "MEASURE",
                                        "title": "Кол-во заказов",
                                        "source": "",
                                        "data_type": "integer",
                                        "datasetId": "6",
                                        "direction": "DESC"
                                    }
                                ],
                                "type": "datalens",
                                "links": [],
                                "colors": [],
                                "labels": [],
                                "shapes": [],
                                "filters": [
                                    {
                                        "guid": "d4d15b10-ab32-11f0-bb9d-2dd9e3091d37",
                                        "type": "MEASURE",
                                        "title": "ТОП",
                                        "filter": {
                                            "value": [
                                                "true"
                                            ],
                                            "operation": {
                                                "code": "EQ"
                                            }
                                        },
                                        "calc_mode": "formula",
                                        "datasetId": "6"
                                    },
                                    {
                                        "guid": "e3a1cfe0-aa55-11f0-8395-f32b2462dd84",
                                        "type": "DIMENSION",
                                        "title": "Фильтр даты",
                                        "filter": {
                                            "value": [
                                                "true"
                                            ],
                                            "operation": {
                                                "code": "EQ"
                                            }
                                        },
                                        "calc_mode": "formula",
                                        "datasetId": "6"
                                    }
                                ],
                                "updates": [
                                    {
                                        "field": {
                                            "cast": "boolean",
                                            "guid": "d4d15b10-ab32-11f0-bb9d-2dd9e3091d37",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "ТОП",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "RANK_UNIQUE(COUNT([product_id])) <= [top_sales]",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "boolean",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "RANK_UNIQUE(COUNT([product_id_ey10])) <= [top_sales]",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "boolean",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "integer",
                                            "guid": "f1f248e0-ab31-11f0-bb9d-2dd9e3091d37",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Кол-во заказов",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "count([id])",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "integer",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "count([id_scne])",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "integer",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "integer",
                                            "guid": "top_sales",
                                            "type": "DIMENSION",
                                            "local": true,
                                            "title": "top_sales",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "",
                                            "virtual": false,
                                            "calc_mode": "parameter",
                                            "data_type": "integer",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "",
                                            "default_value": 10,
                                            "autoaggregated": false,
                                            "lock_aggregation": false,
                                            "template_enabled": false,
                                            "initial_data_type": "integer",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": false
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    }
                                ],
                                "version": "14",
                                "segments": [],
                                "tooltips": [],
                                "datasetsIds": [
                                    "6"
                                ],
                                "hierarchies": [],
                                "colorsConfig": {},
                                "shapesConfig": {},
                                "extraSettings": {
                                    "feed": "",
                                    "limit": 100,
                                    "title": "Новый чарт",
                                    "stacking": "on",
                                    "zoomMode": "auto",
                                    "titleMode": "hide",
                                    "legendMode": "show",
                                    "pagination": "on",
                                    "tooltipSum": "on",
                                    "mapCenterMode": "auto",
                                    "labelsPosition": "outside",
                                    "metricFontSize": "m",
                                    "metricFontColor": "#1F68A9",
                                    "pivotInlineSort": "on",
                                    "navigatorSettings": {
                                        "selectedLines": [],
                                        "isNavigatorAvailable": false
                                    },
                                    "indicatorTitleMode": "hide",
                                    "metricFontColorIndex": 10
                                },
                                "visualization": {
                                    "id": "flatTable",
                                    "name": "label_visualization-flat-table",
                                    "type": "table",
                                    "allowSort": true,
                                    "iconProps": {
                                        "id": "visFlatTable",
                                        "width": "24"
                                    },
                                    "allowColors": true,
                                    "allowFilters": true,
                                    "placeholders": [
                                        {
                                            "id": "flat-table-columns",
                                            "type": "flat-table-columns",
                                            "items": [
                                                {
                                                    "id": "dimension-20",
                                                    "cast": "integer",
                                                    "guid": "product_id_ey10",
                                                    "type": "DIMENSION",
                                                    "title": "product_id",
                                                    "valid": true,
                                                    "hidden": false,
                                                    "source": "product_id",
                                                    "formula": "",
                                                    "virtual": false,
                                                    "avatar_id": "e2af43f0-a920-11f0-9254-7577ead3d7d0",
                                                    "calc_mode": "direct",
                                                    "data_type": "integer",
                                                    "datasetId": "6",
                                                    "fakeTitle": "Товар",
                                                    "formatting": {
                                                        "format": "number",
                                                        "prefix": "",
                                                        "postfix": "",
                                                        "labelMode": "absolute",
                                                        "precision": 0,
                                                        "showRankDelimiter": true
                                                    },
                                                    "managed_by": "user",
                                                    "aggregation": "none",
                                                    "datasetName": "Данные о продажах",
                                                    "description": "",
                                                    "ui_settings": "",
                                                    "guid_formula": "",
                                                    "hideLabelMode": "show",
                                                    "autoaggregated": false,
                                                    "lock_aggregation": false,
                                                    "initial_data_type": "integer",
                                                    "aggregation_locked": false,
                                                    "backgroundSettings": {
                                                        "enabled": false,
                                                        "settings": {
                                                            "isContinuous": false,
                                                            "paletteState": {
                                                                "palette": "",
                                                                "mountedColors": {}
                                                            },
                                                            "gradientState": {}
                                                        },
                                                        "settingsId": "5e0cb910-ab79-11f0-8a7a-a74500c1f3dc",
                                                        "colorFieldGuid": "product_id_ey10"
                                                    },
                                                    "has_auto_aggregation": false
                                                },
                                                {
                                                    "id": "measure-0",
                                                    "cast": "integer",
                                                    "guid": "f1f248e0-ab31-11f0-bb9d-2dd9e3091d37",
                                                    "type": "MEASURE",
                                                    "local": true,
                                                    "title": "Кол-во заказов",
                                                    "valid": true,
                                                    "hidden": false,
                                                    "source": "",
                                                    "formula": "count([id])",
                                                    "virtual": false,
                                                    "avatar_id": null,
                                                    "calc_mode": "formula",
                                                    "data_type": "integer",
                                                    "datasetId": "6",
                                                    "formatting": {
                                                        "format": "number",
                                                        "prefix": "",
                                                        "postfix": "",
                                                        "labelMode": "absolute",
                                                        "precision": 0,
                                                        "showRankDelimiter": true
                                                    },
                                                    "managed_by": "user",
                                                    "aggregation": "none",
                                                    "datasetName": "Данные о продажах",
                                                    "description": "",
                                                    "ui_settings": "",
                                                    "barsSettings": {
                                                        "align": "default",
                                                        "scale": {
                                                            "mode": "auto"
                                                        },
                                                        "enabled": true,
                                                        "showLabels": true,
                                                        "colorSettings": {
                                                            "settings": {
                                                                "color": "#84D1EE",
                                                                "palette": "classic20",
                                                                "colorIndex": 5
                                                            },
                                                            "colorType": "one-color"
                                                        },
                                                        "showBarsInTotals": false
                                                    },
                                                    "guid_formula": "count([id_scne])",
                                                    "default_value": null,
                                                    "hideLabelMode": "show",
                                                    "autoaggregated": true,
                                                    "lock_aggregation": false,
                                                    "value_constraint": null,
                                                    "initial_data_type": "integer",
                                                    "aggregation_locked": true,
                                                    "backgroundSettings": {
                                                        "enabled": false,
                                                        "settings": {
                                                            "isContinuous": true,
                                                            "paletteState": {},
                                                            "gradientState": {
                                                                "reversed": false,
                                                                "gradientMode": "2-point",
                                                                "thresholdsMode": "auto",
                                                                "gradientPalette": "blue"
                                                            }
                                                        },
                                                        "settingsId": "ca115260-ab33-11f0-82d1-ad30b3f96ad7",
                                                        "colorFieldGuid": "f1f248e0-ab31-11f0-bb9d-2dd9e3091d37"
                                                    },
                                                    "has_auto_aggregation": true
                                                }
                                            ],
                                            "title": "section_columns",
                                            "required": true,
                                            "settings": {
                                                "groupping": "on",
                                                "axisModeMap": {
                                                    "product_id_ey10": "discrete"
                                                }
                                            },
                                            "iconProps": {},
                                            "allowedTypes": {}
                                        }
                                    ],
                                    "allowLayerFilters": false
                                },
                                "geopointsConfig": {},
                                "datasetsPartialFields": [
                                    [
                                        {
                                            "guid": "f1f248e0-ab31-11f0-bb9d-2dd9e3091d37",
                                            "title": "Кол-во заказов",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "d4d15b10-ab32-11f0-bb9d-2dd9e3091d37",
                                            "title": "ТОП",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "top_sales",
                                            "title": "top_sales",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "95f17b60-ab36-11f0-a2f4-fdfba76f64b3",
                                            "title": "Номер покупки",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "e3a1cfe0-aa55-11f0-8395-f32b2462dd84",
                                            "title": "Фильтр даты",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "end_date",
                                            "title": "end_date",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "start_date",
                                            "title": "start_date",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "f828f540-a935-11f0-976d-099c0b05b9ec",
                                            "title": "%_discount",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "584ad600-a92c-11f0-976d-099c0b05b9ec",
                                            "title": "scale_value",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "8125b920-ab28-11f0-bffa-65bc24252e3e",
                                            "title": "scale_value_sparkline",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "scale",
                                            "title": "scale",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "660eb030-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_month",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "d02fc430-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_week",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "1cf44850-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_hour",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "3352b650-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_quarter",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "268ce800-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_year",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "087e5b50-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_date",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "id_scne",
                                            "title": "id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "client_id_lbc6",
                                            "title": "client_id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "gender_fzxw",
                                            "title": "gender",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "product_id_ey10",
                                            "title": "product_id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "quantity_k4iu",
                                            "title": "quantity",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "price_per_item_3dwq",
                                            "title": "price_per_item",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "discount_per_item_7maq",
                                            "title": "discount_per_item",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "total_price_1u2g",
                                            "title": "total_price",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "purchase_datetime_pvoa",
                                            "title": "purchase_datetime",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "461ec3e0-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_datedate",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "created_at_s6qq",
                                            "title": "created_at",
                                            "calc_mode": "direct"
                                        }
                                    ]
                                ]
                            }
                        },
                        "name": "Анализ товаров и ассортимента - Таблица. Топ товаров по покупкам",
                        "type": "table_wizard_node",
                        "annotation": {
                            "description": ""
                        }
                    }
                },
                "49": {
                    "widget": {
                        "data": {
                            "shared": {
                                "sort": [
                                    {
                                        "guid": "f1f248e0-ab31-11f0-bb9d-2dd9e3091d37",
                                        "type": "MEASURE",
                                        "title": "Сумма продаж",
                                        "source": "",
                                        "data_type": "float",
                                        "datasetId": "6",
                                        "direction": "ASC"
                                    }
                                ],
                                "type": "datalens",
                                "links": [],
                                "colors": [],
                                "labels": [],
                                "shapes": [],
                                "filters": [
                                    {
                                        "guid": "d4d15b10-ab32-11f0-bb9d-2dd9e3091d37",
                                        "type": "MEASURE",
                                        "title": "ТОП",
                                        "filter": {
                                            "value": [
                                                "true"
                                            ],
                                            "operation": {
                                                "code": "EQ"
                                            }
                                        },
                                        "calc_mode": "formula",
                                        "datasetId": "6"
                                    },
                                    {
                                        "guid": "e3a1cfe0-aa55-11f0-8395-f32b2462dd84",
                                        "type": "DIMENSION",
                                        "title": "Фильтр даты",
                                        "filter": {
                                            "value": [
                                                "true"
                                            ],
                                            "operation": {
                                                "code": "EQ"
                                            }
                                        },
                                        "calc_mode": "formula",
                                        "datasetId": "6"
                                    }
                                ],
                                "updates": [
                                    {
                                        "field": {
                                            "cast": "integer",
                                            "guid": "top_expenses",
                                            "type": "DIMENSION",
                                            "local": true,
                                            "title": "top_expenses",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "",
                                            "virtual": false,
                                            "calc_mode": "parameter",
                                            "data_type": "integer",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "",
                                            "default_value": 5,
                                            "autoaggregated": false,
                                            "lock_aggregation": false,
                                            "template_enabled": false,
                                            "initial_data_type": "integer",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": false
                                        },
                                        "action": "add_field"
                                    },
                                    {
                                        "field": {
                                            "cast": "float",
                                            "guid": "f1f248e0-ab31-11f0-bb9d-2dd9e3091d37",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Сумма продаж",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "SUM([total_price])",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "float",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "SUM([total_price_1u2g])",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "float",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "boolean",
                                            "guid": "d4d15b10-ab32-11f0-bb9d-2dd9e3091d37",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "ТОП",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "RANK_UNIQUE(SUM([total_price]), 'asc') <= [top_expenses]",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "boolean",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "RANK_UNIQUE(SUM([total_price_1u2g]), 'asc') <= [top_expenses]",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "boolean",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    }
                                ],
                                "version": "14",
                                "segments": [],
                                "tooltips": [],
                                "datasetsIds": [
                                    "6"
                                ],
                                "hierarchies": [],
                                "colorsConfig": {},
                                "shapesConfig": {},
                                "extraSettings": {
                                    "feed": "",
                                    "limit": 100,
                                    "title": "Новый чарт",
                                    "stacking": "on",
                                    "zoomMode": "auto",
                                    "titleMode": "hide",
                                    "legendMode": "show",
                                    "pagination": "on",
                                    "tooltipSum": "on",
                                    "mapCenterMode": "auto",
                                    "labelsPosition": "outside",
                                    "metricFontSize": "m",
                                    "metricFontColor": "#1F68A9",
                                    "pivotInlineSort": "on",
                                    "navigatorSettings": {
                                        "selectedLines": [],
                                        "isNavigatorAvailable": false
                                    },
                                    "indicatorTitleMode": "hide",
                                    "metricFontColorIndex": 10
                                },
                                "visualization": {
                                    "id": "flatTable",
                                    "name": "label_visualization-flat-table",
                                    "type": "table",
                                    "allowSort": true,
                                    "iconProps": {
                                        "id": "visFlatTable",
                                        "width": "24"
                                    },
                                    "allowColors": true,
                                    "allowFilters": true,
                                    "placeholders": [
                                        {
                                            "id": "flat-table-columns",
                                            "type": "flat-table-columns",
                                            "items": [
                                                {
                                                    "id": "dimension-20",
                                                    "cast": "integer",
                                                    "guid": "product_id_ey10",
                                                    "type": "DIMENSION",
                                                    "title": "product_id",
                                                    "valid": true,
                                                    "hidden": false,
                                                    "source": "product_id",
                                                    "formula": "",
                                                    "virtual": false,
                                                    "avatar_id": "e2af43f0-a920-11f0-9254-7577ead3d7d0",
                                                    "calc_mode": "direct",
                                                    "data_type": "integer",
                                                    "datasetId": "6",
                                                    "fakeTitle": "Товар",
                                                    "formatting": {
                                                        "format": "number",
                                                        "prefix": "",
                                                        "postfix": "",
                                                        "labelMode": "absolute",
                                                        "precision": 0,
                                                        "showRankDelimiter": true
                                                    },
                                                    "managed_by": "user",
                                                    "aggregation": "none",
                                                    "datasetName": "Данные о продажах",
                                                    "description": "",
                                                    "ui_settings": "",
                                                    "guid_formula": "",
                                                    "default_value": null,
                                                    "hideLabelMode": "show",
                                                    "autoaggregated": false,
                                                    "lock_aggregation": false,
                                                    "value_constraint": null,
                                                    "initial_data_type": "integer",
                                                    "aggregation_locked": false,
                                                    "backgroundSettings": {
                                                        "enabled": false,
                                                        "settings": {
                                                            "isContinuous": false,
                                                            "paletteState": {
                                                                "palette": "",
                                                                "mountedColors": {}
                                                            },
                                                            "gradientState": {}
                                                        },
                                                        "settingsId": "fc756570-ab79-11f0-88f1-57c339402fe7",
                                                        "colorFieldGuid": "product_id_ey10"
                                                    },
                                                    "has_auto_aggregation": false
                                                },
                                                {
                                                    "id": "measure-1",
                                                    "cast": "float",
                                                    "guid": "f1f248e0-ab31-11f0-bb9d-2dd9e3091d37",
                                                    "type": "MEASURE",
                                                    "local": true,
                                                    "title": "Сумма продаж",
                                                    "valid": true,
                                                    "hidden": false,
                                                    "source": "",
                                                    "formula": "SUM([total_price])",
                                                    "virtual": false,
                                                    "avatar_id": null,
                                                    "calc_mode": "formula",
                                                    "data_type": "float",
                                                    "datasetId": "6",
                                                    "formatting": {
                                                        "format": "number",
                                                        "prefix": "",
                                                        "postfix": "",
                                                        "labelMode": "absolute",
                                                        "precision": 0,
                                                        "showRankDelimiter": true
                                                    },
                                                    "managed_by": "user",
                                                    "aggregation": "none",
                                                    "datasetName": "Данные о продажах",
                                                    "description": "",
                                                    "ui_settings": "",
                                                    "barsSettings": {
                                                        "align": "default",
                                                        "scale": {
                                                            "mode": "auto"
                                                        },
                                                        "enabled": true,
                                                        "showLabels": true,
                                                        "colorSettings": {
                                                            "settings": {
                                                                "color": "#0FA08D",
                                                                "palette": "classic20",
                                                                "colorIndex": 12
                                                            },
                                                            "colorType": "one-color"
                                                        },
                                                        "showBarsInTotals": false
                                                    },
                                                    "guid_formula": "SUM([total_price_1u2g])",
                                                    "default_value": null,
                                                    "hideLabelMode": "show",
                                                    "autoaggregated": true,
                                                    "lock_aggregation": false,
                                                    "value_constraint": null,
                                                    "initial_data_type": "float",
                                                    "aggregation_locked": true,
                                                    "backgroundSettings": {
                                                        "enabled": false,
                                                        "settings": {
                                                            "isContinuous": true,
                                                            "paletteState": {},
                                                            "gradientState": {
                                                                "reversed": false,
                                                                "gradientMode": "2-point",
                                                                "thresholdsMode": "auto",
                                                                "gradientPalette": "blue"
                                                            }
                                                        },
                                                        "settingsId": "ca115260-ab33-11f0-82d1-ad30b3f96ad7",
                                                        "colorFieldGuid": "f1f248e0-ab31-11f0-bb9d-2dd9e3091d37"
                                                    },
                                                    "has_auto_aggregation": true
                                                }
                                            ],
                                            "title": "section_columns",
                                            "required": true,
                                            "settings": {
                                                "groupping": "on"
                                            },
                                            "iconProps": {},
                                            "allowedTypes": {}
                                        }
                                    ],
                                    "allowLayerFilters": false
                                },
                                "geopointsConfig": {},
                                "datasetsPartialFields": [
                                    [
                                        {
                                            "guid": "d4d15b10-ab32-11f0-bb9d-2dd9e3091d37",
                                            "title": "ТОП",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "f1f248e0-ab31-11f0-bb9d-2dd9e3091d37",
                                            "title": "Сумма продаж",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "top_expenses",
                                            "title": "top_expenses",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "95f17b60-ab36-11f0-a2f4-fdfba76f64b3",
                                            "title": "Номер покупки",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "e3a1cfe0-aa55-11f0-8395-f32b2462dd84",
                                            "title": "Фильтр даты",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "end_date",
                                            "title": "end_date",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "start_date",
                                            "title": "start_date",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "f828f540-a935-11f0-976d-099c0b05b9ec",
                                            "title": "%_discount",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "584ad600-a92c-11f0-976d-099c0b05b9ec",
                                            "title": "scale_value",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "8125b920-ab28-11f0-bffa-65bc24252e3e",
                                            "title": "scale_value_sparkline",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "scale",
                                            "title": "scale",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "660eb030-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_month",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "d02fc430-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_week",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "1cf44850-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_hour",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "3352b650-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_quarter",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "268ce800-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_year",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "087e5b50-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_date",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "id_scne",
                                            "title": "id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "client_id_lbc6",
                                            "title": "client_id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "gender_fzxw",
                                            "title": "gender",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "product_id_ey10",
                                            "title": "product_id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "quantity_k4iu",
                                            "title": "quantity",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "price_per_item_3dwq",
                                            "title": "price_per_item",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "discount_per_item_7maq",
                                            "title": "discount_per_item",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "total_price_1u2g",
                                            "title": "total_price",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "purchase_datetime_pvoa",
                                            "title": "purchase_datetime",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "461ec3e0-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_datedate",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "created_at_s6qq",
                                            "title": "created_at",
                                            "calc_mode": "direct"
                                        }
                                    ]
                                ]
                            }
                        },
                        "name": "Анализ товаров и ассортимента - Таблица. Антитоп товаров по сумме продаж",
                        "type": "table_wizard_node",
                        "annotation": {
                            "description": ""
                        }
                    }
                },
                "50": {
                    "widget": {
                        "data": {
                            "shared": {
                                "sort": [
                                    {
                                        "guid": "f1f248e0-ab31-11f0-bb9d-2dd9e3091d37",
                                        "type": "MEASURE",
                                        "title": "Кол-во заказов",
                                        "source": "",
                                        "data_type": "integer",
                                        "datasetId": "6",
                                        "direction": "ASC"
                                    }
                                ],
                                "type": "datalens",
                                "links": [],
                                "colors": [],
                                "labels": [],
                                "shapes": [],
                                "filters": [
                                    {
                                        "guid": "d4d15b10-ab32-11f0-bb9d-2dd9e3091d37",
                                        "type": "MEASURE",
                                        "title": "ТОП",
                                        "filter": {
                                            "value": [
                                                "true"
                                            ],
                                            "operation": {
                                                "code": "EQ"
                                            }
                                        },
                                        "calc_mode": "formula",
                                        "datasetId": "6"
                                    },
                                    {
                                        "guid": "e3a1cfe0-aa55-11f0-8395-f32b2462dd84",
                                        "type": "DIMENSION",
                                        "title": "Фильтр даты",
                                        "filter": {
                                            "value": [
                                                "true"
                                            ],
                                            "operation": {
                                                "code": "EQ"
                                            }
                                        },
                                        "calc_mode": "formula",
                                        "datasetId": "6"
                                    }
                                ],
                                "updates": [
                                    {
                                        "field": {
                                            "cast": "integer",
                                            "guid": "f1f248e0-ab31-11f0-bb9d-2dd9e3091d37",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Кол-во заказов",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "count([id])",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "integer",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "count([id_scne])",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "integer",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "integer",
                                            "guid": "top_sales",
                                            "type": "DIMENSION",
                                            "local": true,
                                            "title": "top_sales",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "",
                                            "virtual": false,
                                            "calc_mode": "parameter",
                                            "data_type": "integer",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "",
                                            "default_value": 10,
                                            "autoaggregated": false,
                                            "lock_aggregation": false,
                                            "template_enabled": false,
                                            "initial_data_type": "integer",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": false
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "integer",
                                            "guid": "8e5915b0-ab7d-11f0-ac7c-1f7dfa1eb1c0",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Ранк",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "RANK_UNIQUE(COUNT([product_id]), \"asc\")",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "integer",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "RANK_UNIQUE(COUNT([product_id_ey10]), \"asc\")",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "integer",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "boolean",
                                            "guid": "d4d15b10-ab32-11f0-bb9d-2dd9e3091d37",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "ТОП",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "RANK_UNIQUE(COUNT([product_id]), 'asc') <= [top_sales]",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "boolean",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "RANK_UNIQUE(COUNT([product_id_ey10]), 'asc') <= [top_sales]",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "boolean",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    }
                                ],
                                "version": "14",
                                "segments": [],
                                "tooltips": [],
                                "datasetsIds": [
                                    "6"
                                ],
                                "hierarchies": [],
                                "colorsConfig": {},
                                "shapesConfig": {},
                                "extraSettings": {
                                    "feed": "",
                                    "limit": 100,
                                    "title": "Новый чарт",
                                    "stacking": "on",
                                    "zoomMode": "auto",
                                    "titleMode": "hide",
                                    "legendMode": "show",
                                    "pagination": "on",
                                    "tooltipSum": "on",
                                    "mapCenterMode": "auto",
                                    "labelsPosition": "outside",
                                    "metricFontSize": "m",
                                    "metricFontColor": "#1F68A9",
                                    "pivotInlineSort": "on",
                                    "navigatorSettings": {
                                        "selectedLines": [],
                                        "isNavigatorAvailable": false
                                    },
                                    "indicatorTitleMode": "hide",
                                    "metricFontColorIndex": 10
                                },
                                "visualization": {
                                    "id": "flatTable",
                                    "name": "label_visualization-flat-table",
                                    "type": "table",
                                    "allowSort": true,
                                    "iconProps": {
                                        "id": "visFlatTable",
                                        "width": "24"
                                    },
                                    "allowColors": true,
                                    "allowFilters": true,
                                    "placeholders": [
                                        {
                                            "id": "flat-table-columns",
                                            "type": "flat-table-columns",
                                            "items": [
                                                {
                                                    "id": "dimension-21",
                                                    "cast": "integer",
                                                    "guid": "product_id_ey10",
                                                    "type": "DIMENSION",
                                                    "title": "product_id",
                                                    "valid": true,
                                                    "hidden": false,
                                                    "source": "product_id",
                                                    "formula": "",
                                                    "virtual": false,
                                                    "avatar_id": "e2af43f0-a920-11f0-9254-7577ead3d7d0",
                                                    "calc_mode": "direct",
                                                    "data_type": "integer",
                                                    "datasetId": "6",
                                                    "fakeTitle": "Товар",
                                                    "formatting": {
                                                        "format": "number",
                                                        "prefix": "",
                                                        "postfix": "",
                                                        "labelMode": "absolute",
                                                        "precision": 0,
                                                        "showRankDelimiter": true
                                                    },
                                                    "managed_by": "user",
                                                    "aggregation": "none",
                                                    "datasetName": "Данные о продажах",
                                                    "description": "",
                                                    "ui_settings": "",
                                                    "guid_formula": "",
                                                    "default_value": null,
                                                    "hideLabelMode": "show",
                                                    "autoaggregated": false,
                                                    "lock_aggregation": false,
                                                    "value_constraint": null,
                                                    "initial_data_type": "integer",
                                                    "aggregation_locked": false,
                                                    "backgroundSettings": {
                                                        "enabled": false,
                                                        "settings": {
                                                            "isContinuous": false,
                                                            "paletteState": {
                                                                "palette": "",
                                                                "mountedColors": {}
                                                            },
                                                            "gradientState": {}
                                                        },
                                                        "settingsId": "5e0cb910-ab79-11f0-8a7a-a74500c1f3dc",
                                                        "colorFieldGuid": "product_id_ey10"
                                                    },
                                                    "has_auto_aggregation": false
                                                },
                                                {
                                                    "id": "measure-2",
                                                    "cast": "integer",
                                                    "guid": "f1f248e0-ab31-11f0-bb9d-2dd9e3091d37",
                                                    "type": "MEASURE",
                                                    "local": true,
                                                    "title": "Кол-во заказов",
                                                    "valid": true,
                                                    "hidden": false,
                                                    "source": "",
                                                    "formula": "count([id])",
                                                    "virtual": false,
                                                    "avatar_id": null,
                                                    "calc_mode": "formula",
                                                    "data_type": "integer",
                                                    "datasetId": "6",
                                                    "formatting": {
                                                        "format": "number",
                                                        "prefix": "",
                                                        "postfix": "",
                                                        "labelMode": "absolute",
                                                        "precision": 0,
                                                        "showRankDelimiter": true
                                                    },
                                                    "managed_by": "user",
                                                    "aggregation": "none",
                                                    "datasetName": "Данные о продажах",
                                                    "description": "",
                                                    "ui_settings": "",
                                                    "barsSettings": {
                                                        "align": "default",
                                                        "scale": {
                                                            "mode": "manual",
                                                            "settings": {
                                                                "max": "12",
                                                                "min": "0"
                                                            }
                                                        },
                                                        "enabled": true,
                                                        "showLabels": true,
                                                        "colorSettings": {
                                                            "settings": {
                                                                "color": "#84D1EE",
                                                                "palette": "classic20",
                                                                "colorIndex": 5
                                                            },
                                                            "colorType": "one-color"
                                                        },
                                                        "showBarsInTotals": false
                                                    },
                                                    "guid_formula": "count([id_scne])",
                                                    "default_value": null,
                                                    "hideLabelMode": "show",
                                                    "autoaggregated": true,
                                                    "lock_aggregation": false,
                                                    "value_constraint": null,
                                                    "initial_data_type": "integer",
                                                    "aggregation_locked": true,
                                                    "backgroundSettings": {
                                                        "enabled": false,
                                                        "settings": {
                                                            "isContinuous": true,
                                                            "paletteState": {},
                                                            "gradientState": {
                                                                "reversed": false,
                                                                "gradientMode": "2-point",
                                                                "thresholdsMode": "auto",
                                                                "gradientPalette": "blue"
                                                            }
                                                        },
                                                        "settingsId": "ca115260-ab33-11f0-82d1-ad30b3f96ad7",
                                                        "colorFieldGuid": "f1f248e0-ab31-11f0-bb9d-2dd9e3091d37"
                                                    },
                                                    "has_auto_aggregation": true
                                                }
                                            ],
                                            "title": "section_columns",
                                            "required": true,
                                            "settings": {
                                                "groupping": "on"
                                            },
                                            "iconProps": {},
                                            "allowedTypes": {}
                                        }
                                    ],
                                    "allowLayerFilters": false
                                },
                                "geopointsConfig": {},
                                "datasetsPartialFields": [
                                    [
                                        {
                                            "guid": "d4d15b10-ab32-11f0-bb9d-2dd9e3091d37",
                                            "title": "ТОП",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "8e5915b0-ab7d-11f0-ac7c-1f7dfa1eb1c0",
                                            "title": "Ранк",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "f1f248e0-ab31-11f0-bb9d-2dd9e3091d37",
                                            "title": "Кол-во заказов",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "top_sales",
                                            "title": "top_sales",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "95f17b60-ab36-11f0-a2f4-fdfba76f64b3",
                                            "title": "Номер покупки",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "e3a1cfe0-aa55-11f0-8395-f32b2462dd84",
                                            "title": "Фильтр даты",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "end_date",
                                            "title": "end_date",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "start_date",
                                            "title": "start_date",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "f828f540-a935-11f0-976d-099c0b05b9ec",
                                            "title": "%_discount",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "584ad600-a92c-11f0-976d-099c0b05b9ec",
                                            "title": "scale_value",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "8125b920-ab28-11f0-bffa-65bc24252e3e",
                                            "title": "scale_value_sparkline",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "scale",
                                            "title": "scale",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "660eb030-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_month",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "d02fc430-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_week",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "1cf44850-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_hour",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "3352b650-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_quarter",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "268ce800-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_year",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "087e5b50-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_date",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "id_scne",
                                            "title": "id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "client_id_lbc6",
                                            "title": "client_id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "gender_fzxw",
                                            "title": "gender",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "product_id_ey10",
                                            "title": "product_id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "quantity_k4iu",
                                            "title": "quantity",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "price_per_item_3dwq",
                                            "title": "price_per_item",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "discount_per_item_7maq",
                                            "title": "discount_per_item",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "total_price_1u2g",
                                            "title": "total_price",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "purchase_datetime_pvoa",
                                            "title": "purchase_datetime",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "461ec3e0-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_datedate",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "created_at_s6qq",
                                            "title": "created_at",
                                            "calc_mode": "direct"
                                        }
                                    ]
                                ]
                            }
                        },
                        "name": "Анализ товаров и ассортимента - Таблица. Антитоп товаров по покупкам",
                        "type": "table_wizard_node",
                        "annotation": {
                            "description": ""
                        }
                    }
                },
                "52": {
                    "widget": {
                        "data": {
                            "shared": {
                                "sort": [
                                    {
                                        "guid": "f1f248e0-ab31-11f0-bb9d-2dd9e3091d37",
                                        "type": "MEASURE",
                                        "title": "Сумма продаж",
                                        "source": "",
                                        "data_type": "float",
                                        "datasetId": "6",
                                        "direction": "DESC"
                                    }
                                ],
                                "type": "datalens",
                                "links": [],
                                "colors": [],
                                "labels": [],
                                "shapes": [],
                                "filters": [
                                    {
                                        "guid": "d4d15b10-ab32-11f0-bb9d-2dd9e3091d37",
                                        "type": "MEASURE",
                                        "title": "ТОП",
                                        "filter": {
                                            "value": [
                                                "true"
                                            ],
                                            "operation": {
                                                "code": "EQ"
                                            }
                                        },
                                        "calc_mode": "formula",
                                        "datasetId": "6"
                                    },
                                    {
                                        "guid": "e3a1cfe0-aa55-11f0-8395-f32b2462dd84",
                                        "type": "DIMENSION",
                                        "title": "Фильтр даты",
                                        "filter": {
                                            "value": [
                                                "true"
                                            ],
                                            "operation": {
                                                "code": "EQ"
                                            }
                                        },
                                        "calc_mode": "formula",
                                        "datasetId": "6"
                                    }
                                ],
                                "updates": [
                                    {
                                        "field": {
                                            "cast": "integer",
                                            "guid": "top_expenses",
                                            "type": "DIMENSION",
                                            "local": true,
                                            "title": "top_expenses",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "",
                                            "virtual": false,
                                            "calc_mode": "parameter",
                                            "data_type": "integer",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "",
                                            "default_value": 5,
                                            "autoaggregated": false,
                                            "lock_aggregation": false,
                                            "template_enabled": false,
                                            "initial_data_type": "integer",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": false
                                        },
                                        "action": "add_field"
                                    },
                                    {
                                        "field": {
                                            "cast": "float",
                                            "guid": "f1f248e0-ab31-11f0-bb9d-2dd9e3091d37",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Сумма продаж",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "SUM([total_price])",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "float",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "SUM([total_price_1u2g])",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "float",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "boolean",
                                            "guid": "d4d15b10-ab32-11f0-bb9d-2dd9e3091d37",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "ТОП",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "RANK_UNIQUE(SUM([total_price])) <= [top_expenses]",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "boolean",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "RANK_UNIQUE(SUM([total_price_1u2g])) <= [top_expenses]",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "boolean",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    }
                                ],
                                "version": "14",
                                "segments": [],
                                "tooltips": [],
                                "datasetsIds": [
                                    "6"
                                ],
                                "hierarchies": [],
                                "colorsConfig": {},
                                "shapesConfig": {},
                                "extraSettings": {
                                    "feed": "",
                                    "limit": 100,
                                    "title": "Новый чарт",
                                    "stacking": "on",
                                    "zoomMode": "auto",
                                    "titleMode": "hide",
                                    "legendMode": "show",
                                    "pagination": "on",
                                    "tooltipSum": "on",
                                    "mapCenterMode": "auto",
                                    "labelsPosition": "outside",
                                    "metricFontSize": "m",
                                    "metricFontColor": "#1F68A9",
                                    "pivotInlineSort": "on",
                                    "navigatorSettings": {
                                        "selectedLines": [],
                                        "isNavigatorAvailable": false
                                    },
                                    "indicatorTitleMode": "hide",
                                    "metricFontColorIndex": 10
                                },
                                "visualization": {
                                    "id": "flatTable",
                                    "name": "label_visualization-flat-table",
                                    "type": "table",
                                    "allowSort": true,
                                    "iconProps": {
                                        "id": "visFlatTable",
                                        "width": "24"
                                    },
                                    "allowColors": true,
                                    "allowFilters": true,
                                    "placeholders": [
                                        {
                                            "id": "flat-table-columns",
                                            "type": "flat-table-columns",
                                            "items": [
                                                {
                                                    "id": "dimension-20",
                                                    "cast": "integer",
                                                    "guid": "product_id_ey10",
                                                    "type": "DIMENSION",
                                                    "title": "product_id",
                                                    "valid": true,
                                                    "hidden": false,
                                                    "source": "product_id",
                                                    "formula": "",
                                                    "virtual": false,
                                                    "avatar_id": "e2af43f0-a920-11f0-9254-7577ead3d7d0",
                                                    "calc_mode": "direct",
                                                    "data_type": "integer",
                                                    "datasetId": "6",
                                                    "fakeTitle": "Товар",
                                                    "formatting": {
                                                        "format": "number",
                                                        "prefix": "",
                                                        "postfix": "",
                                                        "labelMode": "absolute",
                                                        "precision": 0,
                                                        "showRankDelimiter": true
                                                    },
                                                    "managed_by": "user",
                                                    "aggregation": "none",
                                                    "datasetName": "Данные о продажах",
                                                    "description": "",
                                                    "ui_settings": "",
                                                    "guid_formula": "",
                                                    "default_value": null,
                                                    "hideLabelMode": "show",
                                                    "autoaggregated": false,
                                                    "lock_aggregation": false,
                                                    "value_constraint": null,
                                                    "initial_data_type": "integer",
                                                    "aggregation_locked": false,
                                                    "backgroundSettings": {
                                                        "enabled": false,
                                                        "settings": {
                                                            "isContinuous": false,
                                                            "paletteState": {
                                                                "palette": "",
                                                                "mountedColors": {}
                                                            },
                                                            "gradientState": {}
                                                        },
                                                        "settingsId": "fc756570-ab79-11f0-88f1-57c339402fe7",
                                                        "colorFieldGuid": "product_id_ey10"
                                                    },
                                                    "has_auto_aggregation": false
                                                },
                                                {
                                                    "id": "measure-1",
                                                    "cast": "float",
                                                    "guid": "f1f248e0-ab31-11f0-bb9d-2dd9e3091d37",
                                                    "type": "MEASURE",
                                                    "local": true,
                                                    "title": "Сумма продаж",
                                                    "valid": true,
                                                    "hidden": false,
                                                    "source": "",
                                                    "formula": "SUM([total_price])",
                                                    "virtual": false,
                                                    "avatar_id": null,
                                                    "calc_mode": "formula",
                                                    "data_type": "float",
                                                    "datasetId": "6",
                                                    "formatting": {
                                                        "format": "number",
                                                        "prefix": "",
                                                        "postfix": "",
                                                        "labelMode": "absolute",
                                                        "precision": 0,
                                                        "showRankDelimiter": true
                                                    },
                                                    "managed_by": "user",
                                                    "aggregation": "none",
                                                    "datasetName": "Данные о продажах",
                                                    "description": "",
                                                    "ui_settings": "",
                                                    "barsSettings": {
                                                        "align": "default",
                                                        "scale": {
                                                            "mode": "auto"
                                                        },
                                                        "enabled": true,
                                                        "showLabels": true,
                                                        "colorSettings": {
                                                            "settings": {
                                                                "color": "#0FA08D",
                                                                "palette": "classic20",
                                                                "colorIndex": 12
                                                            },
                                                            "colorType": "one-color"
                                                        },
                                                        "showBarsInTotals": false
                                                    },
                                                    "guid_formula": "SUM([total_price_1u2g])",
                                                    "default_value": null,
                                                    "hideLabelMode": "show",
                                                    "autoaggregated": true,
                                                    "lock_aggregation": false,
                                                    "value_constraint": null,
                                                    "initial_data_type": "float",
                                                    "aggregation_locked": true,
                                                    "backgroundSettings": {
                                                        "enabled": false,
                                                        "settings": {
                                                            "isContinuous": true,
                                                            "paletteState": {},
                                                            "gradientState": {
                                                                "reversed": false,
                                                                "gradientMode": "2-point",
                                                                "thresholdsMode": "auto",
                                                                "gradientPalette": "blue"
                                                            }
                                                        },
                                                        "settingsId": "ca115260-ab33-11f0-82d1-ad30b3f96ad7",
                                                        "colorFieldGuid": "f1f248e0-ab31-11f0-bb9d-2dd9e3091d37"
                                                    },
                                                    "has_auto_aggregation": true
                                                }
                                            ],
                                            "title": "section_columns",
                                            "required": true,
                                            "settings": {
                                                "groupping": "on"
                                            },
                                            "iconProps": {},
                                            "allowedTypes": {}
                                        }
                                    ],
                                    "allowLayerFilters": false
                                },
                                "geopointsConfig": {},
                                "datasetsPartialFields": [
                                    [
                                        {
                                            "guid": "d4d15b10-ab32-11f0-bb9d-2dd9e3091d37",
                                            "title": "ТОП",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "f1f248e0-ab31-11f0-bb9d-2dd9e3091d37",
                                            "title": "Сумма продаж",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "top_expenses",
                                            "title": "top_expenses",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "95f17b60-ab36-11f0-a2f4-fdfba76f64b3",
                                            "title": "Номер покупки",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "e3a1cfe0-aa55-11f0-8395-f32b2462dd84",
                                            "title": "Фильтр даты",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "end_date",
                                            "title": "end_date",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "start_date",
                                            "title": "start_date",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "f828f540-a935-11f0-976d-099c0b05b9ec",
                                            "title": "%_discount",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "584ad600-a92c-11f0-976d-099c0b05b9ec",
                                            "title": "scale_value",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "8125b920-ab28-11f0-bffa-65bc24252e3e",
                                            "title": "scale_value_sparkline",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "scale",
                                            "title": "scale",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "660eb030-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_month",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "d02fc430-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_week",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "1cf44850-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_hour",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "3352b650-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_quarter",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "268ce800-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_year",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "087e5b50-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_date",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "id_scne",
                                            "title": "id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "client_id_lbc6",
                                            "title": "client_id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "gender_fzxw",
                                            "title": "gender",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "product_id_ey10",
                                            "title": "product_id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "quantity_k4iu",
                                            "title": "quantity",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "price_per_item_3dwq",
                                            "title": "price_per_item",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "discount_per_item_7maq",
                                            "title": "discount_per_item",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "total_price_1u2g",
                                            "title": "total_price",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "purchase_datetime_pvoa",
                                            "title": "purchase_datetime",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "461ec3e0-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_datedate",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "created_at_s6qq",
                                            "title": "created_at",
                                            "calc_mode": "direct"
                                        }
                                    ]
                                ]
                            }
                        },
                        "name": "Анализ товаров и ассортимента - Таблица. Топ товаров по сумме продаж",
                        "type": "table_wizard_node",
                        "annotation": {
                            "description": ""
                        }
                    }
                },
                "53": {
                    "widget": {
                        "data": {
                            "shared": {
                                "sort": [],
                                "type": "datalens",
                                "links": [],
                                "colors": [],
                                "labels": [],
                                "shapes": [],
                                "filters": [],
                                "updates": [
                                    {
                                        "field": {
                                            "cast": "integer",
                                            "guid": "0dcb3a50-aa55-11f0-8c7c-59e14d3324ab",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Кол-во за последнюю неделю",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "SUM_IF([quantity], [purchase_datedate] > DATEADD([end_date], 'week', -1) AND [purchase_datedate] <= [end_date])",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "integer",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "SUM_IF([quantity_k4iu], [461ec3e0-a929-11f0-976d-099c0b05b9ec] > DATEADD([end_date], 'week', -1) AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= [end_date])",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "integer",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "string",
                                            "guid": "a5f6be50-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Кол-во за последнюю неделю (текст)",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "STR(ROUND([Кол-во за последнюю неделю]/1000)) + \"K\"",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "string",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "STR(ROUND([0dcb3a50-aa55-11f0-8c7c-59e14d3324ab]/1000)) + \"K\"",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "string",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "integer",
                                            "guid": "da27cc00-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Кол-во за предпоследнюю неделю",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "SUM_IF([quantity], [purchase_datedate] > DATEADD([end_date], 'week', -2) AND [purchase_datedate] <= DATEADD([end_date], 'week', -1)) ",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "integer",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "SUM_IF([quantity_k4iu], [461ec3e0-a929-11f0-976d-099c0b05b9ec] > DATEADD([end_date], 'week', -2) AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= DATEADD([end_date], 'week', -1)) ",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "integer",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "string",
                                            "guid": "f0591a10-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Кол-во за предпоследнюю неделю (текст)",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "STR(ROUND([Кол-во за предпоследнюю неделю]/1000)) + \"K\"",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "string",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "STR(ROUND([da27cc00-aa67-11f0-8ec6-3da0d05fc0c9]/1000)) + \"K\"",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "string",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "float",
                                            "guid": "2beb7fa0-aa68-11f0-8ec6-3da0d05fc0c9",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Кол-во неделя изменения",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "ROUND(([Кол-во за последнюю неделю]-[Кол-во за предпоследнюю неделю]) / [Кол-во за предпоследнюю неделю] * 10000) / 100",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "float",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "ROUND(([0dcb3a50-aa55-11f0-8c7c-59e14d3324ab]-[da27cc00-aa67-11f0-8ec6-3da0d05fc0c9]) / [da27cc00-aa67-11f0-8ec6-3da0d05fc0c9] * 10000) / 100",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "float",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "integer",
                                            "guid": "40962a80-aa64-11f0-956d-c14801191fc6",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Кол-во с начала недели",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "SUM_IF([quantity], [purchase_datedate] >= DATETRUNC([end_date], 'week') AND [purchase_datedate] <= [end_date])",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "integer",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "SUM_IF([quantity_k4iu], [461ec3e0-a929-11f0-976d-099c0b05b9ec] >= DATETRUNC([end_date], 'week') AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= [end_date])",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "integer",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "string",
                                            "guid": "c2566280-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Кол-во с начала недели (текст)",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "STR(ROUND([Кол-во с начала недели]/1000)) + \"K\"",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "string",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "STR(ROUND([40962a80-aa64-11f0-956d-c14801191fc6]/1000)) + \"K\"",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "string",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "float",
                                            "guid": "31eb5640-aa69-11f0-8ec6-3da0d05fc0c9",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Кол-во с начала недели процент",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "ROUND([Кол-во с начала недели] / [Кол-во за последнюю неделю] * 10000) / 100",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "float",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "ROUND([40962a80-aa64-11f0-956d-c14801191fc6] / [0dcb3a50-aa55-11f0-8c7c-59e14d3324ab] * 10000) / 100",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "float",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "markup",
                                            "guid": "7dac49e0-aa64-11f0-956d-c14801191fc6",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "ТЕКСТ",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "'Кол-во товара последнюю неделю: ' + BR() +\r\nSIZE(COLOR(BOLD([Кол-во за последнюю неделю (текст)]), '#70C1AF'), '24px') + ' ' + \r\n    TOOLTIP(\r\n        IF [Кол-во неделя изменения] > 0 THEN COLOR('▲' + STR([Кол-во неделя изменения]) +'%', '#54A520')\r\n        ELSE COLOR('▼' + STR([Кол-во неделя изменения]) +'%', '#BE2443') END,\r\n        'Относительно предыдущей недели')\r\n+ BR() + BR() +\r\n'Кол-во товара с начала недели: ' \r\n+ BR() +\r\nSIZE(COLOR(BOLD([Кол-во с начала недели (текст)]), '#70C1AF'), '24px') + ' ' +\r\n    TOOLTIP(\r\n        IF [Кол-во с начала недели процент] < 100 THEN COLOR(STR([Кол-во с начала недели процент]) + '%', '#BE2443')\r\n        ELSE COLOR(STR([Кол-во с начала недели процент]) + '%', '#54A520') END,\r\n        'Доля от последней полной недели')",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "markup",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "'Кол-во товара последнюю неделю: ' + BR() +\r\nSIZE(COLOR(BOLD([a5f6be50-aa67-11f0-8ec6-3da0d05fc0c9]), '#70C1AF'), '24px') + ' ' + \r\n    TOOLTIP(\r\n        IF [2beb7fa0-aa68-11f0-8ec6-3da0d05fc0c9] > 0 THEN COLOR('▲' + STR([2beb7fa0-aa68-11f0-8ec6-3da0d05fc0c9]) +'%', '#54A520')\r\n        ELSE COLOR('▼' + STR([2beb7fa0-aa68-11f0-8ec6-3da0d05fc0c9]) +'%', '#BE2443') END,\r\n        'Относительно предыдущей недели')\r\n+ BR() + BR() +\r\n'Кол-во товара с начала недели: ' \r\n+ BR() +\r\nSIZE(COLOR(BOLD([c2566280-aa67-11f0-8ec6-3da0d05fc0c9]), '#70C1AF'), '24px') + ' ' +\r\n    TOOLTIP(\r\n        IF [31eb5640-aa69-11f0-8ec6-3da0d05fc0c9] < 100 THEN COLOR(STR([31eb5640-aa69-11f0-8ec6-3da0d05fc0c9]) + '%', '#BE2443')\r\n        ELSE COLOR(STR([31eb5640-aa69-11f0-8ec6-3da0d05fc0c9]) + '%', '#54A520') END,\r\n        'Доля от последней полной недели')",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "markup",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    }
                                ],
                                "version": "14",
                                "segments": [],
                                "tooltips": [],
                                "datasetsIds": [
                                    "6"
                                ],
                                "hierarchies": [],
                                "colorsConfig": {},
                                "shapesConfig": {},
                                "extraSettings": {
                                    "feed": "",
                                    "title": "Общие продажи и тренды - KPI. Общая выручка",
                                    "stacking": "on",
                                    "zoomMode": "auto",
                                    "titleMode": "hide",
                                    "legendMode": "show",
                                    "tooltipSum": "on",
                                    "mapCenterMode": "auto",
                                    "metricFontSize": "m",
                                    "metricFontColor": "#0FA08D",
                                    "pivotInlineSort": "on",
                                    "navigatorSettings": {
                                        "selectedLines": [],
                                        "isNavigatorAvailable": false
                                    },
                                    "indicatorTitleMode": "hide",
                                    "metricFontColorIndex": 12
                                },
                                "visualization": {
                                    "id": "metric",
                                    "name": "label_visualization-metric",
                                    "type": "metric",
                                    "allowSort": false,
                                    "iconProps": {
                                        "id": "visMetric",
                                        "width": "24"
                                    },
                                    "allowLabels": false,
                                    "allowFilters": true,
                                    "placeholders": [
                                        {
                                            "id": "measures",
                                            "type": "measures",
                                            "items": [
                                                {
                                                    "id": "measure-0",
                                                    "cast": "markup",
                                                    "guid": "7dac49e0-aa64-11f0-956d-c14801191fc6",
                                                    "type": "MEASURE",
                                                    "local": true,
                                                    "title": "ТЕКСТ",
                                                    "valid": true,
                                                    "hidden": false,
                                                    "source": "",
                                                    "formula": "'Кол-во товара последнюю неделю: ' + BR() +\r\nSIZE(COLOR(BOLD([Кол-во за последнюю неделю (текст)]), '#70C1AF'), '24px') + ' ' + \r\n    TOOLTIP(\r\n        IF [Кол-во неделя изменения] > 0 THEN COLOR('▲' + STR([Кол-во неделя изменения]) +'%', '#54A520')\r\n        ELSE COLOR('▼' + STR([Кол-во неделя изменения]) +'%', '#BE2443') END,\r\n        'Относительно предыдущей недели')\r\n+ BR() + BR() +\r\n'Кол-во товара с начала недели: ' \r\n+ BR() +\r\nSIZE(COLOR(BOLD([Кол-во с начала недели (текст)]), '#70C1AF'), '24px') + ' ' +\r\n    TOOLTIP(\r\n        IF [Кол-во с начала недели процент] < 100 THEN COLOR(STR([Кол-во с начала недели процент]) + '%', '#BE2443')\r\n        ELSE COLOR(STR([Кол-во с начала недели процент]) + '%', '#54A520') END,\r\n        'Доля от последней полной недели')",
                                                    "virtual": false,
                                                    "avatar_id": null,
                                                    "calc_mode": "formula",
                                                    "data_type": "markup",
                                                    "datasetId": "6",
                                                    "managed_by": "user",
                                                    "aggregation": "none",
                                                    "datasetName": "Данные о продажах",
                                                    "description": "",
                                                    "ui_settings": "",
                                                    "guid_formula": "'Кол-во товара последнюю неделю: ' + BR() +\r\nSIZE(COLOR(BOLD([a5f6be50-aa67-11f0-8ec6-3da0d05fc0c9]), '#70C1AF'), '24px') + ' ' + \r\n    TOOLTIP(\r\n        IF [2beb7fa0-aa68-11f0-8ec6-3da0d05fc0c9] > 0 THEN COLOR('▲' + STR([2beb7fa0-aa68-11f0-8ec6-3da0d05fc0c9]) +'%', '#54A520')\r\n        ELSE COLOR('▼' + STR([2beb7fa0-aa68-11f0-8ec6-3da0d05fc0c9]) +'%', '#BE2443') END,\r\n        'Относительно предыдущей недели')\r\n+ BR() + BR() +\r\n'Кол-во товара с начала недели: ' \r\n+ BR() +\r\nSIZE(COLOR(BOLD([c2566280-aa67-11f0-8ec6-3da0d05fc0c9]), '#70C1AF'), '24px') + ' ' +\r\n    TOOLTIP(\r\n        IF [31eb5640-aa69-11f0-8ec6-3da0d05fc0c9] < 100 THEN COLOR(STR([31eb5640-aa69-11f0-8ec6-3da0d05fc0c9]) + '%', '#BE2443')\r\n        ELSE COLOR(STR([31eb5640-aa69-11f0-8ec6-3da0d05fc0c9]) + '%', '#54A520') END,\r\n        'Доля от последней полной недели')",
                                                    "default_value": null,
                                                    "autoaggregated": true,
                                                    "lock_aggregation": false,
                                                    "value_constraint": null,
                                                    "initial_data_type": "markup",
                                                    "aggregation_locked": true,
                                                    "has_auto_aggregation": true
                                                }
                                            ],
                                            "title": "section_measure",
                                            "capacity": 1,
                                            "required": true,
                                            "settings": {},
                                            "iconProps": {},
                                            "allowedTypes": {},
                                            "allowedDataTypes": {},
                                            "allowedFinalTypes": {}
                                        }
                                    ],
                                    "allowLayerFilters": false
                                },
                                "geopointsConfig": {},
                                "datasetsPartialFields": [
                                    [
                                        {
                                            "guid": "7dac49e0-aa64-11f0-956d-c14801191fc6",
                                            "title": "ТЕКСТ",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "31eb5640-aa69-11f0-8ec6-3da0d05fc0c9",
                                            "title": "Кол-во с начала недели процент",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "c2566280-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "title": "Кол-во с начала недели (текст)",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "40962a80-aa64-11f0-956d-c14801191fc6",
                                            "title": "Кол-во с начала недели",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "2beb7fa0-aa68-11f0-8ec6-3da0d05fc0c9",
                                            "title": "Кол-во неделя изменения",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "f0591a10-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "title": "Кол-во за предпоследнюю неделю (текст)",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "da27cc00-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "title": "Кол-во за предпоследнюю неделю",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "a5f6be50-aa67-11f0-8ec6-3da0d05fc0c9",
                                            "title": "Кол-во за последнюю неделю (текст)",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "0dcb3a50-aa55-11f0-8c7c-59e14d3324ab",
                                            "title": "Кол-во за последнюю неделю",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "e3a1cfe0-aa55-11f0-8395-f32b2462dd84",
                                            "title": "Фильтр даты",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "end_date",
                                            "title": "end_date",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "start_date",
                                            "title": "start_date",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "f828f540-a935-11f0-976d-099c0b05b9ec",
                                            "title": "%_discount",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "584ad600-a92c-11f0-976d-099c0b05b9ec",
                                            "title": "scale_value",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "scale",
                                            "title": "scale",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "660eb030-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_month",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "d02fc430-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_week",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "1cf44850-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_hour",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "3352b650-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_quarter",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "268ce800-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_year",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "087e5b50-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_date",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "id_scne",
                                            "title": "id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "client_id_lbc6",
                                            "title": "client_id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "gender_fzxw",
                                            "title": "gender",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "product_id_ey10",
                                            "title": "product_id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "quantity_k4iu",
                                            "title": "quantity",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "price_per_item_3dwq",
                                            "title": "price_per_item",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "discount_per_item_7maq",
                                            "title": "discount_per_item",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "total_price_1u2g",
                                            "title": "total_price",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "purchase_datetime_pvoa",
                                            "title": "purchase_datetime",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "461ec3e0-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_datedate",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "created_at_s6qq",
                                            "title": "created_at",
                                            "calc_mode": "direct"
                                        }
                                    ]
                                ]
                            }
                        },
                        "name": "Общие продажи и тренды - KPI. Количество товара (Неделя)",
                        "type": "markup_wizard_node",
                        "annotation": {
                            "description": ""
                        }
                    }
                },
                "54": {
                    "widget": {
                        "data": {
                            "shared": {
                                "sort": [],
                                "type": "datalens",
                                "links": [],
                                "colors": [],
                                "labels": [],
                                "shapes": [],
                                "filters": [],
                                "updates": [
                                    {
                                        "field": {
                                            "cast": "integer",
                                            "guid": "0dcb3a50-aa55-11f0-8c7c-59e14d3324ab",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Всего товаров в ассортименте",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "COUNTD_IF([product_id], [purchase_datetime] >= [start_date] AND [purchase_datedate] <= [end_date])",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "integer",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "COUNTD_IF([product_id_ey10], [purchase_datetime_pvoa] >= [start_date] AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= [end_date])",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "integer",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    }
                                ],
                                "version": "14",
                                "segments": [],
                                "tooltips": [],
                                "datasetsIds": [
                                    "6"
                                ],
                                "hierarchies": [],
                                "colorsConfig": {},
                                "shapesConfig": {},
                                "extraSettings": {
                                    "feed": "",
                                    "title": "Общие продажи и тренды - KPI. Общая выручка",
                                    "stacking": "on",
                                    "zoomMode": "auto",
                                    "titleMode": "hide",
                                    "legendMode": "show",
                                    "tooltipSum": "on",
                                    "mapCenterMode": "auto",
                                    "metricFontSize": "m",
                                    "metricFontColor": "#FF7E00",
                                    "pivotInlineSort": "on",
                                    "navigatorSettings": {
                                        "selectedLines": [],
                                        "isNavigatorAvailable": false
                                    },
                                    "indicatorTitleMode": "hide",
                                    "metricFontColorIndex": 13,
                                    "metricFontColorPalette": "datalens-neo-20"
                                },
                                "visualization": {
                                    "id": "metric",
                                    "name": "label_visualization-metric",
                                    "type": "metric",
                                    "allowSort": false,
                                    "iconProps": {
                                        "id": "visMetric",
                                        "width": "24"
                                    },
                                    "allowLabels": false,
                                    "allowFilters": true,
                                    "placeholders": [
                                        {
                                            "id": "measures",
                                            "type": "measures",
                                            "items": [
                                                {
                                                    "id": "measure-0",
                                                    "cast": "integer",
                                                    "guid": "0dcb3a50-aa55-11f0-8c7c-59e14d3324ab",
                                                    "type": "MEASURE",
                                                    "local": true,
                                                    "title": "Всего товаров в ассортименте",
                                                    "valid": true,
                                                    "hidden": false,
                                                    "source": "",
                                                    "formula": "COUNTD_IF([product_id], [purchase_datetime] >= [start_date] AND [purchase_datedate] <= [end_date])",
                                                    "virtual": false,
                                                    "grouping": "",
                                                    "avatar_id": null,
                                                    "calc_mode": "formula",
                                                    "data_type": "integer",
                                                    "datasetId": "6",
                                                    "formatting": {
                                                        "format": "number",
                                                        "prefix": "",
                                                        "postfix": "",
                                                        "labelMode": "absolute",
                                                        "precision": 0,
                                                        "showRankDelimiter": true
                                                    },
                                                    "managed_by": "user",
                                                    "aggregation": "none",
                                                    "datasetName": "Данные о продажах",
                                                    "description": "",
                                                    "ui_settings": "",
                                                    "guid_formula": "COUNTD_IF([product_id_ey10], [purchase_datetime_pvoa] >= [start_date] AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= [end_date])",
                                                    "default_value": null,
                                                    "hideLabelMode": "show",
                                                    "originalTitle": "total_price",
                                                    "autoaggregated": true,
                                                    "lock_aggregation": false,
                                                    "value_constraint": null,
                                                    "initial_data_type": "integer",
                                                    "aggregation_locked": true,
                                                    "has_auto_aggregation": true
                                                }
                                            ],
                                            "title": "section_measure",
                                            "capacity": 1,
                                            "required": true,
                                            "settings": {
                                                "axisModeMap": {
                                                    "0dcb3a50-aa55-11f0-8c7c-59e14d3324ab": "continuous"
                                                }
                                            },
                                            "iconProps": {},
                                            "allowedTypes": {},
                                            "allowedDataTypes": {},
                                            "allowedFinalTypes": {}
                                        }
                                    ],
                                    "allowLayerFilters": false
                                },
                                "geopointsConfig": {},
                                "datasetsPartialFields": [
                                    [
                                        {
                                            "guid": "0dcb3a50-aa55-11f0-8c7c-59e14d3324ab",
                                            "title": "Всего товаров в ассортименте",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "95f17b60-ab36-11f0-a2f4-fdfba76f64b3",
                                            "title": "Номер покупки",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "e3a1cfe0-aa55-11f0-8395-f32b2462dd84",
                                            "title": "Фильтр даты",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "end_date",
                                            "title": "end_date",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "start_date",
                                            "title": "start_date",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "f828f540-a935-11f0-976d-099c0b05b9ec",
                                            "title": "%_discount",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "584ad600-a92c-11f0-976d-099c0b05b9ec",
                                            "title": "scale_value",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "8125b920-ab28-11f0-bffa-65bc24252e3e",
                                            "title": "scale_value_sparkline",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "scale",
                                            "title": "scale",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "660eb030-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_month",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "d02fc430-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_week",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "1cf44850-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_hour",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "3352b650-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_quarter",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "268ce800-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_year",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "087e5b50-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_date",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "id_scne",
                                            "title": "id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "client_id_lbc6",
                                            "title": "client_id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "gender_fzxw",
                                            "title": "gender",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "product_id_ey10",
                                            "title": "product_id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "quantity_k4iu",
                                            "title": "quantity",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "price_per_item_3dwq",
                                            "title": "price_per_item",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "discount_per_item_7maq",
                                            "title": "discount_per_item",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "total_price_1u2g",
                                            "title": "total_price",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "purchase_datetime_pvoa",
                                            "title": "purchase_datetime",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "461ec3e0-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_datedate",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "created_at_s6qq",
                                            "title": "created_at",
                                            "calc_mode": "direct"
                                        }
                                    ]
                                ]
                            }
                        },
                        "name": "Анализ товаров и ассортимента - KPI. Ассортимент товаров",
                        "type": "metric_wizard_node",
                        "annotation": {
                            "description": ""
                        }
                    }
                },
                "55": {
                    "widget": {
                        "data": {
                            "shared": {
                                "sort": [
                                    {
                                        "guid": "17af9b70-ab85-11f0-abd2-01b912c09715",
                                        "type": "MEASURE",
                                        "title": "abc-xyz",
                                        "source": "",
                                        "data_type": "markup",
                                        "datasetId": "51",
                                        "direction": "ASC"
                                    },
                                    {
                                        "guid": "6d3320c0-ab86-11f0-aec5-e7a1aadce905",
                                        "type": "MEASURE",
                                        "title": "min_abc_revenue",
                                        "source": "",
                                        "data_type": "markup",
                                        "datasetId": "51",
                                        "direction": "DESC"
                                    },
                                    {
                                        "guid": "4d775940-ab86-11f0-9539-af6f4b089e91",
                                        "type": "MEASURE",
                                        "title": "min_abc_quantity",
                                        "source": "",
                                        "data_type": "markup",
                                        "datasetId": "51",
                                        "direction": "DESC"
                                    }
                                ],
                                "type": "datalens",
                                "links": [],
                                "colors": [],
                                "labels": [],
                                "shapes": [],
                                "filters": [],
                                "updates": [
                                    {
                                        "field": {
                                            "cast": "markup",
                                            "guid": "4d775940-ab86-11f0-9539-af6f4b089e91",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "min_abc_quantity",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "IF MIN([abc_quantity]) = 'A' THEN COLOR(MIN([abc_quantity]), '#0FA08D')\r\nELSEIF MIN([abc_quantity]) = 'B' THEN COLOR(MIN([abc_quantity]), '#FFB46C')\r\nELSE COLOR(MIN([abc_quantity]), '#BE2443') END",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "markup",
                                            "datasetId": "51",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "IF MIN([abc_quantity_0cay]) = 'A' THEN COLOR(MIN([abc_quantity_0cay]), '#0FA08D')\r\nELSEIF MIN([abc_quantity_0cay]) = 'B' THEN COLOR(MIN([abc_quantity_0cay]), '#FFB46C')\r\nELSE COLOR(MIN([abc_quantity_0cay]), '#BE2443') END",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "markup",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "markup",
                                            "guid": "6d3320c0-ab86-11f0-aec5-e7a1aadce905",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "min_abc_revenue",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "IF MIN([abc_total_price]) = 'A' THEN COLOR(MIN([abc_total_price]), '#0FA08D')\r\nELSEIF MIN([abc_total_price]) = 'B' THEN COLOR(MIN([abc_total_price]), '#FFB46C')\r\nELSE COLOR(MIN([abc_total_price]), '#BE2443') END\r\n",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "markup",
                                            "datasetId": "51",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "IF MIN([abc_total_price_jf5b]) = 'A' THEN COLOR(MIN([abc_total_price_jf5b]), '#0FA08D')\r\nELSEIF MIN([abc_total_price_jf5b]) = 'B' THEN COLOR(MIN([abc_total_price_jf5b]), '#FFB46C')\r\nELSE COLOR(MIN([abc_total_price_jf5b]), '#BE2443') END\r\n",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "markup",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "markup",
                                            "guid": "47464710-ad12-11f0-a3c0-dfd7aa61c337",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "XYZ",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "IF MIN([xyz_category]) = 'X' THEN COLOR(MIN([xyz_category]), '#0FA08D')\r\nELSEIF MIN([xyz_category]) = 'Y' THEN COLOR(MIN([xyz_category]), '#FFB46C')\r\nELSE COLOR(MIN([xyz_category]), '#BE2443') END",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "markup",
                                            "datasetId": "51",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "IF MIN([xyz_category_ek3j]) = 'X' THEN COLOR(MIN([xyz_category_ek3j]), '#0FA08D')\r\nELSEIF MIN([xyz_category_ek3j]) = 'Y' THEN COLOR(MIN([xyz_category_ek3j]), '#FFB46C')\r\nELSE COLOR(MIN([xyz_category_ek3j]), '#BE2443') END",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "markup",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field"
                                    },
                                    {
                                        "field": {
                                            "cast": "markup",
                                            "guid": "17af9b70-ab85-11f0-abd2-01b912c09715",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "abc-xyz",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "[min_abc_quantity] + [min_abc_revenue] + [XYZ]",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "markup",
                                            "datasetId": "51",
                                            "fakeTitle": "ABC",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "[4d775940-ab86-11f0-9539-af6f4b089e91] + [6d3320c0-ab86-11f0-aec5-e7a1aadce905] + [47464710-ad12-11f0-a3c0-dfd7aa61c337]",
                                            "autoaggregated": true,
                                            "columnSettings": {
                                                "width": {
                                                    "mode": "percent",
                                                    "value": "10"
                                                }
                                            },
                                            "lock_aggregation": false,
                                            "initial_data_type": "markup",
                                            "aggregation_locked": true,
                                            "backgroundSettings": {
                                                "enabled": false,
                                                "settings": {
                                                    "isContinuous": true,
                                                    "paletteState": {},
                                                    "gradientState": {
                                                        "reversed": false,
                                                        "gradientMode": "2-point",
                                                        "thresholdsMode": "auto",
                                                        "gradientPalette": "blue"
                                                    }
                                                },
                                                "settingsId": "d1d30400-ab86-11f0-aec5-e7a1aadce905",
                                                "colorFieldGuid": "17af9b70-ab85-11f0-abd2-01b912c09715"
                                            },
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    }
                                ],
                                "version": "14",
                                "segments": [],
                                "tooltips": [],
                                "datasetsIds": [
                                    "51"
                                ],
                                "hierarchies": [],
                                "colorsConfig": {},
                                "shapesConfig": {},
                                "extraSettings": {
                                    "feed": "",
                                    "limit": 100,
                                    "title": "ABC-анализ — Таблица",
                                    "totals": "off",
                                    "stacking": "on",
                                    "zoomMode": "auto",
                                    "titleMode": "hide",
                                    "legendMode": "show",
                                    "pagination": "on",
                                    "tooltipSum": "on",
                                    "mapCenterMode": "auto",
                                    "pivotFallback": "off",
                                    "pivotInlineSort": "on",
                                    "navigatorSettings": {
                                        "selectedLines": [],
                                        "isNavigatorAvailable": false
                                    },
                                    "indicatorTitleMode": "by-field"
                                },
                                "visualization": {
                                    "id": "flatTable",
                                    "name": "label_visualization-flat-table",
                                    "type": "table",
                                    "allowSort": true,
                                    "iconProps": {
                                        "id": "visFlatTable",
                                        "width": "24"
                                    },
                                    "allowColors": true,
                                    "allowFilters": true,
                                    "placeholders": [
                                        {
                                            "id": "flat-table-columns",
                                            "type": "flat-table-columns",
                                            "items": [
                                                {
                                                    "id": "dimension-8",
                                                    "cast": "integer",
                                                    "guid": "product_id_14n5",
                                                    "type": "DIMENSION",
                                                    "title": "product_id",
                                                    "valid": true,
                                                    "hidden": false,
                                                    "source": "product_id",
                                                    "formula": "",
                                                    "virtual": false,
                                                    "avatar_id": "5595f890-ab84-11f0-a2ee-cd085a2dd49b",
                                                    "calc_mode": "direct",
                                                    "data_type": "integer",
                                                    "datasetId": "51",
                                                    "fakeTitle": "Товар",
                                                    "formatting": {
                                                        "format": "number",
                                                        "prefix": "",
                                                        "postfix": "",
                                                        "labelMode": "absolute",
                                                        "precision": 0,
                                                        "showRankDelimiter": true
                                                    },
                                                    "managed_by": "user",
                                                    "aggregation": "none",
                                                    "datasetName": "ABC-анализ",
                                                    "description": "",
                                                    "ui_settings": "",
                                                    "guid_formula": "",
                                                    "default_value": null,
                                                    "hideLabelMode": "show",
                                                    "autoaggregated": false,
                                                    "columnSettings": {},
                                                    "lock_aggregation": false,
                                                    "value_constraint": null,
                                                    "initial_data_type": "integer",
                                                    "aggregation_locked": false,
                                                    "backgroundSettings": {
                                                        "enabled": false,
                                                        "settings": {
                                                            "isContinuous": false,
                                                            "paletteState": {
                                                                "palette": "",
                                                                "mountedColors": {}
                                                            },
                                                            "gradientState": {}
                                                        },
                                                        "settingsId": "b4f38170-ab86-11f0-aec5-e7a1aadce905",
                                                        "colorFieldGuid": "product_id_14n5"
                                                    },
                                                    "has_auto_aggregation": false
                                                },
                                                {
                                                    "id": "measure-9",
                                                    "cast": "float",
                                                    "guid": "total_quantity_v9zr",
                                                    "type": "MEASURE",
                                                    "title": "total_quantity",
                                                    "valid": true,
                                                    "hidden": false,
                                                    "source": "total_quantity",
                                                    "formula": "",
                                                    "virtual": false,
                                                    "avatar_id": "5595f890-ab84-11f0-a2ee-cd085a2dd49b",
                                                    "calc_mode": "direct",
                                                    "data_type": "float",
                                                    "datasetId": "51",
                                                    "fakeTitle": "Количество",
                                                    "formatting": {
                                                        "format": "number",
                                                        "prefix": "",
                                                        "postfix": "",
                                                        "labelMode": "absolute",
                                                        "precision": 0,
                                                        "showRankDelimiter": true
                                                    },
                                                    "managed_by": "user",
                                                    "aggregation": "sum",
                                                    "datasetName": "ABC-анализ",
                                                    "description": "",
                                                    "ui_settings": "",
                                                    "barsSettings": {
                                                        "align": "default",
                                                        "scale": {
                                                            "mode": "auto"
                                                        },
                                                        "enabled": false,
                                                        "showLabels": true,
                                                        "colorSettings": {
                                                            "settings": {
                                                                "negativeColorIndex": 1,
                                                                "positiveColorIndex": 2
                                                            },
                                                            "colorType": "two-color"
                                                        },
                                                        "showBarsInTotals": false
                                                    },
                                                    "guid_formula": "",
                                                    "default_value": null,
                                                    "hideLabelMode": "show",
                                                    "autoaggregated": false,
                                                    "columnSettings": {},
                                                    "lock_aggregation": false,
                                                    "value_constraint": null,
                                                    "initial_data_type": "float",
                                                    "aggregation_locked": false,
                                                    "backgroundSettings": {
                                                        "enabled": false,
                                                        "settings": {
                                                            "isContinuous": true,
                                                            "paletteState": {},
                                                            "gradientState": {
                                                                "reversed": false,
                                                                "gradientMode": "2-point",
                                                                "thresholdsMode": "auto",
                                                                "gradientPalette": "blue"
                                                            }
                                                        },
                                                        "settingsId": "ba6e17f0-ab86-11f0-aec5-e7a1aadce905",
                                                        "colorFieldGuid": "total_quantity_v9zr"
                                                    },
                                                    "has_auto_aggregation": false
                                                },
                                                {
                                                    "id": "measure-10",
                                                    "cast": "float",
                                                    "guid": "total_revenue_0izo",
                                                    "type": "MEASURE",
                                                    "title": "total_revenue",
                                                    "valid": true,
                                                    "hidden": false,
                                                    "source": "total_revenue",
                                                    "formula": "",
                                                    "virtual": false,
                                                    "avatar_id": "5595f890-ab84-11f0-a2ee-cd085a2dd49b",
                                                    "calc_mode": "direct",
                                                    "data_type": "float",
                                                    "datasetId": "51",
                                                    "fakeTitle": "Выручка",
                                                    "formatting": {
                                                        "format": "number",
                                                        "prefix": "",
                                                        "postfix": "",
                                                        "labelMode": "absolute",
                                                        "precision": 2,
                                                        "showRankDelimiter": true
                                                    },
                                                    "managed_by": "user",
                                                    "aggregation": "sum",
                                                    "datasetName": "ABC-анализ",
                                                    "description": "",
                                                    "ui_settings": "",
                                                    "barsSettings": {
                                                        "align": "default",
                                                        "scale": {
                                                            "mode": "auto"
                                                        },
                                                        "enabled": false,
                                                        "showLabels": true,
                                                        "colorSettings": {
                                                            "settings": {
                                                                "negativeColorIndex": 1,
                                                                "positiveColorIndex": 2
                                                            },
                                                            "colorType": "two-color"
                                                        },
                                                        "showBarsInTotals": false
                                                    },
                                                    "guid_formula": "",
                                                    "default_value": null,
                                                    "hideLabelMode": "show",
                                                    "autoaggregated": false,
                                                    "columnSettings": {},
                                                    "lock_aggregation": false,
                                                    "value_constraint": null,
                                                    "initial_data_type": "float",
                                                    "aggregation_locked": false,
                                                    "backgroundSettings": {
                                                        "enabled": false,
                                                        "settings": {
                                                            "isContinuous": true,
                                                            "paletteState": {},
                                                            "gradientState": {
                                                                "reversed": false,
                                                                "gradientMode": "2-point",
                                                                "thresholdsMode": "auto",
                                                                "gradientPalette": "blue"
                                                            }
                                                        },
                                                        "settingsId": "bfbdf4f0-ab86-11f0-aec5-e7a1aadce905",
                                                        "colorFieldGuid": "total_revenue_0izo"
                                                    },
                                                    "has_auto_aggregation": false
                                                },
                                                {
                                                    "id": "measure-16",
                                                    "cast": "float",
                                                    "guid": "discount_zcfc",
                                                    "type": "MEASURE",
                                                    "title": "discount",
                                                    "valid": true,
                                                    "hidden": false,
                                                    "source": "discount",
                                                    "formula": "",
                                                    "virtual": false,
                                                    "avatar_id": "5595f890-ab84-11f0-a2ee-cd085a2dd49b",
                                                    "calc_mode": "direct",
                                                    "data_type": "float",
                                                    "datasetId": "51",
                                                    "fakeTitle": "Скидка",
                                                    "formatting": {
                                                        "format": "number",
                                                        "prefix": "",
                                                        "postfix": "",
                                                        "labelMode": "absolute",
                                                        "precision": 2,
                                                        "showRankDelimiter": true
                                                    },
                                                    "managed_by": "user",
                                                    "aggregation": "sum",
                                                    "datasetName": "ABC-анализ",
                                                    "description": "",
                                                    "ui_settings": "",
                                                    "barsSettings": {
                                                        "align": "default",
                                                        "scale": {
                                                            "mode": "auto"
                                                        },
                                                        "enabled": false,
                                                        "showLabels": true,
                                                        "colorSettings": {
                                                            "settings": {
                                                                "negativeColorIndex": 1,
                                                                "positiveColorIndex": 2
                                                            },
                                                            "colorType": "two-color"
                                                        },
                                                        "showBarsInTotals": false
                                                    },
                                                    "guid_formula": "",
                                                    "default_value": null,
                                                    "hideLabelMode": "show",
                                                    "autoaggregated": false,
                                                    "lock_aggregation": false,
                                                    "value_constraint": null,
                                                    "initial_data_type": "float",
                                                    "aggregation_locked": false,
                                                    "backgroundSettings": {
                                                        "enabled": false,
                                                        "settings": {
                                                            "isContinuous": true,
                                                            "paletteState": {},
                                                            "gradientState": {
                                                                "reversed": false,
                                                                "gradientMode": "2-point",
                                                                "thresholdsMode": "auto",
                                                                "gradientPalette": "blue"
                                                            }
                                                        },
                                                        "settingsId": "ddc2b1b0-adb7-11f0-8541-b3271a7893f3",
                                                        "colorFieldGuid": "discount_zcfc"
                                                    },
                                                    "has_auto_aggregation": false
                                                },
                                                {
                                                    "id": "measure-4",
                                                    "cast": "float",
                                                    "guid": "29375d40-adb7-11f0-8abe-b16307e401da",
                                                    "type": "MEASURE",
                                                    "title": "%_discount",
                                                    "valid": true,
                                                    "hidden": false,
                                                    "source": "",
                                                    "formula": "[discount] / [total_revenue]",
                                                    "virtual": false,
                                                    "avatar_id": null,
                                                    "calc_mode": "formula",
                                                    "data_type": "float",
                                                    "datasetId": "51",
                                                    "fakeTitle": "% скидки",
                                                    "formatting": {
                                                        "format": "percent",
                                                        "prefix": "",
                                                        "postfix": "",
                                                        "labelMode": "absolute",
                                                        "precision": 0,
                                                        "showRankDelimiter": true
                                                    },
                                                    "managed_by": "user",
                                                    "aggregation": "none",
                                                    "datasetName": "ABC-анализ",
                                                    "description": "",
                                                    "ui_settings": "",
                                                    "barsSettings": {
                                                        "align": "default",
                                                        "scale": {
                                                            "mode": "auto"
                                                        },
                                                        "enabled": false,
                                                        "showLabels": true,
                                                        "colorSettings": {
                                                            "settings": {
                                                                "negativeColorIndex": 1,
                                                                "positiveColorIndex": 2
                                                            },
                                                            "colorType": "two-color"
                                                        },
                                                        "showBarsInTotals": false
                                                    },
                                                    "guid_formula": "[discount_zcfc] / [total_revenue_0izo]",
                                                    "default_value": null,
                                                    "hideLabelMode": "show",
                                                    "autoaggregated": true,
                                                    "lock_aggregation": false,
                                                    "value_constraint": null,
                                                    "initial_data_type": "float",
                                                    "aggregation_locked": true,
                                                    "backgroundSettings": {
                                                        "enabled": false,
                                                        "settings": {
                                                            "isContinuous": true,
                                                            "paletteState": {},
                                                            "gradientState": {
                                                                "reversed": false,
                                                                "gradientMode": "2-point",
                                                                "thresholdsMode": "auto",
                                                                "gradientPalette": "blue"
                                                            }
                                                        },
                                                        "settingsId": "bf229360-adb7-11f0-b7a3-ad7569aefc02",
                                                        "colorFieldGuid": "29375d40-adb7-11f0-8abe-b16307e401da"
                                                    },
                                                    "has_auto_aggregation": true
                                                },
                                                {
                                                    "id": "measure-3",
                                                    "cast": "markup",
                                                    "guid": "4d775940-ab86-11f0-9539-af6f4b089e91",
                                                    "type": "MEASURE",
                                                    "local": true,
                                                    "title": "min_abc_quantity",
                                                    "valid": true,
                                                    "hidden": false,
                                                    "source": "",
                                                    "formula": "IF MIN([abc_quantity]) = 'A' THEN COLOR(MIN([abc_quantity]), '#0FA08D')\r\nELSEIF MIN([abc_quantity]) = 'B' THEN COLOR(MIN([abc_quantity]), '#FFB46C')\r\nELSE COLOR(MIN([abc_quantity]), '#BE2443') END",
                                                    "virtual": false,
                                                    "avatar_id": null,
                                                    "calc_mode": "formula",
                                                    "data_type": "markup",
                                                    "datasetId": "51",
                                                    "fakeTitle": "ABC Количество",
                                                    "formatting": {
                                                        "format": "number",
                                                        "prefix": "",
                                                        "postfix": "",
                                                        "labelMode": "absolute",
                                                        "precision": 0,
                                                        "showRankDelimiter": true
                                                    },
                                                    "managed_by": "user",
                                                    "aggregation": "none",
                                                    "datasetName": "ABC-анализ",
                                                    "description": "",
                                                    "ui_settings": "",
                                                    "guid_formula": "IF MIN([abc_quantity_0cay]) = 'A' THEN COLOR(MIN([abc_quantity_0cay]), '#0FA08D')\r\nELSEIF MIN([abc_quantity_0cay]) = 'B' THEN COLOR(MIN([abc_quantity_0cay]), '#FFB46C')\r\nELSE COLOR(MIN([abc_quantity_0cay]), '#BE2443') END",
                                                    "default_value": null,
                                                    "hideLabelMode": "show",
                                                    "autoaggregated": true,
                                                    "columnSettings": {
                                                        "width": {
                                                            "mode": "percent",
                                                            "value": "10"
                                                        }
                                                    },
                                                    "lock_aggregation": false,
                                                    "value_constraint": null,
                                                    "initial_data_type": "markup",
                                                    "aggregation_locked": true,
                                                    "backgroundSettings": {
                                                        "enabled": false,
                                                        "settings": {
                                                            "isContinuous": true,
                                                            "paletteState": {},
                                                            "gradientState": {
                                                                "reversed": false,
                                                                "gradientMode": "3-point",
                                                                "thresholdsMode": "auto",
                                                                "gradientPalette": "red-orange-green"
                                                            }
                                                        },
                                                        "settingsId": "c3a20cf0-ab86-11f0-aec5-e7a1aadce905",
                                                        "colorFieldGuid": "total_quantity_v9zr"
                                                    },
                                                    "has_auto_aggregation": true
                                                },
                                                {
                                                    "id": "measure-2",
                                                    "cast": "markup",
                                                    "guid": "6d3320c0-ab86-11f0-aec5-e7a1aadce905",
                                                    "type": "MEASURE",
                                                    "local": true,
                                                    "title": "min_abc_revenue",
                                                    "valid": true,
                                                    "hidden": false,
                                                    "source": "",
                                                    "formula": "IF MIN([abc_total_price]) = 'A' THEN COLOR(MIN([abc_total_price]), '#0FA08D')\r\nELSEIF MIN([abc_total_price]) = 'B' THEN COLOR(MIN([abc_total_price]), '#FFB46C')\r\nELSE COLOR(MIN([abc_total_price]), '#BE2443') END\r\n",
                                                    "virtual": false,
                                                    "avatar_id": null,
                                                    "calc_mode": "formula",
                                                    "data_type": "markup",
                                                    "datasetId": "51",
                                                    "fakeTitle": "ABC Выручка",
                                                    "formatting": {
                                                        "format": "number",
                                                        "prefix": "",
                                                        "postfix": "",
                                                        "labelMode": "absolute",
                                                        "precision": 0,
                                                        "showRankDelimiter": true
                                                    },
                                                    "managed_by": "user",
                                                    "aggregation": "none",
                                                    "datasetName": "ABC-анализ",
                                                    "description": "",
                                                    "ui_settings": "",
                                                    "guid_formula": "IF MIN([abc_total_price_jf5b]) = 'A' THEN COLOR(MIN([abc_total_price_jf5b]), '#0FA08D')\r\nELSEIF MIN([abc_total_price_jf5b]) = 'B' THEN COLOR(MIN([abc_total_price_jf5b]), '#FFB46C')\r\nELSE COLOR(MIN([abc_total_price_jf5b]), '#BE2443') END\r\n",
                                                    "default_value": null,
                                                    "hideLabelMode": "show",
                                                    "autoaggregated": true,
                                                    "columnSettings": {
                                                        "width": {
                                                            "mode": "percent",
                                                            "value": "10"
                                                        }
                                                    },
                                                    "lock_aggregation": false,
                                                    "value_constraint": null,
                                                    "initial_data_type": "markup",
                                                    "aggregation_locked": true,
                                                    "backgroundSettings": {
                                                        "enabled": false,
                                                        "settings": {
                                                            "isContinuous": true,
                                                            "paletteState": {},
                                                            "gradientState": {
                                                                "reversed": false,
                                                                "gradientMode": "2-point",
                                                                "thresholdsMode": "auto",
                                                                "gradientPalette": "blue"
                                                            }
                                                        },
                                                        "settingsId": "cd6fd0f0-ab86-11f0-aec5-e7a1aadce905",
                                                        "colorFieldGuid": "total_quantity_v9zr"
                                                    },
                                                    "has_auto_aggregation": true
                                                },
                                                {
                                                    "id": "measure-1",
                                                    "cast": "markup",
                                                    "guid": "47464710-ad12-11f0-a3c0-dfd7aa61c337",
                                                    "type": "MEASURE",
                                                    "local": true,
                                                    "title": "XYZ",
                                                    "valid": true,
                                                    "hidden": false,
                                                    "source": "",
                                                    "formula": "IF MIN([xyz_category]) = 'X' THEN COLOR(MIN([xyz_category]), '#0FA08D')\r\nELSEIF MIN([xyz_category]) = 'Y' THEN COLOR(MIN([xyz_category]), '#FFB46C')\r\nELSE COLOR(MIN([xyz_category]), '#BE2443') END",
                                                    "virtual": false,
                                                    "avatar_id": null,
                                                    "calc_mode": "formula",
                                                    "data_type": "markup",
                                                    "datasetId": "51",
                                                    "managed_by": "user",
                                                    "aggregation": "none",
                                                    "datasetName": "ABC-анализ",
                                                    "description": "",
                                                    "ui_settings": "",
                                                    "guid_formula": "IF MIN([xyz_category_ek3j]) = 'X' THEN COLOR(MIN([xyz_category_ek3j]), '#0FA08D')\r\nELSEIF MIN([xyz_category_ek3j]) = 'Y' THEN COLOR(MIN([xyz_category_ek3j]), '#FFB46C')\r\nELSE COLOR(MIN([xyz_category_ek3j]), '#BE2443') END",
                                                    "default_value": null,
                                                    "autoaggregated": true,
                                                    "lock_aggregation": false,
                                                    "value_constraint": null,
                                                    "initial_data_type": "markup",
                                                    "aggregation_locked": true,
                                                    "has_auto_aggregation": true
                                                },
                                                {
                                                    "id": "measure-0",
                                                    "cast": "markup",
                                                    "guid": "17af9b70-ab85-11f0-abd2-01b912c09715",
                                                    "type": "MEASURE",
                                                    "local": true,
                                                    "title": "abc-xyz",
                                                    "valid": true,
                                                    "hidden": false,
                                                    "source": "",
                                                    "formula": "[min_abc_quantity] + [min_abc_revenue] + [XYZ]",
                                                    "virtual": false,
                                                    "avatar_id": null,
                                                    "calc_mode": "formula",
                                                    "data_type": "markup",
                                                    "datasetId": "51",
                                                    "fakeTitle": "ABC",
                                                    "formatting": {
                                                        "format": "number",
                                                        "prefix": "",
                                                        "postfix": "",
                                                        "labelMode": "absolute",
                                                        "precision": 0,
                                                        "showRankDelimiter": true
                                                    },
                                                    "managed_by": "user",
                                                    "aggregation": "none",
                                                    "datasetName": "ABC-анализ",
                                                    "description": "",
                                                    "ui_settings": "",
                                                    "guid_formula": "[4d775940-ab86-11f0-9539-af6f4b089e91] + [6d3320c0-ab86-11f0-aec5-e7a1aadce905] + [47464710-ad12-11f0-a3c0-dfd7aa61c337]",
                                                    "default_value": null,
                                                    "hideLabelMode": "show",
                                                    "autoaggregated": true,
                                                    "columnSettings": {
                                                        "width": {
                                                            "mode": "percent",
                                                            "value": "10"
                                                        }
                                                    },
                                                    "lock_aggregation": false,
                                                    "value_constraint": null,
                                                    "initial_data_type": "markup",
                                                    "aggregation_locked": true,
                                                    "backgroundSettings": {
                                                        "enabled": false,
                                                        "settings": {
                                                            "isContinuous": true,
                                                            "paletteState": {},
                                                            "gradientState": {
                                                                "reversed": false,
                                                                "gradientMode": "2-point",
                                                                "thresholdsMode": "auto",
                                                                "gradientPalette": "blue"
                                                            }
                                                        },
                                                        "settingsId": "d1d30400-ab86-11f0-aec5-e7a1aadce905",
                                                        "colorFieldGuid": "17af9b70-ab85-11f0-abd2-01b912c09715"
                                                    },
                                                    "has_auto_aggregation": true
                                                }
                                            ],
                                            "title": "section_columns",
                                            "required": true,
                                            "settings": {
                                                "groupping": "on"
                                            },
                                            "iconProps": {},
                                            "allowedTypes": {}
                                        }
                                    ],
                                    "allowLayerFilters": false
                                },
                                "geopointsConfig": {},
                                "datasetsPartialFields": [
                                    [
                                        {
                                            "guid": "17af9b70-ab85-11f0-abd2-01b912c09715",
                                            "title": "abc-xyz",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "47464710-ad12-11f0-a3c0-dfd7aa61c337",
                                            "title": "XYZ",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "6d3320c0-ab86-11f0-aec5-e7a1aadce905",
                                            "title": "min_abc_revenue",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "4d775940-ab86-11f0-9539-af6f4b089e91",
                                            "title": "min_abc_quantity",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "29375d40-adb7-11f0-8abe-b16307e401da",
                                            "title": "%_discount",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "scale_xyz",
                                            "title": "scale_xyz",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "end_date",
                                            "title": "end_date",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "start_date",
                                            "title": "start_date",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "product_id_14n5",
                                            "title": "product_id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "total_quantity_v9zr",
                                            "title": "total_quantity",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "total_revenue_0izo",
                                            "title": "total_revenue",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "abc_quantity_0cay",
                                            "title": "abc_quantity",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "abc_total_price_jf5b",
                                            "title": "abc_total_price",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "xyz_category_ek3j",
                                            "title": "xyz_category",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "active_months_9kl9",
                                            "title": "active_months",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "variation_coefficient_vryy",
                                            "title": "variation_coefficient",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "discount_zcfc",
                                            "title": "discount",
                                            "calc_mode": "direct"
                                        }
                                    ]
                                ]
                            }
                        },
                        "name": "ABC-анализ — Таблица",
                        "type": "table_wizard_node",
                        "annotation": {
                            "description": ""
                        }
                    }
                },
                "56": {
                    "widget": {
                        "data": {
                            "shared": {
                                "sort": [],
                                "type": "datalens",
                                "links": [],
                                "colors": [],
                                "labels": [],
                                "shapes": [],
                                "filters": [],
                                "updates": [
                                    {
                                        "field": {
                                            "cast": "float",
                                            "guid": "0dcb3a50-aa55-11f0-8c7c-59e14d3324ab",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Среднее количество продаж на товар",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "SUM_IF([quantity], [purchase_datetime] >= [start_date] AND [purchase_datedate] <= [end_date]) / COUNTD_IF([product_id], [purchase_datetime] >= [start_date] AND [purchase_datedate] <= [end_date])",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "float",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "SUM_IF([quantity_k4iu], [purchase_datetime_pvoa] >= [start_date] AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= [end_date]) / COUNTD_IF([product_id_ey10], [purchase_datetime_pvoa] >= [start_date] AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= [end_date])",
                                            "originalTitle": "total_price",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "float",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    }
                                ],
                                "version": "14",
                                "segments": [],
                                "tooltips": [],
                                "datasetsIds": [
                                    "6"
                                ],
                                "hierarchies": [],
                                "colorsConfig": {},
                                "shapesConfig": {},
                                "extraSettings": {
                                    "feed": "",
                                    "title": "Общие продажи и тренды - KPI. Общая выручка",
                                    "stacking": "on",
                                    "zoomMode": "auto",
                                    "titleMode": "hide",
                                    "legendMode": "show",
                                    "tooltipSum": "on",
                                    "mapCenterMode": "auto",
                                    "metricFontSize": "m",
                                    "metricFontColor": "#DB9101",
                                    "pivotInlineSort": "on",
                                    "navigatorSettings": {
                                        "selectedLines": [],
                                        "isNavigatorAvailable": false
                                    },
                                    "indicatorTitleMode": "hide",
                                    "metricFontColorIndex": 0,
                                    "metricFontColorPalette": "datalens-neo-20"
                                },
                                "visualization": {
                                    "id": "metric",
                                    "name": "label_visualization-metric",
                                    "type": "metric",
                                    "allowSort": false,
                                    "iconProps": {
                                        "id": "visMetric",
                                        "width": "24"
                                    },
                                    "allowLabels": false,
                                    "allowFilters": true,
                                    "placeholders": [
                                        {
                                            "id": "measures",
                                            "type": "measures",
                                            "items": [
                                                {
                                                    "id": "measure-0",
                                                    "cast": "float",
                                                    "guid": "0dcb3a50-aa55-11f0-8c7c-59e14d3324ab",
                                                    "type": "MEASURE",
                                                    "local": true,
                                                    "title": "Среднее количество продаж на товар",
                                                    "valid": true,
                                                    "hidden": false,
                                                    "source": "",
                                                    "formula": "SUM_IF([quantity], [purchase_datetime] >= [start_date] AND [purchase_datedate] <= [end_date]) / COUNTD_IF([product_id], [purchase_datetime] >= [start_date] AND [purchase_datedate] <= [end_date])",
                                                    "virtual": false,
                                                    "grouping": "",
                                                    "avatar_id": null,
                                                    "calc_mode": "formula",
                                                    "data_type": "float",
                                                    "datasetId": "6",
                                                    "formatting": {
                                                        "format": "number",
                                                        "prefix": "",
                                                        "postfix": "",
                                                        "labelMode": "absolute",
                                                        "precision": 0,
                                                        "showRankDelimiter": true
                                                    },
                                                    "managed_by": "user",
                                                    "aggregation": "none",
                                                    "datasetName": "Данные о продажах",
                                                    "description": "",
                                                    "ui_settings": "",
                                                    "guid_formula": "SUM_IF([quantity_k4iu], [purchase_datetime_pvoa] >= [start_date] AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= [end_date]) / COUNTD_IF([product_id_ey10], [purchase_datetime_pvoa] >= [start_date] AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= [end_date])",
                                                    "default_value": null,
                                                    "hideLabelMode": "show",
                                                    "originalTitle": "total_price",
                                                    "autoaggregated": true,
                                                    "lock_aggregation": false,
                                                    "value_constraint": null,
                                                    "initial_data_type": "float",
                                                    "aggregation_locked": true,
                                                    "has_auto_aggregation": true
                                                }
                                            ],
                                            "title": "section_measure",
                                            "capacity": 1,
                                            "required": true,
                                            "settings": {},
                                            "iconProps": {},
                                            "allowedTypes": {},
                                            "allowedDataTypes": {},
                                            "allowedFinalTypes": {}
                                        }
                                    ],
                                    "allowLayerFilters": false
                                },
                                "geopointsConfig": {},
                                "datasetsPartialFields": [
                                    [
                                        {
                                            "guid": "0dcb3a50-aa55-11f0-8c7c-59e14d3324ab",
                                            "title": "Среднее количество продаж на товар",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "95f17b60-ab36-11f0-a2f4-fdfba76f64b3",
                                            "title": "Номер покупки",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "e3a1cfe0-aa55-11f0-8395-f32b2462dd84",
                                            "title": "Фильтр даты",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "end_date",
                                            "title": "end_date",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "start_date",
                                            "title": "start_date",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "f828f540-a935-11f0-976d-099c0b05b9ec",
                                            "title": "%_discount",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "584ad600-a92c-11f0-976d-099c0b05b9ec",
                                            "title": "scale_value",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "8125b920-ab28-11f0-bffa-65bc24252e3e",
                                            "title": "scale_value_sparkline",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "scale",
                                            "title": "scale",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "660eb030-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_month",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "d02fc430-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_week",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "1cf44850-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_hour",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "3352b650-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_quarter",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "268ce800-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_year",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "087e5b50-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_date",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "id_scne",
                                            "title": "id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "client_id_lbc6",
                                            "title": "client_id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "gender_fzxw",
                                            "title": "gender",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "product_id_ey10",
                                            "title": "product_id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "quantity_k4iu",
                                            "title": "quantity",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "price_per_item_3dwq",
                                            "title": "price_per_item",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "discount_per_item_7maq",
                                            "title": "discount_per_item",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "total_price_1u2g",
                                            "title": "total_price",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "purchase_datetime_pvoa",
                                            "title": "purchase_datetime",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "461ec3e0-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_datedate",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "created_at_s6qq",
                                            "title": "created_at",
                                            "calc_mode": "direct"
                                        }
                                    ]
                                ]
                            }
                        },
                        "name": "Анализ товаров и ассортимента - KPI. Среднее кол-во продаж на товар",
                        "type": "metric_wizard_node",
                        "annotation": {
                            "description": ""
                        }
                    }
                },
                "57": {
                    "widget": {
                        "data": {
                            "shared": {
                                "sort": [],
                                "type": "datalens",
                                "links": [],
                                "colors": [],
                                "labels": [],
                                "shapes": [],
                                "filters": [],
                                "updates": [
                                    {
                                        "field": {
                                            "cast": "float",
                                            "guid": "0dcb3a50-aa55-11f0-8c7c-59e14d3324ab",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Среднее количество покупателей на товар",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "COUNTD_IF([client_id], [purchase_datetime] >= [start_date] AND [purchase_datedate] <= [end_date]) / COUNTD_IF([product_id], [purchase_datetime] >= [start_date] AND [purchase_datedate] <= [end_date])",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "float",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "COUNTD_IF([client_id_lbc6], [purchase_datetime_pvoa] >= [start_date] AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= [end_date]) / COUNTD_IF([product_id_ey10], [purchase_datetime_pvoa] >= [start_date] AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= [end_date])",
                                            "originalTitle": "total_price",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "float",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    }
                                ],
                                "version": "14",
                                "segments": [],
                                "tooltips": [],
                                "datasetsIds": [
                                    "6"
                                ],
                                "hierarchies": [],
                                "colorsConfig": {},
                                "shapesConfig": {},
                                "extraSettings": {
                                    "feed": "",
                                    "title": "Общие продажи и тренды - KPI. Общая выручка",
                                    "stacking": "on",
                                    "zoomMode": "auto",
                                    "titleMode": "hide",
                                    "legendMode": "show",
                                    "tooltipSum": "on",
                                    "mapCenterMode": "auto",
                                    "metricFontSize": "m",
                                    "metricFontColor": "#DB9101",
                                    "pivotInlineSort": "on",
                                    "navigatorSettings": {
                                        "selectedLines": [],
                                        "isNavigatorAvailable": false
                                    },
                                    "indicatorTitleMode": "hide",
                                    "metricFontColorIndex": 0,
                                    "metricFontColorPalette": "datalens-neo-20"
                                },
                                "visualization": {
                                    "id": "metric",
                                    "name": "label_visualization-metric",
                                    "type": "metric",
                                    "allowSort": false,
                                    "iconProps": {
                                        "id": "visMetric",
                                        "width": "24"
                                    },
                                    "allowLabels": false,
                                    "allowFilters": true,
                                    "placeholders": [
                                        {
                                            "id": "measures",
                                            "type": "measures",
                                            "items": [
                                                {
                                                    "id": "measure-0",
                                                    "cast": "float",
                                                    "guid": "0dcb3a50-aa55-11f0-8c7c-59e14d3324ab",
                                                    "type": "MEASURE",
                                                    "local": true,
                                                    "title": "Среднее количество покупателей на товар",
                                                    "valid": true,
                                                    "hidden": false,
                                                    "source": "",
                                                    "formula": "COUNTD_IF([client_id], [purchase_datetime] >= [start_date] AND [purchase_datedate] <= [end_date]) / COUNTD_IF([product_id], [purchase_datetime] >= [start_date] AND [purchase_datedate] <= [end_date])",
                                                    "virtual": false,
                                                    "grouping": "",
                                                    "avatar_id": null,
                                                    "calc_mode": "formula",
                                                    "data_type": "float",
                                                    "datasetId": "6",
                                                    "formatting": {
                                                        "format": "number",
                                                        "prefix": "",
                                                        "postfix": "",
                                                        "labelMode": "absolute",
                                                        "precision": 0,
                                                        "showRankDelimiter": true
                                                    },
                                                    "managed_by": "user",
                                                    "aggregation": "none",
                                                    "datasetName": "Данные о продажах",
                                                    "description": "",
                                                    "ui_settings": "",
                                                    "guid_formula": "COUNTD_IF([client_id_lbc6], [purchase_datetime_pvoa] >= [start_date] AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= [end_date]) / COUNTD_IF([product_id_ey10], [purchase_datetime_pvoa] >= [start_date] AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= [end_date])",
                                                    "default_value": null,
                                                    "hideLabelMode": "show",
                                                    "originalTitle": "total_price",
                                                    "autoaggregated": true,
                                                    "lock_aggregation": false,
                                                    "value_constraint": null,
                                                    "initial_data_type": "float",
                                                    "aggregation_locked": true,
                                                    "has_auto_aggregation": true
                                                }
                                            ],
                                            "title": "section_measure",
                                            "capacity": 1,
                                            "required": true,
                                            "settings": {},
                                            "iconProps": {},
                                            "allowedTypes": {},
                                            "allowedDataTypes": {},
                                            "allowedFinalTypes": {}
                                        }
                                    ],
                                    "allowLayerFilters": false
                                },
                                "geopointsConfig": {},
                                "datasetsPartialFields": [
                                    [
                                        {
                                            "guid": "0dcb3a50-aa55-11f0-8c7c-59e14d3324ab",
                                            "title": "Среднее количество покупателей на товар",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "95f17b60-ab36-11f0-a2f4-fdfba76f64b3",
                                            "title": "Номер покупки",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "e3a1cfe0-aa55-11f0-8395-f32b2462dd84",
                                            "title": "Фильтр даты",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "end_date",
                                            "title": "end_date",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "start_date",
                                            "title": "start_date",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "f828f540-a935-11f0-976d-099c0b05b9ec",
                                            "title": "%_discount",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "584ad600-a92c-11f0-976d-099c0b05b9ec",
                                            "title": "scale_value",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "8125b920-ab28-11f0-bffa-65bc24252e3e",
                                            "title": "scale_value_sparkline",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "scale",
                                            "title": "scale",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "660eb030-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_month",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "d02fc430-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_week",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "1cf44850-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_hour",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "3352b650-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_quarter",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "268ce800-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_year",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "087e5b50-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_date",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "id_scne",
                                            "title": "id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "client_id_lbc6",
                                            "title": "client_id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "gender_fzxw",
                                            "title": "gender",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "product_id_ey10",
                                            "title": "product_id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "quantity_k4iu",
                                            "title": "quantity",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "price_per_item_3dwq",
                                            "title": "price_per_item",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "discount_per_item_7maq",
                                            "title": "discount_per_item",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "total_price_1u2g",
                                            "title": "total_price",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "purchase_datetime_pvoa",
                                            "title": "purchase_datetime",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "461ec3e0-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_datedate",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "created_at_s6qq",
                                            "title": "created_at",
                                            "calc_mode": "direct"
                                        }
                                    ]
                                ]
                            }
                        },
                        "name": "Анализ товаров и ассортимента - KPI. Среднее кол-во покупателей на товар",
                        "type": "metric_wizard_node",
                        "annotation": {
                            "description": ""
                        }
                    }
                },
                "58": {
                    "widget": {
                        "data": {
                            "shared": {
                                "sort": [],
                                "type": "datalens",
                                "links": [],
                                "colors": [
                                    {
                                        "type": "PSEUDO",
                                        "title": "Measure Names",
                                        "className": "item pseudo-item dimension-item",
                                        "data_type": "string"
                                    }
                                ],
                                "labels": [],
                                "shapes": [
                                    {
                                        "type": "PSEUDO",
                                        "title": "Measure Names",
                                        "className": "item pseudo-item dimension-item",
                                        "data_type": "string"
                                    }
                                ],
                                "filters": [
                                    {
                                        "guid": "4f3ae870-aa58-11f0-91ae-41cc1710bd8b",
                                        "type": "MEASURE",
                                        "title": "Количество единиц товаров",
                                        "filter": {
                                            "value": [
                                                "0"
                                            ],
                                            "operation": {
                                                "code": "GT"
                                            }
                                        },
                                        "calc_mode": "formula",
                                        "datasetId": "6"
                                    },
                                    {
                                        "guid": "fd5026f0-ab2a-11f0-b391-d3c99b5212c4",
                                        "type": "MEASURE",
                                        "title": "Количество единиц товаров (1)",
                                        "filter": {
                                            "value": [
                                                "0"
                                            ],
                                            "operation": {
                                                "code": "GT"
                                            }
                                        },
                                        "calc_mode": "formula",
                                        "datasetId": "6"
                                    },
                                    {
                                        "guid": "e3a1cfe0-aa55-11f0-8395-f32b2462dd84",
                                        "type": "DIMENSION",
                                        "title": "Фильтр даты",
                                        "filter": {
                                            "value": [
                                                "true"
                                            ],
                                            "operation": {
                                                "code": "EQ"
                                            }
                                        },
                                        "calc_mode": "formula",
                                        "datasetId": "6"
                                    }
                                ],
                                "updates": [
                                    {
                                        "field": {
                                            "cast": "integer",
                                            "guid": "4f3ae870-aa58-11f0-91ae-41cc1710bd8b",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Количество единиц товаров",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "SUM_IF([quantity], [purchase_datetime] >= [start_date] AND [purchase_datedate] <= [end_date])",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "integer",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "SUM_IF([quantity_k4iu], [purchase_datetime_pvoa] >= [start_date] AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= [end_date])",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "integer",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field"
                                    },
                                    {
                                        "field": {
                                            "cast": "integer",
                                            "guid": "fd5026f0-ab2a-11f0-b391-d3c99b5212c4",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Количество единиц товаров (1)",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "SUM_IF([quantity], [purchase_datetime] >= DATEADD([start_date], 'year', -1) AND [purchase_datedate] <= DATEADD([end_date], 'year', -1) BEFORE FILTER BY [Фильтр даты])",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "integer",
                                            "datasetId": "6",
                                            "fakeTitle": "Количество единиц товаров за аналогичный период год назад",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "SUM_IF([quantity_k4iu], [purchase_datetime_pvoa] >= DATEADD([start_date], 'year', -1) AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= DATEADD([end_date], 'year', -1) BEFORE FILTER BY [e3a1cfe0-aa55-11f0-8395-f32b2462dd84])",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "integer",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    }
                                ],
                                "version": "14",
                                "segments": [],
                                "tooltips": [],
                                "datasetsIds": [
                                    "6"
                                ],
                                "hierarchies": [],
                                "colorsConfig": {
                                    "palette": "",
                                    "colorMode": "palette",
                                    "mountedColors": {
                                        "Количество единиц товаров за выбранный период": "17",
                                        "Количество единиц товаров за аналогичный период год назад": "17"
                                    },
                                    "polygonBorders": "show",
                                    "coloredByMeasure": true
                                },
                                "shapesConfig": {
                                    "mountedShapes": {
                                        "Количество единиц товаров за выбранный период": "Solid",
                                        "Количество единиц товаров за аналогичный период год назад": "Dot"
                                    }
                                },
                                "extraSettings": {
                                    "feed": "",
                                    "title": "Общие продажи и тренды - Линейная. Количество единиц товаров",
                                    "stacking": "on",
                                    "zoomMode": "auto",
                                    "titleMode": "hide",
                                    "legendMode": "hide",
                                    "tooltipSum": "off",
                                    "mapCenterMode": "auto",
                                    "pivotInlineSort": "on",
                                    "navigatorSettings": {
                                        "selectedLines": [],
                                        "isNavigatorAvailable": false
                                    },
                                    "indicatorTitleMode": "by-field"
                                },
                                "visualization": {
                                    "id": "line",
                                    "name": "label_visualization-line",
                                    "type": "line",
                                    "allowSort": true,
                                    "iconProps": {
                                        "id": "visLines",
                                        "width": "24"
                                    },
                                    "allowColors": true,
                                    "allowLabels": true,
                                    "allowShapes": true,
                                    "allowFilters": true,
                                    "placeholders": [
                                        {
                                            "id": "x",
                                            "type": "x",
                                            "items": [
                                                {
                                                    "id": "dimension-8",
                                                    "cast": "string",
                                                    "guid": "8125b920-ab28-11f0-bffa-65bc24252e3e",
                                                    "type": "DIMENSION",
                                                    "title": "scale_value_sparkline",
                                                    "valid": true,
                                                    "hidden": false,
                                                    "source": "",
                                                    "formula": "IF [scale] = \"День\" THEN SUBSTR([purchase_date], 6, 5)\r\nELSEIF [scale] = \"Неделя\" THEN SUBSTR([purchase_week], 6, 3)\r\nELSEIF [scale] = \"Месяц\" THEN \"М\" + SUBSTR([purchase_month], 6, 2)\r\nELSEIF [scale] = \"Квартал\" THEN SUBSTR([purchase_quarter], 6, 2)\r\nELSE [purchase_year]\r\nEND",
                                                    "virtual": false,
                                                    "avatar_id": null,
                                                    "calc_mode": "formula",
                                                    "data_type": "string",
                                                    "datasetId": "6",
                                                    "fakeTitle": "Период",
                                                    "formatting": {
                                                        "format": "number",
                                                        "prefix": "",
                                                        "postfix": "",
                                                        "labelMode": "absolute",
                                                        "precision": 0,
                                                        "showRankDelimiter": true
                                                    },
                                                    "managed_by": "user",
                                                    "aggregation": "none",
                                                    "datasetName": "Данные о продажах",
                                                    "description": "",
                                                    "ui_settings": "",
                                                    "guid_formula": "IF [scale] = \"День\" THEN SUBSTR([087e5b50-a928-11f0-976d-099c0b05b9ec], 6, 5)\r\nELSEIF [scale] = \"Неделя\" THEN SUBSTR([d02fc430-a929-11f0-976d-099c0b05b9ec], 6, 3)\r\nELSEIF [scale] = \"Месяц\" THEN \"М\" + SUBSTR([660eb030-a928-11f0-976d-099c0b05b9ec], 6, 2)\r\nELSEIF [scale] = \"Квартал\" THEN SUBSTR([3352b650-a928-11f0-976d-099c0b05b9ec], 6, 2)\r\nELSE [268ce800-a928-11f0-976d-099c0b05b9ec]\r\nEND",
                                                    "default_value": null,
                                                    "hideLabelMode": "show",
                                                    "autoaggregated": false,
                                                    "lock_aggregation": false,
                                                    "value_constraint": null,
                                                    "initial_data_type": "string",
                                                    "aggregation_locked": true,
                                                    "has_auto_aggregation": false
                                                }
                                            ],
                                            "title": "section_x",
                                            "capacity": 1,
                                            "required": true,
                                            "settings": {
                                                "grid": "off",
                                                "type": "linear",
                                                "title": "off",
                                                "gridStep": "auto",
                                                "holidays": "off",
                                                "hideLabels": "no",
                                                "labelsView": "auto",
                                                "titleValue": "",
                                                "axisModeMap": {
                                                    "8125b920-ab28-11f0-bffa-65bc24252e3e": "discrete"
                                                },
                                                "gridStepValue": 50,
                                                "axisFormatMode": "auto",
                                                "axisVisibility": "hide",
                                                "axisLabelFormating": {},
                                                "axisLabelDateFormat": "DD.MM.YYYY"
                                            },
                                            "iconProps": {},
                                            "allowedTypes": {},
                                            "allowedDataTypes": {}
                                        },
                                        {
                                            "id": "y",
                                            "type": "y",
                                            "items": [
                                                {
                                                    "id": "measure-1",
                                                    "cast": "integer",
                                                    "guid": "4f3ae870-aa58-11f0-91ae-41cc1710bd8b",
                                                    "type": "MEASURE",
                                                    "local": true,
                                                    "title": "Количество единиц товаров",
                                                    "valid": true,
                                                    "hidden": false,
                                                    "source": "",
                                                    "formula": "SUM_IF([quantity], [purchase_datetime] >= [start_date] AND [purchase_datedate] <= [end_date])",
                                                    "virtual": false,
                                                    "avatar_id": null,
                                                    "calc_mode": "formula",
                                                    "data_type": "integer",
                                                    "datasetId": "6",
                                                    "fakeTitle": "Количество единиц товаров за выбранный период",
                                                    "formatting": {
                                                        "unit": "k",
                                                        "format": "number",
                                                        "prefix": "",
                                                        "postfix": "",
                                                        "labelMode": "absolute",
                                                        "precision": 0,
                                                        "showRankDelimiter": true
                                                    },
                                                    "managed_by": "user",
                                                    "aggregation": "none",
                                                    "datasetName": "Данные о продажах",
                                                    "description": "",
                                                    "ui_settings": "",
                                                    "guid_formula": "SUM_IF([quantity_k4iu], [purchase_datetime_pvoa] >= [start_date] AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= [end_date])",
                                                    "default_value": null,
                                                    "hideLabelMode": "show",
                                                    "originalTitle": "quantity",
                                                    "autoaggregated": true,
                                                    "lock_aggregation": false,
                                                    "value_constraint": null,
                                                    "initial_data_type": "integer",
                                                    "aggregation_locked": true,
                                                    "has_auto_aggregation": true
                                                },
                                                {
                                                    "id": "measure-0",
                                                    "cast": "integer",
                                                    "guid": "fd5026f0-ab2a-11f0-b391-d3c99b5212c4",
                                                    "type": "MEASURE",
                                                    "local": true,
                                                    "title": "Количество единиц товаров (1)",
                                                    "valid": true,
                                                    "hidden": false,
                                                    "source": "",
                                                    "formula": "SUM_IF([quantity], [purchase_datetime] >= DATEADD([start_date], 'year', -1) AND [purchase_datedate] <= DATEADD([end_date], 'year', -1) BEFORE FILTER BY [Фильтр даты])",
                                                    "virtual": false,
                                                    "avatar_id": null,
                                                    "calc_mode": "formula",
                                                    "data_type": "integer",
                                                    "datasetId": "6",
                                                    "fakeTitle": "Количество единиц товаров за аналогичный период год назад",
                                                    "formatting": {
                                                        "unit": "k",
                                                        "format": "number",
                                                        "prefix": "",
                                                        "postfix": "",
                                                        "labelMode": "absolute",
                                                        "precision": 0,
                                                        "showRankDelimiter": true
                                                    },
                                                    "managed_by": "user",
                                                    "aggregation": "none",
                                                    "datasetName": "Данные о продажах",
                                                    "description": "",
                                                    "ui_settings": "",
                                                    "guid_formula": "SUM_IF([quantity_k4iu], [purchase_datetime_pvoa] >= DATEADD([start_date], 'year', -1) AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= DATEADD([end_date], 'year', -1) BEFORE FILTER BY [e3a1cfe0-aa55-11f0-8395-f32b2462dd84])",
                                                    "default_value": null,
                                                    "hideLabelMode": "show",
                                                    "autoaggregated": true,
                                                    "originalFormula": "SUM_IF([quantity], [purchase_datetime] >= [start_date] AND [purchase_datedate] <= [end_date])",
                                                    "lock_aggregation": false,
                                                    "value_constraint": null,
                                                    "initial_data_type": "integer",
                                                    "aggregation_locked": true,
                                                    "has_auto_aggregation": true
                                                }
                                            ],
                                            "title": "section_y",
                                            "settings": {
                                                "grid": "on",
                                                "type": "linear",
                                                "nulls": "connect",
                                                "scale": "auto",
                                                "title": "off",
                                                "gridStep": "auto",
                                                "hideLabels": "no",
                                                "labelsView": "auto",
                                                "scaleValue": "min-max",
                                                "titleValue": "",
                                                "gridStepValue": 50,
                                                "axisFormatMode": "auto",
                                                "axisVisibility": "hide",
                                                "axisLabelFormating": {},
                                                "axisLabelDateFormat": "DD.MM.YYYY"
                                            },
                                            "iconProps": {},
                                            "allowedTypes": {},
                                            "allowedDataTypes": {},
                                            "allowedFinalTypes": {}
                                        },
                                        {
                                            "id": "y2",
                                            "type": "y2",
                                            "items": [],
                                            "title": "section_y2",
                                            "settings": {
                                                "grid": "on",
                                                "type": "linear",
                                                "nulls": "connect",
                                                "scale": "auto",
                                                "title": "off",
                                                "gridStep": "auto",
                                                "hideLabels": "no",
                                                "labelsView": "auto",
                                                "scaleValue": "min-max",
                                                "titleValue": "",
                                                "gridStepValue": 50,
                                                "axisFormatMode": "auto",
                                                "axisVisibility": "show",
                                                "axisLabelFormating": {},
                                                "axisLabelDateFormat": "DD.MM.YYYY"
                                            },
                                            "iconProps": {},
                                            "allowedTypes": {},
                                            "allowedDataTypes": {},
                                            "allowedFinalTypes": {}
                                        }
                                    ],
                                    "allowSegments": true,
                                    "colorsCapacity": 1,
                                    "shapesCapacity": 1,
                                    "allowLayerFilters": false,
                                    "availableLabelModes": [
                                        "absolute"
                                    ]
                                },
                                "geopointsConfig": {},
                                "datasetsPartialFields": [
                                    [
                                        {
                                            "guid": "fd5026f0-ab2a-11f0-b391-d3c99b5212c4",
                                            "title": "Количество единиц товаров (1)",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "4f3ae870-aa58-11f0-91ae-41cc1710bd8b",
                                            "title": "Количество единиц товаров",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "95f17b60-ab36-11f0-a2f4-fdfba76f64b3",
                                            "title": "Номер покупки",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "e3a1cfe0-aa55-11f0-8395-f32b2462dd84",
                                            "title": "Фильтр даты",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "end_date",
                                            "title": "end_date",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "start_date",
                                            "title": "start_date",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "f828f540-a935-11f0-976d-099c0b05b9ec",
                                            "title": "%_discount",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "584ad600-a92c-11f0-976d-099c0b05b9ec",
                                            "title": "scale_value",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "8125b920-ab28-11f0-bffa-65bc24252e3e",
                                            "title": "scale_value_sparkline",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "scale",
                                            "title": "scale",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "660eb030-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_month",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "d02fc430-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_week",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "1cf44850-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_hour",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "3352b650-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_quarter",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "268ce800-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_year",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "087e5b50-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_date",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "id_scne",
                                            "title": "id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "client_id_lbc6",
                                            "title": "client_id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "gender_fzxw",
                                            "title": "gender",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "product_id_ey10",
                                            "title": "product_id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "quantity_k4iu",
                                            "title": "quantity",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "price_per_item_3dwq",
                                            "title": "price_per_item",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "discount_per_item_7maq",
                                            "title": "discount_per_item",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "total_price_1u2g",
                                            "title": "total_price",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "purchase_datetime_pvoa",
                                            "title": "purchase_datetime",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "461ec3e0-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_datedate",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "created_at_s6qq",
                                            "title": "created_at",
                                            "calc_mode": "direct"
                                        }
                                    ]
                                ]
                            }
                        },
                        "name": "Общие продажи и тренды - Линейная. Количество единиц товаров",
                        "type": "graph_wizard_node",
                        "annotation": {
                            "description": ""
                        }
                    }
                },
                "59": {
                    "widget": {
                        "data": {
                            "shared": {
                                "sort": [],
                                "type": "datalens",
                                "links": [],
                                "colors": [
                                    {
                                        "type": "PSEUDO",
                                        "title": "Measure Names",
                                        "className": "item pseudo-item dimension-item",
                                        "data_type": "string"
                                    }
                                ],
                                "labels": [],
                                "shapes": [
                                    {
                                        "type": "PSEUDO",
                                        "title": "Measure Names",
                                        "className": "item pseudo-item dimension-item",
                                        "data_type": "string"
                                    }
                                ],
                                "filters": [
                                    {
                                        "guid": "e3a1cfe0-aa55-11f0-8395-f32b2462dd84",
                                        "type": "DIMENSION",
                                        "title": "Фильтр даты",
                                        "filter": {
                                            "value": [
                                                "true"
                                            ],
                                            "operation": {
                                                "code": "EQ"
                                            }
                                        },
                                        "calc_mode": "formula",
                                        "datasetId": "6"
                                    },
                                    {
                                        "guid": "3ad87b00-ab29-11f0-8cfe-dbcb6abdb37e",
                                        "type": "MEASURE",
                                        "title": "Количество заказов за аналогичный период год назад",
                                        "filter": {
                                            "value": [
                                                "0"
                                            ],
                                            "operation": {
                                                "code": "GT"
                                            }
                                        },
                                        "calc_mode": "formula",
                                        "datasetId": "6"
                                    },
                                    {
                                        "guid": "7937ebb0-aa57-11f0-b800-09bf3c063c50",
                                        "type": "MEASURE",
                                        "title": "Количество заказов за выбранный период",
                                        "filter": {
                                            "value": [
                                                "0"
                                            ],
                                            "operation": {
                                                "code": "GT"
                                            }
                                        },
                                        "calc_mode": "formula",
                                        "datasetId": "6"
                                    }
                                ],
                                "updates": [
                                    {
                                        "field": {
                                            "cast": "integer",
                                            "guid": "3ad87b00-ab29-11f0-8cfe-dbcb6abdb37e",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Количество заказов за аналогичный период год назад",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "COUNTD_IF([id], [purchase_datetime] >= DATEADD([start_date], 'year', -1) AND [purchase_datedate] <= DATEADD([end_date], 'year', -1) BEFORE FILTER BY [Фильтр даты])",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "integer",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "COUNTD_IF([id_scne], [purchase_datetime_pvoa] >= DATEADD([start_date], 'year', -1) AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= DATEADD([end_date], 'year', -1) BEFORE FILTER BY [e3a1cfe0-aa55-11f0-8395-f32b2462dd84])",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "integer",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "integer",
                                            "guid": "7937ebb0-aa57-11f0-b800-09bf3c063c50",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "Количество заказов за выбранный период",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "COUNTD_IF([id], [purchase_datetime] >= [start_date] AND [purchase_datedate] <= [end_date])",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "integer",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "COUNTD_IF([id_scne], [purchase_datetime_pvoa] >= [start_date] AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= [end_date])",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "integer",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    }
                                ],
                                "version": "14",
                                "segments": [],
                                "tooltips": [],
                                "datasetsIds": [
                                    "6"
                                ],
                                "hierarchies": [],
                                "colorsConfig": {
                                    "palette": "",
                                    "colorMode": "palette",
                                    "mountedColors": {
                                        "Количество заказов": "5",
                                        "Количество заказов за выбранный период": "5",
                                        "Количество заказов за аналогичный период год назад": "5"
                                    },
                                    "polygonBorders": "show",
                                    "coloredByMeasure": true
                                },
                                "shapesConfig": {
                                    "mountedShapes": {
                                        "Количество заказов за выбранный период": "Solid",
                                        "Количество заказов за аналогичный период год назад": "Dot"
                                    }
                                },
                                "extraSettings": {
                                    "feed": "",
                                    "title": "Общие продажи и тренды - Линейная. Количество заказов",
                                    "stacking": "on",
                                    "zoomMode": "auto",
                                    "titleMode": "hide",
                                    "legendMode": "hide",
                                    "tooltipSum": "off",
                                    "mapCenterMode": "auto",
                                    "pivotInlineSort": "on",
                                    "navigatorSettings": {
                                        "selectedLines": [],
                                        "isNavigatorAvailable": false
                                    },
                                    "indicatorTitleMode": "by-field"
                                },
                                "visualization": {
                                    "id": "line",
                                    "name": "label_visualization-line",
                                    "type": "line",
                                    "allowSort": true,
                                    "iconProps": {
                                        "id": "visLines",
                                        "width": "24"
                                    },
                                    "allowColors": true,
                                    "allowLabels": true,
                                    "allowShapes": true,
                                    "allowFilters": true,
                                    "placeholders": [
                                        {
                                            "id": "x",
                                            "type": "x",
                                            "items": [
                                                {
                                                    "id": "dimension-8",
                                                    "cast": "string",
                                                    "guid": "8125b920-ab28-11f0-bffa-65bc24252e3e",
                                                    "type": "DIMENSION",
                                                    "title": "scale_value_sparkline",
                                                    "valid": true,
                                                    "hidden": false,
                                                    "source": "",
                                                    "formula": "IF [scale] = \"День\" THEN SUBSTR([purchase_date], 6, 5)\r\nELSEIF [scale] = \"Неделя\" THEN SUBSTR([purchase_week], 6, 3)\r\nELSEIF [scale] = \"Месяц\" THEN \"М\" + SUBSTR([purchase_month], 6, 2)\r\nELSEIF [scale] = \"Квартал\" THEN SUBSTR([purchase_quarter], 6, 2)\r\nELSE [purchase_year]\r\nEND",
                                                    "virtual": false,
                                                    "avatar_id": null,
                                                    "calc_mode": "formula",
                                                    "data_type": "string",
                                                    "datasetId": "6",
                                                    "fakeTitle": "Период",
                                                    "formatting": {
                                                        "format": "number",
                                                        "prefix": "",
                                                        "postfix": "",
                                                        "labelMode": "absolute",
                                                        "precision": 0,
                                                        "showRankDelimiter": true
                                                    },
                                                    "managed_by": "user",
                                                    "aggregation": "none",
                                                    "datasetName": "Данные о продажах",
                                                    "description": "",
                                                    "ui_settings": "",
                                                    "guid_formula": "IF [scale] = \"День\" THEN SUBSTR([087e5b50-a928-11f0-976d-099c0b05b9ec], 6, 5)\r\nELSEIF [scale] = \"Неделя\" THEN SUBSTR([d02fc430-a929-11f0-976d-099c0b05b9ec], 6, 3)\r\nELSEIF [scale] = \"Месяц\" THEN \"М\" + SUBSTR([660eb030-a928-11f0-976d-099c0b05b9ec], 6, 2)\r\nELSEIF [scale] = \"Квартал\" THEN SUBSTR([3352b650-a928-11f0-976d-099c0b05b9ec], 6, 2)\r\nELSE [268ce800-a928-11f0-976d-099c0b05b9ec]\r\nEND",
                                                    "default_value": null,
                                                    "hideLabelMode": "show",
                                                    "autoaggregated": false,
                                                    "lock_aggregation": false,
                                                    "value_constraint": null,
                                                    "initial_data_type": "string",
                                                    "aggregation_locked": true,
                                                    "has_auto_aggregation": false
                                                }
                                            ],
                                            "title": "section_x",
                                            "capacity": 1,
                                            "required": true,
                                            "settings": {
                                                "grid": "off",
                                                "type": "linear",
                                                "title": "off",
                                                "gridStep": "auto",
                                                "holidays": "off",
                                                "hideLabels": "no",
                                                "labelsView": "auto",
                                                "titleValue": "",
                                                "axisModeMap": {
                                                    "8125b920-ab28-11f0-bffa-65bc24252e3e": "discrete"
                                                },
                                                "gridStepValue": 50,
                                                "axisFormatMode": "auto",
                                                "axisVisibility": "hide",
                                                "axisLabelFormating": {},
                                                "axisLabelDateFormat": "DD.MM.YYYY"
                                            },
                                            "iconProps": {},
                                            "allowedTypes": {},
                                            "allowedDataTypes": {}
                                        },
                                        {
                                            "id": "y",
                                            "type": "y",
                                            "items": [
                                                {
                                                    "id": "measure-1",
                                                    "cast": "integer",
                                                    "guid": "3ad87b00-ab29-11f0-8cfe-dbcb6abdb37e",
                                                    "type": "MEASURE",
                                                    "local": true,
                                                    "title": "Количество заказов за аналогичный период год назад",
                                                    "valid": true,
                                                    "hidden": false,
                                                    "source": "",
                                                    "formula": "COUNTD_IF([id], [purchase_datetime] >= DATEADD([start_date], 'year', -1) AND [purchase_datedate] <= DATEADD([end_date], 'year', -1) BEFORE FILTER BY [Фильтр даты])",
                                                    "virtual": false,
                                                    "avatar_id": null,
                                                    "calc_mode": "formula",
                                                    "data_type": "integer",
                                                    "datasetId": "6",
                                                    "managed_by": "user",
                                                    "aggregation": "none",
                                                    "datasetName": "Данные о продажах",
                                                    "description": "",
                                                    "ui_settings": "",
                                                    "guid_formula": "COUNTD_IF([id_scne], [purchase_datetime_pvoa] >= DATEADD([start_date], 'year', -1) AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= DATEADD([end_date], 'year', -1) BEFORE FILTER BY [e3a1cfe0-aa55-11f0-8395-f32b2462dd84])",
                                                    "default_value": null,
                                                    "autoaggregated": true,
                                                    "lock_aggregation": false,
                                                    "value_constraint": null,
                                                    "initial_data_type": "integer",
                                                    "aggregation_locked": true,
                                                    "has_auto_aggregation": true
                                                },
                                                {
                                                    "id": "measure-0",
                                                    "cast": "integer",
                                                    "guid": "7937ebb0-aa57-11f0-b800-09bf3c063c50",
                                                    "type": "MEASURE",
                                                    "local": true,
                                                    "title": "Количество заказов за выбранный период",
                                                    "valid": true,
                                                    "hidden": false,
                                                    "source": "",
                                                    "formula": "COUNTD_IF([id], [purchase_datetime] >= [start_date] AND [purchase_datedate] <= [end_date])",
                                                    "virtual": false,
                                                    "avatar_id": null,
                                                    "calc_mode": "formula",
                                                    "data_type": "integer",
                                                    "datasetId": "6",
                                                    "formatting": {
                                                        "format": "number",
                                                        "prefix": "",
                                                        "postfix": "",
                                                        "labelMode": "absolute",
                                                        "precision": 0,
                                                        "showRankDelimiter": true
                                                    },
                                                    "managed_by": "user",
                                                    "aggregation": "none",
                                                    "datasetName": "Данные о продажах",
                                                    "description": "",
                                                    "ui_settings": "",
                                                    "guid_formula": "COUNTD_IF([id_scne], [purchase_datetime_pvoa] >= [start_date] AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= [end_date])",
                                                    "default_value": null,
                                                    "hideLabelMode": "show",
                                                    "originalTitle": "id",
                                                    "autoaggregated": true,
                                                    "lock_aggregation": false,
                                                    "value_constraint": null,
                                                    "initial_data_type": "integer",
                                                    "aggregation_locked": true,
                                                    "has_auto_aggregation": true
                                                }
                                            ],
                                            "title": "section_y",
                                            "settings": {
                                                "grid": "on",
                                                "type": "linear",
                                                "nulls": "connect",
                                                "scale": "auto",
                                                "title": "off",
                                                "gridStep": "auto",
                                                "hideLabels": "no",
                                                "labelsView": "auto",
                                                "scaleValue": "min-max",
                                                "titleValue": "",
                                                "gridStepValue": 50,
                                                "axisFormatMode": "auto",
                                                "axisVisibility": "hide",
                                                "axisLabelFormating": {},
                                                "axisLabelDateFormat": "DD.MM.YYYY"
                                            },
                                            "iconProps": {},
                                            "allowedTypes": {},
                                            "allowedDataTypes": {},
                                            "allowedFinalTypes": {}
                                        },
                                        {
                                            "id": "y2",
                                            "type": "y2",
                                            "items": [],
                                            "title": "section_y2",
                                            "settings": {
                                                "grid": "on",
                                                "type": "linear",
                                                "nulls": "connect",
                                                "scale": "auto",
                                                "title": "off",
                                                "gridStep": "auto",
                                                "hideLabels": "no",
                                                "labelsView": "auto",
                                                "scaleValue": "min-max",
                                                "titleValue": "",
                                                "gridStepValue": 50,
                                                "axisFormatMode": "auto",
                                                "axisVisibility": "show",
                                                "axisLabelFormating": {},
                                                "axisLabelDateFormat": "DD.MM.YYYY"
                                            },
                                            "iconProps": {},
                                            "allowedTypes": {},
                                            "allowedDataTypes": {},
                                            "allowedFinalTypes": {}
                                        }
                                    ],
                                    "allowSegments": true,
                                    "colorsCapacity": 1,
                                    "shapesCapacity": 1,
                                    "allowLayerFilters": false,
                                    "availableLabelModes": [
                                        "absolute"
                                    ]
                                },
                                "geopointsConfig": {},
                                "datasetsPartialFields": [
                                    [
                                        {
                                            "guid": "7937ebb0-aa57-11f0-b800-09bf3c063c50",
                                            "title": "Количество заказов за выбранный период",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "3ad87b00-ab29-11f0-8cfe-dbcb6abdb37e",
                                            "title": "Количество заказов за аналогичный период год назад",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "95f17b60-ab36-11f0-a2f4-fdfba76f64b3",
                                            "title": "Номер покупки",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "e3a1cfe0-aa55-11f0-8395-f32b2462dd84",
                                            "title": "Фильтр даты",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "end_date",
                                            "title": "end_date",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "start_date",
                                            "title": "start_date",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "f828f540-a935-11f0-976d-099c0b05b9ec",
                                            "title": "%_discount",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "584ad600-a92c-11f0-976d-099c0b05b9ec",
                                            "title": "scale_value",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "8125b920-ab28-11f0-bffa-65bc24252e3e",
                                            "title": "scale_value_sparkline",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "scale",
                                            "title": "scale",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "660eb030-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_month",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "d02fc430-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_week",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "1cf44850-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_hour",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "3352b650-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_quarter",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "268ce800-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_year",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "087e5b50-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_date",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "id_scne",
                                            "title": "id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "client_id_lbc6",
                                            "title": "client_id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "gender_fzxw",
                                            "title": "gender",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "product_id_ey10",
                                            "title": "product_id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "quantity_k4iu",
                                            "title": "quantity",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "price_per_item_3dwq",
                                            "title": "price_per_item",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "discount_per_item_7maq",
                                            "title": "discount_per_item",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "total_price_1u2g",
                                            "title": "total_price",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "purchase_datetime_pvoa",
                                            "title": "purchase_datetime",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "461ec3e0-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_datedate",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "created_at_s6qq",
                                            "title": "created_at",
                                            "calc_mode": "direct"
                                        }
                                    ]
                                ]
                            }
                        },
                        "name": "Общие продажи и тренды - Линейная. Количество заказов",
                        "type": "graph_wizard_node",
                        "annotation": {
                            "description": ""
                        }
                    }
                },
                "60": {
                    "widget": {
                        "data": {
                            "shared": {
                                "sort": [],
                                "type": "datalens",
                                "links": [],
                                "colors": [
                                    {
                                        "type": "PSEUDO",
                                        "title": "Measure Names",
                                        "className": "item pseudo-item dimension-item",
                                        "data_type": "string"
                                    }
                                ],
                                "labels": [],
                                "shapes": [
                                    {
                                        "type": "PSEUDO",
                                        "title": "Measure Names",
                                        "className": "item pseudo-item dimension-item",
                                        "data_type": "string"
                                    }
                                ],
                                "filters": [
                                    {
                                        "guid": "ef440440-a92d-11f0-bddf-d73cfe3178e1",
                                        "type": "MEASURE",
                                        "title": "avg_cheque_u",
                                        "filter": {
                                            "value": [
                                                "0"
                                            ],
                                            "operation": {
                                                "code": "GT"
                                            }
                                        },
                                        "calc_mode": "formula",
                                        "datasetId": "6"
                                    },
                                    {
                                        "guid": "7a122130-ab2a-11f0-9682-876b78d68f8d",
                                        "type": "MEASURE",
                                        "title": "avg_cheque_u (1)",
                                        "filter": {
                                            "value": [
                                                "0"
                                            ],
                                            "operation": {
                                                "code": "GT"
                                            }
                                        },
                                        "calc_mode": "formula",
                                        "datasetId": "6"
                                    },
                                    {
                                        "guid": "e3a1cfe0-aa55-11f0-8395-f32b2462dd84",
                                        "type": "DIMENSION",
                                        "title": "Фильтр даты",
                                        "filter": {
                                            "value": [
                                                "true"
                                            ],
                                            "operation": {
                                                "code": "EQ"
                                            }
                                        },
                                        "calc_mode": "formula",
                                        "datasetId": "6"
                                    }
                                ],
                                "updates": [
                                    {
                                        "field": {
                                            "cast": "float",
                                            "guid": "ef440440-a92d-11f0-bddf-d73cfe3178e1",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "avg_cheque_u",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "FDIV_SAFE(SUM_IF([total_price], [purchase_datetime] >= [start_date] AND [purchase_datedate] <= [end_date]),\r\nCOUNTD_IF([client_id], [purchase_datetime] >= [start_date] AND [purchase_datedate] <= [end_date]),\r\n0)",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "float",
                                            "datasetId": "6",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "FDIV_SAFE(SUM_IF([total_price_1u2g], [purchase_datetime_pvoa] >= [start_date] AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= [end_date]),\r\nCOUNTD_IF([client_id_lbc6], [purchase_datetime_pvoa] >= [start_date] AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= [end_date]),\r\n0)",
                                            "autoaggregated": true,
                                            "lock_aggregation": false,
                                            "initial_data_type": "float",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    },
                                    {
                                        "field": {
                                            "cast": "float",
                                            "guid": "7a122130-ab2a-11f0-9682-876b78d68f8d",
                                            "type": "MEASURE",
                                            "local": true,
                                            "title": "avg_cheque_u (1)",
                                            "valid": true,
                                            "hidden": false,
                                            "source": "",
                                            "formula": "FDIV_SAFE(SUM_IF([total_price], [purchase_datetime] >= DATEADD([start_date], 'year', -1) AND [purchase_datedate] <= DATEADD([end_date], 'year', -1) BEFORE FILTER BY [Фильтр даты]),\r\nCOUNTD_IF([client_id], [purchase_datetime] >= DATEADD([start_date], 'year', -1) AND [purchase_datedate] <= DATEADD([end_date], 'year', -1) BEFORE FILTER BY [Фильтр даты]),\r\n0)",
                                            "virtual": false,
                                            "calc_mode": "formula",
                                            "data_type": "float",
                                            "datasetId": "6",
                                            "fakeTitle": "Средний чек на пользователя за аналогичный период год назад",
                                            "managed_by": "user",
                                            "aggregation": "none",
                                            "description": "",
                                            "ui_settings": "",
                                            "guid_formula": "FDIV_SAFE(SUM_IF([total_price_1u2g], [purchase_datetime_pvoa] >= DATEADD([start_date], 'year', -1) AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= DATEADD([end_date], 'year', -1) BEFORE FILTER BY [e3a1cfe0-aa55-11f0-8395-f32b2462dd84]),\r\nCOUNTD_IF([client_id_lbc6], [purchase_datetime_pvoa] >= DATEADD([start_date], 'year', -1) AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= DATEADD([end_date], 'year', -1) BEFORE FILTER BY [e3a1cfe0-aa55-11f0-8395-f32b2462dd84]),\r\n0)",
                                            "autoaggregated": true,
                                            "originalFormula": "SUM_IF([total_price], [purchase_datetime] >= [start_date] AND [purchase_datedate] <= [end_date])/COUNTD_IF([client_id], [purchase_datetime] >= [start_date] AND [purchase_datedate] <= [end_date])",
                                            "lock_aggregation": false,
                                            "initial_data_type": "float",
                                            "aggregation_locked": true,
                                            "has_auto_aggregation": true
                                        },
                                        "action": "add_field",
                                        "debug_info": "merged-update"
                                    }
                                ],
                                "version": "14",
                                "segments": [],
                                "tooltips": [],
                                "datasetsIds": [
                                    "6"
                                ],
                                "hierarchies": [],
                                "colorsConfig": {
                                    "palette": "",
                                    "colorMode": "palette",
                                    "mountedColors": {
                                        "Средний чек на пользователя выбранный период": "10",
                                        "Средний чек на пользователя за аналогичный период год назад": "10"
                                    },
                                    "polygonBorders": "show",
                                    "coloredByMeasure": true
                                },
                                "shapesConfig": {
                                    "mountedShapes": {
                                        "Средний чек на пользователя выбранный период": "Solid",
                                        "Средний чек на пользователя за аналогичный период год назад": "Dot"
                                    }
                                },
                                "extraSettings": {
                                    "feed": "",
                                    "title": "Общие продажи и тренды - Линейная. Средний чек по клиенту",
                                    "stacking": "on",
                                    "zoomMode": "auto",
                                    "titleMode": "hide",
                                    "legendMode": "hide",
                                    "tooltipSum": "off",
                                    "mapCenterMode": "auto",
                                    "pivotInlineSort": "on",
                                    "navigatorSettings": {
                                        "selectedLines": [],
                                        "isNavigatorAvailable": false
                                    },
                                    "indicatorTitleMode": "by-field"
                                },
                                "visualization": {
                                    "id": "line",
                                    "name": "label_visualization-line",
                                    "type": "line",
                                    "allowSort": true,
                                    "iconProps": {
                                        "id": "visLines",
                                        "width": "24"
                                    },
                                    "allowColors": true,
                                    "allowLabels": true,
                                    "allowShapes": true,
                                    "allowFilters": true,
                                    "placeholders": [
                                        {
                                            "id": "x",
                                            "type": "x",
                                            "items": [
                                                {
                                                    "id": "dimension-8",
                                                    "cast": "string",
                                                    "guid": "8125b920-ab28-11f0-bffa-65bc24252e3e",
                                                    "type": "DIMENSION",
                                                    "title": "scale_value_sparkline",
                                                    "valid": true,
                                                    "hidden": false,
                                                    "source": "",
                                                    "formula": "IF [scale] = \"День\" THEN SUBSTR([purchase_date], 6, 5)\r\nELSEIF [scale] = \"Неделя\" THEN SUBSTR([purchase_week], 6, 3)\r\nELSEIF [scale] = \"Месяц\" THEN \"М\" + SUBSTR([purchase_month], 6, 2)\r\nELSEIF [scale] = \"Квартал\" THEN SUBSTR([purchase_quarter], 6, 2)\r\nELSE [purchase_year]\r\nEND",
                                                    "virtual": false,
                                                    "avatar_id": null,
                                                    "calc_mode": "formula",
                                                    "data_type": "string",
                                                    "datasetId": "6",
                                                    "fakeTitle": "Период",
                                                    "formatting": {
                                                        "format": "number",
                                                        "prefix": "",
                                                        "postfix": "",
                                                        "labelMode": "absolute",
                                                        "precision": 0,
                                                        "showRankDelimiter": true
                                                    },
                                                    "managed_by": "user",
                                                    "aggregation": "none",
                                                    "datasetName": "Данные о продажах",
                                                    "description": "",
                                                    "ui_settings": "",
                                                    "guid_formula": "IF [scale] = \"День\" THEN SUBSTR([087e5b50-a928-11f0-976d-099c0b05b9ec], 6, 5)\r\nELSEIF [scale] = \"Неделя\" THEN SUBSTR([d02fc430-a929-11f0-976d-099c0b05b9ec], 6, 3)\r\nELSEIF [scale] = \"Месяц\" THEN \"М\" + SUBSTR([660eb030-a928-11f0-976d-099c0b05b9ec], 6, 2)\r\nELSEIF [scale] = \"Квартал\" THEN SUBSTR([3352b650-a928-11f0-976d-099c0b05b9ec], 6, 2)\r\nELSE [268ce800-a928-11f0-976d-099c0b05b9ec]\r\nEND",
                                                    "default_value": null,
                                                    "hideLabelMode": "show",
                                                    "autoaggregated": false,
                                                    "lock_aggregation": false,
                                                    "value_constraint": null,
                                                    "initial_data_type": "string",
                                                    "aggregation_locked": true,
                                                    "has_auto_aggregation": false
                                                }
                                            ],
                                            "title": "section_x",
                                            "capacity": 1,
                                            "required": true,
                                            "settings": {
                                                "grid": "off",
                                                "type": "linear",
                                                "title": "off",
                                                "gridStep": "auto",
                                                "holidays": "off",
                                                "hideLabels": "no",
                                                "labelsView": "auto",
                                                "titleValue": "",
                                                "axisModeMap": {
                                                    "8125b920-ab28-11f0-bffa-65bc24252e3e": "discrete"
                                                },
                                                "gridStepValue": 50,
                                                "axisFormatMode": "auto",
                                                "axisVisibility": "hide",
                                                "axisLabelFormating": {},
                                                "axisLabelDateFormat": "DD.MM.YYYY"
                                            },
                                            "iconProps": {},
                                            "allowedTypes": {},
                                            "allowedDataTypes": {}
                                        },
                                        {
                                            "id": "y",
                                            "type": "y",
                                            "items": [
                                                {
                                                    "id": "measure-1",
                                                    "cast": "float",
                                                    "guid": "ef440440-a92d-11f0-bddf-d73cfe3178e1",
                                                    "type": "MEASURE",
                                                    "local": true,
                                                    "title": "avg_cheque_u",
                                                    "valid": true,
                                                    "hidden": false,
                                                    "source": "",
                                                    "formula": "FDIV_SAFE(SUM_IF([total_price], [purchase_datetime] >= [start_date] AND [purchase_datedate] <= [end_date]),\r\nCOUNTD_IF([client_id], [purchase_datetime] >= [start_date] AND [purchase_datedate] <= [end_date]),\r\n0)",
                                                    "virtual": false,
                                                    "avatar_id": null,
                                                    "calc_mode": "formula",
                                                    "data_type": "float",
                                                    "datasetId": "6",
                                                    "fakeTitle": "Средний чек на пользователя выбранный период",
                                                    "formatting": {
                                                        "format": "number",
                                                        "prefix": "",
                                                        "postfix": "",
                                                        "labelMode": "absolute",
                                                        "precision": 0,
                                                        "showRankDelimiter": true
                                                    },
                                                    "managed_by": "user",
                                                    "aggregation": "none",
                                                    "datasetName": "Данные о продажах",
                                                    "description": "",
                                                    "ui_settings": "",
                                                    "guid_formula": "FDIV_SAFE(SUM_IF([total_price_1u2g], [purchase_datetime_pvoa] >= [start_date] AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= [end_date]),\r\nCOUNTD_IF([client_id_lbc6], [purchase_datetime_pvoa] >= [start_date] AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= [end_date]),\r\n0)",
                                                    "default_value": null,
                                                    "hideLabelMode": "show",
                                                    "autoaggregated": true,
                                                    "lock_aggregation": false,
                                                    "value_constraint": null,
                                                    "initial_data_type": "float",
                                                    "aggregation_locked": true,
                                                    "has_auto_aggregation": true
                                                },
                                                {
                                                    "id": "measure-0",
                                                    "cast": "float",
                                                    "guid": "7a122130-ab2a-11f0-9682-876b78d68f8d",
                                                    "type": "MEASURE",
                                                    "local": true,
                                                    "title": "avg_cheque_u (1)",
                                                    "valid": true,
                                                    "hidden": false,
                                                    "source": "",
                                                    "formula": "FDIV_SAFE(SUM_IF([total_price], [purchase_datetime] >= DATEADD([start_date], 'year', -1) AND [purchase_datedate] <= DATEADD([end_date], 'year', -1) BEFORE FILTER BY [Фильтр даты]),\r\nCOUNTD_IF([client_id], [purchase_datetime] >= DATEADD([start_date], 'year', -1) AND [purchase_datedate] <= DATEADD([end_date], 'year', -1) BEFORE FILTER BY [Фильтр даты]),\r\n0)",
                                                    "virtual": false,
                                                    "avatar_id": null,
                                                    "calc_mode": "formula",
                                                    "data_type": "float",
                                                    "datasetId": "6",
                                                    "fakeTitle": "Средний чек на пользователя за аналогичный период год назад",
                                                    "formatting": {
                                                        "format": "number",
                                                        "prefix": "",
                                                        "postfix": "",
                                                        "labelMode": "absolute",
                                                        "precision": 0,
                                                        "showRankDelimiter": true
                                                    },
                                                    "managed_by": "user",
                                                    "aggregation": "none",
                                                    "datasetName": "Данные о продажах",
                                                    "description": "",
                                                    "ui_settings": "",
                                                    "guid_formula": "FDIV_SAFE(SUM_IF([total_price_1u2g], [purchase_datetime_pvoa] >= DATEADD([start_date], 'year', -1) AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= DATEADD([end_date], 'year', -1) BEFORE FILTER BY [e3a1cfe0-aa55-11f0-8395-f32b2462dd84]),\r\nCOUNTD_IF([client_id_lbc6], [purchase_datetime_pvoa] >= DATEADD([start_date], 'year', -1) AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= DATEADD([end_date], 'year', -1) BEFORE FILTER BY [e3a1cfe0-aa55-11f0-8395-f32b2462dd84]),\r\n0)",
                                                    "default_value": null,
                                                    "hideLabelMode": "show",
                                                    "autoaggregated": true,
                                                    "originalFormula": "SUM_IF([total_price], [purchase_datetime] >= [start_date] AND [purchase_datedate] <= [end_date])/COUNTD_IF([client_id], [purchase_datetime] >= [start_date] AND [purchase_datedate] <= [end_date])",
                                                    "lock_aggregation": false,
                                                    "value_constraint": null,
                                                    "initial_data_type": "float",
                                                    "aggregation_locked": true,
                                                    "has_auto_aggregation": true
                                                }
                                            ],
                                            "title": "section_y",
                                            "settings": {
                                                "grid": "on",
                                                "type": "linear",
                                                "nulls": "connect",
                                                "scale": "auto",
                                                "title": "off",
                                                "gridStep": "auto",
                                                "hideLabels": "no",
                                                "labelsView": "auto",
                                                "scaleValue": "min-max",
                                                "titleValue": "",
                                                "gridStepValue": 50,
                                                "axisFormatMode": "auto",
                                                "axisVisibility": "hide",
                                                "axisLabelFormating": {},
                                                "axisLabelDateFormat": "DD.MM.YYYY"
                                            },
                                            "iconProps": {},
                                            "allowedTypes": {},
                                            "allowedDataTypes": {},
                                            "allowedFinalTypes": {}
                                        },
                                        {
                                            "id": "y2",
                                            "type": "y2",
                                            "items": [],
                                            "title": "section_y2",
                                            "settings": {
                                                "grid": "on",
                                                "type": "linear",
                                                "nulls": "connect",
                                                "scale": "auto",
                                                "title": "off",
                                                "gridStep": "auto",
                                                "hideLabels": "no",
                                                "labelsView": "auto",
                                                "scaleValue": "min-max",
                                                "titleValue": "",
                                                "gridStepValue": 50,
                                                "axisFormatMode": "auto",
                                                "axisVisibility": "show",
                                                "axisLabelFormating": {},
                                                "axisLabelDateFormat": "DD.MM.YYYY"
                                            },
                                            "iconProps": {},
                                            "allowedTypes": {},
                                            "allowedDataTypes": {},
                                            "allowedFinalTypes": {}
                                        }
                                    ],
                                    "allowSegments": true,
                                    "colorsCapacity": 1,
                                    "shapesCapacity": 1,
                                    "allowLayerFilters": false,
                                    "availableLabelModes": [
                                        "absolute"
                                    ]
                                },
                                "geopointsConfig": {},
                                "datasetsPartialFields": [
                                    [
                                        {
                                            "guid": "7a122130-ab2a-11f0-9682-876b78d68f8d",
                                            "title": "avg_cheque_u (1)",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "ef440440-a92d-11f0-bddf-d73cfe3178e1",
                                            "title": "avg_cheque_u",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "95f17b60-ab36-11f0-a2f4-fdfba76f64b3",
                                            "title": "Номер покупки",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "e3a1cfe0-aa55-11f0-8395-f32b2462dd84",
                                            "title": "Фильтр даты",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "end_date",
                                            "title": "end_date",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "start_date",
                                            "title": "start_date",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "f828f540-a935-11f0-976d-099c0b05b9ec",
                                            "title": "%_discount",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "584ad600-a92c-11f0-976d-099c0b05b9ec",
                                            "title": "scale_value",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "8125b920-ab28-11f0-bffa-65bc24252e3e",
                                            "title": "scale_value_sparkline",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "scale",
                                            "title": "scale",
                                            "calc_mode": "parameter"
                                        },
                                        {
                                            "guid": "660eb030-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_month",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "d02fc430-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_week",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "1cf44850-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_hour",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "3352b650-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_quarter",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "268ce800-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_year",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "087e5b50-a928-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_date",
                                            "calc_mode": "formula"
                                        },
                                        {
                                            "guid": "id_scne",
                                            "title": "id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "client_id_lbc6",
                                            "title": "client_id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "gender_fzxw",
                                            "title": "gender",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "product_id_ey10",
                                            "title": "product_id",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "quantity_k4iu",
                                            "title": "quantity",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "price_per_item_3dwq",
                                            "title": "price_per_item",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "discount_per_item_7maq",
                                            "title": "discount_per_item",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "total_price_1u2g",
                                            "title": "total_price",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "purchase_datetime_pvoa",
                                            "title": "purchase_datetime",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "461ec3e0-a929-11f0-976d-099c0b05b9ec",
                                            "title": "purchase_datedate",
                                            "calc_mode": "direct"
                                        },
                                        {
                                            "guid": "created_at_s6qq",
                                            "title": "created_at",
                                            "calc_mode": "direct"
                                        }
                                    ]
                                ]
                            }
                        },
                        "name": "Общие продажи и тренды - Линейная. Средний чек по клиенту",
                        "type": "graph_wizard_node",
                        "annotation": {
                            "description": ""
                        }
                    }
                }
            },
            "dataset": {
                "0": {
                    "dataset": {
                        "name": "RMF-анализ",
                        "rls2": {},
                        "sources": [
                            {
                                "id": "bdfdbe81-ad1f-11f0-aedb-d78c4dfe0f7b",
                                "title": "SQL",
                                "valid": true,
                                "virtual": false,
                                "managed_by": "user",
                                "parameters": {
                                    "subsql": "WITH client_rfm_data AS (\r\n  SELECT \r\n    client_id,\r\n    -- Дата первого заказа\r\n    MIN(purchase_datetime::date) as first_order_date,\r\n    -- Recency: количество дней с последней покупки\r\n    CURRENT_DATE - MAX(purchase_datetime::date) as recency_days,\r\n    -- Frequency: количество уникальных заказов\r\n    COUNT(DISTINCT purchase_datetime::date) as frequency,\r\n    -- Monetary: общая сумма покупок\r\n    SUM(total_price) as monetary\r\n  FROM project.project_data\r\n  WHERE purchase_datetime::date >= '{{start_date}}' \r\n    AND purchase_datetime::date <= '{{end_date}}'\r\n  GROUP BY client_id\r\n),\r\nrfm_scores AS (\r\n  SELECT \r\n    client_id,\r\n    first_order_date,\r\n    recency_days,\r\n    frequency,\r\n    monetary,\r\n    -- RFM Scores (1-3, где 3 - лучший)\r\n    NTILE(3) OVER (ORDER BY recency_days ASC) as r_score,   -- Чем меньше дней, тем лучше\r\n    NTILE(3) OVER (ORDER BY frequency DESC) as f_score,     -- Чем больше покупок, тем лучше\r\n    NTILE(3) OVER (ORDER BY monetary DESC) as m_score       -- Чем больше сумма, тем лучше\r\n  FROM client_rfm_data\r\n)\r\nSELECT \r\n  client_id,\r\n  first_order_date,\r\n  r_score as R,\r\n  f_score as F,\r\n  m_score as M\r\nFROM rfm_scores\r\nORDER BY R DESC, F DESC, M DESC"
                                },
                                "raw_schema": [
                                    {
                                        "name": "client_id",
                                        "title": "client_id",
                                        "nullable": true,
                                        "user_type": "integer",
                                        "description": "",
                                        "native_type": {
                                            "name": "integer",
                                            "nullable": true,
                                            "native_type_class_name": "common_native_type"
                                        },
                                        "lock_aggregation": false,
                                        "has_auto_aggregation": false
                                    },
                                    {
                                        "name": "first_order_date",
                                        "title": "first_order_date",
                                        "nullable": true,
                                        "user_type": "date",
                                        "description": "",
                                        "native_type": {
                                            "name": "date",
                                            "nullable": true,
                                            "native_type_class_name": "common_native_type"
                                        },
                                        "lock_aggregation": false,
                                        "has_auto_aggregation": false
                                    },
                                    {
                                        "name": "r",
                                        "title": "r",
                                        "nullable": true,
                                        "user_type": "integer",
                                        "description": "",
                                        "native_type": {
                                            "name": "integer",
                                            "nullable": true,
                                            "native_type_class_name": "common_native_type"
                                        },
                                        "lock_aggregation": false,
                                        "has_auto_aggregation": false
                                    },
                                    {
                                        "name": "f",
                                        "title": "f",
                                        "nullable": true,
                                        "user_type": "integer",
                                        "description": "",
                                        "native_type": {
                                            "name": "integer",
                                            "nullable": true,
                                            "native_type_class_name": "common_native_type"
                                        },
                                        "lock_aggregation": false,
                                        "has_auto_aggregation": false
                                    },
                                    {
                                        "name": "m",
                                        "title": "m",
                                        "nullable": true,
                                        "user_type": "integer",
                                        "description": "",
                                        "native_type": {
                                            "name": "integer",
                                            "nullable": true,
                                            "native_type_class_name": "common_native_type"
                                        },
                                        "lock_aggregation": false,
                                        "has_auto_aggregation": false
                                    }
                                ],
                                "source_type": "PG_SUBSELECT",
                                "connection_id": "5",
                                "index_info_set": null,
                                "parameter_hash": "a6bb0dbcbdfed2fe"
                            }
                        ],
                        "description": "",
                        "revision_id": null,
                        "result_schema": [
                            {
                                "cast": "date",
                                "guid": "start_date",
                                "type": "DIMENSION",
                                "title": "start_date",
                                "valid": true,
                                "hidden": false,
                                "source": "",
                                "formula": "",
                                "virtual": false,
                                "avatar_id": null,
                                "calc_mode": "parameter",
                                "data_type": "date",
                                "managed_by": "user",
                                "aggregation": "none",
                                "description": "",
                                "ui_settings": "",
                                "guid_formula": "",
                                "default_value": "2023-01-01",
                                "autoaggregated": false,
                                "lock_aggregation": false,
                                "template_enabled": true,
                                "value_constraint": {
                                    "type": "null"
                                },
                                "initial_data_type": "date",
                                "aggregation_locked": true,
                                "has_auto_aggregation": false
                            },
                            {
                                "cast": "date",
                                "guid": "end_date",
                                "type": "DIMENSION",
                                "title": "end_date",
                                "valid": true,
                                "hidden": false,
                                "source": "",
                                "formula": "",
                                "virtual": false,
                                "avatar_id": null,
                                "calc_mode": "parameter",
                                "data_type": "date",
                                "managed_by": "user",
                                "aggregation": "none",
                                "description": "",
                                "ui_settings": "",
                                "guid_formula": "",
                                "default_value": "2023-12-31",
                                "autoaggregated": false,
                                "lock_aggregation": false,
                                "template_enabled": true,
                                "value_constraint": {
                                    "type": "null"
                                },
                                "initial_data_type": "date",
                                "aggregation_locked": true,
                                "has_auto_aggregation": false
                            },
                            {
                                "cast": "integer",
                                "guid": "client_id_dop9",
                                "type": "DIMENSION",
                                "title": "client_id",
                                "valid": true,
                                "hidden": false,
                                "source": "client_id",
                                "formula": "",
                                "virtual": false,
                                "avatar_id": "bdfdbe80-ad1f-11f0-aedb-d78c4dfe0f7b",
                                "calc_mode": "direct",
                                "data_type": "integer",
                                "managed_by": "user",
                                "aggregation": "none",
                                "description": "",
                                "ui_settings": "",
                                "guid_formula": "",
                                "default_value": null,
                                "autoaggregated": false,
                                "lock_aggregation": false,
                                "value_constraint": null,
                                "initial_data_type": "integer",
                                "aggregation_locked": false,
                                "has_auto_aggregation": false
                            },
                            {
                                "cast": "date",
                                "guid": "first_order_date_ghyl",
                                "type": "DIMENSION",
                                "title": "first_order_date",
                                "valid": true,
                                "hidden": false,
                                "source": "first_order_date",
                                "formula": "",
                                "virtual": false,
                                "avatar_id": "bdfdbe80-ad1f-11f0-aedb-d78c4dfe0f7b",
                                "calc_mode": "direct",
                                "data_type": "date",
                                "managed_by": "user",
                                "aggregation": "none",
                                "description": "",
                                "ui_settings": "",
                                "guid_formula": "",
                                "default_value": null,
                                "autoaggregated": false,
                                "lock_aggregation": false,
                                "value_constraint": null,
                                "initial_data_type": "date",
                                "aggregation_locked": false,
                                "has_auto_aggregation": false
                            },
                            {
                                "cast": "integer",
                                "guid": "r_kplf",
                                "type": "DIMENSION",
                                "title": "r",
                                "valid": true,
                                "hidden": false,
                                "source": "r",
                                "formula": "",
                                "virtual": false,
                                "avatar_id": "bdfdbe80-ad1f-11f0-aedb-d78c4dfe0f7b",
                                "calc_mode": "direct",
                                "data_type": "integer",
                                "managed_by": "user",
                                "aggregation": "none",
                                "description": "",
                                "ui_settings": "",
                                "guid_formula": "",
                                "default_value": null,
                                "autoaggregated": false,
                                "lock_aggregation": false,
                                "value_constraint": null,
                                "initial_data_type": "integer",
                                "aggregation_locked": false,
                                "has_auto_aggregation": false
                            },
                            {
                                "cast": "integer",
                                "guid": "f_ut86",
                                "type": "DIMENSION",
                                "title": "f",
                                "valid": true,
                                "hidden": false,
                                "source": "f",
                                "formula": "",
                                "virtual": false,
                                "avatar_id": "bdfdbe80-ad1f-11f0-aedb-d78c4dfe0f7b",
                                "calc_mode": "direct",
                                "data_type": "integer",
                                "managed_by": "user",
                                "aggregation": "none",
                                "description": "",
                                "ui_settings": "",
                                "guid_formula": "",
                                "default_value": null,
                                "autoaggregated": false,
                                "lock_aggregation": false,
                                "value_constraint": null,
                                "initial_data_type": "integer",
                                "aggregation_locked": false,
                                "has_auto_aggregation": false
                            },
                            {
                                "cast": "integer",
                                "guid": "m_eqpa",
                                "type": "DIMENSION",
                                "title": "m",
                                "valid": true,
                                "hidden": false,
                                "source": "m",
                                "formula": "",
                                "virtual": false,
                                "avatar_id": "bdfdbe80-ad1f-11f0-aedb-d78c4dfe0f7b",
                                "calc_mode": "direct",
                                "data_type": "integer",
                                "managed_by": "user",
                                "aggregation": "none",
                                "description": "",
                                "ui_settings": "",
                                "guid_formula": "",
                                "default_value": null,
                                "autoaggregated": false,
                                "lock_aggregation": false,
                                "value_constraint": null,
                                "initial_data_type": "integer",
                                "aggregation_locked": false,
                                "has_auto_aggregation": false
                            }
                        ],
                        "source_avatars": [
                            {
                                "id": "bdfdbe80-ad1f-11f0-aedb-d78c4dfe0f7b",
                                "title": "SQL",
                                "valid": true,
                                "is_root": true,
                                "virtual": false,
                                "source_id": "bdfdbe81-ad1f-11f0-aedb-d78c4dfe0f7b",
                                "managed_by": "user"
                            }
                        ],
                        "preview_enabled": true,
                        "avatar_relations": [],
                        "component_errors": {
                            "items": []
                        },
                        "template_enabled": true,
                        "result_schema_aux": {
                            "inter_dependencies": {
                                "deps": []
                            }
                        },
                        "obligatory_filters": [],
                        "data_export_forbidden": false,
                        "load_preview_by_default": true
                    }
                },
                "2": {
                    "dataset": {
                        "name": "LTV",
                        "rls2": {},
                        "sources": [
                            {
                                "id": "1bf50461-ad95-11f0-a10b-33d79d19b952",
                                "title": "SQL",
                                "valid": true,
                                "virtual": false,
                                "managed_by": "user",
                                "parameters": {
                                    "subsql": "WITH first_purchases AS (\r\n  SELECT \r\n    client_id,\r\n    DATE_TRUNC('month', MIN(purchase_datetime)) as cohort\r\n  FROM project.project_data\r\n  WHERE purchase_datetime::date >= '{{start_date}}' \r\n    AND purchase_datetime::date <= '{{end_date}}'\r\n  GROUP BY client_id\r\n),\r\ncohort_data AS (\r\n  SELECT \r\n    fp.cohort,\r\n    DATE_TRUNC('month', p.purchase_datetime) as month,\r\n    p.client_id,\r\n    p.total_price\r\n  FROM project.project_data p\r\n  JOIN first_purchases fp ON p.client_id = fp.client_id\r\n  WHERE p.purchase_datetime::date >= '{{start_date}}' \r\n    AND p.purchase_datetime::date <= '{{end_date}}'\r\n)\r\nSELECT \r\n  cohort,\r\n  month,\r\n  SUM(total_price) as revenue,\r\n  COUNT(DISTINCT client_id) as unique_clients_count,\r\n  ROUND(SUM(total_price) / NULLIF(COUNT(DISTINCT client_id), 0), 2) as avg_revenue\r\nFROM cohort_data\r\nGROUP BY cohort, month\r\nORDER BY cohort, month"
                                },
                                "raw_schema": [
                                    {
                                        "name": "cohort",
                                        "title": "cohort",
                                        "nullable": true,
                                        "user_type": "genericdatetime",
                                        "description": "",
                                        "native_type": {
                                            "name": "timestamp",
                                            "nullable": true,
                                            "native_type_class_name": "common_native_type"
                                        },
                                        "lock_aggregation": false,
                                        "has_auto_aggregation": false
                                    },
                                    {
                                        "name": "month",
                                        "title": "month",
                                        "nullable": true,
                                        "user_type": "genericdatetime",
                                        "description": "",
                                        "native_type": {
                                            "name": "timestamp",
                                            "nullable": true,
                                            "native_type_class_name": "common_native_type"
                                        },
                                        "lock_aggregation": false,
                                        "has_auto_aggregation": false
                                    },
                                    {
                                        "name": "revenue",
                                        "title": "revenue",
                                        "nullable": true,
                                        "user_type": "float",
                                        "description": "",
                                        "native_type": {
                                            "name": "numeric",
                                            "nullable": true,
                                            "native_type_class_name": "common_native_type"
                                        },
                                        "lock_aggregation": false,
                                        "has_auto_aggregation": false
                                    },
                                    {
                                        "name": "unique_clients_count",
                                        "title": "unique_clients_count",
                                        "nullable": true,
                                        "user_type": "integer",
                                        "description": "",
                                        "native_type": {
                                            "name": "bigint",
                                            "nullable": true,
                                            "native_type_class_name": "common_native_type"
                                        },
                                        "lock_aggregation": false,
                                        "has_auto_aggregation": false
                                    },
                                    {
                                        "name": "avg_revenue",
                                        "title": "avg_revenue",
                                        "nullable": true,
                                        "user_type": "float",
                                        "description": "",
                                        "native_type": {
                                            "name": "numeric",
                                            "nullable": true,
                                            "native_type_class_name": "common_native_type"
                                        },
                                        "lock_aggregation": false,
                                        "has_auto_aggregation": false
                                    }
                                ],
                                "source_type": "PG_SUBSELECT",
                                "connection_id": "5",
                                "index_info_set": null,
                                "parameter_hash": "bbc2f287e5ccb307"
                            }
                        ],
                        "description": "",
                        "revision_id": null,
                        "result_schema": [
                            {
                                "cast": "string",
                                "guid": "cc3205f0-ad98-11f0-8270-d151eea7da9a",
                                "type": "DIMENSION",
                                "title": "cohort_",
                                "valid": true,
                                "hidden": false,
                                "source": "",
                                "formula": "IF MONTH([cohort]) <= 9\r\nTHEN\r\n    STR(YEAR([cohort])) + '-0' + STR(MONTH([cohort]))\r\nELSE\r\n    STR(YEAR([cohort])) + '-' + STR(MONTH([cohort]))\r\nEND",
                                "virtual": false,
                                "avatar_id": null,
                                "calc_mode": "formula",
                                "data_type": "string",
                                "managed_by": "user",
                                "aggregation": "none",
                                "description": "",
                                "ui_settings": "",
                                "guid_formula": "IF MONTH([cohort_80i2]) <= 9\r\nTHEN\r\n    STR(YEAR([cohort_80i2])) + '-0' + STR(MONTH([cohort_80i2]))\r\nELSE\r\n    STR(YEAR([cohort_80i2])) + '-' + STR(MONTH([cohort_80i2]))\r\nEND",
                                "default_value": null,
                                "autoaggregated": false,
                                "lock_aggregation": false,
                                "value_constraint": null,
                                "initial_data_type": "string",
                                "aggregation_locked": true,
                                "has_auto_aggregation": false
                            },
                            {
                                "cast": "string",
                                "guid": "ace1f890-ad98-11f0-8270-d151eea7da9a",
                                "type": "DIMENSION",
                                "title": "month_",
                                "valid": true,
                                "hidden": false,
                                "source": "",
                                "formula": "IF MONTH([month]) <= 9\r\nTHEN\r\n    STR(YEAR([month])) + '-0' + STR(MONTH([month]))\r\nELSE\r\n    STR(YEAR([month])) + '-' + STR(MONTH([month]))\r\nEND",
                                "virtual": false,
                                "avatar_id": null,
                                "calc_mode": "formula",
                                "data_type": "string",
                                "managed_by": "user",
                                "aggregation": "none",
                                "description": "",
                                "ui_settings": "",
                                "guid_formula": "IF MONTH([month_nkj9]) <= 9\r\nTHEN\r\n    STR(YEAR([month_nkj9])) + '-0' + STR(MONTH([month_nkj9]))\r\nELSE\r\n    STR(YEAR([month_nkj9])) + '-' + STR(MONTH([month_nkj9]))\r\nEND",
                                "default_value": null,
                                "autoaggregated": false,
                                "lock_aggregation": false,
                                "value_constraint": null,
                                "initial_data_type": "string",
                                "aggregation_locked": true,
                                "has_auto_aggregation": false
                            },
                            {
                                "cast": "date",
                                "guid": "end_date",
                                "type": "DIMENSION",
                                "title": "end_date",
                                "valid": true,
                                "hidden": false,
                                "source": "",
                                "formula": "",
                                "virtual": false,
                                "avatar_id": null,
                                "calc_mode": "parameter",
                                "data_type": "date",
                                "managed_by": "user",
                                "aggregation": "none",
                                "description": "",
                                "ui_settings": "",
                                "guid_formula": "",
                                "default_value": "2023-12-31",
                                "autoaggregated": false,
                                "lock_aggregation": false,
                                "template_enabled": true,
                                "value_constraint": {
                                    "type": "null"
                                },
                                "initial_data_type": "date",
                                "aggregation_locked": true,
                                "has_auto_aggregation": false
                            },
                            {
                                "cast": "date",
                                "guid": "start_date",
                                "type": "DIMENSION",
                                "title": "start_date",
                                "valid": true,
                                "hidden": false,
                                "source": "",
                                "formula": "",
                                "virtual": false,
                                "avatar_id": null,
                                "calc_mode": "parameter",
                                "data_type": "date",
                                "managed_by": "user",
                                "aggregation": "none",
                                "description": "",
                                "ui_settings": "",
                                "guid_formula": "",
                                "default_value": "2023-01-01",
                                "autoaggregated": false,
                                "lock_aggregation": false,
                                "template_enabled": true,
                                "value_constraint": {
                                    "type": "null"
                                },
                                "initial_data_type": "date",
                                "aggregation_locked": true,
                                "has_auto_aggregation": false
                            },
                            {
                                "cast": "date",
                                "guid": "cohort_80i2",
                                "type": "DIMENSION",
                                "title": "cohort",
                                "valid": true,
                                "hidden": false,
                                "source": "cohort",
                                "formula": "",
                                "virtual": false,
                                "avatar_id": "1bf50460-ad95-11f0-a10b-33d79d19b952",
                                "calc_mode": "direct",
                                "data_type": "date",
                                "managed_by": "user",
                                "aggregation": "none",
                                "description": "",
                                "ui_settings": "",
                                "guid_formula": "",
                                "default_value": null,
                                "autoaggregated": false,
                                "lock_aggregation": false,
                                "value_constraint": null,
                                "initial_data_type": "genericdatetime",
                                "aggregation_locked": false,
                                "has_auto_aggregation": false
                            },
                            {
                                "cast": "date",
                                "guid": "month_nkj9",
                                "type": "DIMENSION",
                                "title": "month",
                                "valid": true,
                                "hidden": false,
                                "source": "month",
                                "formula": "",
                                "virtual": false,
                                "avatar_id": "1bf50460-ad95-11f0-a10b-33d79d19b952",
                                "calc_mode": "direct",
                                "data_type": "date",
                                "managed_by": "user",
                                "aggregation": "none",
                                "description": "",
                                "ui_settings": "",
                                "guid_formula": "",
                                "default_value": null,
                                "autoaggregated": false,
                                "lock_aggregation": false,
                                "value_constraint": null,
                                "initial_data_type": "genericdatetime",
                                "aggregation_locked": false,
                                "has_auto_aggregation": false
                            },
                            {
                                "cast": "float",
                                "guid": "revenue_r953",
                                "type": "DIMENSION",
                                "title": "revenue",
                                "valid": true,
                                "hidden": false,
                                "source": "revenue",
                                "formula": "",
                                "virtual": false,
                                "avatar_id": "1bf50460-ad95-11f0-a10b-33d79d19b952",
                                "calc_mode": "direct",
                                "data_type": "float",
                                "managed_by": "user",
                                "aggregation": "none",
                                "description": "",
                                "ui_settings": "",
                                "guid_formula": "",
                                "default_value": null,
                                "autoaggregated": false,
                                "lock_aggregation": false,
                                "value_constraint": null,
                                "initial_data_type": "float",
                                "aggregation_locked": false,
                                "has_auto_aggregation": false
                            },
                            {
                                "cast": "integer",
                                "guid": "unique_clients_count_oldu",
                                "type": "DIMENSION",
                                "title": "unique_clients_count",
                                "valid": true,
                                "hidden": false,
                                "source": "unique_clients_count",
                                "formula": "",
                                "virtual": false,
                                "avatar_id": "1bf50460-ad95-11f0-a10b-33d79d19b952",
                                "calc_mode": "direct",
                                "data_type": "integer",
                                "managed_by": "user",
                                "aggregation": "none",
                                "description": "",
                                "ui_settings": "",
                                "guid_formula": "",
                                "default_value": null,
                                "autoaggregated": false,
                                "lock_aggregation": false,
                                "value_constraint": null,
                                "initial_data_type": "integer",
                                "aggregation_locked": false,
                                "has_auto_aggregation": false
                            },
                            {
                                "cast": "float",
                                "guid": "avg_revenue_wt07",
                                "type": "DIMENSION",
                                "title": "avg_revenue",
                                "valid": true,
                                "hidden": false,
                                "source": "avg_revenue",
                                "formula": "",
                                "virtual": false,
                                "avatar_id": "1bf50460-ad95-11f0-a10b-33d79d19b952",
                                "calc_mode": "direct",
                                "data_type": "float",
                                "managed_by": "user",
                                "aggregation": "none",
                                "description": "",
                                "ui_settings": "",
                                "guid_formula": "",
                                "default_value": null,
                                "autoaggregated": false,
                                "lock_aggregation": false,
                                "value_constraint": null,
                                "initial_data_type": "float",
                                "aggregation_locked": false,
                                "has_auto_aggregation": false
                            }
                        ],
                        "source_avatars": [
                            {
                                "id": "1bf50460-ad95-11f0-a10b-33d79d19b952",
                                "title": "SQL",
                                "valid": true,
                                "is_root": true,
                                "virtual": false,
                                "source_id": "1bf50461-ad95-11f0-a10b-33d79d19b952",
                                "managed_by": "user"
                            }
                        ],
                        "preview_enabled": true,
                        "avatar_relations": [],
                        "component_errors": {
                            "items": []
                        },
                        "template_enabled": true,
                        "result_schema_aux": {
                            "inter_dependencies": {
                                "deps": [
                                    {
                                        "dep_field_id": "ace1f890-ad98-11f0-8270-d151eea7da9a",
                                        "ref_field_ids": [
                                            "month_nkj9"
                                        ]
                                    },
                                    {
                                        "dep_field_id": "cc3205f0-ad98-11f0-8270-d151eea7da9a",
                                        "ref_field_ids": [
                                            "cohort_80i2"
                                        ]
                                    }
                                ]
                            }
                        },
                        "obligatory_filters": [],
                        "data_export_forbidden": false,
                        "load_preview_by_default": true
                    }
                },
                "6": {
                    "dataset": {
                        "name": "Данные о продажах",
                        "rls2": {},
                        "sources": [
                            {
                                "id": "e2af43f1-a920-11f0-9254-7577ead3d7d0",
                                "title": "project_data",
                                "valid": true,
                                "virtual": false,
                                "managed_by": "user",
                                "parameters": {
                                    "db_name": null,
                                    "db_version": "PostgreSQL 18.0 (Ubuntu 18.0-1.pgdg24.04+3) on x86_64-pc-linux-gnu, compiled by gcc (Ubuntu 13.3.0-6ubuntu2~24.04) 13.3.0, 64-bit",
                                    "table_name": "project_data",
                                    "schema_name": "project"
                                },
                                "raw_schema": [
                                    {
                                        "name": "id",
                                        "title": "id",
                                        "nullable": false,
                                        "user_type": "integer",
                                        "description": "",
                                        "native_type": {
                                            "name": "integer",
                                            "nullable": false,
                                            "native_type_class_name": "common_native_type"
                                        },
                                        "lock_aggregation": false,
                                        "has_auto_aggregation": false
                                    },
                                    {
                                        "name": "client_id",
                                        "title": "client_id",
                                        "nullable": false,
                                        "user_type": "integer",
                                        "description": "",
                                        "native_type": {
                                            "name": "integer",
                                            "nullable": false,
                                            "native_type_class_name": "common_native_type"
                                        },
                                        "lock_aggregation": false,
                                        "has_auto_aggregation": false
                                    },
                                    {
                                        "name": "gender",
                                        "title": "gender",
                                        "nullable": true,
                                        "user_type": "string",
                                        "description": "",
                                        "native_type": {
                                            "name": "varchar",
                                            "nullable": true,
                                            "native_type_class_name": "common_native_type"
                                        },
                                        "lock_aggregation": false,
                                        "has_auto_aggregation": false
                                    },
                                    {
                                        "name": "product_id",
                                        "title": "product_id",
                                        "nullable": false,
                                        "user_type": "integer",
                                        "description": "",
                                        "native_type": {
                                            "name": "integer",
                                            "nullable": false,
                                            "native_type_class_name": "common_native_type"
                                        },
                                        "lock_aggregation": false,
                                        "has_auto_aggregation": false
                                    },
                                    {
                                        "name": "quantity",
                                        "title": "quantity",
                                        "nullable": false,
                                        "user_type": "integer",
                                        "description": "",
                                        "native_type": {
                                            "name": "integer",
                                            "nullable": false,
                                            "native_type_class_name": "common_native_type"
                                        },
                                        "lock_aggregation": false,
                                        "has_auto_aggregation": false
                                    },
                                    {
                                        "name": "price_per_item",
                                        "title": "price_per_item",
                                        "nullable": false,
                                        "user_type": "float",
                                        "description": "",
                                        "native_type": {
                                            "name": "numeric",
                                            "nullable": false,
                                            "native_type_class_name": "common_native_type"
                                        },
                                        "lock_aggregation": false,
                                        "has_auto_aggregation": false
                                    },
                                    {
                                        "name": "discount_per_item",
                                        "title": "discount_per_item",
                                        "nullable": true,
                                        "user_type": "float",
                                        "description": "",
                                        "native_type": {
                                            "name": "numeric",
                                            "nullable": true,
                                            "native_type_class_name": "common_native_type"
                                        },
                                        "lock_aggregation": false,
                                        "has_auto_aggregation": false
                                    },
                                    {
                                        "name": "total_price",
                                        "title": "total_price",
                                        "nullable": false,
                                        "user_type": "float",
                                        "description": "",
                                        "native_type": {
                                            "name": "numeric",
                                            "nullable": false,
                                            "native_type_class_name": "common_native_type"
                                        },
                                        "lock_aggregation": false,
                                        "has_auto_aggregation": false
                                    },
                                    {
                                        "name": "purchase_datetime",
                                        "title": "purchase_datetime",
                                        "nullable": false,
                                        "user_type": "genericdatetime",
                                        "description": "",
                                        "native_type": {
                                            "name": "timestamp",
                                            "nullable": false,
                                            "native_type_class_name": "common_native_type"
                                        },
                                        "lock_aggregation": false,
                                        "has_auto_aggregation": false
                                    },
                                    {
                                        "name": "created_at",
                                        "title": "created_at",
                                        "nullable": true,
                                        "user_type": "genericdatetime",
                                        "description": "",
                                        "native_type": {
                                            "name": "timestamp",
                                            "nullable": true,
                                            "native_type_class_name": "common_native_type"
                                        },
                                        "lock_aggregation": false,
                                        "has_auto_aggregation": false
                                    }
                                ],
                                "source_type": "PG_TABLE",
                                "connection_id": "5",
                                "index_info_set": null,
                                "parameter_hash": "52079d3ad00c08bf"
                            }
                        ],
                        "description": "",
                        "revision_id": null,
                        "result_schema": [
                            {
                                "cast": "integer",
                                "guid": "95f17b60-ab36-11f0-a2f4-fdfba76f64b3",
                                "type": "MEASURE",
                                "title": "Номер покупки",
                                "valid": true,
                                "hidden": false,
                                "source": "",
                                "formula": "COUNT([id] INCLUDE [client_id])",
                                "virtual": false,
                                "avatar_id": null,
                                "calc_mode": "formula",
                                "data_type": "integer",
                                "managed_by": "user",
                                "aggregation": "none",
                                "description": "",
                                "ui_settings": "",
                                "guid_formula": "COUNT([id_scne] INCLUDE [client_id_lbc6])",
                                "default_value": null,
                                "autoaggregated": true,
                                "lock_aggregation": false,
                                "value_constraint": null,
                                "initial_data_type": "integer",
                                "aggregation_locked": true,
                                "has_auto_aggregation": true
                            },
                            {
                                "cast": "boolean",
                                "guid": "e3a1cfe0-aa55-11f0-8395-f32b2462dd84",
                                "type": "DIMENSION",
                                "title": "Фильтр даты",
                                "valid": true,
                                "hidden": false,
                                "source": "",
                                "formula": "[purchase_datedate] >= [start_date] AND [purchase_datedate] <= [end_date]",
                                "virtual": false,
                                "avatar_id": null,
                                "calc_mode": "formula",
                                "data_type": "boolean",
                                "managed_by": "user",
                                "aggregation": "none",
                                "description": "",
                                "ui_settings": "",
                                "guid_formula": "[461ec3e0-a929-11f0-976d-099c0b05b9ec] >= [start_date] AND [461ec3e0-a929-11f0-976d-099c0b05b9ec] <= [end_date]",
                                "default_value": null,
                                "autoaggregated": false,
                                "lock_aggregation": false,
                                "value_constraint": null,
                                "initial_data_type": "boolean",
                                "aggregation_locked": true,
                                "has_auto_aggregation": false
                            },
                            {
                                "cast": "date",
                                "guid": "end_date",
                                "type": "DIMENSION",
                                "title": "end_date",
                                "valid": true,
                                "hidden": false,
                                "source": "",
                                "formula": "",
                                "virtual": false,
                                "avatar_id": null,
                                "calc_mode": "parameter",
                                "data_type": "date",
                                "managed_by": "user",
                                "aggregation": "none",
                                "description": "",
                                "ui_settings": "",
                                "guid_formula": "",
                                "default_value": "2023-12-31",
                                "autoaggregated": false,
                                "lock_aggregation": false,
                                "template_enabled": false,
                                "value_constraint": null,
                                "initial_data_type": "date",
                                "aggregation_locked": true,
                                "has_auto_aggregation": false
                            },
                            {
                                "cast": "date",
                                "guid": "start_date",
                                "type": "DIMENSION",
                                "title": "start_date",
                                "valid": true,
                                "hidden": false,
                                "source": "",
                                "formula": "",
                                "virtual": false,
                                "avatar_id": null,
                                "calc_mode": "parameter",
                                "data_type": "date",
                                "managed_by": "user",
                                "aggregation": "none",
                                "description": "",
                                "ui_settings": "",
                                "guid_formula": "",
                                "default_value": "2023-01-01",
                                "autoaggregated": false,
                                "lock_aggregation": false,
                                "template_enabled": false,
                                "value_constraint": null,
                                "initial_data_type": "date",
                                "aggregation_locked": true,
                                "has_auto_aggregation": false
                            },
                            {
                                "cast": "float",
                                "guid": "f828f540-a935-11f0-976d-099c0b05b9ec",
                                "type": "DIMENSION",
                                "title": "%_discount",
                                "valid": true,
                                "hidden": false,
                                "source": "",
                                "formula": "FDIV_SAFE([discount_per_item],[price_per_item],0)",
                                "virtual": false,
                                "avatar_id": null,
                                "calc_mode": "formula",
                                "data_type": "float",
                                "managed_by": "user",
                                "aggregation": "none",
                                "description": "",
                                "ui_settings": "",
                                "guid_formula": "FDIV_SAFE([discount_per_item_7maq],[price_per_item_3dwq],0)",
                                "default_value": null,
                                "autoaggregated": false,
                                "lock_aggregation": false,
                                "value_constraint": null,
                                "initial_data_type": "float",
                                "aggregation_locked": true,
                                "has_auto_aggregation": false
                            },
                            {
                                "cast": "string",
                                "guid": "584ad600-a92c-11f0-976d-099c0b05b9ec",
                                "type": "DIMENSION",
                                "title": "scale_value",
                                "valid": true,
                                "hidden": false,
                                "source": "",
                                "formula": "IF [scale] = \"День\" THEN [purchase_date]\r\nELSEIF [scale] = \"Неделя\" THEN [purchase_week]\r\nELSEIF [scale] = \"Месяц\" THEN [purchase_month]\r\nELSEIF [scale] = \"Квартал\" THEN [purchase_quarter]\r\nELSE [purchase_year]\r\nEND",
                                "virtual": false,
                                "avatar_id": null,
                                "calc_mode": "formula",
                                "data_type": "string",
                                "managed_by": "user",
                                "aggregation": "none",
                                "description": "",
                                "ui_settings": "",
                                "guid_formula": "IF [scale] = \"День\" THEN [087e5b50-a928-11f0-976d-099c0b05b9ec]\r\nELSEIF [scale] = \"Неделя\" THEN [d02fc430-a929-11f0-976d-099c0b05b9ec]\r\nELSEIF [scale] = \"Месяц\" THEN [660eb030-a928-11f0-976d-099c0b05b9ec]\r\nELSEIF [scale] = \"Квартал\" THEN [3352b650-a928-11f0-976d-099c0b05b9ec]\r\nELSE [268ce800-a928-11f0-976d-099c0b05b9ec]\r\nEND",
                                "default_value": null,
                                "autoaggregated": false,
                                "lock_aggregation": false,
                                "value_constraint": null,
                                "initial_data_type": "string",
                                "aggregation_locked": true,
                                "has_auto_aggregation": false
                            },
                            {
                                "cast": "string",
                                "guid": "8125b920-ab28-11f0-bffa-65bc24252e3e",
                                "type": "DIMENSION",
                                "title": "scale_value_sparkline",
                                "valid": true,
                                "hidden": false,
                                "source": "",
                                "formula": "IF [scale] = \"День\" THEN SUBSTR([purchase_date], 6, 5)\r\nELSEIF [scale] = \"Неделя\" THEN SUBSTR([purchase_week], 6, 3)\r\nELSEIF [scale] = \"Месяц\" THEN \"М\" + SUBSTR([purchase_month], 6, 2)\r\nELSEIF [scale] = \"Квартал\" THEN SUBSTR([purchase_quarter], 6, 2)\r\nELSE [purchase_year]\r\nEND",
                                "virtual": false,
                                "avatar_id": null,
                                "calc_mode": "formula",
                                "data_type": "string",
                                "managed_by": "user",
                                "aggregation": "none",
                                "description": "",
                                "ui_settings": "",
                                "guid_formula": "IF [scale] = \"День\" THEN SUBSTR([087e5b50-a928-11f0-976d-099c0b05b9ec], 6, 5)\r\nELSEIF [scale] = \"Неделя\" THEN SUBSTR([d02fc430-a929-11f0-976d-099c0b05b9ec], 6, 3)\r\nELSEIF [scale] = \"Месяц\" THEN \"М\" + SUBSTR([660eb030-a928-11f0-976d-099c0b05b9ec], 6, 2)\r\nELSEIF [scale] = \"Квартал\" THEN SUBSTR([3352b650-a928-11f0-976d-099c0b05b9ec], 6, 2)\r\nELSE [268ce800-a928-11f0-976d-099c0b05b9ec]\r\nEND",
                                "default_value": null,
                                "autoaggregated": false,
                                "lock_aggregation": false,
                                "value_constraint": null,
                                "initial_data_type": "string",
                                "aggregation_locked": true,
                                "has_auto_aggregation": false
                            },
                            {
                                "cast": "string",
                                "guid": "scale",
                                "type": "DIMENSION",
                                "title": "scale",
                                "valid": true,
                                "hidden": false,
                                "source": "",
                                "formula": "",
                                "virtual": false,
                                "avatar_id": null,
                                "calc_mode": "parameter",
                                "data_type": "string",
                                "managed_by": "user",
                                "aggregation": "none",
                                "description": "",
                                "ui_settings": "",
                                "guid_formula": "",
                                "default_value": "Месяц",
                                "autoaggregated": false,
                                "lock_aggregation": false,
                                "template_enabled": false,
                                "value_constraint": null,
                                "initial_data_type": "string",
                                "aggregation_locked": true,
                                "has_auto_aggregation": false
                            },
                            {
                                "cast": "string",
                                "guid": "660eb030-a928-11f0-976d-099c0b05b9ec",
                                "type": "DIMENSION",
                                "title": "purchase_month",
                                "valid": true,
                                "hidden": false,
                                "source": "",
                                "formula": "IF MONTH([purchase_datetime]) <= 9\r\nTHEN\r\n    [purchase_year] + '-0' + STR(MONTH([purchase_datetime]))\r\nELSE\r\n    [purchase_year] + '-' + STR(MONTH([purchase_datetime]))\r\nEND",
                                "virtual": false,
                                "avatar_id": null,
                                "calc_mode": "formula",
                                "data_type": "string",
                                "managed_by": "user",
                                "aggregation": "none",
                                "description": "",
                                "ui_settings": "",
                                "guid_formula": "IF MONTH([purchase_datetime_pvoa]) <= 9\r\nTHEN\r\n    [268ce800-a928-11f0-976d-099c0b05b9ec] + '-0' + STR(MONTH([purchase_datetime_pvoa]))\r\nELSE\r\n    [268ce800-a928-11f0-976d-099c0b05b9ec] + '-' + STR(MONTH([purchase_datetime_pvoa]))\r\nEND",
                                "default_value": null,
                                "autoaggregated": false,
                                "lock_aggregation": false,
                                "value_constraint": null,
                                "initial_data_type": "string",
                                "aggregation_locked": true,
                                "has_auto_aggregation": false
                            },
                            {
                                "cast": "string",
                                "guid": "d02fc430-a929-11f0-976d-099c0b05b9ec",
                                "type": "DIMENSION",
                                "title": "purchase_week",
                                "valid": true,
                                "hidden": false,
                                "source": "",
                                "formula": "IF WEEK([purchase_datetime]) <= 9\r\nTHEN\r\n    [purchase_year] + '-W0' + STR(WEEK([purchase_datetime]))\r\nELSE\r\n    [purchase_year] + '-W' + STR(WEEK([purchase_datetime]))\r\nEND",
                                "virtual": false,
                                "avatar_id": null,
                                "calc_mode": "formula",
                                "data_type": "string",
                                "managed_by": "user",
                                "aggregation": "none",
                                "description": "",
                                "ui_settings": "",
                                "guid_formula": "IF WEEK([purchase_datetime_pvoa]) <= 9\r\nTHEN\r\n    [268ce800-a928-11f0-976d-099c0b05b9ec] + '-W0' + STR(WEEK([purchase_datetime_pvoa]))\r\nELSE\r\n    [268ce800-a928-11f0-976d-099c0b05b9ec] + '-W' + STR(WEEK([purchase_datetime_pvoa]))\r\nEND",
                                "default_value": null,
                                "autoaggregated": false,
                                "lock_aggregation": false,
                                "value_constraint": null,
                                "initial_data_type": "string",
                                "aggregation_locked": true,
                                "has_auto_aggregation": false
                            },
                            {
                                "cast": "string",
                                "guid": "1cf44850-a929-11f0-976d-099c0b05b9ec",
                                "type": "DIMENSION",
                                "title": "purchase_hour",
                                "valid": true,
                                "hidden": false,
                                "source": "",
                                "formula": "IF HOUR([purchase_datetime]) <= 9\r\nTHEN\r\n    '0' + STR(HOUR([purchase_datetime]))\r\nELSE\r\n    STR(HOUR([purchase_datetime]))\r\nEND",
                                "virtual": false,
                                "avatar_id": null,
                                "calc_mode": "formula",
                                "data_type": "string",
                                "managed_by": "user",
                                "aggregation": "none",
                                "description": "",
                                "ui_settings": "",
                                "guid_formula": "IF HOUR([purchase_datetime_pvoa]) <= 9\r\nTHEN\r\n    '0' + STR(HOUR([purchase_datetime_pvoa]))\r\nELSE\r\n    STR(HOUR([purchase_datetime_pvoa]))\r\nEND",
                                "default_value": null,
                                "autoaggregated": false,
                                "lock_aggregation": false,
                                "value_constraint": null,
                                "initial_data_type": "string",
                                "aggregation_locked": true,
                                "has_auto_aggregation": false
                            },
                            {
                                "cast": "string",
                                "guid": "3352b650-a928-11f0-976d-099c0b05b9ec",
                                "type": "DIMENSION",
                                "title": "purchase_quarter",
                                "valid": true,
                                "hidden": false,
                                "source": "",
                                "formula": "STR(YEAR([purchase_datetime])) + '-Q' + STR(QUARTER([purchase_datetime]))",
                                "virtual": false,
                                "avatar_id": null,
                                "calc_mode": "formula",
                                "data_type": "string",
                                "managed_by": "user",
                                "aggregation": "none",
                                "description": "",
                                "ui_settings": "",
                                "guid_formula": "STR(YEAR([purchase_datetime_pvoa])) + '-Q' + STR(QUARTER([purchase_datetime_pvoa]))",
                                "default_value": null,
                                "autoaggregated": false,
                                "lock_aggregation": false,
                                "value_constraint": null,
                                "initial_data_type": "string",
                                "aggregation_locked": true,
                                "has_auto_aggregation": false
                            },
                            {
                                "cast": "string",
                                "guid": "268ce800-a928-11f0-976d-099c0b05b9ec",
                                "type": "DIMENSION",
                                "title": "purchase_year",
                                "valid": true,
                                "hidden": false,
                                "source": "",
                                "formula": "STR(YEAR([purchase_datetime]))",
                                "virtual": false,
                                "avatar_id": null,
                                "calc_mode": "formula",
                                "data_type": "string",
                                "managed_by": "user",
                                "aggregation": "none",
                                "description": "",
                                "ui_settings": "",
                                "guid_formula": "STR(YEAR([purchase_datetime_pvoa]))",
                                "default_value": null,
                                "autoaggregated": false,
                                "lock_aggregation": false,
                                "value_constraint": null,
                                "initial_data_type": "string",
                                "aggregation_locked": true,
                                "has_auto_aggregation": false
                            },
                            {
                                "cast": "string",
                                "guid": "087e5b50-a928-11f0-976d-099c0b05b9ec",
                                "type": "DIMENSION",
                                "title": "purchase_date",
                                "valid": true,
                                "hidden": false,
                                "source": "",
                                "formula": "STR(DATE([purchase_datetime]))",
                                "virtual": false,
                                "avatar_id": null,
                                "calc_mode": "formula",
                                "data_type": "string",
                                "managed_by": "user",
                                "aggregation": "none",
                                "description": "",
                                "ui_settings": "",
                                "guid_formula": "STR(DATE([purchase_datetime_pvoa]))",
                                "default_value": null,
                                "autoaggregated": false,
                                "lock_aggregation": false,
                                "value_constraint": null,
                                "initial_data_type": "string",
                                "aggregation_locked": true,
                                "has_auto_aggregation": false
                            },
                            {
                                "cast": "integer",
                                "guid": "id_scne",
                                "type": "DIMENSION",
                                "title": "id",
                                "valid": true,
                                "hidden": false,
                                "source": "id",
                                "formula": "",
                                "virtual": false,
                                "avatar_id": "e2af43f0-a920-11f0-9254-7577ead3d7d0",
                                "calc_mode": "direct",
                                "data_type": "integer",
                                "managed_by": "user",
                                "aggregation": "none",
                                "description": "",
                                "ui_settings": "",
                                "guid_formula": "",
                                "default_value": null,
                                "autoaggregated": false,
                                "lock_aggregation": false,
                                "value_constraint": null,
                                "initial_data_type": "integer",
                                "aggregation_locked": false,
                                "has_auto_aggregation": false
                            },
                            {
                                "cast": "integer",
                                "guid": "client_id_lbc6",
                                "type": "DIMENSION",
                                "title": "client_id",
                                "valid": true,
                                "hidden": false,
                                "source": "client_id",
                                "formula": "",
                                "virtual": false,
                                "avatar_id": "e2af43f0-a920-11f0-9254-7577ead3d7d0",
                                "calc_mode": "direct",
                                "data_type": "integer",
                                "managed_by": "user",
                                "aggregation": "none",
                                "description": "",
                                "ui_settings": "",
                                "guid_formula": "",
                                "default_value": null,
                                "autoaggregated": false,
                                "lock_aggregation": false,
                                "value_constraint": null,
                                "initial_data_type": "integer",
                                "aggregation_locked": false,
                                "has_auto_aggregation": false
                            },
                            {
                                "cast": "string",
                                "guid": "gender_fzxw",
                                "type": "DIMENSION",
                                "title": "gender",
                                "valid": true,
                                "hidden": false,
                                "source": "gender",
                                "formula": "",
                                "virtual": false,
                                "avatar_id": "e2af43f0-a920-11f0-9254-7577ead3d7d0",
                                "calc_mode": "direct",
                                "data_type": "string",
                                "managed_by": "user",
                                "aggregation": "none",
                                "description": "",
                                "ui_settings": "",
                                "guid_formula": "",
                                "default_value": null,
                                "autoaggregated": false,
                                "lock_aggregation": false,
                                "value_constraint": null,
                                "initial_data_type": "string",
                                "aggregation_locked": false,
                                "has_auto_aggregation": false
                            },
                            {
                                "cast": "integer",
                                "guid": "product_id_ey10",
                                "type": "DIMENSION",
                                "title": "product_id",
                                "valid": true,
                                "hidden": false,
                                "source": "product_id",
                                "formula": "",
                                "virtual": false,
                                "avatar_id": "e2af43f0-a920-11f0-9254-7577ead3d7d0",
                                "calc_mode": "direct",
                                "data_type": "integer",
                                "managed_by": "user",
                                "aggregation": "none",
                                "description": "",
                                "ui_settings": "",
                                "guid_formula": "",
                                "default_value": null,
                                "autoaggregated": false,
                                "lock_aggregation": false,
                                "value_constraint": null,
                                "initial_data_type": "integer",
                                "aggregation_locked": false,
                                "has_auto_aggregation": false
                            },
                            {
                                "cast": "integer",
                                "guid": "quantity_k4iu",
                                "type": "DIMENSION",
                                "title": "quantity",
                                "valid": true,
                                "hidden": false,
                                "source": "quantity",
                                "formula": "",
                                "virtual": false,
                                "avatar_id": "e2af43f0-a920-11f0-9254-7577ead3d7d0",
                                "calc_mode": "direct",
                                "data_type": "integer",
                                "managed_by": "user",
                                "aggregation": "none",
                                "description": "",
                                "ui_settings": "",
                                "guid_formula": "",
                                "default_value": null,
                                "autoaggregated": false,
                                "lock_aggregation": false,
                                "value_constraint": null,
                                "initial_data_type": "integer",
                                "aggregation_locked": false,
                                "has_auto_aggregation": false
                            },
                            {
                                "cast": "float",
                                "guid": "price_per_item_3dwq",
                                "type": "DIMENSION",
                                "title": "price_per_item",
                                "valid": true,
                                "hidden": false,
                                "source": "price_per_item",
                                "formula": "",
                                "virtual": false,
                                "avatar_id": "e2af43f0-a920-11f0-9254-7577ead3d7d0",
                                "calc_mode": "direct",
                                "data_type": "float",
                                "managed_by": "user",
                                "aggregation": "none",
                                "description": "",
                                "ui_settings": "",
                                "guid_formula": "",
                                "default_value": null,
                                "autoaggregated": false,
                                "lock_aggregation": false,
                                "value_constraint": null,
                                "initial_data_type": "float",
                                "aggregation_locked": false,
                                "has_auto_aggregation": false
                            },
                            {
                                "cast": "float",
                                "guid": "discount_per_item_7maq",
                                "type": "DIMENSION",
                                "title": "discount_per_item",
                                "valid": true,
                                "hidden": false,
                                "source": "discount_per_item",
                                "formula": "",
                                "virtual": false,
                                "avatar_id": "e2af43f0-a920-11f0-9254-7577ead3d7d0",
                                "calc_mode": "direct",
                                "data_type": "float",
                                "managed_by": "user",
                                "aggregation": "none",
                                "description": "",
                                "ui_settings": "",
                                "guid_formula": "",
                                "default_value": null,
                                "autoaggregated": false,
                                "lock_aggregation": false,
                                "value_constraint": null,
                                "initial_data_type": "float",
                                "aggregation_locked": false,
                                "has_auto_aggregation": false
                            },
                            {
                                "cast": "float",
                                "guid": "total_price_1u2g",
                                "type": "DIMENSION",
                                "title": "total_price",
                                "valid": true,
                                "hidden": false,
                                "source": "total_price",
                                "formula": "",
                                "virtual": false,
                                "avatar_id": "e2af43f0-a920-11f0-9254-7577ead3d7d0",
                                "calc_mode": "direct",
                                "data_type": "float",
                                "managed_by": "user",
                                "aggregation": "none",
                                "description": "",
                                "ui_settings": "",
                                "guid_formula": "",
                                "default_value": null,
                                "autoaggregated": false,
                                "lock_aggregation": false,
                                "value_constraint": null,
                                "initial_data_type": "float",
                                "aggregation_locked": false,
                                "has_auto_aggregation": false
                            },
                            {
                                "cast": "genericdatetime",
                                "guid": "purchase_datetime_pvoa",
                                "type": "DIMENSION",
                                "title": "purchase_datetime",
                                "valid": true,
                                "hidden": false,
                                "source": "purchase_datetime",
                                "formula": "",
                                "virtual": false,
                                "avatar_id": "e2af43f0-a920-11f0-9254-7577ead3d7d0",
                                "calc_mode": "direct",
                                "data_type": "genericdatetime",
                                "managed_by": "user",
                                "aggregation": "none",
                                "description": "",
                                "ui_settings": "",
                                "guid_formula": "",
                                "default_value": null,
                                "autoaggregated": false,
                                "lock_aggregation": false,
                                "value_constraint": null,
                                "initial_data_type": "genericdatetime",
                                "aggregation_locked": false,
                                "has_auto_aggregation": false
                            },
                            {
                                "cast": "date",
                                "guid": "461ec3e0-a929-11f0-976d-099c0b05b9ec",
                                "type": "DIMENSION",
                                "title": "purchase_datedate",
                                "valid": true,
                                "hidden": false,
                                "source": "purchase_datetime",
                                "formula": "",
                                "virtual": false,
                                "avatar_id": "e2af43f0-a920-11f0-9254-7577ead3d7d0",
                                "calc_mode": "direct",
                                "data_type": "date",
                                "managed_by": "user",
                                "aggregation": "none",
                                "description": "",
                                "ui_settings": "",
                                "guid_formula": "",
                                "default_value": null,
                                "autoaggregated": false,
                                "lock_aggregation": false,
                                "value_constraint": null,
                                "initial_data_type": "genericdatetime",
                                "aggregation_locked": false,
                                "has_auto_aggregation": false
                            },
                            {
                                "cast": "genericdatetime",
                                "guid": "created_at_s6qq",
                                "type": "DIMENSION",
                                "title": "created_at",
                                "valid": true,
                                "hidden": true,
                                "source": "created_at",
                                "formula": "",
                                "virtual": false,
                                "avatar_id": "e2af43f0-a920-11f0-9254-7577ead3d7d0",
                                "calc_mode": "direct",
                                "data_type": "genericdatetime",
                                "managed_by": "user",
                                "aggregation": "none",
                                "description": "",
                                "ui_settings": "",
                                "guid_formula": "",
                                "default_value": null,
                                "autoaggregated": false,
                                "lock_aggregation": false,
                                "value_constraint": null,
                                "initial_data_type": "genericdatetime",
                                "aggregation_locked": false,
                                "has_auto_aggregation": false
                            }
                        ],
                        "source_avatars": [
                            {
                                "id": "e2af43f0-a920-11f0-9254-7577ead3d7d0",
                                "title": "project.project_data",
                                "valid": true,
                                "is_root": true,
                                "virtual": false,
                                "source_id": "e2af43f1-a920-11f0-9254-7577ead3d7d0",
                                "managed_by": "user"
                            }
                        ],
                        "preview_enabled": true,
                        "avatar_relations": [],
                        "component_errors": {
                            "items": []
                        },
                        "template_enabled": false,
                        "result_schema_aux": {
                            "inter_dependencies": {
                                "deps": [
                                    {
                                        "dep_field_id": "087e5b50-a928-11f0-976d-099c0b05b9ec",
                                        "ref_field_ids": [
                                            "purchase_datetime_pvoa"
                                        ]
                                    },
                                    {
                                        "dep_field_id": "268ce800-a928-11f0-976d-099c0b05b9ec",
                                        "ref_field_ids": [
                                            "purchase_datetime_pvoa"
                                        ]
                                    },
                                    {
                                        "dep_field_id": "3352b650-a928-11f0-976d-099c0b05b9ec",
                                        "ref_field_ids": [
                                            "purchase_datetime_pvoa"
                                        ]
                                    },
                                    {
                                        "dep_field_id": "660eb030-a928-11f0-976d-099c0b05b9ec",
                                        "ref_field_ids": [
                                            "purchase_datetime_pvoa",
                                            "268ce800-a928-11f0-976d-099c0b05b9ec"
                                        ]
                                    },
                                    {
                                        "dep_field_id": "1cf44850-a929-11f0-976d-099c0b05b9ec",
                                        "ref_field_ids": [
                                            "purchase_datetime_pvoa"
                                        ]
                                    },
                                    {
                                        "dep_field_id": "d02fc430-a929-11f0-976d-099c0b05b9ec",
                                        "ref_field_ids": [
                                            "purchase_datetime_pvoa",
                                            "268ce800-a928-11f0-976d-099c0b05b9ec"
                                        ]
                                    },
                                    {
                                        "dep_field_id": "584ad600-a92c-11f0-976d-099c0b05b9ec",
                                        "ref_field_ids": [
                                            "scale",
                                            "3352b650-a928-11f0-976d-099c0b05b9ec",
                                            "268ce800-a928-11f0-976d-099c0b05b9ec",
                                            "660eb030-a928-11f0-976d-099c0b05b9ec",
                                            "d02fc430-a929-11f0-976d-099c0b05b9ec",
                                            "087e5b50-a928-11f0-976d-099c0b05b9ec"
                                        ]
                                    },
                                    {
                                        "dep_field_id": "f828f540-a935-11f0-976d-099c0b05b9ec",
                                        "ref_field_ids": [
                                            "discount_per_item_7maq",
                                            "price_per_item_3dwq"
                                        ]
                                    },
                                    {
                                        "dep_field_id": "e3a1cfe0-aa55-11f0-8395-f32b2462dd84",
                                        "ref_field_ids": [
                                            "461ec3e0-a929-11f0-976d-099c0b05b9ec",
                                            "end_date",
                                            "start_date"
                                        ]
                                    },
                                    {
                                        "dep_field_id": "8125b920-ab28-11f0-bffa-65bc24252e3e",
                                        "ref_field_ids": [
                                            "scale",
                                            "3352b650-a928-11f0-976d-099c0b05b9ec",
                                            "268ce800-a928-11f0-976d-099c0b05b9ec",
                                            "660eb030-a928-11f0-976d-099c0b05b9ec",
                                            "d02fc430-a929-11f0-976d-099c0b05b9ec",
                                            "087e5b50-a928-11f0-976d-099c0b05b9ec"
                                        ]
                                    },
                                    {
                                        "dep_field_id": "95f17b60-ab36-11f0-a2f4-fdfba76f64b3",
                                        "ref_field_ids": [
                                            "client_id_lbc6",
                                            "id_scne"
                                        ]
                                    }
                                ]
                            }
                        },
                        "obligatory_filters": [],
                        "data_export_forbidden": false,
                        "load_preview_by_default": true
                    }
                },
                "44": {
                    "dataset": {
                        "name": "Когортный анализ",
                        "rls2": {},
                        "sources": [
                            {
                                "id": "9d3b2661-ab53-11f0-8bf9-3590e82fd31a",
                                "title": "cohort_analysis",
                                "valid": true,
                                "virtual": false,
                                "managed_by": "user",
                                "parameters": {
                                    "db_name": null,
                                    "db_version": "PostgreSQL 18.0 (Ubuntu 18.0-1.pgdg24.04+3) on x86_64-pc-linux-gnu, compiled by gcc (Ubuntu 13.3.0-6ubuntu2~24.04) 13.3.0, 64-bit",
                                    "table_name": "cohort_analysis",
                                    "schema_name": "project"
                                },
                                "raw_schema": [
                                    {
                                        "name": "client_id",
                                        "title": "client_id",
                                        "nullable": true,
                                        "user_type": "integer",
                                        "description": "",
                                        "native_type": {
                                            "name": "integer",
                                            "nullable": true,
                                            "native_type_class_name": "common_native_type"
                                        },
                                        "lock_aggregation": false,
                                        "has_auto_aggregation": false
                                    },
                                    {
                                        "name": "purchase_min_date",
                                        "title": "purchase_min_date",
                                        "nullable": true,
                                        "user_type": "date",
                                        "description": "",
                                        "native_type": {
                                            "name": "date",
                                            "nullable": true,
                                            "native_type_class_name": "common_native_type"
                                        },
                                        "lock_aggregation": false,
                                        "has_auto_aggregation": false
                                    },
                                    {
                                        "name": "purchase_date",
                                        "title": "purchase_date",
                                        "nullable": true,
                                        "user_type": "date",
                                        "description": "",
                                        "native_type": {
                                            "name": "date",
                                            "nullable": true,
                                            "native_type_class_name": "common_native_type"
                                        },
                                        "lock_aggregation": false,
                                        "has_auto_aggregation": false
                                    }
                                ],
                                "source_type": "PG_TABLE",
                                "connection_id": "5",
                                "index_info_set": null,
                                "parameter_hash": "d78987daf8aabbe8"
                            },
                            {
                                "id": "021eb812-ad72-11f0-a5b6-d5b4d92289de",
                                "title": "SQL",
                                "valid": true,
                                "virtual": false,
                                "managed_by": "user",
                                "parameters": {
                                    "subsql": "WITH first_purchases AS (\r\n  SELECT \r\n    client_id,\r\n    MIN(purchase_datetime::date) as purchase_min_date\r\n  FROM project.project_data\r\n  WHERE purchase_datetime::date >= '{{start_date}}' \r\n    AND purchase_datetime::date <= '{{end_date}}'\r\n  GROUP BY client_id\r\n),\r\ncohort_data AS (\r\n  SELECT \r\n    p.client_id,\r\n    f.purchase_min_date,\r\n    p.purchase_datetime::date as purchase_date\r\n  FROM project.project_data p\r\n  JOIN first_purchases f ON p.client_id = f.client_id\r\n  WHERE p.purchase_datetime::date >= '{{start_date}}' \r\n    AND p.purchase_datetime::date <= '{{end_date}}'\r\n)\r\nSELECT \r\n  client_id,\r\n  purchase_min_date,\r\n  purchase_date\r\nFROM cohort_data\r\nORDER BY client_id, purchase_date"
                                },
                                "raw_schema": [
                                    {
                                        "name": "client_id",
                                        "title": "client_id",
                                        "nullable": true,
                                        "user_type": "integer",
                                        "description": "",
                                        "native_type": {
                                            "name": "integer",
                                            "nullable": true,
                                            "native_type_class_name": "common_native_type"
                                        },
                                        "lock_aggregation": false,
                                        "has_auto_aggregation": false
                                    },
                                    {
                                        "name": "purchase_min_date",
                                        "title": "purchase_min_date",
                                        "nullable": true,
                                        "user_type": "date",
                                        "description": "",
                                        "native_type": {
                                            "name": "date",
                                            "nullable": true,
                                            "native_type_class_name": "common_native_type"
                                        },
                                        "lock_aggregation": false,
                                        "has_auto_aggregation": false
                                    },
                                    {
                                        "name": "purchase_date",
                                        "title": "purchase_date",
                                        "nullable": true,
                                        "user_type": "date",
                                        "description": "",
                                        "native_type": {
                                            "name": "date",
                                            "nullable": true,
                                            "native_type_class_name": "common_native_type"
                                        },
                                        "lock_aggregation": false,
                                        "has_auto_aggregation": false
                                    }
                                ],
                                "source_type": "PG_SUBSELECT",
                                "connection_id": "5",
                                "index_info_set": null,
                                "parameter_hash": "2dfb5ba01c785515"
                            }
                        ],
                        "description": "",
                        "revision_id": null,
                        "result_schema": [
                            {
                                "cast": "boolean",
                                "guid": "23566930-ab59-11f0-864e-7555cf0e0fb2",
                                "type": "DIMENSION",
                                "title": "filter_date",
                                "valid": true,
                                "hidden": false,
                                "source": "",
                                "formula": "[purchase_date] >= [start_date] AND [purchase_date] <= [end_date]",
                                "virtual": false,
                                "avatar_id": null,
                                "calc_mode": "formula",
                                "data_type": "boolean",
                                "managed_by": "user",
                                "aggregation": "none",
                                "description": "",
                                "ui_settings": "",
                                "guid_formula": "[purchase_date_n7ct] >= [start_date] AND [purchase_date_n7ct] <= [end_date]",
                                "default_value": null,
                                "autoaggregated": false,
                                "lock_aggregation": false,
                                "value_constraint": null,
                                "initial_data_type": "boolean",
                                "aggregation_locked": true,
                                "has_auto_aggregation": false
                            },
                            {
                                "cast": "string",
                                "guid": "b558d3c0-ab56-11f0-864e-7555cf0e0fb2",
                                "type": "DIMENSION",
                                "title": "purchase_month",
                                "valid": true,
                                "hidden": false,
                                "source": "",
                                "formula": "IF MONTH([purchase_min_date]) <= 9\r\nTHEN\r\n    STR(YEAR([purchase_min_date])) + '-0' + STR(MONTH([purchase_min_date]))\r\nELSE\r\n    STR(YEAR([purchase_min_date])) + '-' + STR(MONTH([purchase_min_date]))\r\nEND",
                                "virtual": false,
                                "avatar_id": null,
                                "calc_mode": "formula",
                                "data_type": "string",
                                "managed_by": "user",
                                "aggregation": "none",
                                "description": "",
                                "ui_settings": "",
                                "guid_formula": "IF MONTH([purchase_min_date_fass]) <= 9\r\nTHEN\r\n    STR(YEAR([purchase_min_date_fass])) + '-0' + STR(MONTH([purchase_min_date_fass]))\r\nELSE\r\n    STR(YEAR([purchase_min_date_fass])) + '-' + STR(MONTH([purchase_min_date_fass]))\r\nEND",
                                "default_value": null,
                                "autoaggregated": false,
                                "lock_aggregation": false,
                                "value_constraint": null,
                                "initial_data_type": "string",
                                "aggregation_locked": true,
                                "has_auto_aggregation": false
                            },
                            {
                                "cast": "integer",
                                "guid": "cb015f40-ab55-11f0-8bf9-3590e82fd31a",
                                "type": "DIMENSION",
                                "title": "diff_years",
                                "valid": true,
                                "hidden": false,
                                "source": "",
                                "formula": "DATEPART(DATE(INT([purchase_date])-INT([purchase_min_date])), 'year')-1970",
                                "virtual": false,
                                "avatar_id": null,
                                "calc_mode": "formula",
                                "data_type": "integer",
                                "managed_by": "user",
                                "aggregation": "none",
                                "description": "",
                                "ui_settings": "",
                                "guid_formula": "DATEPART(DATE(INT([purchase_date_n7ct])-INT([purchase_min_date_fass])), 'year')-1970",
                                "default_value": null,
                                "autoaggregated": false,
                                "lock_aggregation": false,
                                "value_constraint": null,
                                "initial_data_type": "integer",
                                "aggregation_locked": true,
                                "has_auto_aggregation": false
                            },
                            {
                                "cast": "integer",
                                "guid": "b92b2df0-ab55-11f0-8bf9-3590e82fd31a",
                                "type": "DIMENSION",
                                "title": "diff_months",
                                "valid": true,
                                "hidden": false,
                                "source": "",
                                "formula": "DATEPART(DATE(INT([purchase_date])-INT([purchase_min_date])), 'month') + [diff_years]*12",
                                "virtual": false,
                                "avatar_id": null,
                                "calc_mode": "formula",
                                "data_type": "integer",
                                "managed_by": "user",
                                "aggregation": "none",
                                "description": "",
                                "ui_settings": "",
                                "guid_formula": "DATEPART(DATE(INT([purchase_date_n7ct])-INT([purchase_min_date_fass])), 'month') + [cb015f40-ab55-11f0-8bf9-3590e82fd31a]*12",
                                "default_value": null,
                                "autoaggregated": false,
                                "lock_aggregation": false,
                                "value_constraint": null,
                                "initial_data_type": "integer",
                                "aggregation_locked": true,
                                "has_auto_aggregation": false
                            },
                            {
                                "cast": "boolean",
                                "guid": "end_period",
                                "type": "DIMENSION",
                                "title": "end_period",
                                "valid": true,
                                "hidden": false,
                                "source": "",
                                "formula": "",
                                "virtual": false,
                                "avatar_id": null,
                                "calc_mode": "parameter",
                                "data_type": "boolean",
                                "managed_by": "user",
                                "aggregation": "none",
                                "description": "",
                                "ui_settings": "",
                                "guid_formula": "",
                                "default_value": false,
                                "autoaggregated": false,
                                "lock_aggregation": false,
                                "template_enabled": false,
                                "value_constraint": {
                                    "type": "null"
                                },
                                "initial_data_type": "boolean",
                                "aggregation_locked": true,
                                "has_auto_aggregation": false
                            },
                            {
                                "cast": "date",
                                "guid": "start_date",
                                "type": "DIMENSION",
                                "title": "start_date",
                                "valid": true,
                                "hidden": false,
                                "source": "",
                                "formula": "",
                                "virtual": false,
                                "avatar_id": null,
                                "calc_mode": "parameter",
                                "data_type": "date",
                                "managed_by": "user",
                                "aggregation": "none",
                                "description": "",
                                "ui_settings": "",
                                "guid_formula": "",
                                "default_value": "2023-01-01",
                                "autoaggregated": false,
                                "lock_aggregation": false,
                                "template_enabled": true,
                                "value_constraint": {
                                    "type": "null"
                                },
                                "initial_data_type": "date",
                                "aggregation_locked": true,
                                "has_auto_aggregation": false
                            },
                            {
                                "cast": "date",
                                "guid": "end_date",
                                "type": "DIMENSION",
                                "title": "end_date",
                                "valid": true,
                                "hidden": false,
                                "source": "",
                                "formula": "",
                                "virtual": false,
                                "avatar_id": null,
                                "calc_mode": "parameter",
                                "data_type": "date",
                                "managed_by": "user",
                                "aggregation": "none",
                                "description": "",
                                "ui_settings": "",
                                "guid_formula": "",
                                "default_value": "2023-12-31",
                                "autoaggregated": false,
                                "lock_aggregation": false,
                                "template_enabled": true,
                                "value_constraint": {
                                    "type": "null"
                                },
                                "initial_data_type": "date",
                                "aggregation_locked": true,
                                "has_auto_aggregation": false
                            },
                            {
                                "cast": "integer",
                                "guid": "client_id_3d2i",
                                "type": "DIMENSION",
                                "title": "client_id",
                                "valid": true,
                                "hidden": false,
                                "source": "client_id",
                                "formula": "",
                                "virtual": false,
                                "avatar_id": "60c278c0-ad72-11f0-87de-f564fd0fce1a",
                                "calc_mode": "direct",
                                "data_type": "integer",
                                "managed_by": "user",
                                "aggregation": "none",
                                "description": "",
                                "ui_settings": "",
                                "guid_formula": "",
                                "default_value": null,
                                "autoaggregated": false,
                                "lock_aggregation": false,
                                "value_constraint": null,
                                "initial_data_type": "integer",
                                "aggregation_locked": false,
                                "has_auto_aggregation": false
                            },
                            {
                                "cast": "date",
                                "guid": "purchase_min_date_fass",
                                "type": "DIMENSION",
                                "title": "purchase_min_date",
                                "valid": true,
                                "hidden": false,
                                "source": "purchase_min_date",
                                "formula": "",
                                "virtual": false,
                                "avatar_id": "60c278c0-ad72-11f0-87de-f564fd0fce1a",
                                "calc_mode": "direct",
                                "data_type": "date",
                                "managed_by": "user",
                                "aggregation": "none",
                                "description": "",
                                "ui_settings": "",
                                "guid_formula": "",
                                "default_value": null,
                                "autoaggregated": false,
                                "lock_aggregation": false,
                                "value_constraint": null,
                                "initial_data_type": "date",
                                "aggregation_locked": false,
                                "has_auto_aggregation": false
                            },
                            {
                                "cast": "date",
                                "guid": "purchase_date_n7ct",
                                "type": "DIMENSION",
                                "title": "purchase_date",
                                "valid": true,
                                "hidden": false,
                                "source": "purchase_date",
                                "formula": "",
                                "virtual": false,
                                "avatar_id": "60c278c0-ad72-11f0-87de-f564fd0fce1a",
                                "calc_mode": "direct",
                                "data_type": "date",
                                "managed_by": "user",
                                "aggregation": "none",
                                "description": "",
                                "ui_settings": "",
                                "guid_formula": "",
                                "default_value": null,
                                "autoaggregated": false,
                                "lock_aggregation": false,
                                "value_constraint": null,
                                "initial_data_type": "date",
                                "aggregation_locked": false,
                                "has_auto_aggregation": false
                            }
                        ],
                        "source_avatars": [
                            {
                                "id": "60c278c0-ad72-11f0-87de-f564fd0fce1a",
                                "title": "SQL",
                                "valid": true,
                                "is_root": true,
                                "virtual": false,
                                "source_id": "021eb812-ad72-11f0-a5b6-d5b4d92289de",
                                "managed_by": "user"
                            }
                        ],
                        "preview_enabled": true,
                        "avatar_relations": [],
                        "component_errors": {
                            "items": []
                        },
                        "template_enabled": true,
                        "result_schema_aux": {
                            "inter_dependencies": {
                                "deps": [
                                    {
                                        "dep_field_id": "b92b2df0-ab55-11f0-8bf9-3590e82fd31a",
                                        "ref_field_ids": [
                                            "purchase_date_n7ct",
                                            "cb015f40-ab55-11f0-8bf9-3590e82fd31a",
                                            "purchase_min_date_fass"
                                        ]
                                    },
                                    {
                                        "dep_field_id": "b558d3c0-ab56-11f0-864e-7555cf0e0fb2",
                                        "ref_field_ids": [
                                            "purchase_min_date_fass"
                                        ]
                                    },
                                    {
                                        "dep_field_id": "23566930-ab59-11f0-864e-7555cf0e0fb2",
                                        "ref_field_ids": [
                                            "end_date",
                                            "purchase_date_n7ct",
                                            "start_date"
                                        ]
                                    },
                                    {
                                        "dep_field_id": "cb015f40-ab55-11f0-8bf9-3590e82fd31a",
                                        "ref_field_ids": [
                                            "purchase_date_n7ct",
                                            "purchase_min_date_fass"
                                        ]
                                    }
                                ]
                            }
                        },
                        "obligatory_filters": [],
                        "data_export_forbidden": false,
                        "load_preview_by_default": true
                    }
                },
                "51": {
                    "dataset": {
                        "name": "ABC-анализ",
                        "rls2": {},
                        "sources": [
                            {
                                "id": "5595f891-ab84-11f0-a2ee-cd085a2dd49b",
                                "title": "SQL",
                                "valid": true,
                                "virtual": false,
                                "managed_by": "user",
                                "parameters": {
                                    "subsql": "WITH product_sales AS (\r\n  SELECT \r\n    product_id,\r\n    DATE_TRUNC('{{scale_xyz}}', DATE(purchase_datetime)) as sales_month,\r\n    SUM(quantity) as quantity,\r\n    SUM(discount_per_item) as discount,\r\n    SUM(total_price) as revenue \r\n  FROM project.project_data \r\n  WHERE TRUE AND DATE(purchase_datetime) >= DATE('{{start_date}}') \r\n             AND DATE(purchase_datetime) <= DATE('{{end_date}}')\r\n  GROUP BY product_id, DATE_TRUNC('{{scale_xyz}}', DATE(purchase_datetime))\r\n),\r\nproduct_stats AS (\r\n  SELECT \r\n    product_id,\r\n    SUM(quantity) as total_quantity,\r\n    SUM(revenue) as total_revenue,\r\n    SUM(discount) AS discount,\r\n    -- Статистика для XYZ анализа\r\n    COUNT(DISTINCT sales_month) as active_months,\r\n    -- Коэффициент вариации (для XYZ)\r\n    CASE \r\n      WHEN AVG(revenue) > 0 THEN STDDEV(revenue) / AVG(revenue)\r\n      ELSE 1 \r\n    END as variation_coefficient\r\n  FROM product_sales\r\n  GROUP BY product_id\r\n  HAVING COUNT(DISTINCT sales_month) >= 2  -- Минимум 2 месяца данных для анализа\r\n),\r\nabc_analysis AS (\r\n  SELECT \r\n    product_id,\r\n    total_quantity,\r\n    total_revenue,\r\n    active_months,\r\n    discount,\r\n    variation_coefficient,\r\n    -- ABC по количеству\r\n    SUM(total_quantity) OVER(ORDER BY total_quantity DESC) / SUM(total_quantity) OVER() as quantity_cumulative,\r\n    -- ABC по выручке\r\n    SUM(total_revenue) OVER(ORDER BY total_revenue DESC) / SUM(total_revenue) OVER() as revenue_cumulative\r\n  FROM product_stats\r\n)\r\nSELECT\r\n  product_id,\r\n  total_quantity,\r\n  total_revenue,\r\n  discount,\r\n  variation_coefficient,\r\n  -- ABC анализ\r\n  CASE \r\n    WHEN quantity_cumulative <= 0.8 THEN 'A'\r\n    WHEN quantity_cumulative <= 0.95 THEN 'B' \r\n    ELSE 'C'\r\n  END as abc_quantity,\r\n  CASE \r\n    WHEN revenue_cumulative <= 0.8 THEN 'A'\r\n    WHEN revenue_cumulative <= 0.95 THEN 'B' \r\n    ELSE 'C'\r\n  END as abc_total_price,\r\n  -- XYZ анализ\r\n  CASE \r\n    WHEN variation_coefficient <= 0.1 THEN 'X'\r\n    WHEN variation_coefficient <= 0.25 THEN 'Y'\r\n    ELSE 'Z'\r\n  END as xyz_category,\r\n  -- Дополнительные метрики\r\n  active_months\r\nFROM abc_analysis\r\nORDER BY total_revenue DESC"
                                },
                                "raw_schema": [
                                    {
                                        "name": "product_id",
                                        "title": "product_id",
                                        "nullable": true,
                                        "user_type": "integer",
                                        "description": "",
                                        "native_type": {
                                            "name": "integer",
                                            "nullable": true,
                                            "native_type_class_name": "common_native_type"
                                        },
                                        "lock_aggregation": false,
                                        "has_auto_aggregation": false
                                    },
                                    {
                                        "name": "total_quantity",
                                        "title": "total_quantity",
                                        "nullable": true,
                                        "user_type": "float",
                                        "description": "",
                                        "native_type": {
                                            "name": "numeric",
                                            "nullable": true,
                                            "native_type_class_name": "common_native_type"
                                        },
                                        "lock_aggregation": false,
                                        "has_auto_aggregation": false
                                    },
                                    {
                                        "name": "total_revenue",
                                        "title": "total_revenue",
                                        "nullable": true,
                                        "user_type": "float",
                                        "description": "",
                                        "native_type": {
                                            "name": "numeric",
                                            "nullable": true,
                                            "native_type_class_name": "common_native_type"
                                        },
                                        "lock_aggregation": false,
                                        "has_auto_aggregation": false
                                    },
                                    {
                                        "name": "discount",
                                        "title": "discount",
                                        "nullable": true,
                                        "user_type": "float",
                                        "description": "",
                                        "native_type": {
                                            "name": "numeric",
                                            "nullable": true,
                                            "native_type_class_name": "common_native_type"
                                        },
                                        "lock_aggregation": false,
                                        "has_auto_aggregation": false
                                    },
                                    {
                                        "name": "variation_coefficient",
                                        "title": "variation_coefficient",
                                        "nullable": true,
                                        "user_type": "float",
                                        "description": "",
                                        "native_type": {
                                            "name": "numeric",
                                            "nullable": true,
                                            "native_type_class_name": "common_native_type"
                                        },
                                        "lock_aggregation": false,
                                        "has_auto_aggregation": false
                                    },
                                    {
                                        "name": "abc_quantity",
                                        "title": "abc_quantity",
                                        "nullable": true,
                                        "user_type": "string",
                                        "description": "",
                                        "native_type": {
                                            "name": "text",
                                            "nullable": true,
                                            "native_type_class_name": "common_native_type"
                                        },
                                        "lock_aggregation": false,
                                        "has_auto_aggregation": false
                                    },
                                    {
                                        "name": "abc_total_price",
                                        "title": "abc_total_price",
                                        "nullable": true,
                                        "user_type": "string",
                                        "description": "",
                                        "native_type": {
                                            "name": "text",
                                            "nullable": true,
                                            "native_type_class_name": "common_native_type"
                                        },
                                        "lock_aggregation": false,
                                        "has_auto_aggregation": false
                                    },
                                    {
                                        "name": "xyz_category",
                                        "title": "xyz_category",
                                        "nullable": true,
                                        "user_type": "string",
                                        "description": "",
                                        "native_type": {
                                            "name": "text",
                                            "nullable": true,
                                            "native_type_class_name": "common_native_type"
                                        },
                                        "lock_aggregation": false,
                                        "has_auto_aggregation": false
                                    },
                                    {
                                        "name": "active_months",
                                        "title": "active_months",
                                        "nullable": true,
                                        "user_type": "integer",
                                        "description": "",
                                        "native_type": {
                                            "name": "bigint",
                                            "nullable": true,
                                            "native_type_class_name": "common_native_type"
                                        },
                                        "lock_aggregation": false,
                                        "has_auto_aggregation": false
                                    }
                                ],
                                "source_type": "PG_SUBSELECT",
                                "connection_id": "5",
                                "index_info_set": null,
                                "parameter_hash": "cae40c8562ad6c8e"
                            }
                        ],
                        "description": "",
                        "revision_id": null,
                        "result_schema": [
                            {
                                "cast": "float",
                                "guid": "29375d40-adb7-11f0-8abe-b16307e401da",
                                "type": "MEASURE",
                                "title": "%_discount",
                                "valid": true,
                                "hidden": false,
                                "source": "",
                                "formula": "[discount] / [total_revenue]",
                                "virtual": false,
                                "avatar_id": null,
                                "calc_mode": "formula",
                                "data_type": "float",
                                "managed_by": "user",
                                "aggregation": "none",
                                "description": "",
                                "ui_settings": "",
                                "guid_formula": "[discount_zcfc] / [total_revenue_0izo]",
                                "default_value": null,
                                "autoaggregated": true,
                                "lock_aggregation": false,
                                "value_constraint": null,
                                "initial_data_type": "float",
                                "aggregation_locked": true,
                                "has_auto_aggregation": true
                            },
                            {
                                "cast": "string",
                                "guid": "scale_xyz",
                                "type": "DIMENSION",
                                "title": "scale_xyz",
                                "valid": true,
                                "hidden": false,
                                "source": "",
                                "formula": "",
                                "virtual": false,
                                "avatar_id": null,
                                "calc_mode": "parameter",
                                "data_type": "string",
                                "managed_by": "user",
                                "aggregation": "none",
                                "description": "",
                                "ui_settings": "",
                                "guid_formula": "",
                                "default_value": "month",
                                "autoaggregated": false,
                                "lock_aggregation": false,
                                "template_enabled": true,
                                "value_constraint": {
                                    "type": "default"
                                },
                                "initial_data_type": "string",
                                "aggregation_locked": true,
                                "has_auto_aggregation": false
                            },
                            {
                                "cast": "date",
                                "guid": "end_date",
                                "type": "DIMENSION",
                                "title": "end_date",
                                "valid": false,
                                "hidden": false,
                                "source": "",
                                "formula": "",
                                "virtual": false,
                                "avatar_id": null,
                                "calc_mode": "parameter",
                                "data_type": "date",
                                "managed_by": "user",
                                "aggregation": "none",
                                "description": "",
                                "ui_settings": "",
                                "guid_formula": "",
                                "default_value": "2023-12-31",
                                "autoaggregated": false,
                                "lock_aggregation": false,
                                "template_enabled": true,
                                "value_constraint": {
                                    "type": "null"
                                },
                                "initial_data_type": "date",
                                "aggregation_locked": true,
                                "has_auto_aggregation": false
                            },
                            {
                                "cast": "date",
                                "guid": "start_date",
                                "type": "DIMENSION",
                                "title": "start_date",
                                "valid": false,
                                "hidden": false,
                                "source": "",
                                "formula": "",
                                "virtual": false,
                                "avatar_id": null,
                                "calc_mode": "parameter",
                                "data_type": "date",
                                "managed_by": "user",
                                "aggregation": "none",
                                "description": "",
                                "ui_settings": "",
                                "guid_formula": "",
                                "default_value": "2023-01-01",
                                "autoaggregated": false,
                                "lock_aggregation": false,
                                "template_enabled": true,
                                "value_constraint": {
                                    "type": "null"
                                },
                                "initial_data_type": "date",
                                "aggregation_locked": true,
                                "has_auto_aggregation": false
                            },
                            {
                                "cast": "integer",
                                "guid": "product_id_14n5",
                                "type": "DIMENSION",
                                "title": "product_id",
                                "valid": true,
                                "hidden": false,
                                "source": "product_id",
                                "formula": "",
                                "virtual": false,
                                "avatar_id": "5595f890-ab84-11f0-a2ee-cd085a2dd49b",
                                "calc_mode": "direct",
                                "data_type": "integer",
                                "managed_by": "user",
                                "aggregation": "none",
                                "description": "",
                                "ui_settings": "",
                                "guid_formula": "",
                                "default_value": null,
                                "autoaggregated": false,
                                "lock_aggregation": false,
                                "value_constraint": null,
                                "initial_data_type": "integer",
                                "aggregation_locked": false,
                                "has_auto_aggregation": false
                            },
                            {
                                "cast": "float",
                                "guid": "total_quantity_v9zr",
                                "type": "MEASURE",
                                "title": "total_quantity",
                                "valid": true,
                                "hidden": false,
                                "source": "total_quantity",
                                "formula": "",
                                "virtual": false,
                                "avatar_id": "5595f890-ab84-11f0-a2ee-cd085a2dd49b",
                                "calc_mode": "direct",
                                "data_type": "float",
                                "managed_by": "user",
                                "aggregation": "sum",
                                "description": "",
                                "ui_settings": "",
                                "guid_formula": "",
                                "default_value": null,
                                "autoaggregated": false,
                                "lock_aggregation": false,
                                "value_constraint": null,
                                "initial_data_type": "float",
                                "aggregation_locked": false,
                                "has_auto_aggregation": false
                            },
                            {
                                "cast": "float",
                                "guid": "total_revenue_0izo",
                                "type": "MEASURE",
                                "title": "total_revenue",
                                "valid": true,
                                "hidden": false,
                                "source": "total_revenue",
                                "formula": "",
                                "virtual": false,
                                "avatar_id": "5595f890-ab84-11f0-a2ee-cd085a2dd49b",
                                "calc_mode": "direct",
                                "data_type": "float",
                                "managed_by": "user",
                                "aggregation": "sum",
                                "description": "",
                                "ui_settings": "",
                                "guid_formula": "",
                                "default_value": null,
                                "autoaggregated": false,
                                "lock_aggregation": false,
                                "value_constraint": null,
                                "initial_data_type": "float",
                                "aggregation_locked": false,
                                "has_auto_aggregation": false
                            },
                            {
                                "cast": "string",
                                "guid": "abc_quantity_0cay",
                                "type": "DIMENSION",
                                "title": "abc_quantity",
                                "valid": true,
                                "hidden": false,
                                "source": "abc_quantity",
                                "formula": "",
                                "virtual": false,
                                "avatar_id": "5595f890-ab84-11f0-a2ee-cd085a2dd49b",
                                "calc_mode": "direct",
                                "data_type": "string",
                                "managed_by": "user",
                                "aggregation": "none",
                                "description": "",
                                "ui_settings": "",
                                "guid_formula": "",
                                "default_value": null,
                                "autoaggregated": false,
                                "lock_aggregation": false,
                                "value_constraint": null,
                                "initial_data_type": "string",
                                "aggregation_locked": false,
                                "has_auto_aggregation": false
                            },
                            {
                                "cast": "string",
                                "guid": "abc_total_price_jf5b",
                                "type": "DIMENSION",
                                "title": "abc_total_price",
                                "valid": true,
                                "hidden": false,
                                "source": "abc_total_price",
                                "formula": "",
                                "virtual": false,
                                "avatar_id": "5595f890-ab84-11f0-a2ee-cd085a2dd49b",
                                "calc_mode": "direct",
                                "data_type": "string",
                                "managed_by": "user",
                                "aggregation": "none",
                                "description": "",
                                "ui_settings": "",
                                "guid_formula": "",
                                "default_value": null,
                                "autoaggregated": false,
                                "lock_aggregation": false,
                                "value_constraint": null,
                                "initial_data_type": "string",
                                "aggregation_locked": false,
                                "has_auto_aggregation": false
                            },
                            {
                                "cast": "string",
                                "guid": "xyz_category_ek3j",
                                "type": "DIMENSION",
                                "title": "xyz_category",
                                "valid": true,
                                "hidden": false,
                                "source": "xyz_category",
                                "formula": "",
                                "virtual": false,
                                "avatar_id": "5595f890-ab84-11f0-a2ee-cd085a2dd49b",
                                "calc_mode": "direct",
                                "data_type": "string",
                                "managed_by": "user",
                                "aggregation": "none",
                                "description": "",
                                "ui_settings": "",
                                "guid_formula": "",
                                "default_value": null,
                                "autoaggregated": false,
                                "lock_aggregation": false,
                                "value_constraint": null,
                                "initial_data_type": "string",
                                "aggregation_locked": false,
                                "has_auto_aggregation": false
                            },
                            {
                                "cast": "integer",
                                "guid": "active_months_9kl9",
                                "type": "DIMENSION",
                                "title": "active_months",
                                "valid": true,
                                "hidden": false,
                                "source": "active_months",
                                "formula": "",
                                "virtual": false,
                                "avatar_id": "5595f890-ab84-11f0-a2ee-cd085a2dd49b",
                                "calc_mode": "direct",
                                "data_type": "integer",
                                "managed_by": "user",
                                "aggregation": "none",
                                "description": "",
                                "ui_settings": "",
                                "guid_formula": "",
                                "default_value": null,
                                "autoaggregated": false,
                                "lock_aggregation": false,
                                "value_constraint": null,
                                "initial_data_type": "integer",
                                "aggregation_locked": false,
                                "has_auto_aggregation": false
                            },
                            {
                                "cast": "float",
                                "guid": "variation_coefficient_vryy",
                                "type": "MEASURE",
                                "title": "variation_coefficient",
                                "valid": true,
                                "hidden": false,
                                "source": "variation_coefficient",
                                "formula": "",
                                "virtual": false,
                                "avatar_id": "5595f890-ab84-11f0-a2ee-cd085a2dd49b",
                                "calc_mode": "direct",
                                "data_type": "float",
                                "managed_by": "user",
                                "aggregation": "avg",
                                "description": "",
                                "ui_settings": "",
                                "guid_formula": "",
                                "default_value": null,
                                "autoaggregated": false,
                                "lock_aggregation": false,
                                "value_constraint": null,
                                "initial_data_type": "float",
                                "aggregation_locked": false,
                                "has_auto_aggregation": false
                            },
                            {
                                "cast": "float",
                                "guid": "discount_zcfc",
                                "type": "MEASURE",
                                "title": "discount",
                                "valid": true,
                                "hidden": false,
                                "source": "discount",
                                "formula": "",
                                "virtual": false,
                                "avatar_id": "5595f890-ab84-11f0-a2ee-cd085a2dd49b",
                                "calc_mode": "direct",
                                "data_type": "float",
                                "managed_by": "user",
                                "aggregation": "sum",
                                "description": "",
                                "ui_settings": "",
                                "guid_formula": "",
                                "default_value": null,
                                "autoaggregated": false,
                                "lock_aggregation": false,
                                "value_constraint": null,
                                "initial_data_type": "float",
                                "aggregation_locked": false,
                                "has_auto_aggregation": false
                            }
                        ],
                        "source_avatars": [
                            {
                                "id": "5595f890-ab84-11f0-a2ee-cd085a2dd49b",
                                "title": "SQL",
                                "valid": true,
                                "is_root": true,
                                "virtual": false,
                                "source_id": "5595f891-ab84-11f0-a2ee-cd085a2dd49b",
                                "managed_by": "user"
                            }
                        ],
                        "preview_enabled": true,
                        "avatar_relations": [],
                        "component_errors": {
                            "items": []
                        },
                        "template_enabled": true,
                        "result_schema_aux": {
                            "inter_dependencies": {
                                "deps": [
                                    {
                                        "dep_field_id": "29375d40-adb7-11f0-8abe-b16307e401da",
                                        "ref_field_ids": [
                                            "total_revenue_0izo",
                                            "discount_zcfc"
                                        ]
                                    }
                                ]
                            }
                        },
                        "obligatory_filters": [],
                        "data_export_forbidden": false,
                        "load_preview_by_default": true
                    }
                }
            },
            "dash": {
                "36": {
                    "dash": {
                        "data": {
                            "salt": "0.862753137554738",
                            "tabs": [
                                {
                                    "id": "ye",
                                    "items": [
                                        {
                                            "id": "8n",
                                            "data": {
                                                "tabs": [
                                                    {
                                                        "id": "zR",
                                                        "hint": "Общая сумма ##Выручки## за выбранный период",
                                                        "title": "Выручка",
                                                        "params": {},
                                                        "chartId": "7",
                                                        "isDefault": true,
                                                        "autoHeight": false,
                                                        "background": {
                                                            "color": "transparent"
                                                        },
                                                        "enableHint": true,
                                                        "description": "",
                                                        "enableDescription": false
                                                    }
                                                ],
                                                "hideTitle": false
                                            },
                                            "type": "widget",
                                            "namespace": "default"
                                        },
                                        {
                                            "id": "Ov",
                                            "data": {
                                                "group": [
                                                    {
                                                        "id": "Ww",
                                                        "title": "Масштаб спраклайнов",
                                                        "width": "",
                                                        "source": {
                                                            "required": false,
                                                            "showHint": false,
                                                            "fieldName": "scale",
                                                            "showTitle": true,
                                                            "accentType": null,
                                                            "elementType": "select",
                                                            "defaultValue": [
                                                                "Неделя"
                                                            ],
                                                            "titlePlacement": "left",
                                                            "acceptableValues": [
                                                                {
                                                                    "title": "День",
                                                                    "value": "День"
                                                                },
                                                                {
                                                                    "title": "Неделя",
                                                                    "value": "Неделя"
                                                                },
                                                                {
                                                                    "title": "Месяц",
                                                                    "value": "Месяц"
                                                                },
                                                                {
                                                                    "title": "Квартал",
                                                                    "value": "Квартал"
                                                                },
                                                                {
                                                                    "title": "Год",
                                                                    "value": "Год"
                                                                }
                                                            ]
                                                        },
                                                        "defaults": {
                                                            "scale": [
                                                                "Неделя"
                                                            ]
                                                        },
                                                        "namespace": "default",
                                                        "sourceType": "manual",
                                                        "placementMode": "auto"
                                                    }
                                                ],
                                                "autoHeight": false,
                                                "buttonApply": false,
                                                "buttonReset": false,
                                                "showGroupName": false,
                                                "updateControlsOnChange": false
                                            },
                                            "type": "group_control",
                                            "namespace": "default"
                                        },
                                        {
                                            "id": "BR",
                                            "data": {
                                                "tabs": [
                                                    {
                                                        "id": "LO",
                                                        "hint": "Средний чек (##Общая выручка / Количество заказов##) за выбранный период",
                                                        "title": "Средний чек",
                                                        "params": {},
                                                        "chartId": "11",
                                                        "isDefault": true,
                                                        "autoHeight": false,
                                                        "background": {
                                                            "color": "transparent"
                                                        },
                                                        "enableHint": true,
                                                        "description": "",
                                                        "enableDescription": false
                                                    }
                                                ],
                                                "hideTitle": false
                                            },
                                            "type": "widget",
                                            "namespace": "default"
                                        },
                                        {
                                            "id": "3n",
                                            "data": {
                                                "tabs": [
                                                    {
                                                        "id": "oZ",
                                                        "hint": "Количество заказов за выбранный период",
                                                        "title": "Количество заказов",
                                                        "params": {},
                                                        "chartId": "12",
                                                        "isDefault": true,
                                                        "autoHeight": false,
                                                        "background": {
                                                            "color": "transparent"
                                                        },
                                                        "enableHint": true,
                                                        "description": "",
                                                        "enableDescription": false
                                                    }
                                                ],
                                                "hideTitle": false
                                            },
                                            "type": "widget",
                                            "namespace": "default"
                                        },
                                        {
                                            "id": "MV",
                                            "data": {
                                                "tabs": [
                                                    {
                                                        "id": "5V",
                                                        "hint": "Количество проданных единиц товаров за выбранный период",
                                                        "title": "Количество единиц товаров",
                                                        "params": {},
                                                        "chartId": "10",
                                                        "isDefault": true,
                                                        "autoHeight": false,
                                                        "background": {
                                                            "color": "transparent"
                                                        },
                                                        "enableHint": true,
                                                        "description": "",
                                                        "enableDescription": false
                                                    }
                                                ],
                                                "hideTitle": false
                                            },
                                            "type": "widget",
                                            "namespace": "default"
                                        },
                                        {
                                            "id": "2k",
                                            "data": {
                                                "tabs": [
                                                    {
                                                        "id": "Y9",
                                                        "hint": "",
                                                        "title": "Общая выручка. Тренд",
                                                        "params": {},
                                                        "chartId": "8",
                                                        "isDefault": true,
                                                        "autoHeight": false,
                                                        "background": {
                                                            "color": "transparent"
                                                        },
                                                        "enableHint": false,
                                                        "description": "",
                                                        "enableDescription": false
                                                    }
                                                ],
                                                "hideTitle": true
                                            },
                                            "type": "widget",
                                            "namespace": "default"
                                        },
                                        {
                                            "id": "RP",
                                            "data": {
                                                "tabs": [
                                                    {
                                                        "id": "DW",
                                                        "hint": "",
                                                        "title": "Количество заказов. Тренд",
                                                        "params": {},
                                                        "chartId": "59",
                                                        "isDefault": true,
                                                        "autoHeight": false,
                                                        "background": {
                                                            "color": "transparent"
                                                        },
                                                        "enableHint": false,
                                                        "description": "",
                                                        "enableDescription": false
                                                    }
                                                ],
                                                "hideTitle": true
                                            },
                                            "type": "widget",
                                            "namespace": "default"
                                        },
                                        {
                                            "id": "6L",
                                            "data": {
                                                "tabs": [
                                                    {
                                                        "id": "rW",
                                                        "hint": "",
                                                        "title": "Средний чек. Тренд",
                                                        "params": {},
                                                        "chartId": "9",
                                                        "isDefault": true,
                                                        "autoHeight": false,
                                                        "background": {
                                                            "color": "transparent"
                                                        },
                                                        "enableHint": false,
                                                        "description": "",
                                                        "enableDescription": false
                                                    }
                                                ],
                                                "hideTitle": true
                                            },
                                            "type": "widget",
                                            "namespace": "default"
                                        },
                                        {
                                            "id": "w6",
                                            "data": {
                                                "tabs": [
                                                    {
                                                        "id": "ak",
                                                        "hint": "",
                                                        "title": "Количество единиц товаров. Тренд",
                                                        "params": {},
                                                        "chartId": "58",
                                                        "isDefault": true,
                                                        "autoHeight": false,
                                                        "background": {
                                                            "color": "transparent"
                                                        },
                                                        "enableHint": false,
                                                        "description": "",
                                                        "enableDescription": false
                                                    }
                                                ],
                                                "hideTitle": true
                                            },
                                            "type": "widget",
                                            "namespace": "default"
                                        },
                                        {
                                            "id": "46",
                                            "data": {
                                                "tabs": [
                                                    {
                                                        "id": "lR",
                                                        "hint": "Средний чек на уникального покупателя (##Общая выручка / Количество уникальных клиентов##) за выбранный период",
                                                        "title": "Средний чек на покупателя",
                                                        "params": {},
                                                        "chartId": "14",
                                                        "isDefault": true,
                                                        "autoHeight": false,
                                                        "background": {
                                                            "color": "transparent"
                                                        },
                                                        "enableHint": true,
                                                        "description": "",
                                                        "enableDescription": false
                                                    }
                                                ],
                                                "hideTitle": false
                                            },
                                            "type": "widget",
                                            "namespace": "default"
                                        },
                                        {
                                            "id": "NM",
                                            "data": {
                                                "text": "#### **Цель вкладки:** \n\nДать общую картину состояния бизнеса, показать ключевые метрики и их динамику во времени. Это \"дашборд для руководителя\", который отвечает на вопрос \"Как идут наши продажи в целом?\".",
                                                "autoHeight": false,
                                                "background": {
                                                    "color": "",
                                                    "enabled": true
                                                }
                                            },
                                            "type": "text",
                                            "namespace": "default"
                                        },
                                        {
                                            "id": "d0",
                                            "data": {
                                                "tabs": [
                                                    {
                                                        "id": "ed",
                                                        "hint": "",
                                                        "title": "Общие продажи и тренды - Линейная. Средний чек по клиенту",
                                                        "params": {},
                                                        "chartId": "60",
                                                        "isDefault": true,
                                                        "autoHeight": false,
                                                        "background": {
                                                            "color": "transparent"
                                                        },
                                                        "enableHint": false,
                                                        "description": "",
                                                        "enableDescription": false
                                                    }
                                                ],
                                                "hideTitle": true
                                            },
                                            "type": "widget",
                                            "namespace": "default"
                                        },
                                        {
                                            "id": "kN2",
                                            "data": {
                                                "group": [
                                                    {
                                                        "id": "14y",
                                                        "title": "Период от",
                                                        "width": "",
                                                        "source": {
                                                            "required": true,
                                                            "showHint": false,
                                                            "fieldName": "start_date",
                                                            "showTitle": true,
                                                            "accentType": null,
                                                            "elementType": "date",
                                                            "defaultValue": "__relative_-3M",
                                                            "titlePlacement": "left"
                                                        },
                                                        "defaults": {
                                                            "start_date": "__relative_-3M"
                                                        },
                                                        "namespace": "default",
                                                        "sourceType": "manual",
                                                        "placementMode": "auto"
                                                    }
                                                ],
                                                "autoHeight": false,
                                                "buttonApply": false,
                                                "buttonReset": false,
                                                "showGroupName": false,
                                                "updateControlsOnChange": false
                                            },
                                            "type": "group_control",
                                            "namespace": "default"
                                        },
                                        {
                                            "id": "jBR",
                                            "data": {
                                                "group": [
                                                    {
                                                        "id": "Anz",
                                                        "title": "до",
                                                        "width": "",
                                                        "source": {
                                                            "required": true,
                                                            "showHint": false,
                                                            "fieldName": "end_date",
                                                            "showTitle": true,
                                                            "accentType": null,
                                                            "elementType": "date",
                                                            "defaultValue": "__relative_-1d",
                                                            "titlePlacement": "left"
                                                        },
                                                        "defaults": {
                                                            "end_date": "__relative_-1d"
                                                        },
                                                        "namespace": "default",
                                                        "sourceType": "manual",
                                                        "placementMode": "auto"
                                                    }
                                                ],
                                                "autoHeight": false,
                                                "buttonApply": false,
                                                "buttonReset": false,
                                                "showGroupName": false,
                                                "updateControlsOnChange": false
                                            },
                                            "type": "group_control",
                                            "namespace": "default"
                                        },
                                        {
                                            "id": "8pn",
                                            "data": {
                                                "tabs": [
                                                    {
                                                        "id": "zZR",
                                                        "hint": "",
                                                        "title": "Общие продажи и тренды - KPI. Общая выручка (Месяц)",
                                                        "params": {},
                                                        "chartId": "17",
                                                        "isDefault": true,
                                                        "autoHeight": false,
                                                        "background": {
                                                            "color": "transparent"
                                                        },
                                                        "enableHint": false,
                                                        "description": "",
                                                        "enableDescription": false
                                                    }
                                                ],
                                                "hideTitle": true
                                            },
                                            "type": "widget",
                                            "namespace": "default"
                                        },
                                        {
                                            "id": "OXv",
                                            "data": {
                                                "tabs": [
                                                    {
                                                        "id": "WAw",
                                                        "hint": "",
                                                        "title": "Общие продажи и тренды - KPI. Общая выручка (Неделя)",
                                                        "params": {},
                                                        "chartId": "18",
                                                        "isDefault": true,
                                                        "autoHeight": false,
                                                        "background": {
                                                            "color": "transparent"
                                                        },
                                                        "enableHint": false,
                                                        "description": "",
                                                        "enableDescription": false
                                                    }
                                                ],
                                                "hideTitle": true
                                            },
                                            "type": "widget",
                                            "namespace": "default"
                                        },
                                        {
                                            "id": "BeR",
                                            "data": {
                                                "tabs": [
                                                    {
                                                        "id": "L6O",
                                                        "hint": "",
                                                        "title": "Общие продажи и тренды - KPI. Общая выручка (День)",
                                                        "params": {},
                                                        "chartId": "19",
                                                        "isDefault": true,
                                                        "autoHeight": false,
                                                        "background": {
                                                            "color": "transparent"
                                                        },
                                                        "enableHint": false,
                                                        "description": "",
                                                        "enableDescription": false
                                                    }
                                                ],
                                                "hideTitle": true
                                            },
                                            "type": "widget",
                                            "namespace": "default"
                                        },
                                        {
                                            "id": "3Jn",
                                            "data": {
                                                "tabs": [
                                                    {
                                                        "id": "orZ",
                                                        "hint": "",
                                                        "title": "Общие продажи и тренды - KPI. Общая выручка (День) среднее",
                                                        "params": {},
                                                        "chartId": "20",
                                                        "isDefault": true,
                                                        "autoHeight": false,
                                                        "background": {
                                                            "color": "transparent"
                                                        },
                                                        "enableHint": false,
                                                        "description": "",
                                                        "enableDescription": false
                                                    }
                                                ],
                                                "hideTitle": true
                                            },
                                            "type": "widget",
                                            "namespace": "default"
                                        },
                                        {
                                            "id": "MNV",
                                            "data": {
                                                "tabs": [
                                                    {
                                                        "id": "54V",
                                                        "hint": "",
                                                        "title": "Общие продажи и тренды - KPI. Количество заказов (Месяц)",
                                                        "params": {},
                                                        "chartId": "21",
                                                        "isDefault": true,
                                                        "autoHeight": false,
                                                        "background": {
                                                            "color": "transparent"
                                                        },
                                                        "enableHint": false,
                                                        "description": "",
                                                        "enableDescription": false
                                                    }
                                                ],
                                                "hideTitle": true
                                            },
                                            "type": "widget",
                                            "namespace": "default"
                                        },
                                        {
                                            "id": "21k",
                                            "data": {
                                                "tabs": [
                                                    {
                                                        "id": "Yp9",
                                                        "hint": "",
                                                        "title": "Общие продажи и тренды - KPI. Количество заказов (Неделя)",
                                                        "params": {},
                                                        "chartId": "22",
                                                        "isDefault": true,
                                                        "autoHeight": false,
                                                        "background": {
                                                            "color": "transparent"
                                                        },
                                                        "enableHint": false,
                                                        "description": "",
                                                        "enableDescription": false
                                                    }
                                                ],
                                                "hideTitle": true
                                            },
                                            "type": "widget",
                                            "namespace": "default"
                                        },
                                        {
                                            "id": "RDP",
                                            "data": {
                                                "tabs": [
                                                    {
                                                        "id": "D3W",
                                                        "hint": "",
                                                        "title": "Общие продажи и тренды - KPI. Количество заказов (День)",
                                                        "params": {},
                                                        "chartId": "24",
                                                        "isDefault": true,
                                                        "autoHeight": false,
                                                        "background": {
                                                            "color": "transparent"
                                                        },
                                                        "enableHint": false,
                                                        "description": "",
                                                        "enableDescription": false
                                                    }
                                                ],
                                                "hideTitle": true
                                            },
                                            "type": "widget",
                                            "namespace": "default"
                                        },
                                        {
                                            "id": "6VL",
                                            "data": {
                                                "tabs": [
                                                    {
                                                        "id": "rVW",
                                                        "hint": "",
                                                        "title": "Общие продажи и тренды - KPI. Количество заказов  (День) среднее",
                                                        "params": {},
                                                        "chartId": "23",
                                                        "isDefault": true,
                                                        "autoHeight": false,
                                                        "background": {
                                                            "color": "transparent"
                                                        },
                                                        "enableHint": false,
                                                        "description": "",
                                                        "enableDescription": false
                                                    }
                                                ],
                                                "hideTitle": true
                                            },
                                            "type": "widget",
                                            "namespace": "default"
                                        },
                                        {
                                            "id": "wY6",
                                            "data": {
                                                "tabs": [
                                                    {
                                                        "id": "a3k",
                                                        "hint": "",
                                                        "title": "Общие продажи и тренды - KPI. Средний чек (Месяц)",
                                                        "params": {},
                                                        "chartId": "25",
                                                        "isDefault": true,
                                                        "autoHeight": false,
                                                        "background": {
                                                            "color": "transparent"
                                                        },
                                                        "enableHint": false,
                                                        "description": "",
                                                        "enableDescription": false
                                                    }
                                                ],
                                                "hideTitle": true
                                            },
                                            "type": "widget",
                                            "namespace": "default"
                                        },
                                        {
                                            "id": "vP0",
                                            "data": {
                                                "tabs": [
                                                    {
                                                        "id": "XBg",
                                                        "hint": "",
                                                        "title": "Общие продажи и тренды - KPI. Средний чек (Неделя)",
                                                        "params": {},
                                                        "chartId": "26",
                                                        "isDefault": true,
                                                        "autoHeight": false,
                                                        "background": {
                                                            "color": "transparent"
                                                        },
                                                        "enableHint": false,
                                                        "description": "",
                                                        "enableDescription": false
                                                    }
                                                ],
                                                "hideTitle": true
                                            },
                                            "type": "widget",
                                            "namespace": "default"
                                        },
                                        {
                                            "id": "PX0",
                                            "data": {
                                                "tabs": [
                                                    {
                                                        "id": "JNg",
                                                        "hint": "",
                                                        "title": "Общие продажи и тренды - KPI. Средний чек (День)",
                                                        "params": {},
                                                        "chartId": "27",
                                                        "isDefault": true,
                                                        "autoHeight": false,
                                                        "background": {
                                                            "color": "transparent"
                                                        },
                                                        "enableHint": false,
                                                        "description": "",
                                                        "enableDescription": false
                                                    }
                                                ],
                                                "hideTitle": true
                                            },
                                            "type": "widget",
                                            "namespace": "default"
                                        },
                                        {
                                            "id": "KDJ",
                                            "data": {
                                                "tabs": [
                                                    {
                                                        "id": "0lk",
                                                        "hint": "",
                                                        "title": "Общие продажи и тренды - KPI.  Средний чек (День) среднее",
                                                        "params": {},
                                                        "chartId": "28",
                                                        "isDefault": true,
                                                        "autoHeight": false,
                                                        "background": {
                                                            "color": "transparent"
                                                        },
                                                        "enableHint": false,
                                                        "description": "",
                                                        "enableDescription": false
                                                    }
                                                ],
                                                "hideTitle": true
                                            },
                                            "type": "widget",
                                            "namespace": "default"
                                        },
                                        {
                                            "id": "Zvl",
                                            "data": {
                                                "tabs": [
                                                    {
                                                        "id": "n1L",
                                                        "hint": "",
                                                        "title": "Общие продажи и тренды - KPI. Средний чек покупателя (Месяц)",
                                                        "params": {},
                                                        "chartId": "29",
                                                        "isDefault": true,
                                                        "autoHeight": false,
                                                        "background": {
                                                            "color": "transparent"
                                                        },
                                                        "enableHint": false,
                                                        "description": "",
                                                        "enableDescription": false
                                                    }
                                                ],
                                                "hideTitle": true
                                            },
                                            "type": "widget",
                                            "namespace": "default"
                                        },
                                        {
                                            "id": "gW2",
                                            "data": {
                                                "tabs": [
                                                    {
                                                        "id": "bD0",
                                                        "hint": "",
                                                        "title": "Общие продажи и тренды - KPI. Средний чек покупателя (Неделя)",
                                                        "params": {},
                                                        "chartId": "30",
                                                        "isDefault": true,
                                                        "autoHeight": false,
                                                        "background": {
                                                            "color": "transparent"
                                                        },
                                                        "enableHint": false,
                                                        "description": "",
                                                        "enableDescription": false
                                                    }
                                                ],
                                                "hideTitle": true
                                            },
                                            "type": "widget",
                                            "namespace": "default"
                                        },
                                        {
                                            "id": "qQv",
                                            "data": {
                                                "tabs": [
                                                    {
                                                        "id": "9wg",
                                                        "hint": "",
                                                        "title": "Общие продажи и тренды - KPI. Средний чек покупателя (День)",
                                                        "params": {},
                                                        "chartId": "31",
                                                        "isDefault": true,
                                                        "autoHeight": false,
                                                        "background": {
                                                            "color": "transparent"
                                                        },
                                                        "enableHint": false,
                                                        "description": "",
                                                        "enableDescription": false
                                                    }
                                                ],
                                                "hideTitle": true
                                            },
                                            "type": "widget",
                                            "namespace": "default"
                                        },
                                        {
                                            "id": "pV4",
                                            "data": {
                                                "tabs": [
                                                    {
                                                        "id": "Qlq",
                                                        "hint": "",
                                                        "title": "Общие продажи и тренды - KPI.  Средний чек покупателя (День) среднее",
                                                        "params": {},
                                                        "chartId": "32",
                                                        "isDefault": true,
                                                        "autoHeight": false,
                                                        "background": {
                                                            "color": "transparent"
                                                        },
                                                        "enableHint": false,
                                                        "description": "",
                                                        "enableDescription": false
                                                    }
                                                ],
                                                "hideTitle": true
                                            },
                                            "type": "widget",
                                            "namespace": "default"
                                        },
                                        {
                                            "id": "lqR",
                                            "data": {
                                                "tabs": [
                                                    {
                                                        "id": "VN4",
                                                        "hint": "",
                                                        "title": "Общие продажи и тренды - KPI. Количество товаров (Месяц)",
                                                        "params": {},
                                                        "chartId": "33",
                                                        "isDefault": true,
                                                        "autoHeight": false,
                                                        "background": {
                                                            "color": "transparent"
                                                        },
                                                        "enableHint": false,
                                                        "description": "",
                                                        "enableDescription": false
                                                    }
                                                ],
                                                "hideTitle": true
                                            },
                                            "type": "widget",
                                            "namespace": "default"
                                        },
                                        {
                                            "id": "N6M",
                                            "data": {
                                                "tabs": [
                                                    {
                                                        "id": "436",
                                                        "hint": "",
                                                        "title": "Общие продажи и тренды - KPI. Количество товара (Неделя)",
                                                        "params": {},
                                                        "chartId": "53",
                                                        "isDefault": true,
                                                        "autoHeight": false,
                                                        "background": {
                                                            "color": "transparent"
                                                        },
                                                        "enableHint": false,
                                                        "description": "",
                                                        "enableDescription": false
                                                    }
                                                ],
                                                "hideTitle": true
                                            },
                                            "type": "widget",
                                            "namespace": "default"
                                        },
                                        {
                                            "id": "dj0",
                                            "data": {
                                                "tabs": [
                                                    {
                                                        "id": "e5d",
                                                        "hint": "",
                                                        "title": "Общие продажи и тренды - KPI. Количество товара (День)",
                                                        "params": {},
                                                        "chartId": "35",
                                                        "isDefault": true,
                                                        "autoHeight": false,
                                                        "background": {
                                                            "color": "transparent"
                                                        },
                                                        "enableHint": false,
                                                        "description": "",
                                                        "enableDescription": false
                                                    }
                                                ],
                                                "hideTitle": true
                                            },
                                            "type": "widget",
                                            "namespace": "default"
                                        },
                                        {
                                            "id": "yZe",
                                            "data": {
                                                "tabs": [
                                                    {
                                                        "id": "myZ",
                                                        "hint": "",
                                                        "title": "Общие продажи и тренды - KPI.  Количество товара (День) среднее",
                                                        "params": {},
                                                        "chartId": "34",
                                                        "isDefault": true,
                                                        "autoHeight": false,
                                                        "background": {
                                                            "color": "transparent"
                                                        },
                                                        "enableHint": false,
                                                        "description": "",
                                                        "enableDescription": false
                                                    }
                                                ],
                                                "hideTitle": true
                                            },
                                            "type": "widget",
                                            "namespace": "default"
                                        }
                                    ],
                                    "title": "Общие продажи и тренды",
                                    "layout": [
                                        {
                                            "h": 6,
                                            "i": "8n",
                                            "w": 6,
                                            "x": 0,
                                            "y": 0
                                        },
                                        {
                                            "h": 2,
                                            "i": "Ov",
                                            "w": 7,
                                            "x": 9,
                                            "y": 0,
                                            "parent": "__fixHead"
                                        },
                                        {
                                            "h": 6,
                                            "i": "BR",
                                            "w": 6,
                                            "x": 0,
                                            "y": 12
                                        },
                                        {
                                            "h": 6,
                                            "i": "3n",
                                            "w": 6,
                                            "x": 0,
                                            "y": 6
                                        },
                                        {
                                            "h": 6,
                                            "i": "MV",
                                            "w": 6,
                                            "x": 0,
                                            "y": 24
                                        },
                                        {
                                            "h": 6,
                                            "i": "2k",
                                            "w": 6,
                                            "x": 6,
                                            "y": 0
                                        },
                                        {
                                            "h": 6,
                                            "i": "RP",
                                            "w": 6,
                                            "x": 6,
                                            "y": 6
                                        },
                                        {
                                            "h": 6,
                                            "i": "6L",
                                            "w": 6,
                                            "x": 6,
                                            "y": 12
                                        },
                                        {
                                            "h": 6,
                                            "i": "w6",
                                            "w": 6,
                                            "x": 6,
                                            "y": 24
                                        },
                                        {
                                            "h": 6,
                                            "i": "46",
                                            "w": 6,
                                            "x": 0,
                                            "y": 18
                                        },
                                        {
                                            "h": 4,
                                            "i": "NM",
                                            "w": 36,
                                            "x": 0,
                                            "y": 2,
                                            "parent": "__fixGCont"
                                        },
                                        {
                                            "h": 6,
                                            "i": "d0",
                                            "w": 6,
                                            "x": 6,
                                            "y": 18
                                        },
                                        {
                                            "h": 2,
                                            "i": "kN2",
                                            "w": 5,
                                            "x": 0,
                                            "y": 0,
                                            "parent": "__fixHead"
                                        },
                                        {
                                            "h": 2,
                                            "i": "jBR",
                                            "w": 4,
                                            "x": 5,
                                            "y": 0,
                                            "parent": "__fixHead"
                                        },
                                        {
                                            "h": 6,
                                            "i": "8pn",
                                            "w": 6,
                                            "x": 12,
                                            "y": 0
                                        },
                                        {
                                            "h": 6,
                                            "i": "OXv",
                                            "w": 6,
                                            "x": 18,
                                            "y": 0
                                        },
                                        {
                                            "h": 6,
                                            "i": "BeR",
                                            "w": 6,
                                            "x": 24,
                                            "y": 0
                                        },
                                        {
                                            "h": 6,
                                            "i": "3Jn",
                                            "w": 6,
                                            "x": 30,
                                            "y": 0
                                        },
                                        {
                                            "h": 6,
                                            "i": "MNV",
                                            "w": 6,
                                            "x": 12,
                                            "y": 6
                                        },
                                        {
                                            "h": 6,
                                            "i": "21k",
                                            "w": 6,
                                            "x": 18,
                                            "y": 6
                                        },
                                        {
                                            "h": 6,
                                            "i": "RDP",
                                            "w": 6,
                                            "x": 24,
                                            "y": 6
                                        },
                                        {
                                            "h": 6,
                                            "i": "6VL",
                                            "w": 6,
                                            "x": 30,
                                            "y": 6
                                        },
                                        {
                                            "h": 6,
                                            "i": "wY6",
                                            "w": 6,
                                            "x": 12,
                                            "y": 12
                                        },
                                        {
                                            "h": 6,
                                            "i": "vP0",
                                            "w": 6,
                                            "x": 18,
                                            "y": 12
                                        },
                                        {
                                            "h": 6,
                                            "i": "PX0",
                                            "w": 6,
                                            "x": 24,
                                            "y": 12
                                        },
                                        {
                                            "h": 6,
                                            "i": "KDJ",
                                            "w": 6,
                                            "x": 30,
                                            "y": 12
                                        },
                                        {
                                            "h": 6,
                                            "i": "Zvl",
                                            "w": 6,
                                            "x": 12,
                                            "y": 18
                                        },
                                        {
                                            "h": 6,
                                            "i": "gW2",
                                            "w": 6,
                                            "x": 18,
                                            "y": 18
                                        },
                                        {
                                            "h": 6,
                                            "i": "qQv",
                                            "w": 6,
                                            "x": 24,
                                            "y": 18
                                        },
                                        {
                                            "h": 6,
                                            "i": "pV4",
                                            "w": 6,
                                            "x": 30,
                                            "y": 18
                                        },
                                        {
                                            "h": 6,
                                            "i": "lqR",
                                            "w": 6,
                                            "x": 12,
                                            "y": 24
                                        },
                                        {
                                            "h": 6,
                                            "i": "N6M",
                                            "w": 6,
                                            "x": 18,
                                            "y": 24
                                        },
                                        {
                                            "h": 6,
                                            "i": "dj0",
                                            "w": 6,
                                            "x": 24,
                                            "y": 24
                                        },
                                        {
                                            "h": 6,
                                            "i": "yZe",
                                            "w": 6,
                                            "x": 30,
                                            "y": 24
                                        }
                                    ],
                                    "aliases": {},
                                    "connections": [
                                        {
                                            "to": "Ww",
                                            "from": "zR",
                                            "kind": "ignore"
                                        },
                                        {
                                            "to": "zR",
                                            "from": "Ww",
                                            "kind": "ignore"
                                        },
                                        {
                                            "to": "Ww",
                                            "from": "LO",
                                            "kind": "ignore"
                                        },
                                        {
                                            "to": "LO",
                                            "from": "Ww",
                                            "kind": "ignore"
                                        },
                                        {
                                            "to": "Ww",
                                            "from": "oZ",
                                            "kind": "ignore"
                                        },
                                        {
                                            "to": "oZ",
                                            "from": "Ww",
                                            "kind": "ignore"
                                        },
                                        {
                                            "to": "Ww",
                                            "from": "5V",
                                            "kind": "ignore"
                                        },
                                        {
                                            "to": "5V",
                                            "from": "Ww",
                                            "kind": "ignore"
                                        },
                                        {
                                            "to": "Ww",
                                            "from": "lR",
                                            "kind": "ignore"
                                        },
                                        {
                                            "to": "lR",
                                            "from": "Ww",
                                            "kind": "ignore"
                                        },
                                        {
                                            "to": "Ww",
                                            "from": "zZR",
                                            "kind": "ignore"
                                        },
                                        {
                                            "to": "zZR",
                                            "from": "Ww",
                                            "kind": "ignore"
                                        },
                                        {
                                            "to": "Ww",
                                            "from": "WAw",
                                            "kind": "ignore"
                                        },
                                        {
                                            "to": "WAw",
                                            "from": "Ww",
                                            "kind": "ignore"
                                        },
                                        {
                                            "to": "436",
                                            "from": "Ww",
                                            "kind": "ignore"
                                        },
                                        {
                                            "to": "Ww",
                                            "from": "436",
                                            "kind": "ignore"
                                        },
                                        {
                                            "to": "Ww",
                                            "from": "rVW",
                                            "kind": "ignore"
                                        },
                                        {
                                            "to": "rVW",
                                            "from": "Ww",
                                            "kind": "ignore"
                                        },
                                        {
                                            "to": "Ww",
                                            "from": "Qlq",
                                            "kind": "ignore"
                                        },
                                        {
                                            "to": "Qlq",
                                            "from": "Ww",
                                            "kind": "ignore"
                                        },
                                        {
                                            "to": "Ww",
                                            "from": "0lk",
                                            "kind": "ignore"
                                        },
                                        {
                                            "to": "0lk",
                                            "from": "Ww",
                                            "kind": "ignore"
                                        },
                                        {
                                            "to": "Ww",
                                            "from": "myZ",
                                            "kind": "ignore"
                                        },
                                        {
                                            "to": "myZ",
                                            "from": "Ww",
                                            "kind": "ignore"
                                        },
                                        {
                                            "to": "Ww",
                                            "from": "D3W",
                                            "kind": "ignore"
                                        },
                                        {
                                            "to": "D3W",
                                            "from": "Ww",
                                            "kind": "ignore"
                                        },
                                        {
                                            "to": "Ww",
                                            "from": "54V",
                                            "kind": "ignore"
                                        },
                                        {
                                            "to": "54V",
                                            "from": "Ww",
                                            "kind": "ignore"
                                        },
                                        {
                                            "to": "Ww",
                                            "from": "Yp9",
                                            "kind": "ignore"
                                        },
                                        {
                                            "to": "Yp9",
                                            "from": "Ww",
                                            "kind": "ignore"
                                        },
                                        {
                                            "to": "Ww",
                                            "from": "e5d",
                                            "kind": "ignore"
                                        },
                                        {
                                            "to": "e5d",
                                            "from": "Ww",
                                            "kind": "ignore"
                                        },
                                        {
                                            "to": "Ww",
                                            "from": "VN4",
                                            "kind": "ignore"
                                        },
                                        {
                                            "to": "VN4",
                                            "from": "Ww",
                                            "kind": "ignore"
                                        },
                                        {
                                            "to": "Ww",
                                            "from": "L6O",
                                            "kind": "ignore"
                                        },
                                        {
                                            "to": "L6O",
                                            "from": "Ww",
                                            "kind": "ignore"
                                        },
                                        {
                                            "to": "Ww",
                                            "from": "orZ",
                                            "kind": "ignore"
                                        },
                                        {
                                            "to": "orZ",
                                            "from": "Ww",
                                            "kind": "ignore"
                                        },
                                        {
                                            "to": "Ww",
                                            "from": "JNg",
                                            "kind": "ignore"
                                        },
                                        {
                                            "to": "JNg",
                                            "from": "Ww",
                                            "kind": "ignore"
                                        },
                                        {
                                            "to": "Ww",
                                            "from": "a3k",
                                            "kind": "ignore"
                                        },
                                        {
                                            "to": "a3k",
                                            "from": "Ww",
                                            "kind": "ignore"
                                        },
                                        {
                                            "to": "Ww",
                                            "from": "XBg",
                                            "kind": "ignore"
                                        },
                                        {
                                            "to": "XBg",
                                            "from": "Ww",
                                            "kind": "ignore"
                                        },
                                        {
                                            "to": "Ww",
                                            "from": "9wg",
                                            "kind": "ignore"
                                        },
                                        {
                                            "to": "9wg",
                                            "from": "Ww",
                                            "kind": "ignore"
                                        },
                                        {
                                            "to": "Ww",
                                            "from": "n1L",
                                            "kind": "ignore"
                                        },
                                        {
                                            "to": "n1L",
                                            "from": "Ww",
                                            "kind": "ignore"
                                        },
                                        {
                                            "to": "Ww",
                                            "from": "bD0",
                                            "kind": "ignore"
                                        },
                                        {
                                            "to": "bD0",
                                            "from": "Ww",
                                            "kind": "ignore"
                                        }
                                    ]
                                },
                                {
                                    "id": "1y",
                                    "items": [
                                        {
                                            "id": "kr2",
                                            "data": {
                                                "group": [
                                                    {
                                                        "id": "1yy",
                                                        "title": "Период от",
                                                        "width": "",
                                                        "source": {
                                                            "required": true,
                                                            "showHint": false,
                                                            "fieldName": "start_date",
                                                            "showTitle": true,
                                                            "accentType": null,
                                                            "elementType": "date",
                                                            "defaultValue": "__relative_-3M",
                                                            "titlePlacement": "left"
                                                        },
                                                        "defaults": {
                                                            "start_date": "__relative_-3M"
                                                        },
                                                        "namespace": "default",
                                                        "sourceType": "manual",
                                                        "placementMode": "auto"
                                                    }
                                                ],
                                                "autoHeight": false,
                                                "buttonApply": false,
                                                "buttonReset": false,
                                                "showGroupName": false,
                                                "updateControlsOnChange": false
                                            },
                                            "type": "group_control",
                                            "namespace": "default"
                                        },
                                        {
                                            "id": "j6R",
                                            "data": {
                                                "group": [
                                                    {
                                                        "id": "A2z",
                                                        "title": "до",
                                                        "width": "",
                                                        "source": {
                                                            "required": true,
                                                            "showHint": false,
                                                            "fieldName": "end_date",
                                                            "showTitle": true,
                                                            "accentType": null,
                                                            "elementType": "date",
                                                            "defaultValue": "__relative_-1d",
                                                            "titlePlacement": "left"
                                                        },
                                                        "defaults": {
                                                            "end_date": "__relative_-1d"
                                                        },
                                                        "namespace": "default",
                                                        "sourceType": "manual",
                                                        "placementMode": "auto"
                                                    }
                                                ],
                                                "autoHeight": false,
                                                "buttonApply": false,
                                                "buttonReset": false,
                                                "showGroupName": false,
                                                "updateControlsOnChange": false
                                            },
                                            "type": "group_control",
                                            "namespace": "default"
                                        },
                                        {
                                            "id": "ODv",
                                            "data": {
                                                "tabs": [
                                                    {
                                                        "id": "W8w",
                                                        "hint": "Количество уникальных покупателей за выбранный период",
                                                        "title": "Количество покупателей",
                                                        "params": {},
                                                        "chartId": "37",
                                                        "isDefault": true,
                                                        "autoHeight": false,
                                                        "background": {
                                                            "color": "transparent"
                                                        },
                                                        "enableHint": true,
                                                        "description": "",
                                                        "enableDescription": false
                                                    }
                                                ],
                                                "hideTitle": false
                                            },
                                            "type": "widget",
                                            "namespace": "default"
                                        },
                                        {
                                            "id": "BnR",
                                            "data": {
                                                "tabs": [
                                                    {
                                                        "id": "LNO",
                                                        "hint": "Количество новых покупателей в данном периоде",
                                                        "title": "Количество новых покупателей",
                                                        "params": {},
                                                        "chartId": "38",
                                                        "isDefault": true,
                                                        "autoHeight": false,
                                                        "background": {
                                                            "color": "transparent"
                                                        },
                                                        "enableHint": true,
                                                        "description": "",
                                                        "enableDescription": false
                                                    }
                                                ],
                                                "hideTitle": false
                                            },
                                            "type": "widget",
                                            "namespace": "default"
                                        },
                                        {
                                            "id": "A2W",
                                            "data": {
                                                "text": "#### **Цель вкладки:**\n\nПонять портрет и поведение клиентской базы. Ответить на вопросы \"Кто наши клиенты?\" и \"Насколько они лояльны?\"\n\nВ списках Топ покупателей по количеству заказов и по сумме затрат можно  менять количество значений с помощью соответствующего селектора.\n\n*Особенность таблицы RFM-анализа в том, что она формируется \"на лету\" по SQL-запросу к БД, учитывая параметры ПЕРИОДА. То есть выдаёт актуальный результат на заданный период в дашборде.*\n\n*Когортный анализ формируется \"на лету\" по SQL-запросу, учитывая параметры ПЕРИОДА. **Сам анализ строит помесячные когорты, так как покупки сами по себе дорогие и нечастые. Показывает % уникальных клиентов от первого периода.***\n\n*LTV также* *формируется \"на лету\" по SQL-запросу, учитывая параметры ПЕРИОДА. **Сам анализ строит помесячные когорты, так как покупки сами по себе дорогие и нечастые. Показывает среднюю выручку на уникального клиента.***\n\n***Настроена пагинация таблицы по 100 строк, чтобы чарт отображался быстрее.***",
                                                "autoHeight": true,
                                                "background": {
                                                    "color": "transparent",
                                                    "enabled": false
                                                }
                                            },
                                            "type": "text",
                                            "namespace": "default"
                                        },
                                        {
                                            "id": "zVW",
                                            "data": {
                                                "tabs": [
                                                    {
                                                        "id": "j6w",
                                                        "hint": "Количество покупателей, которые раньше совершали покупки",
                                                        "title": "Количество повторных покупателей",
                                                        "params": {},
                                                        "chartId": "39",
                                                        "isDefault": true,
                                                        "autoHeight": false,
                                                        "background": {
                                                            "color": "transparent"
                                                        },
                                                        "enableHint": true,
                                                        "description": "",
                                                        "enableDescription": false
                                                    }
                                                ],
                                                "hideTitle": false
                                            },
                                            "type": "widget",
                                            "namespace": "default"
                                        },
                                        {
                                            "id": "W86",
                                            "data": {
                                                "group": [
                                                    {
                                                        "id": "831",
                                                        "title": "Топ покупателей по количеству заказов",
                                                        "width": "",
                                                        "source": {
                                                            "required": true,
                                                            "showHint": false,
                                                            "fieldName": "top_sales",
                                                            "showTitle": true,
                                                            "accentType": null,
                                                            "elementType": "input",
                                                            "defaultValue": "20",
                                                            "titlePlacement": "top"
                                                        },
                                                        "defaults": {
                                                            "top_sales": "20"
                                                        },
                                                        "namespace": "default",
                                                        "sourceType": "manual",
                                                        "placementMode": "auto"
                                                    }
                                                ],
                                                "autoHeight": false,
                                                "buttonApply": false,
                                                "buttonReset": false,
                                                "showGroupName": false,
                                                "updateControlsOnChange": false
                                            },
                                            "type": "group_control",
                                            "namespace": "default"
                                        },
                                        {
                                            "id": "LNA",
                                            "data": {
                                                "tabs": [
                                                    {
                                                        "id": "OD5",
                                                        "hint": "",
                                                        "title": "Анализ клиентов - Таблица. Топ покупателей по покупкам",
                                                        "params": {},
                                                        "chartId": "40",
                                                        "isDefault": true,
                                                        "autoHeight": false,
                                                        "background": {
                                                            "color": "transparent"
                                                        },
                                                        "enableHint": false,
                                                        "description": "",
                                                        "enableDescription": false
                                                    }
                                                ],
                                                "hideTitle": true
                                            },
                                            "type": "widget",
                                            "namespace": "default"
                                        },
                                        {
                                            "id": "oky",
                                            "data": {
                                                "group": [
                                                    {
                                                        "id": "Bn5",
                                                        "title": "Топ покупателей по сумме затрат",
                                                        "width": "",
                                                        "source": {
                                                            "required": true,
                                                            "showHint": false,
                                                            "fieldName": "top_expenses",
                                                            "showTitle": true,
                                                            "accentType": null,
                                                            "elementType": "input",
                                                            "defaultValue": "20",
                                                            "titlePlacement": "top"
                                                        },
                                                        "defaults": {
                                                            "top_expenses": "20"
                                                        },
                                                        "namespace": "default",
                                                        "sourceType": "manual",
                                                        "placementMode": "auto"
                                                    }
                                                ],
                                                "autoHeight": false,
                                                "buttonApply": false,
                                                "buttonReset": false,
                                                "showGroupName": false,
                                                "updateControlsOnChange": false
                                            },
                                            "type": "group_control",
                                            "namespace": "default"
                                        },
                                        {
                                            "id": "5jg",
                                            "data": {
                                                "tabs": [
                                                    {
                                                        "id": "3km",
                                                        "hint": "",
                                                        "title": "Топ покупателей по затратам",
                                                        "params": {},
                                                        "chartId": "41",
                                                        "isDefault": true,
                                                        "autoHeight": false,
                                                        "background": {
                                                            "color": "transparent"
                                                        },
                                                        "enableHint": false,
                                                        "description": "",
                                                        "enableDescription": false
                                                    }
                                                ],
                                                "hideTitle": true
                                            },
                                            "type": "widget",
                                            "namespace": "default"
                                        },
                                        {
                                            "id": "DK0",
                                            "data": {
                                                "tabs": [
                                                    {
                                                        "id": "2By",
                                                        "hint": "",
                                                        "title": "Распределение покупателей по полу",
                                                        "params": {},
                                                        "chartId": "43",
                                                        "isDefault": true,
                                                        "autoHeight": false,
                                                        "background": {
                                                            "color": "transparent"
                                                        },
                                                        "enableHint": false,
                                                        "description": "",
                                                        "enableDescription": false
                                                    }
                                                ],
                                                "hideTitle": false
                                            },
                                            "type": "widget",
                                            "namespace": "default"
                                        },
                                        {
                                            "id": "rDo",
                                            "data": {
                                                "tabs": [
                                                    {
                                                        "id": "Rw9",
                                                        "hint": "**Когортный анализ** — это метод, который позволяет оценить поведение реальных и потенциальных клиентов бренда в динамике. ",
                                                        "title": "Когортный анализ покупателей",
                                                        "params": {},
                                                        "chartId": "45",
                                                        "isDefault": true,
                                                        "autoHeight": true,
                                                        "background": {
                                                            "color": "transparent"
                                                        },
                                                        "enableHint": true,
                                                        "description": "Показывает % уникальных клиентов от первого периода",
                                                        "enableDescription": true
                                                    }
                                                ],
                                                "hideTitle": false
                                            },
                                            "type": "widget",
                                            "namespace": "default"
                                        },
                                        {
                                            "id": "aVj",
                                            "data": {
                                                "tabs": [
                                                    {
                                                        "id": "6Rq",
                                                        "hint": "Общая сумма выручки за период",
                                                        "title": "Сумма выручки",
                                                        "params": {},
                                                        "chartId": "7",
                                                        "isDefault": true,
                                                        "autoHeight": false,
                                                        "background": {
                                                            "color": "transparent"
                                                        },
                                                        "enableHint": true,
                                                        "description": "",
                                                        "enableDescription": false
                                                    }
                                                ],
                                                "hideTitle": false
                                            },
                                            "type": "widget",
                                            "namespace": "default"
                                        },
                                        {
                                            "id": "Xpz",
                                            "data": {
                                                "tabs": [
                                                    {
                                                        "id": "wrZ",
                                                        "hint": "Средний чек на уникального покупателя",
                                                        "title": "Средний чек покупателя",
                                                        "params": {},
                                                        "chartId": "14",
                                                        "isDefault": true,
                                                        "autoHeight": false,
                                                        "background": {
                                                            "color": "transparent"
                                                        },
                                                        "enableHint": true,
                                                        "description": "",
                                                        "enableDescription": false
                                                    }
                                                ],
                                                "hideTitle": false
                                            },
                                            "type": "widget",
                                            "namespace": "default"
                                        },
                                        {
                                            "id": "JJ4",
                                            "data": {
                                                "tabs": [
                                                    {
                                                        "id": "vg4",
                                                        "hint": "",
                                                        "title": "Количество заказов",
                                                        "params": {},
                                                        "chartId": "12",
                                                        "isDefault": true,
                                                        "autoHeight": false,
                                                        "background": {
                                                            "color": "transparent"
                                                        },
                                                        "enableHint": false,
                                                        "description": "",
                                                        "enableDescription": false
                                                    }
                                                ],
                                                "hideTitle": false
                                            },
                                            "type": "widget",
                                            "namespace": "default"
                                        },
                                        {
                                            "id": "2ay",
                                            "data": {
                                                "tabs": [
                                                    {
                                                        "id": "YoY",
                                                        "hint": "* **Группа 333**: недавние, частые, принесли много денег (можно сказать VIP)\n\n  * *Рекомендации*: удержание, персонализация, премиальные предложения\n\n* **Группа 213/223:** недавние, мало покупок, но принесли много денег (Очень вероятные VIP)\n\n  * *Рекомендации: удержание, персонализация, премиальные предложения*\n\n* **Группа 113/123:** давние, мало покупок, но принесли много денег (Возможно, потерянные VIP)\n\n  * *Рекомендации: посмотреть (если есть возможность) предыдущий период, персонализация, премиальные предложения*\n\n* **Группа 111**: давно не покупали, редко, дешёвые\n\n  * *Рекомендации*: реанимационные кампании, опросы\n\n* **Группы 233/332/222**: есть признаки активности и ценности\n\n  * *Рекомендации*: стимулировать повтор, бонусы за лояльность\n\n* **Группы 133/313/231**: редкие, но принесли много денег\n\n  * *Рекомендации*: эксклюзивные предложения, персональные обращения",
                                                        "title": "RMF-анализ",
                                                        "params": {},
                                                        "chartId": "1",
                                                        "isDefault": true,
                                                        "autoHeight": false,
                                                        "background": {
                                                            "color": "transparent"
                                                        },
                                                        "enableHint": true,
                                                        "description": "",
                                                        "enableDescription": false
                                                    }
                                                ],
                                                "hideTitle": false
                                            },
                                            "type": "widget",
                                            "namespace": "default"
                                        },
                                        {
                                            "id": "R19",
                                            "data": {
                                                "tabs": [
                                                    {
                                                        "id": "DJ0",
                                                        "hint": "* **Группа 333**: недавние, частые, принесли много денег (можно сказать VIP)\n\n  * *Рекомендации*: удержание, персонализация, премиальные предложения\n\n* **Группа 213/223:** недавние, мало покупок, но принесли много денег (Очень вероятные VIP)\n\n  * *Рекомендации: удержание, персонализация, премиальные предложения*\n\n* **Группа 113/123:** давние, мало покупок, но принесли много денег (Возможно, потерянные VIP)\n\n  * *Рекомендации: посмотреть (если есть возможность) предыдущий период, персонализация, премиальные предложения*\n\n* **Группа 111**: давно не покупали, редко, дешёвые\n\n  * *Рекомендации*: реанимационные кампании, опросы\n\n* **Группы 233/332/222**: есть признаки активности и ценности\n\n  * *Рекомендации*: стимулировать повтор, бонусы за лояльность\n\n* **Группы 133/313/231**: редкие, но принесли много денег\n\n  * *Рекомендации*: эксклюзивные предложения, персональные обращения",
                                                        "title": "Распределение клиентов по RFM-сегментам",
                                                        "params": {},
                                                        "chartId": "4",
                                                        "isDefault": true,
                                                        "autoHeight": false,
                                                        "background": {
                                                            "color": "transparent"
                                                        },
                                                        "enableHint": true,
                                                        "description": "",
                                                        "enableDescription": false
                                                    }
                                                ],
                                                "hideTitle": false
                                            },
                                            "type": "widget",
                                            "namespace": "default"
                                        },
                                        {
                                            "id": "6Mq",
                                            "data": {
                                                "tabs": [
                                                    {
                                                        "id": "r9o",
                                                        "hint": "**LTV** (*LifeTime Value*) - это прогноз общей ценности, которую клиент принесет бизнесу в течение своей жизни в продукте.",
                                                        "title": "LTV по когортам",
                                                        "params": {},
                                                        "chartId": "3",
                                                        "isDefault": true,
                                                        "autoHeight": true,
                                                        "background": {
                                                            "color": "transparent"
                                                        },
                                                        "enableHint": true,
                                                        "description": "Показывает среднюю выручку на уникального клиента",
                                                        "enableDescription": true
                                                    }
                                                ],
                                                "hideTitle": false
                                            },
                                            "type": "widget",
                                            "namespace": "default"
                                        }
                                    ],
                                    "title": "Анализ клиентов",
                                    "layout": [
                                        {
                                            "h": 6,
                                            "i": "ODv",
                                            "w": 6,
                                            "x": 0,
                                            "y": 0
                                        },
                                        {
                                            "h": 6,
                                            "i": "BnR",
                                            "w": 6,
                                            "x": 0,
                                            "y": 6
                                        },
                                        {
                                            "h": 2,
                                            "i": "kr2",
                                            "w": 5,
                                            "x": 0,
                                            "y": 0,
                                            "parent": "__fixHead"
                                        },
                                        {
                                            "h": 2,
                                            "i": "j6R",
                                            "w": 4,
                                            "x": 5,
                                            "y": 0,
                                            "parent": "__fixHead"
                                        },
                                        {
                                            "h": 4,
                                            "i": "A2W",
                                            "w": 36,
                                            "x": 0,
                                            "y": 0,
                                            "parent": "__fixGCont"
                                        },
                                        {
                                            "h": 6,
                                            "i": "zVW",
                                            "w": 6,
                                            "x": 0,
                                            "y": 12
                                        },
                                        {
                                            "h": 3,
                                            "i": "W86",
                                            "w": 7,
                                            "x": 22,
                                            "y": 0
                                        },
                                        {
                                            "h": 15,
                                            "i": "LNA",
                                            "w": 7,
                                            "x": 22,
                                            "y": 3
                                        },
                                        {
                                            "h": 3,
                                            "i": "oky",
                                            "w": 7,
                                            "x": 29,
                                            "y": 0
                                        },
                                        {
                                            "h": 15,
                                            "i": "5jg",
                                            "w": 7,
                                            "x": 29,
                                            "y": 3
                                        },
                                        {
                                            "h": 18,
                                            "i": "DK0",
                                            "w": 10,
                                            "x": 12,
                                            "y": 0
                                        },
                                        {
                                            "h": 22,
                                            "i": "rDo",
                                            "w": 36,
                                            "x": 0,
                                            "y": 38
                                        },
                                        {
                                            "h": 6,
                                            "i": "aVj",
                                            "w": 6,
                                            "x": 6,
                                            "y": 0
                                        },
                                        {
                                            "h": 6,
                                            "i": "Xpz",
                                            "w": 6,
                                            "x": 6,
                                            "y": 6
                                        },
                                        {
                                            "h": 6,
                                            "i": "JJ4",
                                            "w": 6,
                                            "x": 6,
                                            "y": 12
                                        },
                                        {
                                            "h": 20,
                                            "i": "2ay",
                                            "w": 18,
                                            "x": 18,
                                            "y": 18
                                        },
                                        {
                                            "h": 20,
                                            "i": "R19",
                                            "w": 18,
                                            "x": 0,
                                            "y": 18
                                        },
                                        {
                                            "h": 20,
                                            "i": "6Mq",
                                            "w": 36,
                                            "x": 0,
                                            "y": 57
                                        }
                                    ],
                                    "aliases": {},
                                    "connections": []
                                },
                                {
                                    "id": "k2",
                                    "items": [
                                        {
                                            "id": "0m2",
                                            "data": {
                                                "group": [
                                                    {
                                                        "id": "Prn",
                                                        "title": "Период от",
                                                        "width": "",
                                                        "source": {
                                                            "required": true,
                                                            "showHint": false,
                                                            "fieldName": "start_date",
                                                            "showTitle": true,
                                                            "accentType": null,
                                                            "elementType": "date",
                                                            "defaultValue": "__relative_-3M",
                                                            "titlePlacement": "left"
                                                        },
                                                        "defaults": {
                                                            "start_date": "__relative_-3M"
                                                        },
                                                        "namespace": "default",
                                                        "sourceType": "manual",
                                                        "placementMode": "auto"
                                                    }
                                                ],
                                                "autoHeight": false,
                                                "buttonApply": false,
                                                "buttonReset": false,
                                                "showGroupName": false,
                                                "updateControlsOnChange": false
                                            },
                                            "type": "group_control",
                                            "namespace": "default"
                                        },
                                        {
                                            "id": "nrl",
                                            "data": {
                                                "group": [
                                                    {
                                                        "id": "KZo",
                                                        "title": "до",
                                                        "width": "",
                                                        "source": {
                                                            "required": true,
                                                            "showHint": false,
                                                            "fieldName": "end_date",
                                                            "showTitle": true,
                                                            "accentType": null,
                                                            "elementType": "date",
                                                            "defaultValue": "__relative_-1d",
                                                            "titlePlacement": "left"
                                                        },
                                                        "defaults": {
                                                            "end_date": "__relative_-1d"
                                                        },
                                                        "namespace": "default",
                                                        "sourceType": "manual",
                                                        "placementMode": "auto"
                                                    }
                                                ],
                                                "autoHeight": false,
                                                "buttonApply": false,
                                                "buttonReset": false,
                                                "showGroupName": false,
                                                "updateControlsOnChange": false
                                            },
                                            "type": "group_control",
                                            "namespace": "default"
                                        },
                                        {
                                            "id": "g3W",
                                            "data": {
                                                "text": "#### **Цель вкладки:**\n\nОценить эффективность товарного ассортимента. Ответить на вопросы \"Какие товары продаются хорошо?\", \"На каких товарах мы больше всего зарабатываем?\" и \"Какие товары неликвидны?\".\n\nВ списках Топ и Антитоп можно менять количество значений с помощью соответствующего селектора.\n\n*Особенность таблицы ABC/XYZ-анализа в том, что она формируется \"на лету\" по SQL-запросу к БД, учитывая параметры ПЕРИОДА и МАСШТАБА. То есть выдаёт актуальный результат на заданный период в дашборде.*\n\n***Настроена пагинация таблицы по 100 строк, чтобы чарт отображался быстрее.***",
                                                "autoHeight": true,
                                                "background": {
                                                    "color": "transparent",
                                                    "enabled": false
                                                }
                                            },
                                            "type": "text",
                                            "namespace": "default"
                                        },
                                        {
                                            "id": "qDD",
                                            "data": {
                                                "tabs": [
                                                    {
                                                        "id": "9aV",
                                                        "hint": "Количество уникальных товаров за выбранный период",
                                                        "title": "Ассортимент товаров за период",
                                                        "params": {},
                                                        "chartId": "54",
                                                        "isDefault": true,
                                                        "autoHeight": false,
                                                        "background": {
                                                            "color": "transparent"
                                                        },
                                                        "enableHint": true,
                                                        "description": "",
                                                        "enableDescription": false
                                                    }
                                                ],
                                                "hideTitle": false
                                            },
                                            "type": "widget",
                                            "namespace": "default"
                                        },
                                        {
                                            "id": "pqe",
                                            "data": {
                                                "tabs": [
                                                    {
                                                        "id": "Qyn",
                                                        "hint": "Общая сумма предоставленных скидок",
                                                        "title": "Сумма предоставленных скидок",
                                                        "params": {},
                                                        "chartId": "46",
                                                        "isDefault": true,
                                                        "autoHeight": false,
                                                        "background": {
                                                            "color": "transparent"
                                                        },
                                                        "enableHint": true,
                                                        "description": "",
                                                        "enableDescription": false
                                                    }
                                                ],
                                                "hideTitle": false
                                            },
                                            "type": "widget",
                                            "namespace": "default"
                                        },
                                        {
                                            "id": "lNP",
                                            "data": {
                                                "tabs": [
                                                    {
                                                        "id": "VVD",
                                                        "hint": "##SUM(\\[quantity\\] \\* (\\[price\\_per\\_item\\] - \\[discount\\_per\\_item\\]))##",
                                                        "title": "Товарооборот",
                                                        "params": {},
                                                        "chartId": "47",
                                                        "isDefault": true,
                                                        "autoHeight": false,
                                                        "background": {
                                                            "color": "transparent"
                                                        },
                                                        "enableHint": true,
                                                        "description": "",
                                                        "enableDescription": false
                                                    }
                                                ],
                                                "hideTitle": false
                                            },
                                            "type": "widget",
                                            "namespace": "default"
                                        },
                                        {
                                            "id": "NnJ",
                                            "data": {
                                                "group": [
                                                    {
                                                        "id": "4aO",
                                                        "title": "Топ покупателей по покупкам",
                                                        "width": "",
                                                        "source": {
                                                            "required": true,
                                                            "showHint": false,
                                                            "fieldName": "top_sales",
                                                            "showTitle": true,
                                                            "accentType": null,
                                                            "elementType": "input",
                                                            "defaultValue": "20",
                                                            "titlePlacement": "top"
                                                        },
                                                        "defaults": {
                                                            "top_sales": "20"
                                                        },
                                                        "namespace": "default",
                                                        "sourceType": "manual",
                                                        "placementMode": "auto"
                                                    }
                                                ],
                                                "autoHeight": false,
                                                "buttonApply": false,
                                                "buttonReset": false,
                                                "showGroupName": false,
                                                "updateControlsOnChange": false
                                            },
                                            "type": "group_control",
                                            "namespace": "default"
                                        },
                                        {
                                            "id": "dML",
                                            "data": {
                                                "group": [
                                                    {
                                                        "id": "eBA",
                                                        "title": "Топ покупателей по сумме продаж",
                                                        "width": "",
                                                        "source": {
                                                            "required": true,
                                                            "showHint": false,
                                                            "fieldName": "top_expenses",
                                                            "showTitle": true,
                                                            "accentType": null,
                                                            "elementType": "input",
                                                            "defaultValue": "20",
                                                            "titlePlacement": "top"
                                                        },
                                                        "defaults": {
                                                            "top_expenses": "20"
                                                        },
                                                        "namespace": "default",
                                                        "sourceType": "manual",
                                                        "placementMode": "auto"
                                                    }
                                                ],
                                                "autoHeight": false,
                                                "buttonApply": false,
                                                "buttonReset": false,
                                                "showGroupName": false,
                                                "updateControlsOnChange": false
                                            },
                                            "type": "group_control",
                                            "namespace": "default"
                                        },
                                        {
                                            "id": "ydQ",
                                            "data": {
                                                "tabs": [
                                                    {
                                                        "id": "mQD",
                                                        "hint": "",
                                                        "title": "Топ товаров по покупкам",
                                                        "params": {},
                                                        "chartId": "48",
                                                        "isDefault": true,
                                                        "autoHeight": false,
                                                        "background": {
                                                            "color": "transparent"
                                                        },
                                                        "enableHint": false,
                                                        "description": "",
                                                        "enableDescription": false
                                                    }
                                                ],
                                                "hideTitle": false
                                            },
                                            "type": "widget",
                                            "namespace": "default"
                                        },
                                        {
                                            "id": "k2V",
                                            "data": {
                                                "tabs": [
                                                    {
                                                        "id": "1z9",
                                                        "hint": "",
                                                        "title": "Топ товаров по сумме продаж",
                                                        "params": {},
                                                        "chartId": "52",
                                                        "isDefault": true,
                                                        "autoHeight": false,
                                                        "background": {
                                                            "color": "transparent"
                                                        },
                                                        "enableHint": false,
                                                        "description": "",
                                                        "enableDescription": false
                                                    }
                                                ],
                                                "hideTitle": false
                                            },
                                            "type": "widget",
                                            "namespace": "default"
                                        },
                                        {
                                            "id": "jNw",
                                            "data": {
                                                "tabs": [
                                                    {
                                                        "id": "ALW",
                                                        "hint": "",
                                                        "title": "Антитоп товаров по покупкам",
                                                        "params": {},
                                                        "chartId": "50",
                                                        "isDefault": true,
                                                        "autoHeight": false,
                                                        "background": {
                                                            "color": "transparent"
                                                        },
                                                        "enableHint": false,
                                                        "description": "",
                                                        "enableDescription": false
                                                    }
                                                ],
                                                "hideTitle": false
                                            },
                                            "type": "widget",
                                            "namespace": "default"
                                        },
                                        {
                                            "id": "8W1",
                                            "data": {
                                                "tabs": [
                                                    {
                                                        "id": "z5W",
                                                        "hint": "",
                                                        "title": "Антитоп товаров по сумме продаж",
                                                        "params": {},
                                                        "chartId": "49",
                                                        "isDefault": true,
                                                        "autoHeight": false,
                                                        "background": {
                                                            "color": "transparent"
                                                        },
                                                        "enableHint": false,
                                                        "description": "",
                                                        "enableDescription": false
                                                    }
                                                ],
                                                "hideTitle": false
                                            },
                                            "type": "widget",
                                            "namespace": "default"
                                        },
                                        {
                                            "id": "OZ5",
                                            "data": {
                                                "tabs": [
                                                    {
                                                        "id": "Wa6",
                                                        "hint": "**ABC/XYZ-анализ** — это кросс-метод, который объединяет два вида анализа: **ABC** и **XYZ**. Он позволяет разделить объекты исследования (товары, поставщиков, покупателей) на группы по их важности для бизнеса (ABC) и стабильности спроса или потребления (XYZ).",
                                                        "title": "ABC/XYZ-анализ",
                                                        "params": {},
                                                        "chartId": "55",
                                                        "isDefault": true,
                                                        "autoHeight": false,
                                                        "background": {
                                                            "color": "transparent"
                                                        },
                                                        "enableHint": true,
                                                        "description": "",
                                                        "enableDescription": false
                                                    }
                                                ],
                                                "hideTitle": false
                                            },
                                            "type": "widget",
                                            "namespace": "default"
                                        },
                                        {
                                            "id": "Bv5",
                                            "data": {
                                                "tabs": [
                                                    {
                                                        "id": "LXA",
                                                        "hint": "##SUM(\\[quantity\\]) / COUNTD(\\[product\\_id\\])##",
                                                        "title": "Среднее кол-во продаж на товар",
                                                        "params": {},
                                                        "chartId": "56",
                                                        "isDefault": true,
                                                        "autoHeight": false,
                                                        "background": {
                                                            "color": "transparent"
                                                        },
                                                        "enableHint": true,
                                                        "description": "",
                                                        "enableDescription": false
                                                    }
                                                ],
                                                "hideTitle": false
                                            },
                                            "type": "widget",
                                            "namespace": "default"
                                        },
                                        {
                                            "id": "3wm",
                                            "data": {
                                                "tabs": [
                                                    {
                                                        "id": "oXy",
                                                        "hint": "##COUNTD(\\[client\\_id\\]) / COUNTD(\\[product\\_id\\])##",
                                                        "title": "Среднее кол-во покупателей на товар",
                                                        "params": {},
                                                        "chartId": "57",
                                                        "isDefault": true,
                                                        "autoHeight": false,
                                                        "background": {
                                                            "color": "transparent"
                                                        },
                                                        "enableHint": true,
                                                        "description": "",
                                                        "enableDescription": false
                                                    }
                                                ],
                                                "hideTitle": false
                                            },
                                            "type": "widget",
                                            "namespace": "default"
                                        },
                                        {
                                            "id": "MaK",
                                            "data": {
                                                "group": [
                                                    {
                                                        "id": "5ng",
                                                        "title": "Масштаб для ABC/XYZ анализа",
                                                        "width": "",
                                                        "source": {
                                                            "required": false,
                                                            "showHint": false,
                                                            "fieldName": "scale_xyz",
                                                            "showTitle": true,
                                                            "accentType": null,
                                                            "elementType": "select",
                                                            "defaultValue": [
                                                                "month"
                                                            ],
                                                            "titlePlacement": "left",
                                                            "acceptableValues": [
                                                                {
                                                                    "title": "day",
                                                                    "value": "day"
                                                                },
                                                                {
                                                                    "title": "week",
                                                                    "value": "week"
                                                                },
                                                                {
                                                                    "title": "month",
                                                                    "value": "month"
                                                                },
                                                                {
                                                                    "title": "quarter",
                                                                    "value": "quarter"
                                                                },
                                                                {
                                                                    "title": "year",
                                                                    "value": "year"
                                                                }
                                                            ]
                                                        },
                                                        "defaults": {
                                                            "scale_xyz": [
                                                                "month"
                                                            ]
                                                        },
                                                        "namespace": "default",
                                                        "sourceType": "manual",
                                                        "placementMode": "auto"
                                                    }
                                                ],
                                                "autoHeight": false,
                                                "buttonApply": false,
                                                "buttonReset": false,
                                                "showGroupName": false,
                                                "updateControlsOnChange": false
                                            },
                                            "type": "group_control",
                                            "namespace": "default"
                                        }
                                    ],
                                    "title": "Анализ товаров",
                                    "layout": [
                                        {
                                            "h": 2,
                                            "i": "0m2",
                                            "w": 5,
                                            "x": 0,
                                            "y": 0,
                                            "parent": "__fixHead"
                                        },
                                        {
                                            "h": 2,
                                            "i": "nrl",
                                            "w": 4,
                                            "x": 5,
                                            "y": 0,
                                            "parent": "__fixHead"
                                        },
                                        {
                                            "h": 5,
                                            "i": "g3W",
                                            "w": 36,
                                            "x": 0,
                                            "y": 0,
                                            "parent": "__fixGCont"
                                        },
                                        {
                                            "h": 6,
                                            "i": "qDD",
                                            "w": 8,
                                            "x": 0,
                                            "y": 0
                                        },
                                        {
                                            "h": 6,
                                            "i": "pqe",
                                            "w": 8,
                                            "x": 0,
                                            "y": 24
                                        },
                                        {
                                            "h": 6,
                                            "i": "lNP",
                                            "w": 8,
                                            "x": 0,
                                            "y": 18
                                        },
                                        {
                                            "h": 3,
                                            "i": "NnJ",
                                            "w": 14,
                                            "x": 22,
                                            "y": 0
                                        },
                                        {
                                            "h": 3,
                                            "i": "dML",
                                            "w": 14,
                                            "x": 8,
                                            "y": 0
                                        },
                                        {
                                            "h": 27,
                                            "i": "ydQ",
                                            "w": 7,
                                            "x": 22,
                                            "y": 3
                                        },
                                        {
                                            "h": 27,
                                            "i": "k2V",
                                            "w": 7,
                                            "x": 8,
                                            "y": 3
                                        },
                                        {
                                            "h": 27,
                                            "i": "jNw",
                                            "w": 7,
                                            "x": 29,
                                            "y": 3
                                        },
                                        {
                                            "h": 27,
                                            "i": "8W1",
                                            "w": 7,
                                            "x": 15,
                                            "y": 3
                                        },
                                        {
                                            "h": 22,
                                            "i": "OZ5",
                                            "w": 36,
                                            "x": 0,
                                            "y": 30
                                        },
                                        {
                                            "h": 6,
                                            "i": "Bv5",
                                            "w": 8,
                                            "x": 0,
                                            "y": 6
                                        },
                                        {
                                            "h": 6,
                                            "i": "3wm",
                                            "w": 8,
                                            "x": 0,
                                            "y": 12
                                        },
                                        {
                                            "h": 2,
                                            "i": "MaK",
                                            "w": 10,
                                            "x": 9,
                                            "y": 0,
                                            "parent": "__fixHead"
                                        }
                                    ],
                                    "aliases": {},
                                    "connections": [
                                        {
                                            "to": "eBA",
                                            "from": "Wa6",
                                            "kind": "ignore"
                                        },
                                        {
                                            "to": "Wa6",
                                            "from": "eBA",
                                            "kind": "ignore"
                                        },
                                        {
                                            "to": "eBA",
                                            "from": "VVD",
                                            "kind": "ignore"
                                        },
                                        {
                                            "to": "VVD",
                                            "from": "eBA",
                                            "kind": "ignore"
                                        },
                                        {
                                            "to": "eBA",
                                            "from": "Qyn",
                                            "kind": "ignore"
                                        },
                                        {
                                            "to": "Qyn",
                                            "from": "eBA",
                                            "kind": "ignore"
                                        },
                                        {
                                            "to": "eBA",
                                            "from": "9aV",
                                            "kind": "ignore"
                                        },
                                        {
                                            "to": "9aV",
                                            "from": "eBA",
                                            "kind": "ignore"
                                        },
                                        {
                                            "to": "eBA",
                                            "from": "mQD",
                                            "kind": "ignore"
                                        },
                                        {
                                            "to": "mQD",
                                            "from": "eBA",
                                            "kind": "ignore"
                                        },
                                        {
                                            "to": "eBA",
                                            "from": "ALW",
                                            "kind": "ignore"
                                        },
                                        {
                                            "to": "ALW",
                                            "from": "eBA",
                                            "kind": "ignore"
                                        },
                                        {
                                            "to": "4aO",
                                            "from": "z5W",
                                            "kind": "ignore"
                                        },
                                        {
                                            "to": "z5W",
                                            "from": "4aO",
                                            "kind": "ignore"
                                        },
                                        {
                                            "to": "4aO",
                                            "from": "1z9",
                                            "kind": "ignore"
                                        },
                                        {
                                            "to": "1z9",
                                            "from": "4aO",
                                            "kind": "ignore"
                                        },
                                        {
                                            "to": "4aO",
                                            "from": "9aV",
                                            "kind": "ignore"
                                        },
                                        {
                                            "to": "9aV",
                                            "from": "4aO",
                                            "kind": "ignore"
                                        },
                                        {
                                            "to": "4aO",
                                            "from": "Qyn",
                                            "kind": "ignore"
                                        },
                                        {
                                            "to": "Qyn",
                                            "from": "4aO",
                                            "kind": "ignore"
                                        },
                                        {
                                            "to": "4aO",
                                            "from": "VVD",
                                            "kind": "ignore"
                                        },
                                        {
                                            "to": "VVD",
                                            "from": "4aO",
                                            "kind": "ignore"
                                        },
                                        {
                                            "to": "4aO",
                                            "from": "Wa6",
                                            "kind": "ignore"
                                        },
                                        {
                                            "to": "Wa6",
                                            "from": "4aO",
                                            "kind": "ignore"
                                        },
                                        {
                                            "to": "VVD",
                                            "from": "KZo",
                                            "kind": "ignore"
                                        },
                                        {
                                            "to": "VVD",
                                            "from": "Prn",
                                            "kind": "ignore"
                                        }
                                    ]
                                }
                            ],
                            "counter": 165,
                            "settings": {
                                "hideTabs": false,
                                "expandTOC": false,
                                "globalParams": {},
                                "loadPriority": "charts",
                                "hideDashTitle": false,
                                "silentLoading": false,
                                "autoupdateInterval": null,
                                "dependentSelectors": true,
                                "loadOnlyVisibleCharts": true,
                                "maxConcurrentRequests": 3
                            },
                            "schemeVersion": 8,
                            "accessDescription": "",
                            "supportDescription": ""
                        },
                        "name": "Анализ продаж маркетплейса",
                        "annotation": {
                            "description": ""
                        }
                    }
                }
            },
            "connection": {
                "5": {
                    "connection": {
                        "host": "62.113.105.120",
                        "name": "PostgreSQL",
                        "port": 5432,
                        "db_name": "postgres",
                        "db_type": "postgres",
                        "password": "******",
                        "username": "user_ro",
                        "ssl_enable": "off",
                        "description": "",
                        "workbook_id": "muxyhc1eujf27",
                        "cache_ttl_sec": 86400,
                        "mdb_folder_id": null,
                        "raw_sql_level": "template",
                        "mdb_cluster_id": null,
                        "enforce_collate": "auto",
                        "data_export_forbidden": "on",
                        "connection_manager_cloud_id": null,
                        "connection_manager_folder_id": null,
                        "connection_manager_connection_id": null,
                        "connection_manager_delegation_is_set": null
                    }
                }
            }
        }
    },
    "hash": "d202da3e351b8bed41db7d52a47adae7fc9c1142579fc075a7131962e35472c7"
}